(function(config) {
    let base_url = window.location.origin + window.location.pathname
    const base_path = window.location.pathname
    const baseIp = base_url.replace(/^https?:\/\//, '')
    const _tileUrl = `${base_url}/amap/jsapi/2.0.1`;
    const mapsplugin = `${base_url}/amap/jsapi/mapsplugin.js`
    const init = `${base_url}/amap/jsapi/init.js`
    console.log(baseIp, 'baseIp')

    !function(global, factory) {
        "object" == typeof exports && "undefined" != typeof module ? module.exports = factory() : "function" == typeof define && define.amd ? define(factory) : (global = global || self).AMap = factory()
    }(this, function() {
        "use strict";
        var shared, worker, AMap;
        function define(_, chunk) {
            var sharedChunk, workerBundleString;
            shared ? worker ? (workerBundleString = 'var sharedChunk = {key:"' + config[0] + '",db:"' + (config[14] || "") + '",nebulaVersion:"' + (config[15] || "") + '",movingDraw:' + Boolean(window.movingDraw) + ',host:"' + config[2] + '",}; (' + shared + ")(sharedChunk); (" + worker + ")(sharedChunk);",
            sharedChunk = {
                key: config[0],
                movingDraw: window.movingDraw
            },
            shared(sharedChunk),
            sharedChunk = chunk(sharedChunk),
            workerBundleString = "undefined" != typeof URL ? window.URL.createObjectURL(new Blob([workerBundleString],{
                type: "text/javascript"
            })) : "",
            (AMap = sharedChunk(config)).getConfig().workerUrl = workerBundleString) : worker = chunk : shared = chunk
        }
        define(["exports"], function(exports) {
            var extend = function(t) {
                for (var r, n, i = Array.prototype.slice.call(arguments, 1), a = 0, o = i.length; a < o; a += 1)
                    for (var s in r = i[a] || {})
                        r.hasOwnProperty(s) && ("function" == typeof (n = r[s]) && t.prototype ? t.prototype[s] = n : t[s] = n);
                return t
            };
            function isBrowser() {
                return "undefined" != typeof window && "undefined" != typeof document
            }
            function isWasmSuppport() {
                try {
                    if ("object" == typeof WebAssembly && "function" == typeof WebAssembly.instantiate && TextDecoder && TextEncoder) {
                        var t = new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0]));
                        if (t instanceof WebAssembly.Module)
                            return new WebAssembly.Instance(t)instanceof WebAssembly.Instance
                    }
                } catch (e) {}
                return !1
            }
            var testWepP = function(t) {
                var e = new Image;
                e.src = "data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",
                e.onload = e.onerror = function() {
                    t(2 === e.height)
                }
            };
            function isWorkerEnv() {
                try {
                    return document,
                    !1
                } catch (t) {
                    return !0
                }
            }
            function getSupport(t) {
                var o, e = {
                    runSupport: (new Date).getTime()
                }, E = isWasmSuppport(), r = navigator.userAgent.toLowerCase(), U = !0, i = (n = function(t) {
                    return -1 !== r.indexOf(t)
                }
                )("macintosh"), j = n("ipad;") || n("ipad "), a = n("ipod touch;"), a = (o = n("iphone;") || n("iphone ")) || j || a, u = (i || a) && n("safari") && n("version/"), s = n("macwechat"), f = n("windowswechat"), R = o || n("Alipay") || n("alipay"), D = {
                    touch: !1,
                    mac: i,
                    Ue: !1,
                    webkit: !1,
                    $e: !1,
                    scale: 1,
                    android: !1,
                    DW: isWorkerEnv(),
                    wasm: E,
                    safari: u,
                    AQ: s,
                    o6t: R,
                    gQ: f,
                    amapRunTime: e
                };
                if (isBrowser()) {
                    var c = window
                      , f = (s = document).documentElement
                      , h = /([a-z0-9]*\d+[a-z0-9]*)/
                      , B = "google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";")
                      , l = "ActiveXObject"in c
                      , d = 0 != window.detectRetina && ("devicePixelRatio"in c && 1 < c.devicePixelRatio || l && "matchMedia"in c && c.matchMedia("(min-resolution:144dpi)") && c.matchMedia("(min-resolution:144dpi)").matches)
                      , G = n("windows nt")
                      , v = (r.search(/windows nt [1-5]\./),
                    r.search(/windows nt 5\.[12]/),
                    n("windows nt 10"),
                    n("windows phone"))
                      , V = n("Mb2345Browser")
                      , z = (a && r.search(/ os [456]_/),
                    a && r.search(/ os [4-8]_/),
                    a && r.search(/ os [78]_/),
                    a && n("os 8_"),
                    a && n("os 10_"))
                      , g = n("android")
                      , y = 0
                      , H = (g && (y = parseInt(r.split("android")[1]) || 0),
                    g && y < 4)
                      , p = (g && 5 <= y || r.search(/android 4.4/),
                    g ? "android" : a ? "ios" : G ? "windows" : i ? "mac" : "other")
                      , y = l && !c.XMLHttpRequest
                      , W = l && !s.querySelector
                      , m = l && !s.addEventListener
                      , q = l && n("msie 9")
                      , Z = l && n("msie 10")
                      , K = l && n("rv:11")
                      , Y = m || q
                      , b = n("edge")
                      , w = (n("qtweb"),
                    n("ucbrowser"))
                      , X = n("alipay") || g && w
                      , J = (n("miuibrowser"),
                    n("micromessenger"))
                      , A = n("dingtalk")
                      , Q = n("mqqbrowser")
                      , tt = n("baidubrowser")
                      , T = n("crios/")
                      , S = n("chrome/")
                      , T = !((S || T) && n("chromium")) && (S && 30 < parseInt(r.split("chrome/")[1]) || T && 30 < parseInt(r.split("crios/")[1]))
                      , et = n("firefox")
                      , x = et && 27 < parseInt(r.split("firefox/")[1])
                      , M = u && 7 < parseInt(r.split("version/")[1])
                      , P = (a && n("aliapp"),
                    g || a || v || n("mobile"))
                      , v = "ontouchstart"in s
                      , rt = c.navigator && c.navigator.msPointerEnabled && !!c.navigator.msMaxTouchPoints
                      , nt = c.navigator && !!c.navigator.maxTouchPoints
                      , it = !v && (nt || rt)
                      , v = v || it
                      , I = function() {
                        if (!P)
                            return c.devicePixelRatio || 1;
                        var t = document.getElementsByTagName("meta");
                        if (window.parent && window.parent !== window)
                            try {
                                if (window.parent.location.origin !== window.location.origin)
                                    return 1;
                                t = window.parent.document.getElementsByTagName("meta")
                            } catch (o) {
                                return 1
                            }
                        for (var r, n, e, a = t.length - 1; 0 <= a; --a)
                            if ("viewport" === t[a].name)
                                return r = void 0,
                                -1 !== (e = t[a].content).indexOf("initial-scale") && (r = parseFloat(e.split("initial-scale=")[1])),
                                n = -1 !== e.indexOf("minimum-scale") ? parseFloat(e.split("minimum-scale=")[1]) : 0,
                                e = -1 !== e.indexOf("maximum-scale") ? parseFloat(e.split("maximum-scale=")[1]) : Infinity,
                                r ? n <= e ? e < r ? e : r < n ? n : r : (console && console.log && console.log("viewport参数不合法"),
                                null) : n <= e ? 1 <= n ? 1 : Math.min(e, 1) : (console && console.log && console.log("viewport参数不合法"),
                                null);
                        return undefined
                    }()
                      , at = d && (!P || !!I && 1 <= I)
                      , ot = l && "transition"in f.style
                      , st = !!s.createElementNS && !!s.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect
                      , $ = s.createElement("canvas")
                      , ut = !(!$ || !$.getContext)
                      , s = window.URL || window.webkitURL
                      , ft = !0 !== window.disableWorker && !l && !(w && g && !T) && window.Worker && s && s.createObjectURL && window.Blob
                      , k = ""
                      , L = ""
                      , C = 0
                      , s = 0 != window.higtQualityRender || !d
                      , ct = window.movingDraw
                      , N = {
                        alpha: !0,
                        antialias: s,
                        depth: !0,
                        stencil: !0
                    }
                      , _ = (s = function() {
                        if (ut && ft)
                            for (var t, r = ["webgl", "experimental-webgl", "moz-webgl"], n = null, i = 0; i < r.length; i += 1) {
                                try {
                                    n = $.getContext(r[i], N)
                                } catch (s) {}
                                if (n) {
                                    if (n.drawingBufferWidth !== $.width || n.drawingBufferHeight !== $.height)
                                        return !1;
                                    if (!n.getShaderPrecisionFormat || !n.getParameter || !n.getExtension)
                                        return !1;
                                    if (C = n.getParameter(n.MAX_RENDERBUFFER_SIZE),
                                    !(a = n.getParameter(n.MAX_VIEWPORT_DIMS)))
                                        return !1;
                                    C = Math.min(C, a[0], a[1]),
                                    u && "mac" == p && (C = Math.min(C, 4096));
                                    var a = Math.max(screen.width, screen.height);
                                    if (at && (a *= Math.min(2, window.devicePixelRatio || 1)),
                                    C < a)
                                        return !1;
                                    if (n.getShaderPrecisionFormat(35632, 36338).precision < 23 || n.getShaderPrecisionFormat(35633, 36338).precision < 23)
                                        return !1;
                                    var e = o = a = void 0
                                      , o = (t = L = n.getExtension("WEBGL_debug_renderer_info") ? n.getParameter(37446) : null) ? (a = null,
                                    0 <= (t = (t = (o = (t = t.toLowerCase()).match(/angle \((.*)\)/)) ? (t = o[1]).replace(/\s*direct3d.*$/, "") : t).replace(/\s*\([^\)]*wddm[^\)]*\)/, "")).indexOf("intel") ? (a = ["Intel"],
                                    0 <= t.indexOf("mobile") && a.push("Mobile"),
                                    (0 <= t.indexOf("gma") || 0 <= t.indexOf("graphics media accelerator")) && a.push("GMA"),
                                    0 <= t.indexOf("haswell") ? a.push("Haswell") : 0 <= t.indexOf("ivy") ? a.push("HD 4000") : 0 <= t.indexOf("sandy") ? a.push("HD 3000") : 0 <= t.indexOf("ironlake") ? a.push("HD") : (0 <= t.indexOf("hd") && a.push("HD"),
                                    (e = t.match(h)) && a.push(e[1].toUpperCase())),
                                    a.join(" ")) : 0 <= t.indexOf("nvidia") || 0 <= t.indexOf("quadro") || 0 <= t.indexOf("geforce") || 0 <= t.indexOf("nvs") ? (a = ["nVidia"],
                                    0 <= t.indexOf("geforce") && a.push("geForce"),
                                    0 <= t.indexOf("quadro") && a.push("Quadro"),
                                    0 <= t.indexOf("nvs") && a.push("NVS"),
                                    t.match(/\bion\b/) && a.push("ION"),
                                    t.match(/gtx\b/) ? a.push("GTX") : t.match(/gts\b/) ? a.push("GTS") : t.match(/gt\b/) ? a.push("GT") : t.match(/gs\b/) ? a.push("GS") : t.match(/ge\b/) ? a.push("GE") : t.match(/fx\b/) && a.push("FX"),
                                    (e = t.match(h)) && a.push(e[1].toUpperCase().replace("GS", "")),
                                    0 <= t.indexOf("titan") ? a.push("TITAN") : 0 <= t.indexOf("ti") && a.push("Ti"),
                                    a.join(" ")) : 0 <= t.indexOf("amd") || 0 <= t.indexOf("ati") || 0 <= t.indexOf("radeon") || 0 <= t.indexOf("firegl") || 0 <= t.indexOf("firepro") ? (a = ["AMD"],
                                    0 <= t.indexOf("mobil") && a.push("Mobility"),
                                    0 <= (o = t.indexOf("radeon")) && a.push("Radeon"),
                                    0 <= t.indexOf("firepro") ? a.push("FirePro") : 0 <= t.indexOf("firegl") && a.push("FireGL"),
                                    0 <= t.indexOf("hd") && a.push("HD"),
                                    (e = (t = 0 <= o ? t.substring(o) : t).match(h)) && a.push(e[1].toUpperCase().replace("HD", "")),
                                    a.join(" ")) : t.substring(0, 100)) : null;
                                    if (o) {
                                        if (-1 < o.indexOf("google swiftshader"))
                                            return U = !1;
                                        if (-1 !== B.indexOf(o))
                                            return !1
                                    }
                                    return k = r[i],
                                    !0
                                }
                            }
                        return !1
                    }
                    )()
                      , ht = t[8] === undefined || t[8]
                      , _ = window.Uint8Array && ht && !window.forbidenWebGL && _ && (window.forceWebGL || (T || x || M || b || J || A) && "other" != p)
                      , T = window.forceWebGLBaseRender || _ ? "w" : "d"
                      , x = n("webkit")
                      , M = "WebKitCSSMatrix"in c && "m11"in new window.WebKitCSSMatrix
                      , A = "MozPerspective"in f.style
                      , n = "vV"in f.style
                      , f = ot || M || A || n
                      , t = t[12] !== undefined ? t[12] : null
                      , F = !0;
                    try {
                        "undefined" == typeof c.localStorage ? F = !1 : (O = (new Date).getTime() + "",
                        c.localStorage.setItem("_test", O),
                        c.localStorage.getItem("_test") !== O && (F = !1),
                        c.localStorage.removeItem("_test"))
                    } catch (lt) {
                        F = !1
                    }
                    var O = parseInt(r.split("chrome/")[1])
                      , D = {
                        iPad: j,
                        iPhone: o,
                        size: o ? 100 : g ? 200 : 500,
                        mac: i,
                        windows: G,
                        ios: a,
                        uT: z,
                        android: g,
                        android23: H,
                        cT: X,
                        plat: p,
                        baidu: tt,
                        qq: Q,
                        safari: u,
                        wechat: J,
                        ie: l,
                        ie6: y,
                        ie7: W,
                        ie9: q,
                        ie10: Z,
                        ielt9: m,
                        fT: Y,
                        ie11: K,
                        edge: b,
                        hT: l && !K,
                        lT: V,
                        RL: F,
                        vT: t,
                        geolocation: P || l && !m || b,
                        SL: w,
                        uc: w && !S,
                        chrome: S,
                        gT: !0,
                        firefox: et,
                        hardwareAccEnabled: U,
                        $e: P,
                        mobileWebkit: P && x,
                        mobileWebkit3d: P && M,
                        mobileOpera: P && c.opera,
                        Ue: d,
                        bT: I,
                        Mr: at,
                        touch: v,
                        msPointer: rt,
                        pointer: nt,
                        yT: it,
                        pT: S && 57 <= O,
                        mT: !P && S && 64 <= O,
                        webkit: x,
                        ie3d: ot,
                        webkit3d: M,
                        gecko3d: A,
                        opera3d: n,
                        any3d: f,
                        isSvg: st,
                        isCanvas: ut,
                        isWorker: ft,
                        o6t: R,
                        TT: !1,
                        isWebGL: _,
                        AT: k,
                        xT: N,
                        ST: L,
                        wT: C,
                        MT: !1,
                        movingDraw: ct,
                        baseRender: ht ? T : "d",
                        scale: d ? 2 : 1,
                        getContext: function(t, e) {
                            var r = {};
                            return extend(r, N),
                            extend(r, e),
                            t.getContext(k, r)
                        },
                        mH: !1,
                        wasm: E,
                        amapRunTime: e,
                        sY: s
                    };
                    testWepP(function(t) {
                        D.mH = t
                    })
                }
                return D
            }
            var Browser = getSupport("undefined" == typeof config ? [] : config)
              , canceledWorkerFetch = ("undefined" != typeof createImageBitmap && "undefined" != typeof ImageBitmap && (Browser.imageBitmap = !0),
            Boolean(Browser.DW ? !Browser.safari && !Browser.AQ && !Browser.gQ && self.fetch && self.Request && self.AbortController && self.Request.prototype.hasOwnProperty("signal") : !Browser.safari && !Browser.AQ && !Browser.gQ && !Browser.o6t && window.fetch && window.Request && window.AbortController && window.Request.prototype.hasOwnProperty("signal")))
              , freeGlobal = (Browser.LZ = canceledWorkerFetch,
            Browser.amapRunTime = {
                workerTime: {},
                dataTime: {}
            },
            "object" == typeof global && global && global.Object === Object && global)
              , freeSelf = "object" == typeof self && self && self.Object === Object && self
              , root = freeGlobal || freeSelf || Function("return this")()
              , Symbol$1 = root.Symbol
              , objectProto = Object.prototype
              , hasOwnProperty = objectProto.hasOwnProperty
              , nativeObjectToString = objectProto.toString
              , symToStringTag = Symbol$1 ? Symbol$1.toStringTag : undefined;
            function getRawTag(t) {
                var e = hasOwnProperty.call(t, symToStringTag)
                  , r = t[symToStringTag];
                try {
                    t[symToStringTag] = undefined;
                    var n = !0
                } catch (a) {}
                var i = nativeObjectToString.call(t);
                return n && (e ? t[symToStringTag] = r : delete t[symToStringTag]),
                i
            }
            var objectProto$1 = Object.prototype
              , nativeObjectToString$1 = objectProto$1.toString;
            function objectToString(t) {
                return nativeObjectToString$1.call(t)
            }
            var nullTag = "[object Null]"
              , undefinedTag = "[object Undefined]"
              , symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : undefined;
            function baseGetTag(t) {
                return null == t ? t === undefined ? undefinedTag : nullTag : (symToStringTag$1 && symToStringTag$1 in Object(t) ? getRawTag : objectToString)(t)
            }
            function isObjectLike(t) {
                return null != t && "object" == typeof t
            }
            var symbolTag = "[object Symbol]";
            function isSymbol(t) {
                return "symbol" == typeof t || isObjectLike(t) && baseGetTag(t) == symbolTag
            }
            function arrayMap(t, e) {
                for (var r = -1, n = null == t ? 0 : t.length, i = Array(n); ++r < n; )
                    i[r] = e(t[r], r, t);
                return i
            }
            var isArray = Array.isArray
              , INFINITY = 1 / 0
              , symbolProto = Symbol$1 ? Symbol$1.prototype : undefined
              , symbolToString = symbolProto ? symbolProto.toString : undefined;
            function baseToString(t) {
                var e;
                return "string" == typeof t ? t : isArray(t) ? arrayMap(t, baseToString) + "" : isSymbol(t) ? symbolToString ? symbolToString.call(t) : "" : "0" == (e = t + "") && 1 / t == -INFINITY ? "-0" : e
            }
            var reWhitespace = /\s/;
            function trimmedEndIndex(t) {
                for (var e = t.length; e-- && reWhitespace.test(t.charAt(e)); )
                    ;
                return e
            }
            var reTrimStart = /^\s+/;
            function baseTrim(t) {
                return t && t.slice(0, trimmedEndIndex(t) + 1).replace(reTrimStart, "")
            }
            function isObject(t) {
                var e = typeof t;
                return null != t && ("object" == e || "function" == e)
            }
            var NAN = NaN
              , reIsBadHex = /^[-+]0x[0-9a-f]+$/i
              , reIsBinary = /^0b[01]+$/i
              , reIsOctal = /^0o[0-7]+$/i
              , freeParseInt = parseInt;
            function toNumber(t) {
                if ("number" == typeof t)
                    return t;
                if (isSymbol(t))
                    return NAN;
                if ("string" != typeof (t = isObject(t) ? isObject(e = "function" == typeof t.valueOf ? t.valueOf() : t) ? e + "" : e : t))
                    return 0 === t ? t : +t;
                t = baseTrim(t);
                var e = reIsBinary.test(t);
                return e || reIsOctal.test(t) ? freeParseInt(t.slice(2), e ? 2 : 8) : reIsBadHex.test(t) ? NAN : +t
            }
            var INFINITY$1 = 1 / 0
              , MAX_INTEGER = 17976931348623157e292;
            function toFinite(t) {
                return t ? (t = toNumber(t)) === INFINITY$1 || t === -INFINITY$1 ? (t < 0 ? -1 : 1) * MAX_INTEGER : t == t ? t : 0 : 0 === t ? t : 0
            }
            function toInteger(t) {
                var e = (t = toFinite(t)) % 1;
                return t == t ? e ? t - e : t : 0
            }
            function identity(t) {
                return t
            }
            var asyncTag = "[object AsyncFunction]"
              , funcTag = "[object Function]"
              , genTag = "[object GeneratorFunction]"
              , proxyTag = "[object Proxy]";
            function isFunction(t) {
                return !!isObject(t) && ((t = baseGetTag(t)) == funcTag || t == genTag || t == asyncTag || t == proxyTag)
            }
            var coreJsData = root["__core-js_shared__"]
              , maskSrcKey = function() {
                var t = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.Xb || "");
                return t ? "Symbol(src)_1." + t : ""
            }();
            function isMasked(t) {
                return maskSrcKey && maskSrcKey in t
            }
            var funcProto = Function.prototype
              , funcToString = funcProto.toString;
            function toSource(t) {
                if (null != t) {
                    try {
                        return funcToString.call(t)
                    } catch (e) {}
                    try {
                        return t + ""
                    } catch (e) {}
                }
                return ""
            }
            var reRegExpChar = /[\\^$.*+?()[\]{}|]/g
              , reIsHostCtor = /^\[object .+?Constructor\]$/
              , funcProto$1 = Function.prototype
              , objectProto$2 = Object.prototype
              , funcToString$1 = funcProto$1.toString
              , hasOwnProperty$1 = objectProto$2.hasOwnProperty
              , reIsNative = RegExp("^" + funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
            function baseIsNative(t) {
                return isObject(t) && !isMasked(t) && (isFunction(t) ? reIsNative : reIsHostCtor).test(toSource(t))
            }
            function getValue(t, e) {
                return null == t ? undefined : t[e]
            }
            function getNative(t, e) {
                return baseIsNative(t = getValue(t, e)) ? t : undefined
            }
            var WeakMap = getNative(root, "WeakMap")
              , objectCreate = Object.create
              , baseCreate = function() {
                function e() {}
                return function(t) {
                    return isObject(t) ? objectCreate ? objectCreate(t) : (e.prototype = t,
                    t = new e,
                    e.prototype = undefined,
                    t) : {}
                }
            }();
            function apply(t, e, r) {
                switch (r.length) {
                case 0:
                    return t.call(e);
                case 1:
                    return t.call(e, r[0]);
                case 2:
                    return t.call(e, r[0], r[1]);
                case 3:
                    return t.call(e, r[0], r[1], r[2])
                }
                return t.apply(e, r)
            }
            function copyArray(t, e) {
                var r = -1
                  , n = t.length;
                for (e = e || Array(n); ++r < n; )
                    e[r] = t[r];
                return e
            }
            var HOT_COUNT = 800
              , HOT_SPAN = 16
              , nativeNow = Date.now;
            function shortOut(r) {
                var n = 0
                  , i = 0;
                return function() {
                    var t = nativeNow()
                      , e = HOT_SPAN - (t - i);
                    if (i = t,
                    0 < e) {
                        if (++n >= HOT_COUNT)
                            return arguments[0]
                    } else
                        n = 0;
                    return r.apply(undefined, arguments)
                }
            }
            function constant(t) {
                return function() {
                    return t
                }
            }
            var defineProperty = function() {
                try {
                    var t = getNative(Object, "defineProperty");
                    return t({}, "", {}),
                    t
                } catch (e) {}
            }()
              , baseSetToString = defineProperty ? function(t, e) {
                return defineProperty(t, "toString", {
                    configurable: !0,
                    enumerable: !1,
                    value: constant(e),
                    writable: !0
                })
            }
            : identity
              , setToString = shortOut(baseSetToString);
            function arrayEach(t, e) {
                for (var r = -1, n = null == t ? 0 : t.length; ++r < n && !1 !== e(t[r], r, t); )
                    ;
                return t
            }
            function baseFindIndex(t, e, r, n) {
                for (var i = t.length, a = r + (n ? 1 : -1); n ? a-- : ++a < i; )
                    if (e(t[a], a, t))
                        return a;
                return -1
            }
            var MAX_SAFE_INTEGER = 9007199254740991
              , reIsUint = /^(?:0|[1-9]\d*)$/;
            function isIndex(t, e) {
                var r = typeof t;
                return !!(e = null == e ? MAX_SAFE_INTEGER : e) && ("number" == r || "symbol" != r && reIsUint.test(t)) && -1 < t && t % 1 == 0 && t < e
            }
            function baseAssignValue(t, e, r) {
                "__proto__" == e && defineProperty ? defineProperty(t, e, {
                    configurable: !0,
                    enumerable: !0,
                    value: r,
                    writable: !0
                }) : t[e] = r
            }
            function eq(t, e) {
                return t === e || t != t && e != e
            }
            var objectProto$3 = Object.prototype
              , hasOwnProperty$2 = objectProto$3.hasOwnProperty;
            function assignValue(t, e, r) {
                var n = t[e];
                hasOwnProperty$2.call(t, e) && eq(n, r) && (r !== undefined || e in t) || baseAssignValue(t, e, r)
            }
            function copyObject(t, e, r, n) {
                for (var i = !r, a = (r = r || {},
                -1), o = e.length; ++a < o; ) {
                    var s = e[a]
                      , u = n ? n(r[s], t[s], s, r, t) : undefined;
                    (i ? baseAssignValue : assignValue)(r, s, u === undefined ? t[s] : u)
                }
                return r
            }
            var nativeMax = Math.max;
            function overRest(a, o, s) {
                return o = nativeMax(o === undefined ? a.length - 1 : o, 0),
                function() {
                    for (var t = arguments, e = -1, r = nativeMax(t.length - o, 0), n = Array(r); ++e < r; )
                        n[e] = t[o + e];
                    for (var e = -1, i = Array(o + 1); ++e < o; )
                        i[e] = t[e];
                    return i[o] = s(n),
                    apply(a, this, i)
                }
            }
            function baseRest(t, e) {
                return setToString(overRest(t, e, identity), t + "")
            }
            var MAX_SAFE_INTEGER$1 = 9007199254740991;
            function isLength(t) {
                return "number" == typeof t && -1 < t && t % 1 == 0 && t <= MAX_SAFE_INTEGER$1
            }
            function isArrayLike(t) {
                return null != t && isLength(t.length) && !isFunction(t)
            }
            function isIterateeCall(t, e, r) {
                var n;
                return isObject(r) && ("number" == (n = typeof e) ? isArrayLike(r) && isIndex(e, r.length) : "string" == n && e in r) && eq(r[e], t)
            }
            function createAssigner(s) {
                return baseRest(function(t, e) {
                    var r = -1
                      , n = e.length
                      , i = 1 < n ? e[n - 1] : undefined
                      , a = 2 < n ? e[2] : undefined
                      , i = 3 < s.length && "function" == typeof i ? (n--,
                    i) : undefined;
                    for (a && isIterateeCall(e[0], e[1], a) && (i = n < 3 ? undefined : i,
                    n = 1),
                    t = Object(t); ++r < n; ) {
                        var o = e[r];
                        o && s(t, o, r, i)
                    }
                    return t
                })
            }
            var objectProto$4 = Object.prototype;
            function isPrototype(t) {
                var e = t && t.constructor;
                return t === ("function" == typeof e && e.prototype || objectProto$4)
            }
            function baseTimes(t, e) {
                for (var r = -1, n = Array(t); ++r < t; )
                    n[r] = e(r);
                return n
            }
            var argsTag = "[object Arguments]";
            function baseIsArguments(t) {
                return isObjectLike(t) && baseGetTag(t) == argsTag
            }
            var objectProto$5 = Object.prototype
              , hasOwnProperty$3 = objectProto$5.hasOwnProperty
              , propertyIsEnumerable = objectProto$5.propertyIsEnumerable
              , isArguments = baseIsArguments(function() {
                return arguments
            }()) ? baseIsArguments : function(t) {
                return isObjectLike(t) && hasOwnProperty$3.call(t, "callee") && !propertyIsEnumerable.call(t, "callee")
            }
            ;
            function stubFalse() {
                return !1
            }
            var freeExports = "object" == typeof exports && exports && !exports.nodeType && exports
              , freeModule = freeExports && "object" == typeof module && module && !module.nodeType && module
              , moduleExports = freeModule && freeModule.exports === freeExports
              , Buffer = moduleExports ? root.Zb : undefined
              , nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined
              , isBuffer = nativeIsBuffer || stubFalse
              , argsTag$1 = "[object Arguments]"
              , arrayTag = "[object Array]"
              , boolTag = "[object Boolean]"
              , dateTag = "[object Date]"
              , errorTag = "[object Error]"
              , funcTag$1 = "[object Function]"
              , mapTag = "[object Map]"
              , numberTag = "[object Number]"
              , objectTag = "[object Object]"
              , regexpTag = "[object RegExp]"
              , setTag = "[object Set]"
              , stringTag = "[object String]"
              , weakMapTag = "[object WeakMap]"
              , arrayBufferTag = "[object ArrayBuffer]"
              , dataViewTag = "[object DataView]"
              , float32Tag = "[object Float32Array]"
              , float64Tag = "[object Float64Array]"
              , int8Tag = "[object Int8Array]"
              , int16Tag = "[object Int16Array]"
              , int32Tag = "[object Int32Array]"
              , uint8Tag = "[object Uint8Array]"
              , uint8ClampedTag = "[object Uint8ClampedArray]"
              , uint16Tag = "[object Uint16Array]"
              , uint32Tag = "[object Uint32Array]"
              , typedArrayTags = {};
            function baseIsTypedArray(t) {
                return isObjectLike(t) && isLength(t.length) && !!typedArrayTags[baseGetTag(t)]
            }
            function baseUnary(e) {
                return function(t) {
                    return e(t)
                }
            }
            typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = !0,
            typedArrayTags[argsTag$1] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag$1] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = !1;
            var freeExports$1 = "object" == typeof exports && exports && !exports.nodeType && exports
              , freeModule$1 = freeExports$1 && "object" == typeof module && module && !module.nodeType && module
              , moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1
              , freeProcess = moduleExports$1 && freeGlobal.process
              , nodeUtil = function() {
                try {
                    var t = freeModule$1 && freeModule$1.Qb && freeModule$1.Qb("util").types;
                    return t || freeProcess && freeProcess.tg && freeProcess.tg("util")
                } catch (e) {}
            }()
              , nodeIsTypedArray = nodeUtil && nodeUtil.rg
              , isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray
              , objectProto$6 = Object.prototype
              , hasOwnProperty$4 = objectProto$6.hasOwnProperty;
            function arrayLikeKeys(t, e) {
                var r, n = isArray(t), i = !n && isArguments(t), a = !n && !i && isBuffer(t), o = !n && !i && !a && isTypedArray(t), s = n || i || a || o, u = s ? baseTimes(t.length, String) : [], f = u.length;
                for (r in t)
                    !e && !hasOwnProperty$4.call(t, r) || s && ("length" == r || a && ("offset" == r || "parent" == r) || o && ("buffer" == r || "byteLength" == r || "byteOffset" == r) || isIndex(r, f)) || u.push(r);
                return u
            }
            function overArg(e, r) {
                return function(t) {
                    return e(r(t))
                }
            }
            var nativeKeys = overArg(Object.keys, Object)
              , objectProto$7 = Object.prototype
              , hasOwnProperty$5 = objectProto$7.hasOwnProperty;
            function baseKeys(t) {
                if (!isPrototype(t))
                    return nativeKeys(t);
                var e, r = [];
                for (e in Object(t))
                    hasOwnProperty$5.call(t, e) && "constructor" != e && r.push(e);
                return r
            }
            function keys(t) {
                return (isArrayLike(t) ? arrayLikeKeys : baseKeys)(t)
            }
            var objectProto$8 = Object.prototype
              , hasOwnProperty$6 = objectProto$8.hasOwnProperty
              , assign = createAssigner(function(t, e) {
                if (isPrototype(e) || isArrayLike(e))
                    copyObject(e, keys(e), t);
                else
                    for (var r in e)
                        hasOwnProperty$6.call(e, r) && assignValue(t, r, e[r])
            });
            function nativeKeysIn(t) {
                var e = [];
                if (null != t)
                    for (var r in Object(t))
                        e.push(r);
                return e
            }
            var objectProto$9 = Object.prototype
              , hasOwnProperty$7 = objectProto$9.hasOwnProperty;
            function baseKeysIn(t) {
                if (!isObject(t))
                    return nativeKeysIn(t);
                var e, r = isPrototype(t), n = [];
                for (e in t)
                    ("constructor" != e || !r && hasOwnProperty$7.call(t, e)) && n.push(e);
                return n
            }
            function keysIn(t) {
                return isArrayLike(t) ? arrayLikeKeys(t, !0) : baseKeysIn(t)
            }
            var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/
              , reIsPlainProp = /^\w*$/;
            function isKey(t, e) {
                var r;
                return !isArray(t) && ("number" == (r = typeof t) || "symbol" == r || "boolean" == r || null == t || isSymbol(t) || reIsPlainProp.test(t) || !reIsDeepProp.test(t) || null != e && t in Object(e))
            }
            var nativeCreate = getNative(Object, "create");
            function hashClear() {
                this.ng = nativeCreate ? nativeCreate(null) : {},
                this.size = 0
            }
            function hashDelete(t) {
                return t = this.has(t) && delete this.ng[t],
                this.size -= t ? 1 : 0,
                t
            }
            var HASH_UNDEFINED = "__lodash_hash_undefined__"
              , objectProto$a = Object.prototype
              , hasOwnProperty$8 = objectProto$a.hasOwnProperty;
            function hashGet(t) {
                var e, r = this.ng;
                return nativeCreate ? (e = r[t]) === HASH_UNDEFINED ? undefined : e : hasOwnProperty$8.call(r, t) ? r[t] : undefined
            }
            var objectProto$b = Object.prototype
              , hasOwnProperty$9 = objectProto$b.hasOwnProperty;
            function hashHas(t) {
                var e = this.ng;
                return nativeCreate ? e[t] !== undefined : hasOwnProperty$9.call(e, t)
            }
            var HASH_UNDEFINED$1 = "__lodash_hash_undefined__";
            function hashSet(t, e) {
                var r = this.ng;
                return this.size += this.has(t) ? 0 : 1,
                r[t] = nativeCreate && e === undefined ? HASH_UNDEFINED$1 : e,
                this
            }
            function Hash(t) {
                var e = -1
                  , r = null == t ? 0 : t.length;
                for (this.clear(); ++e < r; ) {
                    var n = t[e];
                    this.set(n[0], n[1])
                }
            }
            function listCacheClear() {
                this.ng = [],
                this.size = 0
            }
            function assocIndexOf(t, e) {
                for (var r = t.length; r--; )
                    if (eq(t[r][0], e))
                        return r;
                return -1
            }
            Hash.prototype.clear = hashClear,
            Hash.prototype["delete"] = hashDelete,
            Hash.prototype.get = hashGet,
            Hash.prototype.has = hashHas,
            Hash.prototype.set = hashSet;
            var arrayProto = Array.prototype
              , splice = arrayProto.splice;
            function listCacheDelete(t) {
                var e = this.ng;
                return !((t = assocIndexOf(e, t)) < 0 || (t == e.length - 1 ? e.pop() : splice.call(e, t, 1),
                --this.size,
                0))
            }
            function listCacheGet(t) {
                var e = this.ng;
                return (t = assocIndexOf(e, t)) < 0 ? undefined : e[t][1]
            }
            function listCacheHas(t) {
                return -1 < assocIndexOf(this.ng, t)
            }
            function listCacheSet(t, e) {
                var r = this.ng
                  , n = assocIndexOf(r, t);
                return n < 0 ? (++this.size,
                r.push([t, e])) : r[n][1] = e,
                this
            }
            function ListCache(t) {
                var e = -1
                  , r = null == t ? 0 : t.length;
                for (this.clear(); ++e < r; ) {
                    var n = t[e];
                    this.set(n[0], n[1])
                }
            }
            ListCache.prototype.clear = listCacheClear,
            ListCache.prototype["delete"] = listCacheDelete,
            ListCache.prototype.get = listCacheGet,
            ListCache.prototype.has = listCacheHas,
            ListCache.prototype.set = listCacheSet;
            var Map = getNative(root, "Map");
            function mapCacheClear() {
                this.size = 0,
                this.ng = {
                    hash: new Hash,
                    map: new (Map || ListCache),
                    string: new Hash
                }
            }
            function isKeyable(t) {
                var e = typeof t;
                return "string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== t : null === t
            }
            function getMapData(t, e) {
                return t = t.ng,
                isKeyable(e) ? t["string" == typeof e ? "string" : "hash"] : t.map
            }
            function mapCacheDelete(t) {
                return t = getMapData(this, t)["delete"](t),
                this.size -= t ? 1 : 0,
                t
            }
            function mapCacheGet(t) {
                return getMapData(this, t).get(t)
            }
            function mapCacheHas(t) {
                return getMapData(this, t).has(t)
            }
            function mapCacheSet(t, e) {
                var r = getMapData(this, t)
                  , n = r.size;
                return r.set(t, e),
                this.size += r.size == n ? 0 : 1,
                this
            }
            function MapCache(t) {
                var e = -1
                  , r = null == t ? 0 : t.length;
                for (this.clear(); ++e < r; ) {
                    var n = t[e];
                    this.set(n[0], n[1])
                }
            }
            MapCache.prototype.clear = mapCacheClear,
            MapCache.prototype["delete"] = mapCacheDelete,
            MapCache.prototype.get = mapCacheGet,
            MapCache.prototype.has = mapCacheHas,
            MapCache.prototype.set = mapCacheSet;
            var FUNC_ERROR_TEXT = "Expected a function";
            function memoize(n, i) {
                if ("function" != typeof n || null != i && "function" != typeof i)
                    throw new TypeError(FUNC_ERROR_TEXT);
                var a = function() {
                    var t = arguments
                      , e = i ? i.apply(this, t) : t[0]
                      , r = a.cache;
                    return r.has(e) ? r.get(e) : (t = n.apply(this, t),
                    a.cache = r.set(e, t) || r,
                    t)
                };
                return a.cache = new (memoize.Cache || MapCache),
                a
            }
            memoize.Cache = MapCache;
            var MAX_MEMOIZE_SIZE = 500;
            function memoizeCapped(t) {
                var e = (t = memoize(t, function(t) {
                    return e.size === MAX_MEMOIZE_SIZE && e.clear(),
                    t
                })).cache;
                return t
            }
            var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g
              , reEscapeChar = /\\(\\)?/g
              , stringToPath = memoizeCapped(function(t) {
                var i = [];
                return 46 === t.charCodeAt(0) && i.push(""),
                t.replace(rePropName, function(t, e, r, n) {
                    i.push(r ? n.replace(reEscapeChar, "$1") : e || t)
                }),
                i
            });
            function toString(t) {
                return null == t ? "" : baseToString(t)
            }
            function castPath(t, e) {
                return isArray(t) ? t : isKey(t, e) ? [t] : stringToPath(toString(t))
            }
            var INFINITY$2 = 1 / 0;
            function toKey(t) {
                var e;
                return "string" == typeof t || isSymbol(t) ? t : "0" == (e = t + "") && 1 / t == -INFINITY$2 ? "-0" : e
            }
            function baseGet(t, e) {
                for (var r = 0, n = (e = castPath(e, t)).length; null != t && r < n; )
                    t = t[toKey(e[r++])];
                return r && r == n ? t : undefined
            }
            function get(t, e, r) {
                return (t = null == t ? undefined : baseGet(t, e)) === undefined ? r : t
            }
            function arrayPush(t, e) {
                for (var r = -1, n = e.length, i = t.length; ++r < n; )
                    t[i + r] = e[r];
                return t
            }
            var getPrototype = overArg(Object.getPrototypeOf, Object);
            function stackClear() {
                this.ng = new ListCache,
                this.size = 0
            }
            function stackDelete(t) {
                var e = this.ng
                  , t = e["delete"](t);
                return this.size = e.size,
                t
            }
            function stackGet(t) {
                return this.ng.get(t)
            }
            function stackHas(t) {
                return this.ng.has(t)
            }
            var LARGE_ARRAY_SIZE = 200;
            function stackSet(t, e) {
                var r = this.ng;
                if (r instanceof ListCache) {
                    var n = r.ng;
                    if (!Map || n.length < LARGE_ARRAY_SIZE - 1)
                        return n.push([t, e]),
                        this.size = ++r.size,
                        this;
                    r = this.ng = new MapCache(n)
                }
                return r.set(t, e),
                this.size = r.size,
                this
            }
            function Stack(t) {
                t = this.ng = new ListCache(t),
                this.size = t.size
            }
            function baseAssign(t, e) {
                return t && copyObject(e, keys(e), t)
            }
            function baseAssignIn(t, e) {
                return t && copyObject(e, keysIn(e), t)
            }
            Stack.prototype.clear = stackClear,
            Stack.prototype["delete"] = stackDelete,
            Stack.prototype.get = stackGet,
            Stack.prototype.has = stackHas,
            Stack.prototype.set = stackSet;
            var freeExports$2 = "object" == typeof exports && exports && !exports.nodeType && exports
              , freeModule$2 = freeExports$2 && "object" == typeof module && module && !module.nodeType && module
              , moduleExports$2 = freeModule$2 && freeModule$2.exports === freeExports$2
              , Buffer$1 = moduleExports$2 ? root.Zb : undefined
              , allocUnsafe = Buffer$1 ? Buffer$1.ig : undefined;
            function cloneBuffer(t, e) {
                return e ? t.slice() : (e = t.length,
                e = allocUnsafe ? allocUnsafe(e) : new t.constructor(e),
                t.eg(e),
                e)
            }
            function arrayFilter(t, e) {
                for (var r = -1, n = null == t ? 0 : t.length, i = 0, a = []; ++r < n; ) {
                    var o = t[r];
                    e(o, r, t) && (a[i++] = o)
                }
                return a
            }
            function stubArray() {
                return []
            }
            var objectProto$c = Object.prototype
              , propertyIsEnumerable$1 = objectProto$c.propertyIsEnumerable
              , nativeGetSymbols = Object.getOwnPropertySymbols
              , getSymbols = nativeGetSymbols ? function(e) {
                return null == e ? [] : (e = Object(e),
                arrayFilter(nativeGetSymbols(e), function(t) {
                    return propertyIsEnumerable$1.call(e, t)
                }))
            }
            : stubArray;
            function copySymbols(t, e) {
                return copyObject(t, getSymbols(t), e)
            }
            var nativeGetSymbols$1 = Object.getOwnPropertySymbols
              , getSymbolsIn = nativeGetSymbols$1 ? function(t) {
                for (var e = []; t; )
                    arrayPush(e, getSymbols(t)),
                    t = getPrototype(t);
                return e
            }
            : stubArray;
            function copySymbolsIn(t, e) {
                return copyObject(t, getSymbolsIn(t), e)
            }
            function baseGetAllKeys(t, e, r) {
                return e = e(t),
                isArray(t) ? e : arrayPush(e, r(t))
            }
            function getAllKeys(t) {
                return baseGetAllKeys(t, keys, getSymbols)
            }
            function getAllKeysIn(t) {
                return baseGetAllKeys(t, keysIn, getSymbolsIn)
            }
            var DataView$1 = getNative(root, "DataView")
              , Promise$1 = getNative(root, "Promise")
              , Set = getNative(root, "Set")
              , mapTag$1 = "[object Map]"
              , objectTag$1 = "[object Object]"
              , promiseTag = "[object Promise]"
              , setTag$1 = "[object Set]"
              , weakMapTag$1 = "[object WeakMap]"
              , dataViewTag$1 = "[object DataView]"
              , dataViewCtorString = toSource(DataView$1)
              , mapCtorString = toSource(Map)
              , promiseCtorString = toSource(Promise$1)
              , setCtorString = toSource(Set)
              , weakMapCtorString = toSource(WeakMap)
              , getTag = baseGetTag
              , getTag$1 = ((DataView$1 && getTag(new DataView$1(new ArrayBuffer(1))) != dataViewTag$1 || Map && getTag(new Map) != mapTag$1 || Promise$1 && getTag(Promise$1.resolve()) != promiseTag || Set && getTag(new Set) != setTag$1 || WeakMap && getTag(new WeakMap) != weakMapTag$1) && (getTag = function(t) {
                var e = baseGetTag(t);
                if (t = (t = e == objectTag$1 ? t.constructor : undefined) ? toSource(t) : "")
                    switch (t) {
                    case dataViewCtorString:
                        return dataViewTag$1;
                    case mapCtorString:
                        return mapTag$1;
                    case promiseCtorString:
                        return promiseTag;
                    case setCtorString:
                        return setTag$1;
                    case weakMapCtorString:
                        return weakMapTag$1
                    }
                return e
            }
            ),
            getTag)
              , objectProto$d = Object.prototype
              , hasOwnProperty$a = objectProto$d.hasOwnProperty;
            function initCloneArray(t) {
                var e = t.length
                  , r = new t.constructor(e);
                return e && "string" == typeof t[0] && hasOwnProperty$a.call(t, "index") && (r.index = t.index,
                r.input = t.input),
                r
            }
            var Uint8Array$1 = root.Uint8Array;
            function cloneArrayBuffer(t) {
                var e = new t.constructor(t.byteLength);
                return new Uint8Array$1(e).set(new Uint8Array$1(t)),
                e
            }
            function cloneDataView(t, e) {
                return e = e ? cloneArrayBuffer(t.buffer) : t.buffer,
                new t.constructor(e,t.byteOffset,t.byteLength)
            }
            var reFlags = /\w*$/;
            function cloneRegExp(t) {
                var e = new t.constructor(t.source,reFlags.exec(t));
                return e.lastIndex = t.lastIndex,
                e
            }
            var symbolProto$1 = Symbol$1 ? Symbol$1.prototype : undefined
              , symbolValueOf = symbolProto$1 ? symbolProto$1.valueOf : undefined;
            function cloneSymbol(t) {
                return symbolValueOf ? Object(symbolValueOf.call(t)) : {}
            }
            function cloneTypedArray(t, e) {
                return e = e ? cloneArrayBuffer(t.buffer) : t.buffer,
                new t.constructor(e,t.byteOffset,t.length)
            }
            var boolTag$1 = "[object Boolean]"
              , dateTag$1 = "[object Date]"
              , mapTag$2 = "[object Map]"
              , numberTag$1 = "[object Number]"
              , regexpTag$1 = "[object RegExp]"
              , setTag$2 = "[object Set]"
              , stringTag$1 = "[object String]"
              , symbolTag$1 = "[object Symbol]"
              , arrayBufferTag$1 = "[object ArrayBuffer]"
              , dataViewTag$2 = "[object DataView]"
              , float32Tag$1 = "[object Float32Array]"
              , float64Tag$1 = "[object Float64Array]"
              , int8Tag$1 = "[object Int8Array]"
              , int16Tag$1 = "[object Int16Array]"
              , int32Tag$1 = "[object Int32Array]"
              , uint8Tag$1 = "[object Uint8Array]"
              , uint8ClampedTag$1 = "[object Uint8ClampedArray]"
              , uint16Tag$1 = "[object Uint16Array]"
              , uint32Tag$1 = "[object Uint32Array]";
            function initCloneByTag(t, e, r) {
                var n = t.constructor;
                switch (e) {
                case arrayBufferTag$1:
                    return cloneArrayBuffer(t);
                case boolTag$1:
                case dateTag$1:
                    return new n(+t);
                case dataViewTag$2:
                    return cloneDataView(t, r);
                case float32Tag$1:
                case float64Tag$1:
                case int8Tag$1:
                case int16Tag$1:
                case int32Tag$1:
                case uint8Tag$1:
                case uint8ClampedTag$1:
                case uint16Tag$1:
                case uint32Tag$1:
                    return cloneTypedArray(t, r);
                case mapTag$2:
                    return new n;
                case numberTag$1:
                case stringTag$1:
                    return new n(t);
                case regexpTag$1:
                    return cloneRegExp(t);
                case setTag$2:
                    return new n;
                case symbolTag$1:
                    return cloneSymbol(t)
                }
            }
            function initCloneObject(t) {
                return "function" != typeof t.constructor || isPrototype(t) ? {} : baseCreate(getPrototype(t))
            }
            var mapTag$3 = "[object Map]";
            function baseIsMap(t) {
                return isObjectLike(t) && getTag$1(t) == mapTag$3
            }
            var nodeIsMap = nodeUtil && nodeUtil.isMap
              , isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap
              , setTag$3 = "[object Set]";
            function baseIsSet(t) {
                return isObjectLike(t) && getTag$1(t) == setTag$3
            }
            var nodeIsSet = nodeUtil && nodeUtil.og
              , isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet
              , CLONE_DEEP_FLAG = 1
              , CLONE_FLAT_FLAG = 2
              , CLONE_SYMBOLS_FLAG = 4
              , argsTag$2 = "[object Arguments]"
              , arrayTag$1 = "[object Array]"
              , boolTag$2 = "[object Boolean]"
              , dateTag$2 = "[object Date]"
              , errorTag$1 = "[object Error]"
              , funcTag$2 = "[object Function]"
              , genTag$1 = "[object GeneratorFunction]"
              , mapTag$4 = "[object Map]"
              , numberTag$2 = "[object Number]"
              , objectTag$2 = "[object Object]"
              , regexpTag$2 = "[object RegExp]"
              , setTag$4 = "[object Set]"
              , stringTag$2 = "[object String]"
              , symbolTag$2 = "[object Symbol]"
              , weakMapTag$2 = "[object WeakMap]"
              , arrayBufferTag$2 = "[object ArrayBuffer]"
              , dataViewTag$3 = "[object DataView]"
              , float32Tag$2 = "[object Float32Array]"
              , float64Tag$2 = "[object Float64Array]"
              , int8Tag$2 = "[object Int8Array]"
              , int16Tag$2 = "[object Int16Array]"
              , int32Tag$2 = "[object Int32Array]"
              , uint8Tag$2 = "[object Uint8Array]"
              , uint8ClampedTag$2 = "[object Uint8ClampedArray]"
              , uint16Tag$2 = "[object Uint16Array]"
              , uint32Tag$2 = "[object Uint32Array]"
              , cloneableTags = {};
            function baseClone(r, n, i, t, e, a) {
                var o, s = n & CLONE_DEEP_FLAG, u = n & CLONE_FLAT_FLAG, f = n & CLONE_SYMBOLS_FLAG;
                if ((o = i ? e ? i(r, t, e, a) : i(r) : o) === undefined) {
                    if (!isObject(r))
                        return r;
                    if (t = isArray(r)) {
                        if (o = initCloneArray(r),
                        !s)
                            return copyArray(r, o)
                    } else {
                        var c = getTag$1(r)
                          , h = c == funcTag$2 || c == genTag$1;
                        if (isBuffer(r))
                            return cloneBuffer(r, s);
                        if (c == objectTag$2 || c == argsTag$2 || h && !e) {
                            if (o = u || h ? {} : initCloneObject(r),
                            !s)
                                return u ? copySymbolsIn(r, baseAssignIn(o, r)) : copySymbols(r, baseAssign(o, r))
                        } else {
                            if (!cloneableTags[c])
                                return e ? r : {};
                            o = initCloneByTag(r, c, s)
                        }
                    }
                    if (h = (a = a || new Stack).get(r))
                        return h;
                    a.set(r, o),
                    isSet(r) ? r.forEach(function(t) {
                        o.add(baseClone(t, n, i, t, r, a))
                    }) : isMap(r) && r.forEach(function(t, e) {
                        o.set(e, baseClone(t, n, i, e, r, a))
                    });
                    var l = t ? undefined : (f ? u ? getAllKeysIn : getAllKeys : u ? keysIn : keys)(r);
                    arrayEach(l || r, function(t, e) {
                        l && (t = r[e = t]),
                        assignValue(o, e, baseClone(t, n, i, e, r, a))
                    })
                }
                return o
            }
            cloneableTags[argsTag$2] = cloneableTags[arrayTag$1] = cloneableTags[arrayBufferTag$2] = cloneableTags[dataViewTag$3] = cloneableTags[boolTag$2] = cloneableTags[dateTag$2] = cloneableTags[float32Tag$2] = cloneableTags[float64Tag$2] = cloneableTags[int8Tag$2] = cloneableTags[int16Tag$2] = cloneableTags[int32Tag$2] = cloneableTags[mapTag$4] = cloneableTags[numberTag$2] = cloneableTags[objectTag$2] = cloneableTags[regexpTag$2] = cloneableTags[setTag$4] = cloneableTags[stringTag$2] = cloneableTags[symbolTag$2] = cloneableTags[uint8Tag$2] = cloneableTags[uint8ClampedTag$2] = cloneableTags[uint16Tag$2] = cloneableTags[uint32Tag$2] = !0,
            cloneableTags[errorTag$1] = cloneableTags[funcTag$2] = cloneableTags[weakMapTag$2] = !1;
            var CLONE_SYMBOLS_FLAG$1 = 4;
            function clone(t) {
                return baseClone(t, CLONE_SYMBOLS_FLAG$1)
            }
            var CLONE_DEEP_FLAG$1 = 1
              , CLONE_SYMBOLS_FLAG$2 = 4;
            function cloneDeep(t) {
                return baseClone(t, CLONE_DEEP_FLAG$1 | CLONE_SYMBOLS_FLAG$2)
            }
            var HASH_UNDEFINED$2 = "__lodash_hash_undefined__";
            function setCacheAdd(t) {
                return this.ng.set(t, HASH_UNDEFINED$2),
                this
            }
            function setCacheHas(t) {
                return this.ng.has(t)
            }
            function SetCache(t) {
                var e = -1
                  , r = null == t ? 0 : t.length;
                for (this.ng = new MapCache; ++e < r; )
                    this.add(t[e])
            }
            function arraySome(t, e) {
                for (var r = -1, n = null == t ? 0 : t.length; ++r < n; )
                    if (e(t[r], r, t))
                        return !0;
                return !1
            }
            function cacheHas(t, e) {
                return t.has(e)
            }
            SetCache.prototype.add = SetCache.prototype.push = setCacheAdd,
            SetCache.prototype.has = setCacheHas;
            var COMPARE_PARTIAL_FLAG = 1
              , COMPARE_UNORDERED_FLAG = 2;
            function equalArrays(t, e, r, n, i, a) {
                var o = r & COMPARE_PARTIAL_FLAG
                  , s = t.length;
                if (s != (u = e.length) && !(o && s < u))
                    return !1;
                var u = a.get(t)
                  , f = a.get(e);
                if (u && f)
                    return u == e && f == t;
                var c = -1
                  , h = !0
                  , l = r & COMPARE_UNORDERED_FLAG ? new SetCache : undefined;
                for (a.set(t, e),
                a.set(e, t); ++c < s; ) {
                    var d, v = t[c], g = e[c];
                    if ((d = n ? o ? n(g, v, c, e, t, a) : n(v, g, c, t, e, a) : d) !== undefined) {
                        if (d)
                            continue;
                        h = !1;
                        break
                    }
                    if (l) {
                        if (!arraySome(e, function(t, e) {
                            if (!cacheHas(l, e) && (v === t || i(v, t, r, n, a)))
                                return l.push(e)
                        })) {
                            h = !1;
                            break
                        }
                    } else if (v !== g && !i(v, g, r, n, a)) {
                        h = !1;
                        break
                    }
                }
                return a["delete"](t),
                a["delete"](e),
                h
            }
            function mapToArray(t) {
                var r = -1
                  , n = Array(t.size);
                return t.forEach(function(t, e) {
                    n[++r] = [e, t]
                }),
                n
            }
            function setToArray(t) {
                var e = -1
                  , r = Array(t.size);
                return t.forEach(function(t) {
                    r[++e] = t
                }),
                r
            }
            var COMPARE_PARTIAL_FLAG$1 = 1
              , COMPARE_UNORDERED_FLAG$1 = 2
              , boolTag$3 = "[object Boolean]"
              , dateTag$3 = "[object Date]"
              , errorTag$2 = "[object Error]"
              , mapTag$5 = "[object Map]"
              , numberTag$3 = "[object Number]"
              , regexpTag$3 = "[object RegExp]"
              , setTag$5 = "[object Set]"
              , stringTag$3 = "[object String]"
              , symbolTag$3 = "[object Symbol]"
              , arrayBufferTag$3 = "[object ArrayBuffer]"
              , dataViewTag$4 = "[object DataView]"
              , symbolProto$2 = Symbol$1 ? Symbol$1.prototype : undefined
              , symbolValueOf$1 = symbolProto$2 ? symbolProto$2.valueOf : undefined;
            function equalByTag(t, e, r, n, i, a, o) {
                switch (r) {
                case dataViewTag$4:
                    if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
                        return !1;
                    t = t.buffer,
                    e = e.buffer;
                case arrayBufferTag$3:
                    return !(t.byteLength != e.byteLength || !a(new Uint8Array$1(t), new Uint8Array$1(e)));
                case boolTag$3:
                case dateTag$3:
                case numberTag$3:
                    return eq(+t, +e);
                case errorTag$2:
                    return t.name == e.name && t.message == e.message;
                case regexpTag$3:
                case stringTag$3:
                    return t == e + "";
                case mapTag$5:
                    var s = mapToArray;
                case setTag$5:
                    var u, s = s || setToArray;
                    return t.size == e.size || n & COMPARE_PARTIAL_FLAG$1 ? (u = o.get(t)) ? u == e : (n |= COMPARE_UNORDERED_FLAG$1,
                    o.set(t, e),
                    u = equalArrays(s(t), s(e), n, i, a, o),
                    o["delete"](t),
                    u) : !1;
                case symbolTag$3:
                    if (symbolValueOf$1)
                        return symbolValueOf$1.call(t) == symbolValueOf$1.call(e)
                }
                return !1
            }
            var COMPARE_PARTIAL_FLAG$2 = 1
              , objectProto$e = Object.prototype
              , hasOwnProperty$b = objectProto$e.hasOwnProperty;
            function equalObjects(t, e, r, n, i, a) {
                var o = r & COMPARE_PARTIAL_FLAG$2
                  , s = getAllKeys(t)
                  , u = s.length;
                if (u != getAllKeys(e).length && !o)
                    return !1;
                for (var f = u; f--; ) {
                    var c = s[f];
                    if (!(o ? c in e : hasOwnProperty$b.call(e, c)))
                        return !1
                }
                var h = a.get(t)
                  , l = a.get(e);
                if (h && l)
                    return h == e && l == t;
                for (var d = !0, v = (a.set(t, e),
                a.set(e, t),
                o); ++f < u; ) {
                    var g, y = t[c = s[f]], p = e[c];
                    if (!((g = n ? o ? n(p, y, c, e, t, a) : n(y, p, c, t, e, a) : g) === undefined ? y === p || i(y, p, r, n, a) : g)) {
                        d = !1;
                        break
                    }
                    v = v || "constructor" == c
                }
                return d && !v && (h = t.constructor) != (l = e.constructor) && "constructor"in t && "constructor"in e && !("function" == typeof h && h instanceof h && "function" == typeof l && l instanceof l) && (d = !1),
                a["delete"](t),
                a["delete"](e),
                d
            }
            var COMPARE_PARTIAL_FLAG$3 = 1
              , argsTag$3 = "[object Arguments]"
              , arrayTag$2 = "[object Array]"
              , objectTag$3 = "[object Object]"
              , objectProto$f = Object.prototype
              , hasOwnProperty$c = objectProto$f.hasOwnProperty;
            function baseIsEqualDeep(t, e, r, n, i, a) {
                var o = isArray(t)
                  , s = isArray(e)
                  , u = o ? arrayTag$2 : getTag$1(t)
                  , s = s ? arrayTag$2 : getTag$1(e)
                  , f = (u = u == argsTag$3 ? objectTag$3 : u) == objectTag$3
                  , c = (s = s == argsTag$3 ? objectTag$3 : s) == objectTag$3;
                if ((s = u == s) && isBuffer(t)) {
                    if (!isBuffer(e))
                        return !1;
                    f = !(o = !0)
                }
                return s && !f ? (a = a || new Stack,
                o || isTypedArray(t) ? equalArrays(t, e, r, n, i, a) : equalByTag(t, e, u, r, n, i, a)) : r & COMPARE_PARTIAL_FLAG$3 || (o = f && hasOwnProperty$c.call(t, "__wrapped__"),
                u = c && hasOwnProperty$c.call(e, "__wrapped__"),
                !o && !u) ? s && equalObjects(t, e, r, n, i, a = a || new Stack) : i(o ? t.value() : t, u ? e.value() : e, r, n, a = a || new Stack)
            }
            function baseIsEqual(t, e, r, n, i) {
                return t === e || (null == t || null == e || !isObjectLike(t) && !isObjectLike(e) ? t != t && e != e : baseIsEqualDeep(t, e, r, n, baseIsEqual, i))
            }
            var COMPARE_PARTIAL_FLAG$4 = 1
              , COMPARE_UNORDERED_FLAG$2 = 2;
            function baseIsMatch(t, e, r, n) {
                var i = r.length
                  , a = i
                  , o = !n;
                if (null == t)
                    return !a;
                for (t = Object(t); i--; ) {
                    var s = r[i];
                    if (o && s[2] ? s[1] !== t[s[0]] : !(s[0]in t))
                        return !1
                }
                for (; ++i < a; ) {
                    var u = (s = r[i])[0]
                      , f = t[u]
                      , c = s[1];
                    if (o && s[2]) {
                        if (f === undefined && !(u in t))
                            return !1
                    } else {
                        var h, l = new Stack;
                        if (!((h = n ? n(f, c, u, t, e, l) : h) === undefined ? baseIsEqual(c, f, COMPARE_PARTIAL_FLAG$4 | COMPARE_UNORDERED_FLAG$2, n, l) : h))
                            return !1
                    }
                }
                return !0
            }
            function isStrictComparable(t) {
                return t == t && !isObject(t)
            }
            function getMatchData(t) {
                for (var e = keys(t), r = e.length; r--; ) {
                    var n = e[r]
                      , i = t[n];
                    e[r] = [n, i, isStrictComparable(i)]
                }
                return e
            }
            function matchesStrictComparable(e, r) {
                return function(t) {
                    return null != t && t[e] === r && (r !== undefined || e in Object(t))
                }
            }
            function baseMatches(e) {
                var r = getMatchData(e);
                return 1 == r.length && r[0][2] ? matchesStrictComparable(r[0][0], r[0][1]) : function(t) {
                    return t === e || baseIsMatch(t, e, r)
                }
            }
            function baseHasIn(t, e) {
                return null != t && e in Object(t)
            }
            function hasPath(t, e, r) {
                for (var n = -1, i = (e = castPath(e, t)).length, a = !1; ++n < i; ) {
                    var o = toKey(e[n]);
                    if (!(a = null != t && r(t, o)))
                        break;
                    t = t[o]
                }
                return a || ++n != i ? a : !!(i = null == t ? 0 : t.length) && isLength(i) && isIndex(o, i) && (isArray(t) || isArguments(t))
            }
            function hasIn(t, e) {
                return null != t && hasPath(t, e, baseHasIn)
            }
            var COMPARE_PARTIAL_FLAG$5 = 1
              , COMPARE_UNORDERED_FLAG$3 = 2;
            function baseMatchesProperty(r, n) {
                return isKey(r) && isStrictComparable(n) ? matchesStrictComparable(toKey(r), n) : function(t) {
                    var e = get(t, r);
                    return e === undefined && e === n ? hasIn(t, r) : baseIsEqual(n, e, COMPARE_PARTIAL_FLAG$5 | COMPARE_UNORDERED_FLAG$3)
                }
            }
            function baseProperty(e) {
                return function(t) {
                    return null == t ? undefined : t[e]
                }
            }
            function basePropertyDeep(e) {
                return function(t) {
                    return baseGet(t, e)
                }
            }
            function property(t) {
                return isKey(t) ? baseProperty(toKey(t)) : basePropertyDeep(t)
            }
            function baseIteratee(t) {
                return "function" == typeof t ? t : null == t ? identity : "object" == typeof t ? isArray(t) ? baseMatchesProperty(t[0], t[1]) : baseMatches(t) : property(t)
            }
            function createBaseFor(u) {
                return function(t, e, r) {
                    for (var n = -1, i = Object(t), a = r(t), o = a.length; o--; ) {
                        var s = a[u ? o : ++n];
                        if (!1 === e(i[s], s, i))
                            break
                    }
                    return t
                }
            }
            var baseFor = createBaseFor();
            function baseForOwn(t, e) {
                return t && baseFor(t, e, keys)
            }
            function createBaseEach(a, o) {
                return function(t, e) {
                    if (null != t) {
                        if (!isArrayLike(t))
                            return a(t, e);
                        for (var r = t.length, n = o ? r : -1, i = Object(t); (o ? n-- : ++n < r) && !1 !== e(i[n], n, i); )
                            ;
                    }
                    return t
                }
            }
            var baseEach = createBaseEach(baseForOwn);
            function castFunction(t) {
                return "function" == typeof t ? t : identity
            }
            function forEach(t, e) {
                return (isArray(t) ? arrayEach : baseEach)(t, castFunction(e))
            }
            function arrayEvery(t, e) {
                for (var r = -1, n = null == t ? 0 : t.length; ++r < n; )
                    if (!e(t[r], r, t))
                        return !1;
                return !0
            }
            function baseEvery(t, n) {
                var i = !0;
                return baseEach(t, function(t, e, r) {
                    return i = !!n(t, e, r)
                }),
                i
            }
            function every(t, e, r) {
                return (isArray(t) ? arrayEvery : baseEvery)(t, baseIteratee(e = r && isIterateeCall(t, e, r) ? undefined : e))
            }
            function createFind(a) {
                return function(t, e, r) {
                    var n, i = Object(t);
                    return isArrayLike(t) || (n = baseIteratee(e),
                    t = keys(t),
                    e = function(t) {
                        return n(i[t], t, i)
                    }
                    ),
                    -1 < (e = a(t, e, r)) ? i[n ? t[e] : e] : undefined
                }
            }
            var nativeMax$1 = Math.max;
            function findIndex(t, e, r) {
                var n = null == t ? 0 : t.length;
                return n ? ((r = null == r ? 0 : toInteger(r)) < 0 && (r = nativeMax$1(n + r, 0)),
                baseFindIndex(t, baseIteratee(e), r)) : -1
            }
            var find = createFind(findIndex);
            function baseMap(t, n) {
                var i = -1
                  , a = isArrayLike(t) ? Array(t.length) : [];
                return baseEach(t, function(t, e, r) {
                    a[++i] = n(t, e, r)
                }),
                a
            }
            function map(t, e) {
                return (isArray(t) ? arrayMap : baseMap)(t, baseIteratee(e))
            }
            function forIn(t, e) {
                return null == t ? t : baseFor(t, castFunction(e), keysIn)
            }
            var mapTag$6 = "[object Map]"
              , setTag$6 = "[object Set]"
              , objectProto$g = Object.prototype
              , hasOwnProperty$d = objectProto$g.hasOwnProperty;
            function isEmpty(t) {
                if (null != t) {
                    if (isArrayLike(t) && (isArray(t) || "string" == typeof t || "function" == typeof t.splice || isBuffer(t) || isTypedArray(t) || isArguments(t)))
                        return !t.length;
                    var e, r = getTag$1(t);
                    if (r == mapTag$6 || r == setTag$6)
                        return !t.size;
                    if (isPrototype(t))
                        return !baseKeys(t).length;
                    for (e in t)
                        if (hasOwnProperty$d.call(t, e))
                            return !1
                }
                return !0
            }
            function isEqual(t, e) {
                return baseIsEqual(t, e)
            }
            function isUndefined(t) {
                return t === undefined
            }
            function baseSome(t, n) {
                var i;
                return baseEach(t, function(t, e, r) {
                    return !(i = n(t, e, r))
                }),
                !!i
            }
            function some(t, e, r) {
                return (isArray(t) ? arraySome : baseSome)(t, baseIteratee(e = r && isIterateeCall(t, e, r) ? undefined : e))
            }
            var projections = {}
              , Projection = function() {
                function t(t, e, r, n) {
                    this.project = e,
                    this.unproject = r,
                    this.getResolution = n,
                    projections[t] = this
                }
                return t.prototype.moveWithPixel = function(t, e, r) {
                    var r = this.getResolution(r)
                      , n = e[0] * r
                      , e = e[1] * r
                      , r = this.project(t[0], t[1]);
                    return this.unproject(r[0] + n, r[1] + e)
                }
                ,
                t.prototype.moveWithPos = function(t, e) {
                    return t = [(t = this.project(t[0], t[1]))[0] + e[0], t[1] + e[1]],
                    this.unproject(t[0], t[1])
                }
                ,
                t
            }()
              , ProjectionManager = {
                getProjection: function(t) {
                    return projections[t]
                }
            }
              , LngLat = new Projection("EPSG:4326",function(t, e) {
                return [t, e]
            }
            ,function(t, e) {
                return [t, e]
            }
            ,function(t) {
                return .703125 / Math.pow(2, t)
            }
            )
              , SphericalMercator = function() {
                var n = Math.PI / 180
                  , r = 180 / Math.PI
                  , i = 6378137;
                return new Projection("EPSG:3857",function(t, e) {
                    var r = 85.0511287798
                      , r = (e = Math.max(Math.min(r, e), -r),
                    t * n)
                      , t = e * n
                      , t = Math.log(Math.tan(Math.PI / 4 + t / 2));
                    return [r * i, t * i]
                }
                ,function(t, e) {
                    return [t / i * r, (2 * Math.atan(Math.exp(e / i)) - Math.PI / 2) * r]
                }
                ,function(t) {
                    return 156543.03392804097 / Math.pow(2, t)
                }
                )
            }()
              , LCS = function() {
                function t() {
                    this.hg = [-20037508.342789244, -20037508.342789244, 20037508.342789244, 20037508.342789244],
                    this.cg = 128,
                    this.vg = 128,
                    this.lg = (this.hg[2] - this.hg[0]) / this.cg,
                    this.dg = (this.hg[3] - this.hg[1]) / this.vg
                }
                return t.prototype.setMap = function(t) {
                    this.map = t
                }
                ,
                t.prototype.getSize = function() {
                    return [this.lg, this.dg]
                }
                ,
                t.prototype.getNum = function() {
                    return [this.cg, this.vg]
                }
                ,
                t.prototype.getLocalByLnglat = function(t) {
                    var e = (e = ProjectionManager.getProjection("EPSG:3857")).project.apply(e, t);
                    return this.getLocalByCoord(e)
                }
                ,
                t.prototype.getLocalByCoord = function(t) {
                    var e = Math.floor(t[0] / this.lg)
                      , r = Math.floor(t[1] / this.dg)
                      , n = this.getLocalCenterByXY(e, r);
                    return {
                        Sa: [t[0] - n.center[0], t[1] - n.center[1]],
                        x: e,
                        y: r,
                        center: n.center,
                        Ro: n.Ro
                    }
                }
                ,
                t.prototype.getLocalCenterByXY = function(t, e) {
                    var r = {
                        x: t,
                        y: e,
                        center: [0, 0],
                        Ro: [0, 0, 0, 0]
                    };
                    return r.center = [(t + .5) * this.lg, (e + .5) * this.dg],
                    r.Ro = [t * this.lg, e * this.dg, (t + 1) * this.lg, (e + 1) * this.dg],
                    r
                }
                ,
                t.prototype.getDeltaCoord = function(t) {
                    var e = this.getLocalByCoord(t);
                    return [t[0] - e.center[0], t[1] - e.center[1]]
                }
                ,
                t
            }()
              , lcs = new LCS
              , E4326 = ProjectionManager.getProjection("EPSG:4326")
              , E3857 = ProjectionManager.getProjection("EPSG:3857")
              , HALF_WORLD_SIZE = 20037508.342789244
              , LngLat$1 = {
                Ro: [-180, -90, 180, 90],
                project: function(t, e, r) {
                    return t = E4326.project(t, e),
                    this.transform(t[0], t[1], r)
                },
                unproject: function(t, e, r) {
                    return t = this.Xs(t, e, r),
                    E4326.unproject(t[0], t[1])
                },
                transform: function(t, e, r) {
                    var r = r === undefined ? 180 : 256 << r
                      , i = this.Ro[2] - this.Ro[0]
                      , a = this.Ro[3] - this.Ro[1];
                    return [t = (t - this.Ro[0]) / i * (2 * r), e = r - (e - this.Ro[1]) / a * r]
                },
                Xs: function(t, e, r) {
                    return [t = 360 * (t / (2 * (r = r === undefined ? 180 : 256 << r)) - .5), e = 180 * -(e / r - .5)]
                },
                nt: function(t, e, r) {
                    return this.Xs(t, e, r)
                },
                wu: function(t, e, r) {
                    return this.Xs(t, e, r)
                },
                yo: function(t, e, r) {
                    var n = 0 < t / this.Ro[3] ? Math.abs(Math.floor(t / this.Ro[3])) : Math.abs(Math.ceil(t / this.Ro[3]))
                      , i = 0 < e / this.Ro[3] ? Math.abs(Math.floor(e / this.Ro[3])) : Math.abs(Math.ceil(e / this.Ro[3]))
                      , a = t % this.Ro[3]
                      , o = e % this.Ro[3]
                      , a = this.transform(a, o, r)
                      , o = (t = this.wu(t, t, r)[0] * n + a[0],
                    e = this.wu(e, e, r)[1] * i + a[1],
                    this.transform(0, 0, r));
                    return [t - o[0], e - o[1]]
                },
                Bb: function(t, e, r) {
                    return r.X(t, e)
                },
                qb: function(t, e, r) {
                    return r.H(t, e)
                },
                Gd: function(t, e, r, n) {
                    var i = n.X(t[0], t[1]);
                    return [(e = n.X(t[0] + e, t[1] + r))[0] - i[0], e[1] - i[1]]
                }
            }
              , SphericalMercator$1 = {
                Ro: [-20037508.342789244, -20037508.342789244, 20037508.342789244, 20037508.342789244],
                project: function(t, e, r) {
                    return t = E3857.project(t, e),
                    this.transform(t[0], t[1], r)
                },
                unproject: function(t, e, r) {
                    return t = this.Xs(t, e, r),
                    E3857.unproject(t[0], t[1])
                },
                transform: function(t, e, r) {
                    t = Math.min(20037508.342789244, Math.max(t, -20037508.342789244)),
                    e = Math.min(20037508.342789244, Math.max(e, -20037508.342789244)),
                    r = r === undefined ? 40075016.68557849 : 256 * Math.pow(2, r);
                    var n = this.Ro[2] - this.Ro[0]
                      , i = this.Ro[3] - this.Ro[1];
                    return [t = (t - this.Ro[0]) / n * r, e = r - (e - this.Ro[1]) / i * r]
                },
                Xs: function(t, e, r) {
                    return [t = (t / (r = r === undefined ? 40075016.68557849 : 256 * Math.pow(2, r)) - .5) * this.Ro[2] * 2, e = -(e / r - .5) * this.Ro[2] * 2]
                },
                nt: function(t, e, r, n) {
                    return [t = this.Xs(t, e, r)[0] - this.Ro[0], e = this.Ro[2] - this.Xs(t, e, r)[1]]
                },
                wu: function(t, e, r, n) {
                    var i = n.center
                      , a = n.size
                      , n = (n.rotation || 0) / 180 * Math.PI
                      , e = (t = this.transform(t, e, r))[0]
                      , t = t[1]
                      , r = e - (i = this.transform(i[0], i[1], r))[0]
                      , e = t - i[1]
                      , t = Math.sqrt(Math.pow(r, 2) + Math.pow(e, 2))
                      , i = 0 == e ? Math.PI / 2 : Math.atan(Math.abs(r / e))
                      , i = r * e <= 0 ? i + n : i - n
                      , n = 0 < e ? 1 : -1;
                    return [a[0] / 2 + t * Math.sin(0 < r ? i : -i), a[1] / 2 + t * Math.cos(i) * n]
                },
                yo: function(t, e, r, n) {
                    var i = 0 < t / this.Ro[3] ? Math.abs(Math.floor(t / this.Ro[3])) : Math.abs(Math.ceil(t / this.Ro[3]))
                      , a = 0 < e / this.Ro[3] ? Math.abs(Math.floor(e / this.Ro[3])) : Math.abs(Math.ceil(e / this.Ro[3]))
                      , o = t % this.Ro[3]
                      , s = e % this.Ro[3]
                      , o = this.transform(o, s, r);
                    return [(t = (r = (s = this.transform(0, 0, r))[0]) * i + o[0]) - r, (e = (s = s[1]) * a + o[1]) - s]
                },
                Bb: function(t, e, r) {
                    return r.X(t, e)
                },
                qb: function(t, e, r) {
                    return r.H(t, e)
                },
                Gd: function(t, e, r, n) {
                    var i = n.X(t[0], t[1]);
                    return [(e = n.X(t[0] + e, t[1] + r))[0] - i[0], e[1] - i[1]]
                }
            }
              , transform = {
                "EPSG:4326": LngLat$1,
                "EPSG:3857": SphericalMercator$1
            }
              , LocalZoom = 13
              , LocalTileZoom = 12
              , zoomRange = [2, 26]
              , CONSTS = {
                ID: "__id__",
                Rp: zoomRange[1],
                Mp: zoomRange[0],
                jp: .8,
                Pp: .2,
                YM: 5,
                KM: {
                    dom: "div",
                    id: "_amap_custom_labellayer_div_",
                    className: "amap-layer",
                    style: {
                        cssText: "position:absolute;top:0;left:0;",
                        zIndex: "",
                        width: "",
                        height: "",
                        visible: ""
                    }
                },
                Dp: {
                    Op: 180,
                    Ad: 70,
                    Td: 360,
                    t1: 300,
                    e1: 30,
                    Bd: Math.PI / 10
                },
                XM: {
                    top: 3,
                    right: 3,
                    bottom: 3,
                    left: 3
                },
                JM: {
                    ZM: "top",
                    QM: "right",
                    tj: "bottom",
                    LEFT: "left",
                    nj: "middle",
                    ij: "center",
                    ej: "alphabetic"
                },
                oj: {
                    CLICK: "click",
                    MOUSEOVER: "mouseover",
                    MOUSEOUT: "mouseout",
                    MOUSEMOVE: "mousemove",
                    MOUSEDOWN: "mousedown",
                    MOUSEUP: "mouseup",
                    aj: "touchstart",
                    uj: "touchend"
                },
                sj: {
                    rank: 1,
                    angle: 0,
                    opacity: 1,
                    offset: [0, 0],
                    zooms: zoomRange,
                    icon: {
                        type: "image",
                        image: "://visuallocal.amap.com/public/poi-marker.png",
                        clipOrigin: [0, 0],
                        clipSize: [36, 36],
                        size: [36, 36],
                        anchor: "bottom-center",
                        angel: 0,
                        retina: !0,
                        zooms: zoomRange
                    },
                    text: {
                        type: "billboard",
                        direction: "top",
                        offset: [0, 0],
                        zooms: zoomRange,
                        style: {
                            fj: 6,
                            fontFamily: "sans-serif",
                            fontSize: 12,
                            fontWeight: "normal",
                            fillColor: [0, 0, 0, 1],
                            strokeWidth: 0,
                            strokeColor: [.988, .988, .988, 1],
                            borderColor: "transparent",
                            padding: [3, 3, 3, 3],
                            backgroundColor: ""
                        }
                    }
                },
                hj: {
                    cj: {
                        opacity: .2
                    },
                    vj: "fadeIn",
                    lj: "fadeOut",
                    dj: {
                        bj: "start",
                        RUNNING: "running",
                        pj: "complete"
                    },
                    yj: {
                        mj: "opacity",
                        gj: "size"
                    }
                },
                _d: 3,
                wj: "_AMap_sdf_com_words",
                Mj: 128,
                pc: ["://sdf.amap.com", "://sdf01.amap.com", "://sdf02.amap.com", "://sdf03.amap.com", "://sdf04.amap.com"],
                sp: 4,
                Cd: .78125,
                Ld: 205 / 256,
                Aj: {
                    kj: "纹理加载失败，请重试",
                    Oj: "资源加载失败，请重试"
                },
                xj: "bufferChanged",
                Ij: "frameBufferChanged",
                Tj: "combineFrameBufferChanged",
                ic: 1,
                ud: 13,
                Cj: 12,
                Ej: "__icon_combination",
                Nj: "__text_combination",
                Lj: {
                    file: {},
                    size: [64, 64],
                    columnNum: 10
                },
                Kp: {
                    buffer: 3,
                    family: "ios9",
                    size: 24
                },
                _n: {
                    Uj: [0, 0, 0, 1],
                    Gp: [0, 0, 0, 0]
                },
                gH: "sdf",
                RB: "sdfJson",
                FN: "version",
                getLanguageData: function(t, e) {
                    var r, n = [];
                    switch (e) {
                    case "en":
                        n = t.nameEng;
                        break;
                    case "zh":
                        n = t.nameZh;
                        break;
                    default:
                        t.nameMulti && 0 < t.nameMulti.length && (n = (r = t.nameMulti.find(function(t) {
                            return t.lang === e
                        })) ? [r] : [])
                    }
                    return n
                }
            }
              , DangerousFontSize = (function(t) {
                t.nebula = "nebula",
                t.nebulaLabel = "nebulaLabel"
            }(exports.n0 || (exports.n0 = {})),
            24)
              , EnumLabelFragType = (function(t) {
                t[t.dynamic = 0] = "dynamic",
                t[t.icon = 1] = "icon"
            }(exports.cY || (exports.cY = {})),
            {
                icon: 0,
                bg: 6,
                tq: 8,
                text: 2
            })
              , tmp1 = (function(t) {
                t.BLOB = "blob",
                t.TOLOAD = "toload",
                t.LOADING = "loading",
                t.LOADED = "loaded",
                t.UNLOADED = "unloaded",
                t.ERROR = "error",
                t.RELOADING = "reloading",
                t.UNCOMBINED = "uncombined",
                t.COMBINING = "combining",
                t.COMBINED = "combined"
            }(exports.uc || (exports.uc = {})),
            4294901760)
              , tmp2 = 65535;
            function getUploadName(t, e) {
                return ((t = tmp1 - (t << 16)) + (e = tmp2 - e)).toString(16)
            }
            function staticSDFTileKeyToKey(t) {
                var e = (t = map(t.split(","), function(t) {
                    return parseInt(t, 10)
                }))[1]
                  , r = t[2];
                return t[0] < 10 ? "lesszoom10" : (10 !== t[0] && (12 === t[0] ? (e = Math.floor(e / 4),
                r = Math.floor(r / 4)) : 14 === t[0] ? (e = Math.floor(e / 16),
                r = Math.floor(r / 16)) : 15 === t[0] && (e = Math.floor(e / 32),
                r = Math.floor(r / 32))),
                getUploadName(e, r))
            }
            var labelsUtil = {
                Bj: function(t) {
                    var e, r = {};
                    for (e in t = void 0 === t ? {} : t)
                        t.hasOwnProperty(e) && (r[e] = 1);
                    return r
                },
                zj: function(t, e) {
                    t.gs = e,
                    t.qj = e.options || {},
                    t.Wj = e.Wj || {},
                    t.Fs = e.Fs || {},
                    t.Gj = e.Gj || {},
                    t.Hj = e.Hj || {},
                    t.Vj = e.Vj || {},
                    t.$j = e.$j || 0
                },
                Yj: function(t, e) {
                    void 0 === t && (t = [NaN, NaN, NaN, NaN]),
                    void 0 === e && (e = [0, 0, 0, 1]);
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        isNaN(n) && (t[r] = e[r])
                    }
                    return t
                },
                Kj: function(t) {
                    return [((16711680 & t) >> 16) / 255, ((65280 & t) >> 8) / 255, (255 & t) / 255, 1]
                },
                Xj: function(t, e) {
                    for (var r = [], n = (e = void 0 === e ? {} : e).qw, i = e.Aw, a = e.complete, o = 0, s = t; o < s.length; o++) {
                        var u = s[o]
                          , u = new Promise(u);
                        r.push(u)
                    }
                    var f = 0;
                    Promise.all(r).then(function() {
                        n && n.apply(void 0, arguments),
                        a && !f && (f = 1,
                        a.apply(void 0, arguments))
                    })["catch"](function() {
                        i && i.apply(void 0, arguments),
                        a && !f && (f = 1,
                        a.apply(void 0, arguments))
                    })
                },
                Jj: function(t, e) {
                    var r = t[0]
                      , n = void 0 === (n = t[1]) ? 0 : n
                      , i = e[0]
                      , a = void 0 === (a = e[1]) ? 0 : a;
                    return (void 0 === r ? 0 : r) <= (i = void 0 === i ? 0 : i) ? i <= n ? a < n ? [i, a] : [i, n] : null : labelsUtil.Jj(e, t)
                },
                measureText: function(t, e, r, n) {
                    if (void 0 === e && (e = ""),
                    "3D" === (n = void 0 === n ? "3D" : n))
                        return t.measureText(e, r)
                },
                lnglatToContainer: function(t, e) {
                    return (void 0 === (e = e.zoom) ? 20 : e) < LocalZoom ? t : (e = lcs.getLocalByCoord(t),
                    vector.Ip(t, e.center))
                },
                Sd: function(t, e) {
                    var r = t[0]
                      , t = void 0 === (t = t[1]) ? 0 : t
                      , n = e[0]
                      , e = void 0 === (e = e[1]) ? 0 : e
                      , n = Math.abs((void 0 === n ? 0 : n) - (void 0 === r ? 0 : r))
                      , r = Math.abs(e - t);
                    return Math.sqrt(Math.pow(n, 2) + Math.pow(r, 2))
                },
                getAngle: function(t, e) {
                    var r = t[0]
                      , t = t[1]
                      , n = (void 0 === (n = e[0]) ? 0 : n) - (void 0 === r ? 0 : r)
                      , r = (void 0 === (e = e[1]) ? 0 : e) - (void 0 === t ? 0 : t);
                    return 0 == n ? r < 0 ? 3 * Math.PI / 2 : Math.PI / 2 : 0 === (e = Math.atan(r / n)) || 0 < e ? 0 <= n ? e : e + Math.PI : 0 < n ? 2 * Math.PI + e : Math.PI + e
                },
                Fd: function(t, e, r) {
                    for (var n = t[0], i = void 0 === n ? 0 : n, a = void 0 === (n = t[1]) ? 0 : n, o = (void 0 === (t = e[0]) ? 0 : t) - i, s = (void 0 === (n = e[1]) ? 0 : n) - a, u = [], f = 0; f < r; )
                        u.push([i + o / (r + 1) * (f + 1), a + s / (r + 1) * (f + 1)]),
                        f++;
                    return u
                },
                OG: function(t, e, r) {
                    return 0 !== r ? [t[0] + (e[0] - t[0]) * r, t[1] + (e[1] - t[1]) * r] : t
                },
                Ed: function(t, e) {
                    void 0 === e && (e = "ch");
                    var r, n, i, a = (t = void 0 === t ? [] : t).length;
                    return !!a && (r = t[0],
                    a = t[4 <= a ? Math.floor(a / 4 * 3) : a - 1],
                    t = r[0],
                    i = [(n = a[0]) - t, (a = a[1]) - (r = r[1])],
                    ("ch" === e && 1 < Math.abs((a - r) / (n - t)) ? vector.Zj(i, [0, 1]) : vector.Zj(i, [1, 0])) < 0)
                },
                Nd: function(t, e, r) {
                    var n, i = t[0], t = t[1], a = e[0], o = ((e = e[1]) - t) / (a - i), a = [a - i, e - t];
                    return 1 < Math.abs(o) && "x" !== r ? (n = 0 < vector.Zj(a, [0, -1]) ? vector.Qj(a, [0, -1]) : vector.Qj(a, [0, 1]),
                    0 < o && (n = -n)) : (n = 0 < vector.Zj(a, [1, 0]) ? vector.Qj(a, [1, 0]) : vector.Qj(a, [-1, 0]),
                    o < 0 && (n = -n)),
                    n
                },
                Od: function(t, e, r) {
                    var n = r * Math.sin(e)
                      , r = r * Math.cos(e);
                    return [t[0] + r, t[1] + n]
                },
                jd: function(t, e, r, n) {
                    var t = vector.Ip(t, e)
                      , i = vector.length(t)
                      , r = vector.Ip(r, e)
                      , a = vector.length(r)
                      , t = vector.Zj(t, r)
                      , t = Math.acos(t / (i * a))
                      , a = Math.PI - t
                      , t = i * Math.sin(a)
                      , i = i * Math.cos(a)
                      , a = Math.sqrt(Math.pow(n, 2) - Math.pow(t, 2)) - i
                      , n = 0 === r[0] ? 0 < r[1] ? Math.PI / 2 : -Math.PI / 2 : Math.atan(r[1] / r[0])
                      , t = Math.abs(a * Math.sin(n))
                      , i = a * Math.cos(n)
                      , a = vector.Zj(r, [1, 0])
                      , n = vector.Zj(r, [0, 1]);
                    return vector.add(e, [0 <= a ? i : -i, 0 <= n ? t : -t])
                },
                rank: function(t) {
                    for (var e = [], r = 0; r < t.length; r++) {
                        var n = parseFloat(t[r]);
                        n < 0 ? (t.splice(r--, 1),
                        e.push(n)) : t[r] = n
                    }
                    return t.sort(function(t, e) {
                        return t - e
                    }),
                    e.concat(t)
                },
                $p: function(t) {
                    var e = CONSTS.Mp
                      , r = CONSTS.Rp;
                    return t[1] >= zoomRange[1] && (t[1] = r),
                    t[0] <= zoomRange[0] && (t[0] = e),
                    t
                },
                toString: function(t, e) {
                    void 0 === e && (e = 4);
                    var r = "";
                    if (t)
                        for (var n = 0, i = t; n < i.length; n++) {
                            var a = i[n];
                            r += (a + "").length < e ? a : a.toFixed(e)
                        }
                    return r
                },
                xf: function(t, e) {
                    var r, n, i, a = [], o = e.ja, s = e.Fa, u = e.Oa, f = e.Ea;
                    for (r in t)
                        !t.hasOwnProperty(r) || r === CONSTS.gH || r === CONSTS.FN || r === CONSTS.RB || "shields" !== r && ("subwayLabel" === r && a.push(t[r]),
                        o) && (i = r.split("-"),
                        n = parseInt(i[1], 10),
                        i = parseInt(i[2], 10),
                        t[r]) && t[r].zo && 14 <= t[r].zo.z && !(o <= n && n <= u && s <= i && i <= f) || a.push(t[r]);
                    return a.length ? a : t
                },
                EQ: function(t, e) {
                    for (var r = [], n = e.length, i = 0; i < n - 1; i++) {
                        var a = t.substring(e[i], e[i + 1]);
                        r.push(a)
                    }
                    return n ? r : Array.from(t)
                },
                aQ: function(t) {
                    for (var e = [], r = 0; r < t.length; r++) {
                        for (var n = t[r], i = [], a = 0; a < n.length; a++) {
                            var o = n.charCodeAt(a);
                            i.push(o)
                        }
                        var s = i.join("|");
                        e.push(s)
                    }
                    return e
                },
                j8t: function(t, e, r) {
                    var n = ""
                      , i = []
                      , a = "";
                    if (t.name) {
                        if (t.JQ && 0 < t.JQ.length)
                            n = getSpiltLineWithSpiltIndex(t.name, t.JQ);
                        else if (r) {
                            var o = r.lineBreak(t.name, {
                                from: "labelsLayer",
                                CO: []
                            })
                              , s = 0
                              , u = "";
                            if (2 <= o.oQ.length) {
                                for (var f = 1, c = o.oQ.length - 1; f < c; f++)
                                    u += t.name.slice(s, o.oQ[f]) + " ",
                                    s = o.oQ[f];
                                u += t.name.slice(s)
                            } else
                                u = t.name;
                            n = u
                        } else
                            n = t.name;
                        a = "ch"
                    } else {
                        switch (e) {
                        case "en":
                            n = t.name_en,
                            i = t.iQ,
                            a = "en";
                            break;
                        case "local":
                            n = t.QQ,
                            i = t.$G,
                            a = t.CQ;
                            break;
                        default:
                            n = t.BQ,
                            a = "ch"
                        }
                        n || (t.name_en ? (n = t.name_en,
                        i = t.iQ,
                        a = "en") : t.QQ && (n = t.QQ,
                        i = t.$G,
                        a = t.QQ))
                    }
                    return {
                        name: n,
                        $G: i,
                        type: a
                    }
                },
                tQ: function(t, e, r) {
                    var n = ""
                      , i = []
                      , a = ""
                      , o = t.nameLoc[0];
                    if (o) {
                        if (o.Mii && 0 < o.Mii.length)
                            n = getSpiltLineWithSpiltIndex(o.name, o.Mii);
                        else if (r) {
                            var s = r.lineBreak(o.name, {
                                from: "labelsLayer",
                                CO: []
                            })
                              , u = 0
                              , f = "";
                            if (2 <= s.oQ.length) {
                                for (var c = 1, h = s.oQ.length - 1; c < h; c++)
                                    f += o.name.slice(u, s.oQ[c]) + " ",
                                    u = s.oQ[c];
                                f += o.name.slice(u)
                            } else
                                f = o.name;
                            n = f
                        } else
                            n = o.name;
                        a = "ch"
                    } else {
                        switch (e) {
                        case "en":
                            n = t.name_en,
                            i = t.iQ,
                            a = "en";
                            break;
                        case "local":
                            n = t.QQ,
                            i = t.$G,
                            a = t.CQ;
                            break;
                        default:
                            n = t.BQ,
                            a = "ch"
                        }
                        n || (t.name_en ? (n = t.name_en,
                        i = t.iQ,
                        a = "en") : t.QQ && (n = t.QQ,
                        i = t.$G,
                        a = t.QQ))
                    }
                    return {
                        name: n,
                        $G: i,
                        type: a
                    }
                },
                s6t: function(t, e) {
                    var o = ""
                      , s = []
                      , u = [0]
                      , r = CONSTS.getLanguageData(t, e)
                      , t = t.nameLoc
                      , f = []
                      , c = "";
                    return (e ? [r, t] : [t]).forEach(function(t, e) {
                        if (t && t[0] && t[0].name && c !== t[0].lang) {
                            if (c = t[0].lang,
                            f.push(t),
                            !t[0].$ii || !t[0].$ii.length) {
                                for (var r = Array.from(t[0].name), n = [0], i = 0, a = 0; a < r.length; a++)
                                    i += r[a].length,
                                    n.push(i);
                                t[0].$ii = n
                            }
                            t[0].Mii && t[0].Mii.length || (t[0].Mii = [t[0].name.length])
                        }
                    }),
                    f.forEach(function(t, e) {
                        var r = t[0];
                        if (o += r.name,
                        1 === e) {
                            for (var n = (t = f[0][0]).Mii, i = t.$ii, a = 1; a < r.$ii.length; a++)
                                s.push(i[i.length - 1] + r.$ii[a]);
                            for (a = 0; a < r.Mii.length; a++)
                                u.push(n[n.length - 1] + r.Mii[a])
                        } else
                            s.push.apply(s, r.$ii),
                            u.push.apply(u, r.Mii)
                    }),
                    {
                        name: o,
                        $G: s,
                        type: "",
                        u6t: u
                    }
                }
            }
              , vector = {
                add: function(t, e) {
                    for (var r = [], n = 0; n < t.length; n++)
                        r[n] = t[n] + e[n];
                    return r
                },
                Ip: function(t, e) {
                    for (var r = [], n = 0; n < t.length; n++)
                        r.push(t[n] - e[n]);
                    return r
                },
                multiply: function(t, e) {
                    for (var r = [], n = 0, i = t; n < i.length; n++) {
                        var a = i[n];
                        r.push(a * e)
                    }
                    return r
                },
                Up: function(t, e) {
                    for (var r = [], n = 0; n < t.length; n++)
                        r[n] = t[n] / e;
                    return r
                },
                tA: function(t) {
                    return this.multiply(t, -1)
                },
                Zj: function(t, e) {
                    var r = t[0]
                      , t = t[1]
                      , n = e[0];
                    return (void 0 === r ? 0 : r) * (void 0 === n ? 0 : n) + (void 0 === t ? 0 : t) * (void 0 === (e = e[1]) ? 0 : e)
                },
                Qj: function(t, e) {
                    var r = vector.Zj(t, e)
                      , t = vector.length(t)
                      , e = vector.length(e);
                    return Math.acos(r / (t * e))
                },
                length: function(t) {
                    var e = t[0]
                      , t = t[1];
                    return Math.sqrt(Math.pow(e, 2) + Math.pow(t, 2))
                }
            }
              , noop = function(t) {};
            function getSpiltLineWithSpiltIndex(t, e) {
                if (0 === e.length)
                    return t.trim();
                for (var r = "", n = 0, i = 0; i < e.length; i++)
                    r += t.substring(n, e[i]) + "\n",
                    n = e[i];
                return (r += t.substring(n)).replace(/\s+$/, "")
            }
            var XHR = {
                send: function(t, e) {
                    void 0 === e && (e = {});
                    var r = new XMLHttpRequest
                      , i = void 0 === (n = e.qw) ? noop : n
                      , a = void 0 === (n = e.Aw) ? noop : n
                      , n = e.Me
                      , o = e.method
                      , e = e.content;
                    return r.onreadystatechange = function() {
                        if (4 === r.readyState && 200 === r.status) {
                            var t = r.response;
                            try {
                                i(t)
                            } catch (e) {
                                a(e)
                            }
                        } else
                            404 === r.status && (r.abort(),
                            a(Error("404")))
                    }
                    ,
                    r.onerror = function(t) {
                        r.abort(),
                        a(t)
                    }
                    ,
                    r.open(o || "GET", t, !0),
                    r.responseType = n || "json",
                    r.send(e || undefined),
                    r
                }
            }
              , scale = Browser.scale
              , LabelsRenderUtil = {
                getBounds: function(t, e) {
                    var r = (e = void 0 === e ? {} : e).zoom
                      , n = e.centerCoord
                      , i = [150 * scale, 150 * scale, 150 * scale, 150 * scale]
                      , a = (t = t.boundsCoord)[0]
                      , o = t[1]
                      , s = t[2]
                      , t = t[3]
                      , u = this.nt(0, 0, r, e)
                      , f = vector.Ip(this.nt(i[0], i[1], r, e), u)
                      , i = vector.Ip(this.nt(i[2], i[3], r, e), u)
                      , u = (e = LocalZoom <= r ? n : [0, 0])[0]
                      , r = e[1];
                    return [[a - u - Math.abs(i[1]), o - r - Math.abs(i[0])], [s - u + Math.abs(f[1]), t - r + Math.abs(f[0])]]
                },
                gz: function(t, e) {
                    var r = e[0]
                      , e = e[1]
                      , n = t[0]
                      , t = t[1]
                      , i = n - r[0]
                      , n = e[0] - n;
                    return 0 <= i && 0 <= t - r[1] && 0 <= n && 0 <= e[1] - t
                },
                getRank: function(t, e) {
                    var r = (e = void 0 === e ? {} : e).forceShow
                      , e = e._z
                      , t = (t.data || {}).rank || 1;
                    return void 0 !== r && r ? t - 1e5 : (void 0 === e ? 0 : e) / 100 * 2e5 + t
                },
                wu: function(t, e, r, n) {
                    var i, a, o, s, u;
                    if (void 0 === t && (t = 0),
                    void 0 === e && (e = 0),
                    n)
                        return s = n.viewState,
                        i = n.view,
                        a = void 0 === (a = n.positionType) ? "relative" : a,
                        "2D" === n.viewMode ? (o = {
                            center: s.centerCoord,
                            rotation: s.rotation,
                            size: n.size
                        },
                        u = (s = s.optimalZoom >= LocalZoom ? n.centerCoord : [0, 0])[0],
                        n.transform.wu(t + u, e + s[1], r, o)) : "relative" === a ? i.H(t, e) : i._u(t, e)
                },
                r0: function(t, e, r, n, i) {
                    var a, o, s, u, f;
                    if (void 0 === t && (t = 0),
                    void 0 === e && (e = 0),
                    void 0 === r && (r = 0),
                    i)
                        return u = i.viewState,
                        a = i.view,
                        o = void 0 === (o = i.positionType) ? "relative" : o,
                        "2D" === i.viewMode ? (s = {
                            center: u.centerCoord,
                            rotation: u.rotation,
                            size: i.size
                        },
                        f = (u = u.optimalZoom >= LocalZoom ? i.centerCoord : [0, 0])[0],
                        i.transform.wu(t + f, e + u[1], n, s)) : "relative" === o ? a.H(t, e, r) : a._u(t, e, r)
                },
                kz: function(t, e, r, n) {
                    if (void 0 === t && (t = []),
                    n = (n = void 0 === n ? {} : n).centerCoord,
                    e < LocalZoom && LocalZoom <= r) {
                        for (var i = n[0], a = n[1], o = [], s = 0, u = t; s < u.length; s++) {
                            var f = u[s];
                            o.push([f[0] - i, f[1] - a])
                        }
                        return o
                    }
                    return t
                },
                nt: function(t, e, r, n) {
                    void 0 === t && (t = 0),
                    void 0 === e && (e = 0);
                    var i = n.view
                      , a = n.transform;
                    return "2D" === n.viewMode ? a.nt(t, e, r) : i.X(t, e)
                },
                MG: function(t, e) {
                    return t < LocalZoom - 1 ? [0, 0] : e
                }
            };
            function isLngLat(t) {
                return t && "AMap.LngLat" === t.className
            }
            function isPixel(t) {
                return t && "AMap.Pixel" === t.className
            }
            function isSize(t) {
                return t && "AMap.Size" === t.className
            }
            function isLayer(t) {
                return Boolean(t && t.el && "AMap.Layer" === t.el)
            }
            function isVectorLayer(t) {
                return t && "AMap.VectorLayer" === t.CLASS_NAME
            }
            function isOverlay(t) {
                return t && t.className && Util.startsWith(t.className, "Overlay")
            }
            function isOverlayGroup(t) {
                return t && ("Overlay.OverlayGroup" === t.className || "Overlay.GeoJSON" === t.className)
            }
            function isCircleMarker(t) {
                return t && t.className && "Overlay.CircleMarker" === t.className
            }
            function isPolyline(t) {
                return t && t.className && "Overlay.Polyline" === t.className
            }
            function isBezierCurve(t) {
                return t && t.className && "Overlay.BezierCurve" === t.className
            }
            function isBounds(t) {
                return t && "AMap.Bounds" === t.className
            }
            function isNumber(t) {
                return "number" == typeof (t = +t) && !isNaN(t)
            }
            function isNumberArray(t) {
                return Array.isArray(t) && isNumber(t[0])
            }
            function isNumberArrayArray(t) {
                return Array.isArray(t) && isNumberArray(t[0])
            }
            function isNumberArrayArrayArray(t) {
                return Array.isArray(t) && isNumberArrayArray(t[0])
            }
            function isNumberArrayArrayArrayArray(t) {
                return Array.isArray(t) && isNumberArrayArrayArray(t[0])
            }
            function isLnglatLike(t) {
                return isLngLat(t) || isNumberArray(t)
            }
            function isLnglatLikeArray(t) {
                return Array.isArray(t) && isLnglatLike(t[0])
            }
            function isLnglatLikeArrayArray(t) {
                return Array.isArray(t) && isLnglatLikeArray(t[0])
            }
            function isLnglatLikeArrayArrayArray(t) {
                return Array.isArray(t) && isLnglatLikeArrayArray(t[0])
            }
            function isInnerLabelsLayer(t) {
                return t && "AMap.Inner.LabelsLayer" === t.CLASS_NAME
            }
            function calcTileMectorBounds(t, e, r) {
                var n = ProjectionManager.getProjection("EPSG:3857")
                  , a = 180 / (t = Math.pow(2, t))
                  , i = (e = (i = 360 / t) * e - 180) + i
                  , r = (t = a * (t - r - 1) - 90) + a;
                return [e = (a = n.project(e, t))[0], t = a[1], (a = n.project(i, r))[0], a[1]]
            }
            function parseLngLatData(t) {
                if (Array.isArray(t)) {
                    var e;
                    if (!Array.isArray(t[0]))
                        return "string" == (e = typeof t[0]) || "number" == e ? new LngLat$2(t[0],t[1]) : t;
                    for (var r = 0; r < t.length; r += 1)
                        t[r] = parseLngLatData(t[r])
                }
                return t
            }
            function jsonLngLatData(t) {
                if (isLngLat(t))
                    return [t.getLng(), t.getLat()];
                if (Array.isArray(t)) {
                    for (var e = t.slice(0), r = 0; r < e.length; r += 1)
                        e[r] = jsonLngLatData(e[r]);
                    return e
                }
                return t
            }
            var Coordinate = {
                lr: function(t, e) {
                    for (var r = Infinity, n = 0, i = 1, a = e.length; i < a; n = i,
                    i += 1)
                        r = Math.min(r, this.ur(t, [e[n], e[i]]));
                    return Math.sqrt(r)
                },
                ur: function(t, e) {
                    return this.cr(t, this.closestOnSegment(t, e))
                },
                cr: function(t, e) {
                    var r = t[0] - e[0];
                    return r * r + (t = t[1] - e[1]) * t
                },
                pr: function(t, e, r, n) {
                    var i, a;
                    return n = n || 1e-6,
                    r[0] === e[0] ? (i = Math.min(e[1], r[1]),
                    a = Math.max(e[1], r[1]),
                    Math.abs(t[0] - r[0]) < n && t[1] >= i && t[1] <= a) : (i = Math.min(e[0], r[0]),
                    a = Math.max(e[0], r[0]),
                    r = (r[1] - e[1]) / (r[0] - e[0]) * (t[0] - e[0]) + e[1],
                    Math.abs(r - t[1]) < n && t[0] >= i && t[0] <= a)
                },
                closestOnSegment: function(t, e) {
                    var r, n = t[0], i = e[0], e = e[1], a = i[0], o = e[0], s = o - a, u = (e = e[1]) - (i = i[1]), t = (n = 0 == s && 0 == u ? 0 : (s * (n - a) + u * (t[1] - i)) / (s * s + u * u || 0)) <= 0 ? (r = a,
                    i) : 1 <= n ? (r = o,
                    e) : (r = a + n * s,
                    i + n * u);
                    return [r, t]
                },
                isClockwise: function(t) {
                    for (var e, r, n = t.length, i = 0, a = t[n - 1], o = a[0], s = a[1], u = 0; u < n; u += 1)
                        i += ((e = (r = t[u])[0]) - o) * ((r = r[1]) + s),
                        o = e,
                        s = r;
                    return 0 < i
                },
                ss: function(t, e, r) {
                    for (var n = t[0], i = t[1], a = !1, o = e.length, s = 0, u = o - 1; s < o; u = s,
                    s += 1) {
                        var f = !1
                          , c = e[s][0]
                          , h = e[s][1]
                          , l = e[u][0]
                          , d = e[u][1];
                        if (c === n && h === i || l === n && d === i)
                            return !!r;
                        if (h < i == i <= d) {
                            if (n === (l = (l - c) * (i - h) / (d - h) + c))
                                return !!r;
                            f = n < l
                        }
                        f && (a = !a)
                    }
                    return a
                },
                dr: function(t, e) {
                    for (var r, n = function(t, e, r) {
                        return (r[0] - e[0]) * (t[1] - e[1]) > (r[1] - e[1]) * (t[0] - e[0])
                    }, i = function(t, e, r, n) {
                        var i = [t[0] - e[0], t[1] - e[1]]
                          , a = [r[0] - n[0], r[1] - n[1]]
                          , t = t[0] * e[1] - t[1] * e[0]
                          , e = r[0] * n[1] - r[1] * n[0]
                          , r = 1 / (i[0] * a[1] - i[1] * a[0]);
                        return [(t * a[0] - e * i[0]) * r, (t * a[1] - e * i[1]) * r]
                    }, a = t, o = e[e.length - 2], s = 0, u = e.length - 1; s < u; s++) {
                        for (var f = e[s], c = a, a = [], h = c[c.length - 1], l = 0, d = c.length; l < d; l++)
                            n(r = c[l], o, f) ? (n(h, o, f) || a.push(i(o, f, h, r)),
                            a.push(r)) : n(h, o, f) && a.push(i(o, f, h, r)),
                            h = r;
                        o = f
                    }
                    return a.length < 3 ? [] : (a.push(a[0]),
                    a)
                }
            }
              , Pixel = function() {
                function r(t, e, r) {
                    if (void 0 === r && (r = !1),
                    this.className = "AMap.Pixel",
                    (isNaN(t) || isNaN(e)) && !window._AMapConfig)
                        throw Error("Invalid Object: Pixel(" + t + ", " + e + ")");
                    this.x = r ? Math.round(t) : Number(t),
                    this.y = r ? Math.round(e) : Number(e)
                }
                return r.prototype.getX = function() {
                    return this.x
                }
                ,
                r.prototype.round = function() {
                    return new r(Math.round(this.x),Math.round(this.y))
                }
                ,
                r.prototype.getY = function() {
                    return this.y
                }
                ,
                r.prototype.toString = function() {
                    return this.x + "," + this.y
                }
                ,
                r.prototype.equals = function(t) {
                    return t instanceof r && Math.max(Math.abs(this.x - t.x), Math.abs(this.y - t.y)) <= 1e-9
                }
                ,
                r.prototype.toArray = function() {
                    return [this.x, this.y]
                }
                ,
                r.prototype.subtract = function(t, e) {
                    return new r(this.x - t.x,this.y - t.y,e)
                }
                ,
                r.prototype.multiplyBy = function(t, e) {
                    return new r(this.x * t,this.y * t,e)
                }
                ,
                r.prototype.direction = function() {
                    var t, e = this.x, r = this.y;
                    return 0 === e && 0 === r ? null : 0 === e ? 0 < r ? 90 : 270 : (t = 180 * Math.atan(r / e) / Math.PI,
                    e < 0 && 0 < r || e < 0 && r < 0 ? 180 + t : 0 < e && r < 0 ? 360 + t : t)
                }
                ,
                r.prototype.toJSON = function() {
                    return [this.x, this.y]
                }
                ,
                r
            }()
              , commonjsGlobal = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
            function commonjsRequire() {
                throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")
            }
            function unwrapExports(t) {
                return t && t.gP && Object.prototype.hasOwnProperty.call(t, "default") ? t["default"] : t
            }
            function createCommonjsModule(t, e) {
                return t(e = {
                    exports: {}
                }, e.exports),
                e.exports
            }
            var dist = createCommonjsModule(function(s, t) {
                function u(t, e) {
                    return e < t ? 1 : t < e ? -1 : 0
                }
                function p(t, e, r) {
                    null === e ? (t.PP = !1,
                    t.OP = !0) : (t._P === e._P ? (t.PP = !e.PP,
                    t.OP = e.OP) : (t.PP = !e.OP,
                    t.OP = e.NP() ? !e.PP : e.PP),
                    e && (t.CP = !f(e, r) || e.NP() ? e.CP : e)),
                    e = f(t, r),
                    t.hN = e ? function(t, e) {
                        var r, n = !t.PP, i = !t.OP;
                        switch (e) {
                        case M:
                            r = n && i;
                            break;
                        case P:
                            r = n || i;
                            break;
                        case k:
                            r = n ^ i;
                            break;
                        case $:
                            r = t._P ? n && !i : i && !n
                        }
                        return r ? 1 : -1
                    }(t, r) : 0
                }
                function f(t, e) {
                    switch (t.type) {
                    case a:
                        switch (e) {
                        case M:
                            return !t.OP;
                        case P:
                            return t.OP;
                        case $:
                            return t._P && t.OP || !t._P && !t.OP;
                        case k:
                            return !0
                        }
                        break;
                    case S:
                        return e === M || e === P;
                    case x:
                        return e === $;
                    case T:
                        return !1
                    }
                    return !1
                }
                function v(t, e) {
                    return t[0] === e[0] && t[1] === e[1]
                }
                function I(t, e, r, n, i) {
                    var a, o, s, u, f = e[0], c = n[0], h = 0, l = 0, d = (f < c == -f < c ? (a = f,
                    f = e[++h]) : (a = c,
                    c = n[++l]),
                    0);
                    if (h < t && l < r)
                        for (f < c == -f < c ? (s = a - ((o = f + a) - f),
                        f = e[++h]) : (s = a - ((o = c + a) - c),
                        c = n[++l]),
                        a = o,
                        0 !== s && (i[d++] = s); h < t && l < r; )
                            f < c == -f < c ? (s = a - ((o = a + f) - (u = o - a)) + (f - u),
                            f = e[++h]) : (s = a - ((o = a + c) - (u = o - a)) + (c - u),
                            c = n[++l]),
                            a = o,
                            0 !== s && (i[d++] = s);
                    for (; h < t; )
                        s = a - ((o = a + f) - (u = o - a)) + (f - u),
                        f = e[++h],
                        a = o,
                        0 !== s && (i[d++] = s);
                    for (; l < r; )
                        s = a - ((o = a + c) - (u = o - a)) + (c - u),
                        c = n[++l],
                        a = o,
                        0 !== s && (i[d++] = s);
                    return 0 === a && 0 !== d || (i[d++] = a),
                    d
                }
                function e(t) {
                    return new (commonjsGlobal.Float64Array ? Float64Array : Array)(t)
                }
                function i(t, e, r) {
                    var n, i, a, o, s, n = t[0], i = e[0], a = r[0], s = (o = ((t = t[1]) - (r = r[1])) * (i - a)) - (u = (n - a) * ((e = e[1]) - r)), u = 0 == o || 0 == u || 0 < o != 0 < u || (o = Math.abs(o + u),
                    Math.abs(s) >= H * o) ? s : -function(t, e, r, n, i, a, o) {
                        var s, u, f, c, h, l, d, v, g, y = t - i, p = r - i, m = e - a, b = n - a, w = y * b, A = L * y, T = A - (A - y), S = y - T, x = S * (f = b - (u = (A = L * b) - (A - b))) - (w - T * u - S * u - T * f), M = (T = (A = L * m) - (A - m),
                        A = L * p,
                        C[0] = x - ((c = x - (v = (S = m - T) * (f = p - (u = A - (A - p))) - ((d = m * p) - T * u - S * u - T * f))) + (s = x - c)) + (s - v),
                        C[1] = (l = w - ((h = w + c) - (s = h - w)) + (c - s)) - ((c = l - d) + (s = l - c)) + (s - d),
                        C[2] = h - ((g = h + c) - (s = g - h)) + (c - s),
                        C[3] = g,
                        function(e) {
                            for (var r = e[0], n = 1; n < 4; n++)
                                r += e[n];
                            return r
                        }(C)), P = W * o;
                        return P <= M || P <= -M || (t = t - (y + (s = t - y)) + (s - i),
                        r = r - (p + (s = r - p)) + (s - i),
                        i = e - (m + (s = e - m)) + (s - a),
                        e = n - (b + (s = n - b)) + (s - a),
                        0 == t && 0 == i && 0 == r && 0 == e) || (P = q * o + z * Math.abs(M)) <= (M += y * e + b * t - (m * r + p * i)) || P <= -M ? M : (x = (S = t - (T = (A = L * t) - (A - t))) * (f = b - (u = (A = L * b) - (A - b))) - ((w = t * b) - T * u - S * u - T * f),
                        T = (A = L * i) - (A - i),
                        A = L * p,
                        O[0] = x - ((c = x - (v = (S = i - T) * (f = p - (u = A - (A - p))) - ((d = i * p) - T * u - S * u - T * f))) + (s = x - c)) + (s - v),
                        O[1] = (l = w - ((h = w + c) - (s = h - w)) + (c - s)) - ((c = l - d) + (s = l - c)) + (s - d),
                        O[2] = h - ((g = h + c) - (s = g - h)) + (c - s),
                        O[3] = g,
                        n = I(4, C, 4, O, N),
                        x = (S = y - (T = (A = L * y) - (A - y))) * (f = e - (u = (A = L * e) - (A - e))) - ((w = y * e) - T * u - S * u - T * f),
                        T = (A = L * m) - (A - m),
                        A = L * r,
                        O[0] = x - ((c = x - (v = (S = m - T) * (f = r - (u = A - (A - r))) - ((d = m * r) - T * u - S * u - T * f))) + (s = x - c)) + (s - v),
                        O[1] = (l = w - ((h = w + c) - (s = h - w)) + (c - s)) - ((c = l - d) + (s = l - c)) + (s - d),
                        O[2] = h - ((g = h + c) - (s = g - h)) + (c - s),
                        O[3] = g,
                        a = I(n, N, 4, O, _),
                        x = (S = t - (T = (A = L * t) - (A - t))) * (f = e - (u = (A = L * e) - (A - e))) - ((w = t * e) - T * u - S * u - T * f),
                        T = (A = L * i) - (A - i),
                        A = L * r,
                        O[0] = x - ((c = x - (v = (S = i - T) * (f = r - (u = A - (A - r))) - ((d = i * r) - T * u - S * u - T * f))) + (s = x - c)) + (s - v),
                        O[1] = (l = w - ((h = w + c) - (s = h - w)) + (c - s)) - ((c = l - d) + (s = l - c)) + (s - d),
                        O[2] = h - ((g = h + c) - (s = g - h)) + (c - s),
                        O[3] = g,
                        o = I(a, _, 4, O, F),
                        F[o - 1])
                    }(n, t, i, e, a, r, o);
                    return 0 < u ? -1 : u < 0 ? 1 : 0
                }
                function m(t, e) {
                    var r = t.point
                      , n = e.point;
                    return r[0] > n[0] ? 1 : r[0] < n[0] ? -1 : r[1] !== n[1] ? r[1] > n[1] ? 1 : -1 : (n = e,
                    e = r,
                    (r = t).left === n.left ? 0 === i(e, r.IP.point, n.IP.point) ? !r._P && n._P ? 1 : -1 : r.FP(n.IP.point) ? -1 : 1 : r.left ? 1 : -1)
                }
                function g(t, e, r) {
                    var n = new l(e,!1,t,t._P)
                      , e = new l(e,!0,t.IP,t._P);
                    v(t.point, t.IP.point) && console.warn("what is that, a collapsed segment?", t),
                    n.UP = e.UP = t.UP,
                    0 < m(e, t.IP) && (t.IP.left = !0,
                    e.left = !1),
                    t.IP.IP = e,
                    t.IP = n,
                    r.push(e),
                    r.push(n)
                }
                function y(t, e) {
                    return t[0] * e[1] - t[1] * e[0]
                }
                function b(t, e) {
                    return t[0] * e[0] + t[1] * e[1]
                }
                function w(t, e, r) {
                    n = t.point,
                    i = t.IP.point,
                    h = e.point,
                    d = e.IP.point;
                    var n, i, o, s, u, c, h, l, d, i = [i[0] - n[0], i[1] - n[1]], d = [d[0] - h[0], d[1] - h[1]], u = [h[0] - n[0], h[1] - n[1]], s = y(i, d), c = b(i, i);
                    function f(t, e, r) {
                        return [t[0] + e * r[0], t[1] + e * r[1]]
                    }
                    return 0 === (d = (u = 0 < s * s ? (o = y(u, d) / s) < 0 || 1 < o || (l = y(u, i) / s) < 0 || 1 < l ? null : 0 != o && 1 != o && (0 == l || 1 == l) ? [f(h, l, d)] : [f(n, o, i)] : !(0 < (s = y(u, i)) * s) && (l = (h = b(i, u) / c) + b(i, d) / c,
                    o = Math.min(h, l),
                    s = Math.max(h, l),
                    o <= 1) && 0 <= s ? 1 === o ? [f(n, 0 < o ? o : 0, i)] : 0 === s ? [f(n, s < 1 ? s : 1, i)] : [f(n, 0 < o ? o : 0, i), f(n, s < 1 ? s : 1, i)] : null) ? u.length : 0) || 1 === d && (v(t.point, e.point) || v(t.IP.point, e.IP.point)) || 2 === d && t._P === e._P ? 0 : 1 === d ? (v(t.point, u[0]) || v(t.IP.point, u[0]) || g(t, u[0], r),
                    v(e.point, u[0]) || v(e.IP.point, u[0]) || g(e, u[0], r),
                    1) : (l = h = !(c = []),
                    v(t.point, e.point) ? h = !0 : 1 === m(t, e) ? c.push(e, t) : c.push(t, e),
                    v(t.IP.point, e.IP.point) ? l = !0 : 1 === m(t.IP, e.IP) ? c.push(e.IP, t.IP) : c.push(t.IP, e.IP),
                    h && l || h ? (e.type = T,
                    t.type = e.PP === t.PP ? S : x,
                    h && !l && g(c[1].IP, c[0].point, r),
                    2) : (l ? g(c[0], c[1].point, r) : c[0] !== c[3].IP ? (g(c[0], c[1].point, r),
                    g(c[1], c[2].point, r)) : (g(c[0], c[1].point, r),
                    g(c[3].IP, c[2].point, r)),
                    3))
                }
                function B(t, e) {
                    var r, n;
                    return t === e ? 0 : 0 !== i(t.point, t.IP.point, e.point) || 0 !== i(t.point, t.IP.point, e.IP.point) ? v(t.point, e.point) ? t.FP(e.IP.point) ? -1 : 1 : t.point[0] === e.point[0] ? t.point[1] < e.point[1] ? -1 : 1 : 1 === m(t, e) ? e.RP(t.point) ? -1 : 1 : t.FP(e.point) ? -1 : 1 : t._P !== e._P ? t._P ? -1 : 1 : (r = t.point,
                    n = e.point,
                    r[0] === n[0] && r[1] === n[1] ? (r = t.IP.point,
                    n = e.IP.point,
                    r[0] === n[0] && r[1] === n[1] ? 0 : t.UP > e.UP ? 1 : -1) : 1 === m(t, e) ? 1 : -1)
                }
                function h(t, e) {
                    return t < e ? -1 : e < t ? 1 : 0
                }
                function V(t, e, r, n, i, a) {
                    for (var o = 0, s = t.length - 1; o < s; o++) {
                        var u = t[o]
                          , f = t[o + 1]
                          , c = new l(u,!1,undefined,e)
                          , h = new l(f,!1,c,e);
                        c.IP = h,
                        u[0] === f[0] && u[1] === f[1] || (c.UP = h.UP = r,
                        a || (c.DP = !1,
                        h.DP = !1),
                        0 < m(c, h) ? h.left = !0 : c.left = !0,
                        f = u[0],
                        u = u[1],
                        i[0] = j(i[0], f),
                        i[1] = j(i[1], u),
                        i[2] = d(i[2], f),
                        i[3] = d(i[3], u),
                        n.push(c),
                        n.push(h))
                    }
                }
                function r(t, e, r) {
                    if ("number" == typeof t[0][0][0] && (t = [t]),
                    u = e = "number" == typeof e[0][0][0] ? [e] : e,
                    n = null,
                    (f = t).length * u.length == 0 && (r === M ? n = D : r === $ ? n = f : r !== P && r !== k || (n = 0 === f.length ? u : f)),
                    n)
                        return n === D ? null : n;
                    var o, s = [Infinity, Infinity, -Infinity, -Infinity], u = [Infinity, Infinity, -Infinity, -Infinity], f = function(t, e, r, n, i) {
                        for (var a, o, s, u, f = new U(null,m), c = 0, h = t.length; c < h; c++)
                            for (s = 0,
                            u = (a = t[c]).length; s < u; s++)
                                (o = 0 === s) && R++,
                                V(a[s], !0, R, f, r, o);
                        for (c = 0,
                        h = e.length; c < h; c++)
                            for (s = 0,
                            u = (a = e[c]).length; s < u; s++)
                                o = 0 === s,
                                (o = i !== $ && o) && R++,
                                V(a[s], !1, R, f, n, o);
                        return f
                    }(t, e, s, u, r), n = t;
                    if (t = e,
                    e = r,
                    o = null,
                    (s[0] > u[2] || s[2] < u[0] || u[3] < s[1] || s[3] < u[1]) && (e === M ? o = D : e === $ ? o = n : e !== P && e !== k || (o = n.concat(t))),
                    o)
                        return o === D ? null : o;
                    for (var c = function(t) {
                        for (var c = function(t) {
                            for (var e, r, n = [], i = 0, a = t.length; i < a; i++)
                                ((e = t[i]).left && e.EP || !e.left && e.IP.EP) && n.push(e);
                            for (var o = !1; !o; )
                                for (o = !0,
                                i = 0,
                                a = n.length; i < a; i++)
                                    i + 1 < a && 1 === m(n[i], n[i + 1]) && (r = n[i],
                                    n[i] = n[i + 1],
                                    n[i + 1] = r,
                                    o = !1);
                            for (i = 0,
                            a = n.length; i < a; i++)
                                (e = n[i]).lN = i;
                            for (i = 0,
                            a = n.length; i < a; i++)
                                (e = n[i]).left || (r = e.lN,
                                e.lN = e.IP.lN,
                                e.IP.lN = r);
                            return n
                        }(t), h = {}, l = [], d = 0, r = c.length; d < r; d++)
                            !function() {
                                if (!h[d]) {
                                    var t, e, r, n, i = l.length, a = (f = c[d],
                                    t = l,
                                    e = i,
                                    n = new E,
                                    null != f.CP ? (r = (f = f.CP).dN,
                                    0 < f.hN ? null != (f = t[r]).gN ? (t[f = f.gN].vN.push(e),
                                    n.gN = f,
                                    n.depth = t[r].depth) : (t[r].vN.push(e),
                                    n.gN = r,
                                    n.depth = t[r].depth + 1) : (n.gN = null,
                                    n.depth = t[r].depth)) : (n.gN = null,
                                    n.depth = 0),
                                    n), o = function(t) {
                                        h[t] = !0,
                                        c[t].dN = i
                                    }, s = d, u = d, f = c[d].point;
                                    for (a.points.push(f); o(s),
                                    o(s = c[s].lN),
                                    a.points.push(c[s].point),
                                    (s = function(t, e, r, n) {
                                        var i, a = t + 1, o = e[t].point, s = e.length;
                                        for (a < s && (i = e[a].point); a < s && i[0] === o[0] && i[1] === o[1]; ) {
                                            if (!r[a])
                                                return a;
                                            i = e[++a].point
                                        }
                                        for (a = t - 1; r[a] && n < a; )
                                            a--;
                                        return a
                                    }(s, c, h, u)) != u; )
                                        ;
                                    l.push(a)
                                }
                            }();
                        return l
                    }(function(t, e, r, n) {
                        for (var i = new A(B), a = [], o = Math.min(e[2], r[2]); 0 !== t.length; ) {
                            var s, u, f, c, h, l = t.pop();
                            if (a.push(l),
                            n === M && l.point[0] > o || n === $ && l.point[0] > e[2])
                                break;
                            l.left ? (f = u = i.Xc(l),
                            u = u !== (s = i.MP()) ? i.NM(u) : null,
                            f = i.next(f),
                            p(l, c = u ? u.key : null, n),
                            f && 2 === w(l, f.key, t) && (p(l, c, n),
                            p(l, f.key, n)),
                            u && 2 === w(u.key, l, t) && (p(c, (h = (h = u) !== s ? i.NM(h) : null) ? h.key : null, n),
                            p(l, c, n))) : (l = l.IP,
                            f = u = i.find(l),
                            u && f && (u = u !== s ? i.NM(u) : null,
                            f = i.next(f),
                            i.remove(l),
                            f) && u && w(u.key, f.key, t))
                        }
                        return a
                    }(f, s, u, r)), h = [], l = 0; l < c.length; l++) {
                        var d = c[l];
                        if (d.pN()) {
                            for (var v = [d.points], g = 0; g < d.vN.length; g++) {
                                var y = d.vN[g];
                                v.push(c[y].points)
                            }
                            h.push(v)
                        }
                    }
                    return h
                }
                var A, a, T, S, x, M, P, $, k, l, L, z, H, W, q, C, N, _, F, O, E, U, d, j, R, D, o = {
                    size: {
                        configurable: !0
                    }
                };
                (A = function A(t, e) {
                    void 0 === e && (e = !1),
                    this.bP = t = void 0 === t ? u : t,
                    this.yP = null,
                    this._size = 0,
                    this.mP = !!e
                }
                ).prototype.TP = function(t) {
                    var e = t.right;
                    e && (t.right = e.left,
                    e.left && (e.left.parent = t),
                    e.parent = t.parent),
                    t.parent ? t === t.parent.left ? t.parent.left = e : t.parent.right = e : this.yP = e,
                    e && (e.left = t),
                    t.parent = e
                }
                ,
                A.prototype.wP = function(t) {
                    var e = t.left;
                    e && (t.left = e.right,
                    e.right && (e.right.parent = t),
                    e.parent = t.parent),
                    t.parent ? t === t.parent.left ? t.parent.left = e : t.parent.right = e : this.yP = e,
                    e && (e.right = t),
                    t.parent = e
                }
                ,
                A.prototype.AP = function(t) {
                    for (; t.parent; ) {
                        var e = t.parent;
                        e.parent ? e.left === t && e.parent.left === e ? (this.wP(e.parent),
                        this.wP(e)) : e.right === t && e.parent.right === e ? (this.TP(e.parent),
                        this.TP(e)) : e.left === t && e.parent.right === e ? (this.wP(e),
                        this.TP(e)) : (this.TP(e),
                        this.wP(e)) : e.left === t ? this.wP(e) : this.TP(e)
                    }
                }
                ,
                A.prototype.xP = function(t) {
                    for (var e, r, n, i; t.parent; )
                        (r = (e = t.parent).parent) && r.parent ? ((n = r.parent).left === r ? n.left = t : n.right = t,
                        t.parent = n) : (t.parent = null,
                        this.yP = t),
                        n = t.left,
                        i = t.right,
                        t === e.left ? (r && (r.left === e ? (e.right ? (r.left = e.right,
                        r.left.parent = r) : r.left = null,
                        (e.right = r).parent = e) : (n ? (r.right = n).parent = r : r.right = null,
                        (t.left = r).parent = t)),
                        i ? (e.left = i).parent = e : e.left = null,
                        (t.right = e).parent = t) : (r && (r.right === e ? (e.left ? (r.right = e.left,
                        r.right.parent = r) : r.right = null,
                        (e.left = r).parent = e) : (i ? (r.left = i).parent = r : r.left = null,
                        (t.right = r).parent = t)),
                        n ? (e.right = n).parent = e : e.right = null,
                        (t.left = e).parent = t)
                }
                ,
                A.prototype.replace = function(t, e) {
                    t.parent ? t === t.parent.left ? t.parent.left = e : t.parent.right = e : this.yP = e,
                    e && (e.parent = t.parent)
                }
                ,
                A.prototype.MP = function(t) {
                    if (t = void 0 === t ? this.yP : t)
                        for (; t.left; )
                            t = t.left;
                    return t
                }
                ,
                A.prototype.SP = function(t) {
                    if (t = void 0 === t ? this.yP : t)
                        for (; t.right; )
                            t = t.right;
                    return t
                }
                ,
                A.prototype.Xc = function(t, e) {
                    var r = this.yP
                      , n = null
                      , i = this.bP;
                    if (this.mP)
                        for (; r; ) {
                            if (0 === i((n = r).key, t))
                                return;
                            r = i(r.key, t) < 0 ? r.right : r.left
                        }
                    else
                        for (; r; )
                            r = i((n = r).key, t) < 0 ? r.right : r.left;
                    return r = {
                        key: t,
                        data: e,
                        left: null,
                        right: null,
                        parent: n
                    },
                    n ? i(n.key, r.key) < 0 ? n.right = r : n.left = r : this.yP = r,
                    this.xP(r),
                    this._size++,
                    r
                }
                ,
                A.prototype.find = function find(t) {
                    for (var e = this.yP, r = this.bP; e; ) {
                        var n = r(e.key, t);
                        if (n < 0)
                            e = e.right;
                        else {
                            if (!(0 < n))
                                return e;
                            e = e.left
                        }
                    }
                    return null
                }
                ,
                A.prototype.contains = function contains(t) {
                    for (var e = this.yP, r = this.bP; e; ) {
                        var n = r(t, e.key);
                        if (0 === n)
                            return !0;
                        e = n < 0 ? e.left : e.right
                    }
                    return !1
                }
                ,
                A.prototype.remove = function(t) {
                    var e;
                    return !!(t = this.find(t)) && (this.xP(t),
                    t.left ? t.right ? ((e = this.MP(t.right)).parent !== t && (this.replace(e, e.right),
                    e.right = t.right,
                    e.right.parent = e),
                    this.replace(t, e),
                    e.left = t.left,
                    e.left.parent = e) : this.replace(t, t.left) : this.replace(t, t.right),
                    this._size--,
                    !0)
                }
                ,
                A.prototype.removeNode = function removeNode(t) {
                    var e;
                    return !!t && (this.xP(t),
                    t.left ? t.right ? ((e = this.MP(t.right)).parent !== t && (this.replace(e, e.right),
                    e.right = t.right,
                    e.right.parent = e),
                    this.replace(t, e),
                    e.left = t.left,
                    e.left.parent = e) : this.replace(t, t.left) : this.replace(t, t.right),
                    this._size--,
                    !0)
                }
                ,
                A.prototype.$P = function(t) {
                    var e, r;
                    (t = this.find(t)) && (this.xP(t),
                    e = t.left,
                    t = t.right,
                    r = null,
                    e && (e.parent = null,
                    r = this.SP(e),
                    this.xP(r),
                    this.yP = r),
                    t && (e ? r.right = t : this.yP = t,
                    t.parent = r),
                    this._size--)
                }
                ,
                A.prototype.pop = function() {
                    var t = this.yP
                      , e = null;
                    if (t) {
                        for (; t.left; )
                            t = t.left;
                        e = {
                            key: t.key,
                            data: t.data
                        },
                        this.remove(t.key)
                    }
                    return e
                }
                ,
                A.prototype.next = function(t) {
                    var e = t;
                    if (e)
                        if (e.right)
                            for (e = e.right; e && e.left; )
                                e = e.left;
                        else
                            for (e = t.parent; e && e.right === t; )
                                e = (t = e).parent;
                    return e
                }
                ,
                A.prototype.NM = function(t) {
                    var e = t;
                    if (e)
                        if (e.left)
                            for (e = e.left; e && e.right; )
                                e = e.right;
                        else
                            for (e = t.parent; e && e.left === t; )
                                e = (t = e).parent;
                    return e
                }
                ,
                A.prototype.forEach = function forEach(t) {
                    for (var e = this.yP, r = [], n = !1, i = 0; !n; )
                        e ? (r.push(e),
                        e = e.left) : 0 < r.length ? (t(e = r.pop(), i++),
                        e = e.right) : n = !0;
                    return this
                }
                ,
                A.prototype.range = function(t, e, r, n) {
                    for (var i = [], a = this.bP, o = this.yP; 0 !== i.length || o; )
                        if (o)
                            i.push(o),
                            o = o.left;
                        else {
                            if (0 < a((o = i.pop()).key, e))
                                break;
                            if (0 <= a(o.key, t) && r.call(n, o))
                                return this;
                            o = o.right
                        }
                    return this
                }
                ,
                A.prototype.keys = function keys() {
                    for (var t = this.yP, e = [], r = [], n = !1; !n; )
                        t ? (e.push(t),
                        t = t.left) : 0 < e.length ? (t = e.pop(),
                        r.push(t.key),
                        t = t.right) : n = !0;
                    return r
                }
                ,
                A.prototype.values = function() {
                    for (var t = this.yP, e = [], r = [], n = !1; !n; )
                        t ? (e.push(t),
                        t = t.left) : 0 < e.length ? (t = e.pop(),
                        r.push(t.data),
                        t = t.right) : n = !0;
                    return r
                }
                ,
                A.prototype.at = function(t) {
                    for (var e = this.yP, r = [], n = !1, i = 0; !n; )
                        if (e)
                            r.push(e),
                            e = e.left;
                        else if (0 < r.length) {
                            if (e = r.pop(),
                            i === t)
                                return e;
                            i++,
                            e = e.right
                        } else
                            n = !0;
                    return null
                }
                ,
                A.prototype.load = function(t, e, r) {
                    if (void 0 === t && (t = []),
                    void 0 === e && (e = []),
                    void 0 === r && (r = !1),
                    0 !== this._size)
                        throw new Error("bulk-load: tree is not empty");
                    var n = t.length;
                    return r && function f(t, e, r, n, i) {
                        if (!(n <= r)) {
                            for (var a = t[r + n >> 1], o = r - 1, s = n + 1; ; ) {
                                for (; i(t[++o], a) < 0; )
                                    ;
                                for (; 0 < i(t[--s], a); )
                                    ;
                                if (s <= o)
                                    break;
                                var u = t[o];
                                t[o] = t[s],
                                t[s] = u,
                                u = e[o],
                                e[o] = e[s],
                                e[s] = u
                            }
                            f(t, e, r, s, i),
                            f(t, e, s + 1, n, i)
                        }
                    }(t, e, 0, n - 1, this.bP),
                    this.yP = function u(t, e, r, n, i) {
                        var s, a = i - n;
                        return 0 < a ? ((s = {
                            key: s = e[a = n + Math.floor(a / 2)],
                            data: r[a],
                            parent: t
                        }).left = u(s, e, r, n, a),
                        s.right = u(s, e, r, a + 1, i),
                        s) : null
                    }(null, t, e, 0, n),
                    this._size = n,
                    this
                }
                ,
                A.prototype.min = function j() {
                    var t = this.MP(this.yP);
                    return t ? t.key : null
                }
                ,
                A.prototype.max = function d() {
                    var t = this.SP(this.yP);
                    return t ? t.key : null
                }
                ,
                A.prototype.isEmpty = function isEmpty() {
                    return null === this.yP
                }
                ,
                o.size.get = function() {
                    return this._size
                }
                ,
                A.LP = function(t, e, r, n, i) {
                    return new A(r,i).load(t, e, n)
                }
                ,
                Object.defineProperties(A.prototype, o),
                P = T = 1,
                $ = S = 2,
                k = x = 3,
                o = {
                    EP: {
                        configurable: !(M = a = 0)
                    }
                },
                (l = function l(t, e, r, n, i) {
                    this.left = e,
                    this.point = t,
                    this.IP = r,
                    this._P = n,
                    this.type = i || a,
                    this.PP = !1,
                    this.OP = !1,
                    this.CP = null,
                    this.hN = 0,
                    this.lN = -1,
                    this.dN = -1,
                    this.DP = !0
                }
                ).prototype.FP = function(t) {
                    var e = this.point
                      , r = this.IP.point;
                    return this.left ? 0 < (e[0] - t[0]) * (r[1] - t[1]) - (r[0] - t[0]) * (e[1] - t[1]) : 0 < (r[0] - t[0]) * (e[1] - t[1]) - (e[0] - t[0]) * (r[1] - t[1])
                }
                ,
                l.prototype.RP = function(t) {
                    return !this.FP(t)
                }
                ,
                l.prototype.NP = function() {
                    return this.point[0] === this.IP.point[0]
                }
                ,
                o.EP.get = function() {
                    return 0 !== this.hN
                }
                ,
                l.prototype.clone = function clone() {
                    var t = new l(this.point,this.left,this.IP,this._P,this.type);
                    return t.UP = this.UP,
                    t.hN = this.hN,
                    t.CP = this.CP,
                    t.DP = this.DP,
                    t.PP = this.PP,
                    t.OP = this.OP,
                    t
                }
                ,
                Object.defineProperties(l.prototype, o),
                L = 134217729,
                z = (3 + 8 * (o = 11102230246251565e-32)) * o,
                H = (3 + 16 * o) * o,
                W = (2 + 12 * o) * o,
                q = (9 + 64 * o) * o * o,
                C = e(4),
                N = e(8),
                _ = e(12),
                F = e(16),
                O = e(4),
                (E = function E() {
                    this.points = [],
                    this.vN = [],
                    this.gN = null,
                    this.depth = null
                }
                ).prototype.pN = function() {
                    return null == this.gN
                }
                ,
                (o = U = function n(t, e) {
                    if (!(this instanceof n))
                        return new n(t,e);
                    if (this.data = t || [],
                    this.length = this.data.length,
                    this.compare = e || h,
                    0 < this.length)
                        for (var r = (this.length >> 1) - 1; 0 <= r; r--)
                            this.zP(r)
                }
                ).prototype = {
                    push: function(t) {
                        this.data.push(t),
                        this.length++,
                        this.El(this.length - 1)
                    },
                    pop: function() {
                        var t;
                        return 0 === this.length ? undefined : (t = this.data[0],
                        this.length--,
                        0 < this.length && (this.data[0] = this.data[this.length],
                        this.zP(0)),
                        this.data.pop(),
                        t)
                    },
                    GP: function() {
                        return this.data[0]
                    },
                    El: function(t) {
                        for (var e = this.data, r = this.compare, n = e[t]; 0 < t; ) {
                            var i = t - 1 >> 1
                              , a = e[i];
                            if (0 <= r(n, a))
                                break;
                            e[t] = a,
                            t = i
                        }
                        e[t] = n
                    },
                    zP: function(t) {
                        for (var e = this.data, r = this.compare, n = this.length >> 1, i = e[t]; t < n; ) {
                            var a = 1 + (t << 1)
                              , o = a + 1
                              , s = e[a];
                            if (o < this.length && r(e[o], s) < 0 && (s = e[a = o]),
                            0 <= r(s, i))
                                break;
                            e[t] = s,
                            t = a
                        }
                        e[t] = i
                    }
                },
                U["default"] = o,
                d = Math.max,
                j = Math.min,
                R = 0,
                D = [],
                o = {
                    VP: P,
                    BP: $,
                    HP: M,
                    WP: k
                },
                t.ZP = function(t, e) {
                    return r(t, e, $)
                }
                ,
                t.intersection = function(t, e) {
                    return r(t, e, M)
                }
                ,
                t.YP = o,
                t.union = function(t, e) {
                    return r(t, e, P)
                }
                ,
                t.xor = function(t, e) {
                    return r(t, e, k)
                }
                ,
                Object.defineProperty(t, "gP", {
                    value: !0
                })
            })
              , martinez = unwrapExports(dist)
              , Const = {
                vr: Math.PI / 180,
                mr: 180 / Math.PI,
                yr: 6378137
            };
            function getSphericalCrs(t, e) {
                var r = function(t) {
                    switch (t) {
                    case "EPSG3857":
                        return ProjectionManager.getProjection("EPSG:3857");
                    case "EPSG4326":
                        return ProjectionManager.getProjection("EPSG:4326")
                    }
                    return ProjectionManager.getProjection("EPSG3857")
                }(t);
                return {
                    project: function(t) {
                        return Util.isArray(t) && (t = new LngLat$2(t[0],t[1])),
                        r.project(t.lng, t.lat)
                    },
                    unproject: function(t) {
                        return Util.isArray(t) && (t = new Pixel(t[0],t[1])),
                        r.unproject(t.x, t.y)
                    },
                    normalizePoint: function(t) {
                        return Util.parseLngLatData(t)
                    },
                    distance: function(t, e) {
                        if (e = this.normalizePoint(e),
                        Util.isArray(e))
                            return this.distanceToLine(t, e);
                        t = this.normalizePoint(t);
                        var r = Const.vr
                          , n = Math.cos
                          , i = t.lat * r
                          , a = e.lat * r
                          , e = e.lng * r
                          , o = 2 * Const.yr
                          , e = e - t.lng * r
                          , t = (1 - n(a - i) + (1 - n(e)) * n(i) * n(a)) / 2;
                        return o * Math.asin(Math.sqrt(t))
                    },
                    ringArea: function(t) {
                        t = this.normalizeLine(t);
                        var e = Const.yr * Const.vr
                          , r = 0
                          , n = t
                          , i = n.length;
                        if (i < 3)
                            return 0;
                        for (var a = 0; a < i - 1; a += 1) {
                            var o = n[a]
                              , s = n[a + 1]
                              , u = o.lng * e * Math.cos(o.lat * Const.vr)
                              , o = o.lat * e
                              , f = s.lng * e * Math.cos(s.lat * Const.vr);
                            r += u * (s.lat * e) - f * o
                        }
                        var t = n[a]
                          , c = n[0]
                          , h = t.lng * e * Math.cos(t.lat * Const.vr)
                          , t = t.lat * e
                          , l = c.lng * e * Math.cos(c.lat * Const.vr);
                        return r += h * (c.lat * e) - l * t,
                        .5 * Math.abs(r)
                    },
                    sphericalCalotteArea: function(t) {
                        var e = Const.yr
                          , t = e - e * Math.cos(t / e);
                        return 2 * Math.PI * e * t
                    }
                }
            }
            function getPlanarCrs() {
                return {
                    normalizePoint: function(t) {
                        return t && t.x && t.y ? [t.x, t.y] : t
                    },
                    distance: function(t, e) {
                        var r = t[0] - e[0]
                          , t = t[1] - e[1];
                        return Math.sqrt(r * r + t * t)
                    },
                    project: function(t) {
                        return t
                    },
                    unproject: function(t) {
                        return t
                    },
                    ringArea: function(t) {
                        for (var e = [0, 0], r = [0, 0], n = 0, i = t[0], a = t.length, o = 2; o < a; o++) {
                            var s = t[o - 1]
                              , u = t[o];
                            e[0] = i[0] - u[0],
                            e[1] = i[1] - u[1],
                            r[0] = i[0] - s[0],
                            r[1] = i[1] - s[1],
                            n += e[0] * r[1] - e[1] * r[0]
                        }
                        return n / 2
                    }
                }
            }
            function isClockwise(t) {
                for (var e = 0, r = t.length, n = 0; n < r - 1; n++) {
                    var i, a = t[n];
                    e += ((i = t[n + 1])[0] - a[0]) * (i[1] + a[1])
                }
                return t[r - 1][0] === t[0][0] && t[r - 1][1] === t[0][1] || (a = t[r - 1],
                e += ((i = t[0])[0] - a[0]) * (i[1] + a[1])),
                0 < e
            }
            var GeometryUtilCls = function() {
                function e(t) {
                    this.CLASS_NAME = "AMap.GeometryUtil",
                    this._opts = assign({
                        onSegmentTolerance: 5,
                        crs: "EPSG3857",
                        maxZoom: zoomRange[1]
                    }, t),
                    this.setCrs(this._opts.crs)
                }
                return e.prototype.clone = function(t) {
                    return new e(assign({}, this._opts, t))
                }
                ,
                e.prototype.isPoint = function(t) {
                    return t && (t instanceof LngLat$2 || Util.isArray(t) && !isNaN(t[0]))
                }
                ,
                e.prototype.normalizePoint = function(t) {
                    return t
                }
                ,
                e.prototype.normalizeLine = function(t) {
                    for (var e = [], r = 0, n = t.length; r < n; r++)
                        e.push(this.normalizePoint(t[r]));
                    return e
                }
                ,
                e.prototype.normalizeMultiLines = function(t) {
                    for (var e = [], r = 0, n = (t = Util.isArray(t) && this.isPoint(t[0]) ? [t] : t).length; r < n; r++)
                        e.push(this.normalizeLine(t[r]));
                    return e
                }
                ,
                e.prototype.setCrs = function(t) {
                    t = t && t.project && t.unproject ? t : "plane" === t ? getPlanarCrs() : getSphericalCrs(t, this._opts.maxZoom),
                    assign(this, t)
                }
                ,
                e.prototype.distance = function(t, e) {
                    throw new Error("distance Not implemented!")
                }
                ,
                e.prototype.xr = function(t, e) {
                    t = this.normalizeLine(t);
                    for (var r = [], n = 0, i = (t = this.isPoint(t[0]) ? t : t[0]).length; n < i; n++)
                        r.push(this.project(t[n]));
                    return !0 === e ? r = this.makesureClockwise(r) : !1 === e && (r = this.makesureClockwise(r)).reverse(),
                    r
                }
                ,
                e.prototype.br = function(t) {
                    for (var e = [], r = 0, n = t.length; r < n; r++)
                        e.push(this.unproject(t[r]));
                    return e
                }
                ,
                e.prototype.closestOnSegment = function(t, e, r) {
                    return t = Coordinate.closestOnSegment(this.project(t), this.xr([e, r])),
                    this.unproject(t)
                }
                ,
                e.prototype.closestOnLine = function(t, e) {
                    e = this.normalizeLine(e);
                    for (var r, n = Infinity, i = 0, a = e.length; i < a - 1; i++) {
                        var o = this.closestOnSegment(t, e[i], e[i + 1])
                          , s = this.distance(t, o);
                        s < n && (n = s,
                        r = o)
                    }
                    return r
                }
                ,
                e.prototype.distanceToSegment = function(t, e, r) {
                    return this.distanceToLine(t, [e, r])
                }
                ,
                e.prototype.distanceToLine = function(t, e) {
                    e = this.normalizeLine(e),
                    this.isPoint(e[0]) || (e = e[0]);
                    for (var r = Infinity, n = 0, i = e.length; n < i - 1; n++)
                        var a = this.closestOnSegment(t, e[n], e[n + 1])
                          , r = Math.min(r, this.distance(t, a));
                    return r
                }
                ,
                e.prototype.distanceToPolygon = function(t, e) {
                    return this.isPointInRing(t, e) ? 0 : this.distanceToLine(t, e)
                }
                ,
                e.prototype.isPointOnSegment = function(t, e, r, n) {
                    return (!n && 0 !== n || n < 0) && (n = this._opts.onSegmentTolerance),
                    this.distanceToSegment(t, e, r) <= n
                }
                ,
                e.prototype.isPointOnLine = function(t, e, r) {
                    for (var n = 0, i = (e = this.normalizeLine(e)).length; n < i - 1; n++)
                        if (this.isPointOnSegment(t, e[n], e[n + 1], r))
                            return !0;
                    return !1
                }
                ,
                e.prototype.isPointOnRing = function(t, e, r) {
                    for (var n = 0, i = (e = this.normalizeLine(e)).length; n < i; n++)
                        if (this.isPointOnSegment(t, e[n], e[n === i - 1 ? 0 : n + 1], r))
                            return !0;
                    return !1
                }
                ,
                e.prototype.isPointOnPolygon = function(t, e, r) {
                    for (var n = 0, i = (e = this.normalizeMultiLines(e)).length; n < i; n++)
                        if (this.isPointOnRing(t, e[n], r))
                            return !0;
                    return !1
                }
                ,
                e.prototype.makesureClockwise = function(t) {
                    return isClockwise(t) || (t = [].concat(t)).reverse(),
                    t
                }
                ,
                e.prototype.makesureAntiClockwise = function(t) {
                    return isClockwise(t) && (t = [].concat(t)).reverse(),
                    t
                }
                ,
                e.prototype.pointInRing = function(t, e, r) {
                    for (var n = !1, i = 0; i < e.length && !n; i++)
                        if (s(t, e[i][0], r)) {
                            for (var a = !1, o = 1; o < e[i].length && !a; )
                                s(t, e[i][o], !r) && (a = !0),
                                o++;
                            a || (n = !0)
                        }
                    function s(t, e, r) {
                        for (var n = !1, i = 0, a = (e = e[0][0] === e[e.length - 1][0] && e[0][1] === e[e.length - 1][1] ? e.slice(0, e.length - 1) : e).length - 1; i < e.length; a = i++) {
                            var o = e[i][0]
                              , s = e[i][1]
                              , u = e[a][0]
                              , f = e[a][1];
                            if (t[1] * (o - u) + s * (u - t[0]) + f * (t[0] - o) == 0 && (o - t[0]) * (u - t[0]) <= 0 && (s - t[1]) * (f - t[1]) <= 0)
                                return !r;
                            t[1] < s != t[1] < f && t[0] < (u - o) * (t[1] - s) / (f - s) + o && (n = !n)
                        }
                        return n
                    }
                    return n
                }
                ,
                e.prototype.isPointInBbox = function(t, e) {
                    for (var r = Infinity, n = Infinity, i = -Infinity, a = -Infinity, o = 0; o < e.length; o++)
                        var s = e[o]
                          , r = Math.min(r, s[0])
                          , i = Math.max(i, s[0])
                          , n = Math.min(n, s[1])
                          , a = Math.max(a, s[1]);
                    return t[0] > r && t[0] < i && t[1] > n && t[1] < a
                }
                ,
                e.prototype.isPointInRing = function(t, e) {
                    return e = this.normalizeLine(e),
                    e = this.xr(e, !0),
                    Coordinate.ss(this.project(t), e, !1)
                }
                ,
                e.prototype.isRingInRing = function(t, e) {
                    for (var r = 0, n = t.length; r < n; r++)
                        if (!this.isPointInRing(t[r], e))
                            return !1;
                    return !0
                }
                ,
                e.prototype.isRingInRingByOutsea = function(t, e) {
                    for (var r = 0, n = t.length; r < n; r++)
                        if (this.isPointInRing(t[r], e))
                            return !0;
                    for (r = 0,
                    n = e.length; r < n; r++)
                        if (this.isPointInRing(e[r], t))
                            return !0;
                    return !1
                }
                ,
                e.prototype.isRingInRingByMapbox = function(t, e) {
                    for (var r = 0, n = t.length; r < n; r++)
                        if (!this.isPointInRing(t[r], e))
                            return !1;
                    return !0
                }
                ,
                e.prototype.isRingInRingByMapboxB = function(t, e) {
                    for (var r = 0, n = t.length; r < n; r++)
                        if (this.isPointInRing(t[r], e))
                            return !0;
                    return !1
                }
                ,
                e.prototype.isPixelRingInRing = function(t, e) {
                    for (var r = 0, n = t.length; r < n; r++)
                        if (Coordinate.ss(t[r], e, !1))
                            return !0;
                    return !1
                }
                ,
                e.prototype.isPointInPolygon = function(t, e) {
                    for (var r, n = 0, i = (e = this.normalizeMultiLines(e)).length; n < i && (r = this.isPointInRing(t, e[n]),
                    r = 0 < n ? !r : r); n += 1)
                        ;
                    return Boolean(r)
                }
                ,
                e.prototype.isPointInPolygons = function(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        for (var n, i = void 0, a = 0, o = (n = this.normalizeMultiLines(e[r])).length; a < o && (i = this.isPointInRing(t, n[a]),
                        i = 0 < a ? !i : i); a += 1)
                            ;
                        if (i)
                            return !0
                    }
                    return !1
                }
                ,
                e.prototype.doesSegmentsIntersect = function(t, e, r, n) {
                    t = (i = this.xr([t, e, r, n]))[0];
                    var o = ((n = i[3])[0] - (r = i[2])[0]) * (t[1] - r[1]) - (n[1] - r[1]) * (t[0] - r[0])
                      , i = ((e = i[1])[0] - t[0]) * (t[1] - r[1]) - (e[1] - t[1]) * (t[0] - r[0]);
                    return 0 != (n = (n[1] - r[1]) * (e[0] - t[0]) - (n[0] - r[0]) * (e[1] - t[1])) && (r = i / n,
                    0 <= (e = o / n)) && e <= 1 && 0 <= r && r <= 1
                }
                ,
                e.prototype.doesSegmentLineIntersect = function(t, e, r) {
                    for (var n = 0, i = (r = this.normalizeLine(r)).length; n < i - 1; n++)
                        if (this.doesSegmentsIntersect(t, e, r[n], r[n + 1]))
                            return !0;
                    return !1
                }
                ,
                e.prototype.doesSegmentRingIntersect = function(t, e, r) {
                    for (var n = 0, i = (r = this.normalizeLine(r)).length; n < i; n++)
                        if (this.doesSegmentsIntersect(t, e, r[n], r[n === i - 1 ? 0 : n + 1]))
                            return !0;
                    return !1
                }
                ,
                e.prototype.doesSegmentPolygonIntersect = function(t, e, r) {
                    for (var n = 0, i = (r = this.normalizeMultiLines(r)).length; n < i; n++)
                        if (this.doesSegmentRingIntersect(t, e, r[n]))
                            return !0;
                    return !1
                }
                ,
                e.prototype.doesLineLineIntersect = function(t, e) {
                    for (var r = 0, n = (t = this.normalizeLine(t)).length; r < n - 1; r++)
                        if (this.doesSegmentLineIntersect(t[r], t[r + 1], e))
                            return !0;
                    return !1
                }
                ,
                e.prototype.doesLineRingIntersect = function(t, e) {
                    for (var r = 0, n = (t = this.normalizeLine(t)).length; r < n - 1; r++)
                        if (this.doesSegmentRingIntersect(t[r], t[r + 1], e))
                            return !0;
                    return !1
                }
                ,
                e.prototype.doesPolygonPolygonIntersect = function(t, e) {
                    return !!(this.doesRingRingIntersect(e, t) || this.isRingInRing(t, e) || this.isRingInRing(e, t))
                }
                ,
                e.prototype.doesRingRingIntersect = function(t, e) {
                    for (var r = 0, n = (t = this.normalizeLine(t)).length; r < n; r++)
                        if (this.doesSegmentRingIntersect(t[r], t[r === n - 1 ? 0 : r + 1], e))
                            return !0;
                    return !1
                }
                ,
                e.prototype.along = function(t, e) {
                    for (var r = 0, n = 0; n < t.length - 1; n += 1) {
                        var i, a = this.distance(t[n], t[n + 1]);
                        if (!(a + r < e))
                            return [t[n][0] + (i = (e - r) / a) * (t[n + 1][0] - t[n][0]), t[n][1] + i * (t[n + 1][1] - t[n][1]), n];
                        r += a
                    }
                    return null
                }
                ,
                e.prototype.gr = function(t, e) {
                    for (var a, r = function(t) {
                        return (f[0] - o[0]) * (t[1] - o[1]) > (f[1] - o[1]) * (t[0] - o[0])
                    }, n = function() {
                        var t = [o[0] - f[0], o[1] - f[1]]
                          , e = [h[0] - a[0], h[1] - a[1]]
                          , r = o[0] * f[1] - o[1] * f[0]
                          , n = h[0] * a[1] - h[1] * a[0]
                          , i = 1 / (t[0] * e[1] - t[1] * e[0]);
                        return [(r * e[0] - n * t[0]) * i, (r * e[1] - n * t[1]) * i]
                    }, i = t = this.makesureAntiClockwise(t), o = (e = this.makesureClockwise(e))[e.length - 1], s = 0, u = e.length; s < u; s++) {
                        for (var f = e[s], c = i, i = [], h = c[c.length - 1], l = 0, d = c.length; l < d; l++)
                            r(a = c[l]) ? (r(h) || i.push(n()),
                            i.push(a)) : r(h) && i.push(n()),
                            h = a;
                        o = f
                    }
                    return i
                }
                ,
                e.prototype.ringRingClip = function(t, e) {
                    return t = this.xr(t),
                    e = this.xr(e),
                    isEqual(t[0], t[t.length - 1]) || t.push(t[0].slice()),
                    isEqual(e[0], e[e.length - 1]) || e.push(e[0].slice()),
                    (t = martinez.intersection([t], [e])) && t[0] && t[0][0] ? this.br(t[0][0]) : []
                }
                ,
                e.prototype.ringArea = function(t) {
                    throw new Error("distance Not implemented!")
                }
                ,
                e.prototype.distanceOfLine = function(t) {
                    for (var e = 0, r = 0, n = (t = this.normalizeLine(t)).length; r < n - 1; r++)
                        e += this.distance(t[r], t[r + 1]);
                    return e
                }
                ,
                e.prototype.isClockwise = function(t) {
                    return isClockwise(t = this.xr(t))
                }
                ,
                e.prototype.typePolygon = function(t) {
                    return isArray(t) && isArray(t[0]) ? 2 === t[0][0].length || t[0][0]instanceof LngLat$2 ? "Polygon" : 2 < t[0][0].length && (2 === t[0][0][0].length || t[0][0][0]instanceof LngLat$2) ? "MultiPolygon" : "never" : "never"
                }
                ,
                e
            }()
              , GeometryUtilInstance = new GeometryUtilCls({})
              , PlaneGeometryUtilInstance = new GeometryUtilCls({})
              , GeometryUtil = (PlaneGeometryUtilInstance.setCrs("plane"),
            {
                distance: GeometryUtilInstance.distance.bind(GeometryUtilInstance),
                ringArea: GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),
                isClockwise: GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),
                typePolygon: GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),
                makesureClockwise: GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),
                makesureAntiClockwise: GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),
                distanceOfLine: GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),
                ringRingClip: GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),
                doesSegmentsIntersect: GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),
                doesSegmentLineIntersect: GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),
                doesSegmentRingIntersect: GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),
                doesSegmentPolygonIntersect: GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),
                doesLineLineIntersect: GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),
                doesLineRingIntersect: GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),
                doesRingRingIntersect: GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),
                pointInRing: GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),
                isPointInRing: GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),
                isPointInBbox: GeometryUtilInstance.isPointInBbox.bind(GeometryUtilInstance),
                isRingInRing: GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),
                isPointInPolygon: GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),
                isPointInPolygons: GeometryUtilInstance.isPointInPolygons.bind(GeometryUtilInstance),
                isPointOnSegment: GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),
                isPointOnLine: GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),
                isPointOnRing: GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),
                isPointOnPolygon: GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),
                closestOnSegment: GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),
                closestOnLine: GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),
                distanceToSegment: GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),
                distanceToLine: GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)
            })
              , PlaneGeometryUtil = {
                distance: PlaneGeometryUtilInstance.distance.bind(PlaneGeometryUtilInstance),
                ringArea: PlaneGeometryUtilInstance.ringArea.bind(PlaneGeometryUtilInstance),
                isClockwise: PlaneGeometryUtilInstance.isClockwise.bind(PlaneGeometryUtilInstance),
                typePolygon: PlaneGeometryUtilInstance.typePolygon.bind(PlaneGeometryUtilInstance),
                makesureClockwise: PlaneGeometryUtilInstance.makesureClockwise.bind(PlaneGeometryUtilInstance),
                makesureAntiClockwise: PlaneGeometryUtilInstance.makesureAntiClockwise.bind(PlaneGeometryUtilInstance),
                distanceOfLine: PlaneGeometryUtilInstance.distanceOfLine.bind(PlaneGeometryUtilInstance),
                ringRingClip: PlaneGeometryUtilInstance.ringRingClip.bind(PlaneGeometryUtilInstance),
                doesSegmentsIntersect: PlaneGeometryUtilInstance.doesSegmentsIntersect.bind(PlaneGeometryUtilInstance),
                doesSegmentLineIntersect: PlaneGeometryUtilInstance.doesSegmentLineIntersect.bind(PlaneGeometryUtilInstance),
                doesSegmentRingIntersect: PlaneGeometryUtilInstance.doesSegmentRingIntersect.bind(PlaneGeometryUtilInstance),
                doesSegmentPolygonIntersect: PlaneGeometryUtilInstance.doesSegmentPolygonIntersect.bind(PlaneGeometryUtilInstance),
                doesLineLineIntersect: PlaneGeometryUtilInstance.doesLineLineIntersect.bind(PlaneGeometryUtilInstance),
                doesLineRingIntersect: PlaneGeometryUtilInstance.doesLineRingIntersect.bind(PlaneGeometryUtilInstance),
                doesRingRingIntersect: PlaneGeometryUtilInstance.doesRingRingIntersect.bind(PlaneGeometryUtilInstance),
                pointInRing: PlaneGeometryUtilInstance.pointInRing.bind(PlaneGeometryUtilInstance),
                isPointInRing: PlaneGeometryUtilInstance.isPointInRing.bind(PlaneGeometryUtilInstance),
                isPointInBbox: PlaneGeometryUtilInstance.isPointInBbox.bind(PlaneGeometryUtilInstance),
                isRingInRing: PlaneGeometryUtilInstance.isRingInRing.bind(PlaneGeometryUtilInstance),
                isPointInPolygon: PlaneGeometryUtilInstance.isPointInPolygon.bind(PlaneGeometryUtilInstance),
                isPointInPolygons: PlaneGeometryUtilInstance.isPointInPolygons.bind(PlaneGeometryUtilInstance),
                isPointOnSegment: PlaneGeometryUtilInstance.isPointOnSegment.bind(PlaneGeometryUtilInstance),
                isPointOnLine: PlaneGeometryUtilInstance.isPointOnLine.bind(PlaneGeometryUtilInstance),
                isPointOnRing: PlaneGeometryUtilInstance.isPointOnRing.bind(PlaneGeometryUtilInstance),
                isPointOnPolygon: PlaneGeometryUtilInstance.isPointOnPolygon.bind(PlaneGeometryUtilInstance),
                closestOnSegment: PlaneGeometryUtilInstance.closestOnSegment.bind(PlaneGeometryUtilInstance),
                closestOnLine: PlaneGeometryUtilInstance.closestOnLine.bind(PlaneGeometryUtilInstance),
                distanceToSegment: PlaneGeometryUtilInstance.distanceToSegment.bind(PlaneGeometryUtilInstance),
                distanceToLine: PlaneGeometryUtilInstance.distanceToLine.bind(PlaneGeometryUtilInstance)
            }
              , LngLat$2 = function() {
                function r(t, e, r) {
                    if (void 0 === r && (r = !1),
                    this.className = "AMap.LngLat",
                    isNumberArray(t) ? (t = parseFloat(t[0]),
                    e = parseFloat(t[1])) : (e = parseFloat(e),
                    t = parseFloat(t)),
                    (isNaN(t) || isNaN(e)) && !window._AMapConfig)
                        throw Error("Invalid Object: LngLat(" + t + ", " + e + ")");
                    !0 !== r && (e = Math.max(Math.min(e, 90), -90),
                    t = (t + 180) % 360 + (t < -180 || 180 === t ? 180 : -180)),
                    this.kT = e,
                    this.KL = t,
                    this.lng = Math.round(1e6 * t) / 1e6,
                    this.lat = Math.round(1e6 * e) / 1e6,
                    this.pos = ProjectionManager.getProjection("EPSG:3857").project(t, e)
                }
                return r.from = function(t) {
                    return isLngLat(t) ? new r(t.KL,t.kT) : new r(t[0],t[1])
                }
                ,
                r.prototype.setLng = function(t) {
                    return this.KL = t,
                    this.lng = Math.round(1e6 * t) / 1e6,
                    this
                }
                ,
                r.prototype.setLat = function(t) {
                    return this.kT = t,
                    this.lat = Math.round(1e6 * t) / 1e6,
                    this
                }
                ,
                r.prototype.getLng = function() {
                    return this.lng
                }
                ,
                r.prototype.getLat = function() {
                    return this.lat
                }
                ,
                r.prototype.equals = function(t) {
                    return (t = parseLngLatData(t))instanceof r && Math.max(Math.abs(this.kT - t.kT), Math.abs(this.KL - t.KL)) <= 1e-9
                }
                ,
                r.prototype.add = function(t, e) {
                    return new r(this.KL + t.KL,this.kT + t.kT,e)
                }
                ,
                r.prototype.subtract = function(t, e) {
                    return new r(this.KL - t.KL,this.kT - t.kT,e)
                }
                ,
                r.prototype.divideBy = function(t, e) {
                    return new r(this.KL / t,this.kT / t,e)
                }
                ,
                r.prototype.multiplyBy = function(t, e) {
                    return new r(this.KL * t,this.kT * t,e)
                }
                ,
                r.prototype.offset = function(t, e) {
                    if (isNaN(t) || isNaN(e))
                        throw Error("valid offset args, require number");
                    return t = 2 * Math.asin(Math.sin(Math.round(t) / 12756274) / Math.cos(this.kT * Math.PI / 180)),
                    t = this.KL + 180 * t / Math.PI,
                    e = 2 * Math.asin(Math.round(e) / 12756274),
                    new r(t,this.kT + 180 * e / Math.PI)
                }
                ,
                r.prototype.toString = function() {
                    return this.lng + "," + this.lat
                }
                ,
                r.prototype.toArray = function() {
                    return [this.lng, this.lat]
                }
                ,
                r.prototype.toJSON = function() {
                    return [this.lng, this.lat]
                }
                ,
                r.prototype.distanceTo = function(t) {
                    return GeometryUtil.distance(this, t)
                }
                ,
                r.prototype.distance = function(t) {
                    return GeometryUtil.distance(this, t)
                }
                ,
                r
            }()
              , Size = function() {
                function t(t, e, r) {
                    if (void 0 === r && (r = !1),
                    this.className = "AMap.Size",
                    isNaN(t) || isNaN(e))
                        throw new Error("Invalid Object: Pixel(" + t + ", " + e + ")");
                    this.width = r ? Math.round(t) : Number(t),
                    this.height = r ? Math.round(e) : Number(e)
                }
                return t.prototype.getWidth = function() {
                    return this.width
                }
                ,
                t.prototype.getHeight = function() {
                    return this.height
                }
                ,
                t.prototype.toString = function() {
                    return this.width + "," + this.height
                }
                ,
                t.prototype.toArray = function() {
                    return [this.width, this.height]
                }
                ,
                t
            }()
              , easing = function() {
                var o = {}
                  , s = "function" == typeof Float32Array;
                function n(t, e) {
                    return 1 - 3 * e + 3 * t
                }
                function M(t, e, r) {
                    return ((n(e, r) * t + (3 * r - 6 * e)) * t + 3 * e) * t
                }
                function P(t, e, r) {
                    return 3 * n(e, r) * t * t + 2 * (3 * r - 6 * e) * t + 3 * e
                }
                function u(t) {
                    return t
                }
                return function(b, e, w, r) {
                    if (!(0 <= b && b <= 1 && 0 <= w && w <= 1))
                        throw new Error("bezier x values must be in [0, 1] range");
                    var t = arguments.toString();
                    if (o[t])
                        return o[t];
                    if (b === e && w === r)
                        return u;
                    for (var A = new (s ? Float32Array : Array)(11), n = 0; n < 11; ++n)
                        A[n] = M(.1 * n, b, w);
                    return o[t] = function(t) {
                        return 0 === t ? 0 : 1 === t ? 1 : M(function(t) {
                            for (var e = 0, r = 1; 10 !== r && A[r] <= t; ++r)
                                e += .1;
                            var n = e + (t - A[--r]) / (A[r + 1] - A[r]) * .1
                              , i = P(n, b, w);
                            if (.001 <= i) {
                                for (var a = t, o = n, s = b, u = w, f = 0; f < 4; ++f) {
                                    var c = P(o, s, u);
                                    if (0 === c)
                                        return o;
                                    o -= (M(o, s, u) - a) / c
                                }
                                return o
                            }
                            if (0 === i)
                                return n;
                            for (var h, l, d = t, v = e, g = e + .1, y = b, p = w, m = 0; 0 < (h = M(l = v + (g - v) / 2, y, p) - d) ? g = l : v = l,
                            1e-7 < Math.abs(h) && ++m < 10; )
                                ;
                            return l
                        }(t), e, r)
                    }
                }
            }();
            function getQuadBezierValue(t, e, r, n) {
                var i;
                return 1 <= t ? n : (i = 1 - t) * i * e + 2 * i * t * r + t * t * n
            }
            function cubic(t, e, r, n, i) {
                var a, o, s, u;
                return 1 <= t ? i : (a = 3 * (r.pos[0] - e.pos[0]),
                o = 3 * (n.pos[0] - r.pos[0]) - a,
                u = i.pos[0] - e.pos[0] - a - o,
                s = 3 * (r.pos[1] - e.pos[1]),
                n = 3 * (n.pos[1] - r.pos[1]) - s,
                r = i.pos[1] - e.pos[1] - s - n,
                i = u * Math.pow(t, 3) + o * Math.pow(t, 2) + a * t + e.pos[0],
                u = r * Math.pow(t, 3) + n * Math.pow(t, 2) + s * t + e.pos[1],
                ProjectionManager.getProjection("EPSG:3857").unproject(i, u))
            }
            function quad(t, e, r, n) {
                return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(t, e.pos[0], r.pos[0], n.pos[0]), getQuadBezierValue(t, e.pos[1], r.pos[1], n.pos[1]))
            }
            function p20CoordsToLngLat(t, e) {
                return Array.isArray(e) && (e = new Pixel(e[0],e[1])),
                t.containerTolnglat(e, 20)
            }
            function getSplitNum(t, e) {
                for (var n = [3, 300], r = Math.max(2, 4), i = 0, a = 0, o = 0, s = t.length; o < s - 1; o++) {
                    var u = t[o]
                      , f = t[o + 1];
                    i += Math.abs(f.pos[0] - u.pos[0]),
                    a += Math.abs(f.pos[1] - u.pos[1])
                }
                return Math.min(n[1], Math.max(n[0], Math.round(Math.max(i, a) / e / r)))
            }
            function interpolateCoords(t, e) {
                var r = null;
                switch (e.length) {
                case 3:
                    r = quad;
                    break;
                case 4:
                    r = cubic;
                    break;
                default:
                    return null
                }
                for (var n = [], i = [0].concat(e), a = 1; a < t - 2; a++)
                    i[0] = a / t,
                    n.push(r.apply(null, i));
                return n.push(e[e.length - 1]),
                n
            }
            function getCoordsWithControlPoints(t, e, r, n) {
                var i = null;
                return t && r && r.length && ((t = [t]).push.apply(t, r),
                t.push(e),
                i = interpolateCoords(getSplitNum(t, n), t)),
                i || [e]
            }
            var BezierUtil = {
                ag: quad,
                ug: cubic,
                sg: easing,
                xb: function(t, e) {
                    for (var r = [], n = 0, i = t.length; n < i; n += 1)
                        r.push.apply(r, getCoordsWithControlPoints(t[n - 1], t[n], t[n].controlPoints, e));
                    return r
                },
                fg: function(t, e, r, n) {
                    for (var i = this.xb(t, e, r, n), a = [], o = 0, s = i.length; o < s; o++)
                        a.push(p20CoordsToLngLat(e, i[o]));
                    return a
                }
            }
              , globalInstance = typeof self === undefined ? window : self
              , TagMap = (function(t) {
                t.LITE = "lite",
                t.LEFT = "left",
                t.ALL = "all",
                t.NONE = ""
            }(exports.zB || (exports.zB = {})),
            {
                2: "all",
                3: "all",
                4: "all",
                5: "all",
                6: "lite",
                7: "all",
                8: "lite",
                9: "all",
                10: "lite",
                11: "lite",
                12: "all",
                13: "all",
                14: "all",
                15: "lite",
                16: "lite",
                17: "all",
                18: "all",
                19: "all",
                20: "all"
            })
              , colorNameDist = {
                aliceblue: "#f0f8ff",
                antiquewhite: "#faebd7",
                aqua: "#00ffff",
                aquamarine: "#7fffd4",
                azure: "#f0ffff",
                beige: "#f5f5dc",
                bisque: "#ffe4c4",
                black: "#000000",
                blanchedalmond: "#ffebcd",
                blue: "#0000ff",
                blueviolet: "#8a2be2",
                brown: "#a52a2a",
                burlywood: "#deb887",
                cadetblue: "#5f9ea0",
                chartreuse: "#7fff00",
                chocolate: "#d2691e",
                coral: "#ff7f50",
                cornflowerblue: "#6495ed",
                cornsilk: "#fff8dc",
                crimson: "#dc143c",
                cyan: "#00ffff",
                darkblue: "#00008b",
                darkcyan: "#008b8b",
                darkgoldenrod: "#b8860b",
                darkgray: "#a9a9a9",
                darkgreen: "#006400",
                darkkhaki: "#bdb76b",
                darkmagenta: "#8b008b",
                darkolivegreen: "#556b2f",
                darkorange: "#ff8c00",
                darkorchid: "#9932cc",
                darkred: "#8b0000",
                darksalmon: "#e9967a",
                darkseagreen: "#8fbc8f",
                darkslateblue: "#483d8b",
                darkslategray: "#2f4f4f",
                darkturquoise: "#00ced1",
                darkviolet: "#9400d3",
                deeppink: "#ff1493",
                deepskyblue: "#00bfff",
                dimgray: "#696969",
                dodgerblue: "#1e90ff",
                firebrick: "#b22222",
                floralwhite: "#fffaf0",
                forestgreen: "#228b22",
                fuchsia: "#ff00ff",
                gainsboro: "#dcdcdc",
                ghostwhite: "#f8f8ff",
                gold: "#ffd700",
                goldenrod: "#daa520",
                grey: "#808080",
                gray: "#808080",
                green: "#008000",
                greenyellow: "#adff2f",
                honeydew: "#f0fff0",
                hotpink: "#ff69b4",
                indianred: "#cd5c5c",
                indigo: "#4b0082",
                ivory: "#fffff0",
                khaki: "#f0e68c",
                lavender: "#e6e6fa",
                lavenderblush: "#fff0f5",
                lawngreen: "#7cfc00",
                lemonchiffon: "#fffacd",
                lightblue: "#add8e6",
                lightcoral: "#f08080",
                lightcyan: "#e0ffff",
                lightgoldenrodyellow: "#fafad2",
                lightgrey: "#d3d3d3",
                lightgreen: "#90ee90",
                lightpink: "#ffb6c1",
                lightsalmon: "#ffa07a",
                lightseagreen: "#20b2aa",
                lightskyblue: "#87cefa",
                lightslategray: "#778899",
                lightsteelblue: "#b0c4de",
                lightyellow: "#ffffe0",
                lime: "#00ff00",
                limegreen: "#32cd32",
                linen: "#faf0e6",
                magenta: "#ff00ff",
                maroon: "#800000",
                mediumaquamarine: "#66cdaa",
                mediumblue: "#0000cd",
                mediumorchid: "#ba55d3",
                mediumpurple: "#9370d8",
                mediumseagreen: "#3cb371",
                mediumslateblue: "#7b68ee",
                mediumspringgreen: "#00fa9a",
                mediumturquoise: "#48d1cc",
                mediumvioletred: "#c71585",
                midnightblue: "#191970",
                mintcream: "#f5fffa",
                mistyrose: "#ffe4e1",
                moccasin: "#ffe4b5",
                navajowhite: "#ffdead",
                navy: "#000080",
                oldlace: "#fdf5e6",
                olive: "#808000",
                olivedrab: "#6b8e23",
                orange: "#ffa500",
                orangered: "#ff4500",
                orchid: "#da70d6",
                palegoldenrod: "#eee8aa",
                palegreen: "#98fb98",
                paleturquoise: "#afeeee",
                palevioletred: "#d87093",
                papayawhip: "#ffefd5",
                peachpuff: "#ffdab9",
                peru: "#cd853f",
                pink: "#ffc0cb",
                plum: "#dda0dd",
                powderblue: "#b0e0e6",
                purple: "#800080",
                rebeccapurple: "#663399",
                red: "#ff0000",
                rosybrown: "#bc8f8f",
                royalblue: "#4169e1",
                saddlebrown: "#8b4513",
                salmon: "#fa8072",
                sandybrown: "#f4a460",
                seagreen: "#2e8b57",
                seashell: "#fff5ee",
                sienna: "#a0522d",
                silver: "#c0c0c0",
                skyblue: "#87ceeb",
                slateblue: "#6a5acd",
                slategray: "#708090",
                snow: "#fffafa",
                springgreen: "#00ff7f",
                steelblue: "#4682b4",
                tan: "#d2b48c",
                teal: "#008080",
                thistle: "#d8bfd8",
                tomato: "#ff6347",
                turquoise: "#40e0d0",
                violet: "#ee82ee",
                wheat: "#f5deb3",
                white: "#ffffff",
                whitesmoke: "#f5f5f5",
                yellow: "#ffff00",
                yellowgreen: "#9acd32"
            }
              , Util = function() {
                var n, o, e, r, i, a, s, u, f, c, t, h = {
                    CLASS_NAME: "AMap.Util",
                    WorldAxesCenter: {
                        x: 0,
                        y: 0
                    },
                    Single: {},
                    stamp: (e = !0 === Browser.DW,
                    r = 1e5,
                    i = "_amap_id",
                    function(t) {
                        return t[i] = e ? ++r : --r,
                        t[i]
                    }
                    ),
                    singlton: function(t) {
                        return v.Single[t] || new t
                    },
                    getOptimalZoom: function(t) {
                        return t < Math.floor(t) + .8 ? Math.floor(t) : Math.ceil(t)
                    },
                    join: function(t, e) {
                        if (t.join)
                            return t.join(e);
                        var r, n = [];
                        for (r in t)
                            t.hasOwnProperty(r) && n.push(r + "=" + (t[r] || ""));
                        return n.join(e)
                    },
                    getGuid: function(t, e) {
                        return void 0 === e && (e = 10),
                        (t || "") + Math.round(Math.random() * Math.pow(10, e)) + "_" + (new Date).getTime()
                    },
                    uuid: (o = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
                    function(t, e) {
                        var r, a, n = o, i = [];
                        if (e = (e = void 0 === e ? 62 : e) || n.length,
                        t = void 0 === t ? 0 : t)
                            for (r = 0; r < t; r++)
                                i[r] = n[0 | Math.random() * e];
                        else
                            for (i[8] = i[13] = i[18] = i[23] = "-",
                            i[14] = "4",
                            r = 0; r < 36; r++)
                                i[r] || (a = 0 | 16 * Math.random(),
                                i[r] = n[19 === r ? 3 & a | 8 : a]);
                        return i.join("")
                    }
                    ),
                    endsWith: function(t, e) {
                        return t.endsWith ? t.endsWith(e) : !(t.length < e.length) && t.substr(t.length - e.length) === e
                    },
                    mg: [],
                    gg: 268435456,
                    wg: [215440491, 106744817],
                    Mg: {
                        start: function(e) {
                            e.startTime = new Date,
                            e.jg = [];
                            var r = (new Date).getTime()
                              , n = function() {
                                var t = (new Date).getTime();
                                e.jg.push(t - r),
                                r = t,
                                e.id = v.requestAnimFrame(n)
                            };
                            e.id = v.requestAnimFrame(n)
                        },
                        cancel: function(t) {
                            t.id && v.cancelAnimFrame(t.id)
                        },
                        stop: function(t) {
                            t.Ag = Date.now() - t.startTime,
                            this.cancel(t),
                            t.Mg = Math.round(1e3 / (t.Ag / (t.jg.length + 1)))
                        }
                    },
                    kg: function(t, e, r, n, i) {
                        if (void 0 === i && (i = !1),
                        t === e)
                            return e;
                        switch (n = void 0 === n ? "linear" : n) {
                        case "ease":
                            r = BezierUtil.sg(.25, .1, .25, 1)(r);
                            break;
                        case "ease-in":
                            r = BezierUtil.sg(.42, 0, 1, 1)(r);
                            break;
                        case "ease-out":
                            r = BezierUtil.sg(0, 0, .58, 1)(r);
                            break;
                        case "ease-in-out":
                            r = BezierUtil.sg(.42, 0, .58, 1)(r)
                        }
                        return n = t + (e - t) * r,
                        i && (n >>= 0),
                        n
                    },
                    createObjectURL: function(t, e) {
                        void 0 === e && (e = "text/javascript; charset=utf-8");
                        var r = null;
                        try {
                            r = (globalInstance.URL || globalInstance.webkitURL).createObjectURL(new Blob([t],{
                                type: e
                            }))
                        } catch (n) {
                            r = null
                        }
                        return r
                    },
                    revokeObjectURL: function(t) {
                        try {
                            (globalInstance.URL || globalInstance.webkitURL).revokeObjectURL(t)
                        } catch (e) {}
                    },
                    Og: function(t) {
                        for (var e = {}, r = 0, n = t.length; r < n; r++)
                            e[t[r]] = r;
                        return e
                    },
                    EV: function(t, e) {
                        var r = 180 / (e = Math.pow(2, e));
                        return [Math.floor(t[0] / (360 / e)) + e / 2, e / 2 - Math.ceil(t[1] / r)]
                    },
                    WY: function(t, e, r) {
                        void 0 === r && (r = !1);
                        var n = [t[0], t[3]]
                          , t = [t[2], t[1]]
                          , n = this.EV(n, e)
                          , t = this.EV(t, e)
                          , i = n[0]
                          , a = n[1]
                          , o = t[0]
                          , s = t[1];
                        if (r)
                            return {
                                ja: i,
                                Fa: a,
                                Oa: o,
                                Ea: s,
                                z: e
                            };
                        this.Pa = {
                            ja: i,
                            Fa: a,
                            Oa: o,
                            Ea: s,
                            z: e
                        };
                        for (var u = [], f = i; f <= o; f += 1)
                            for (var c = a; c <= s; c += 1)
                                u.push([e, f, c]);
                        return u
                    },
                    xg: function(t) {
                        var e = {};
                        if (v.is(t, "object"))
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[t[r]] = r);
                        return e
                    },
                    Ig: function(t, e) {
                        if (e.length < 5e4)
                            t.push.apply(t, e);
                        else
                            for (var r = 0, n = e.length; r < n; r += 1)
                                t.push(e[r])
                    },
                    clone: function(t) {
                        if ("object" != typeof t || null === t)
                            return t;
                        if (t.Tg || this.is(t, "Float32Array") || this.is(t, "Uint16Array"))
                            return t;
                        var e, r = this.isArray(t) ? [] : {};
                        for (e in t)
                            t.hasOwnProperty(e) && (r[e] = v.clone(t[e]));
                        return r
                    },
                    isInteger: function(t) {
                        return (0 | t) === t
                    },
                    vB: function(t) {
                        return !isNaN(t)
                    },
                    setPrototypeOf: "function" == typeof Object.setPrototypeOf ? Object.setPrototypeOf : function(t, e) {
                        for (var r in e)
                            t[r] = e[r]
                    }
                    ,
                    isFunction: function(t) {
                        return "function" == typeof t
                    },
                    _g: function(t, e) {
                        if (void 0 === e && (e = "webgl"),
                        !t)
                            return t;
                        for (var r = [], n = 0, i = t.length; n < i; n += 2) {
                            var a = parseInt(t.substr(n, 2), 16);
                            ("webgl" === e || "rgba" === e && 0 === n) && (a = this.format(a / 255, 3)),
                            r.push(a)
                        }
                        return r.push(r.shift()),
                        r
                    },
                    Sg: function() {},
                    keys: "function" == typeof Object.keys ? Object.keys : function(t) {
                        var e, r = [];
                        for (e in t)
                            t.hasOwnProperty(e) && r.push(e);
                        return r
                    }
                    ,
                    map: function(r, n, i) {
                        void 0 === i && (i = null);
                        var a = [];
                        return r && r.length ? (v.Cg(r, function() {
                            for (var t = [], e = 0; e < arguments.length; e++)
                                t[e] = arguments[e];
                            a[t[1]] = n.apply(i || r, t)
                        }),
                        a) : r
                    },
                    forEach: function(t, e) {
                        if (t && t.length) {
                            var r = t.length;
                            if (0 < r && (e(t[0], 0),
                            1 < r)) {
                                e(t[1], 1);
                                for (var n = 2; n < r; n++)
                                    e(t[n], n)
                            }
                        }
                    },
                    Cg: function(t, e, r) {
                        if (void 0 === r && (r = null),
                        t && t.length)
                            for (var n = 0, i = t.length; n < i && !1 !== e.call(r, t[n], n, t); n++)
                                ;
                    },
                    find: function(t, e, r) {
                        void 0 === r && (r = null);
                        for (var n = 0, i = t.length; n < i; n++)
                            if ("function" == typeof e) {
                                if (e.call(r, t[n], n, t))
                                    return t[n]
                            } else if (t[n] === e)
                                return t[n];
                        return null
                    },
                    isDOM: function(t) {
                        return "object" == typeof HTMLElement ? t instanceof HTMLElement : t && "object" == typeof t && 1 === t.nodeType && "string" == typeof t.nodeName
                    },
                    Eg: function(t, e) {
                        for (var r, n, i = "ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM", a = "v5" < (e = e || "v5") ? (r = i.length,
                        512) : (i = i.substr(0, r = 27),
                        333), o = [], s = NaN, u = 0, f = t.length; u < f; u++)
                            n = t[u],
                            n = i.indexOf(n),
                            s = isNaN(s) ? n * r : (o.push(s + n - a),
                            NaN);
                        return o
                    },
                    Ng: function(t, e) {
                        for (var r = 512 < e.length ? Math.round(Math.pow(e.length, .5)) : e.length, n = Math.ceil(e.length / r), i = 0; i < n; i += 1) {
                            var a = r * i
                              , o = a + r;
                            o > e.length && (o = e.length);
                            for (var s = a; s < o; s += 1)
                                t(e[s])
                        }
                    },
                    Lg: function(t) {
                        var e;
                        return /^rgba\(/.test(t) ? this.Dg(t) : ("#" === (e = t = this.colorNameToHex(t))[0] && (3 === (t = t.substring(1)).length && (t = t.replace(/./g, function(t) {
                            return t + t
                        })),
                        e = this.argbHex2Rgba(8 === t.length ? t : "ff" + t)),
                        this.Dg(e))
                    },
                    colorNameToHex: function(t) {
                        return "string" == typeof (t = (t = void 0 === t ? "" : t).toLowerCase()) && colorNameDist[t] || t
                    },
                    Rg: function(t, e, r) {
                        var n = Math.floor(r / 2)
                          , i = r - n;
                        return [r, t & (n = (1 << n) - 1 << i) | e & (i = (1 << i) - 1), e & n | t & i]
                    },
                    Pg: function(t) {
                        return t ? encodeURIComponent(t) : ""
                    },
                    getStyle: function(t, e, r, n) {
                        var i = t[e].i[r];
                        if (void 0 === i)
                            return null;
                        if (r = t[e].s,
                        "number" == typeof i)
                            return r[i];
                        for (; "undefined" == typeof i[n.toString()] && !(--n < 3); )
                            ;
                        return "number" == typeof (e = i[n.toString()]) ? r[e] : null
                    },
                    Dg: function(t) {
                        return (t = t.split(","))[0] = parseFloat(t[0].split("rgba(")[1]) / 255,
                        t[1] = parseFloat(t[1]) / 255,
                        t[2] = parseFloat(t[2]) / 255,
                        t[3] = parseFloat(t[3]),
                        t
                    },
                    Ug: function(t) {
                        return (t = t.split(","))[0] = parseFloat(t[0].split("rgb(")[1]) / 255,
                        t[1] = parseFloat(t[1]) / 255,
                        t[2] = parseFloat(t[2]) / 255,
                        t
                    },
                    Bg: function(t) {
                        return "rgba(" + 255 * t[0] + "," + 255 * t[1] + "," + 255 * t[2] + "," + t[3] + ")"
                    },
                    color2Rgba: function(t) {
                        return this.Bg(this.color2RgbaArray(t))
                    },
                    color2RgbaArray: function(t) {
                        var e, r, n, i, a, o, s;
                        return t instanceof Array ? (3 == t.length && t.push(1),
                        t) : 0 == (e = this.colorNameToHex(t)).indexOf("rgb(") ? ((r = this.Ug(e)).push(1),
                        r) : 0 == e.indexOf("rgba(") ? this.Dg(e) : 0 == e.indexOf("#") ? 4 === e.length ? (s = e.substr(1).replace(/./g, function(t) {
                            return t + t
                        }),
                        this.zg(s)) : 7 == e.length ? this.zg(e.substr(1)) : 9 == e.length ? (r = e.substr(1),
                        this.qg(r)) : void 0 : 0 === e.indexOf("hsla") ? (n = t.substr(5).split(","),
                        i = parseInt(n[0], 10) / 360,
                        a = parseInt(n[1], 10) / 100,
                        o = parseInt(n[2], 10) / 100,
                        r = parseFloat(n[3]),
                        this.GQ(i, a, o, r)) : 0 === e.indexOf("hsl") ? (n = t.substr(4).split(","),
                        i = parseInt(n[0], 10) / 360,
                        a = parseInt(n[1], 10) / 100,
                        o = parseInt(n[2], 10) / 100,
                        this.GQ(i, a, o, 1)) : 3 === e.length ? (s = e.replace(/./g, function(t) {
                            return t + t
                        }),
                        this.zg(s)) : 6 == e.length ? this.zg(e) : 8 == e.length ? this.qg(e) : void 0
                    },
                    GQ: function(t, e, r, n) {
                        var i, a, o;
                        return 0 === e ? i = a = o = r : (i = this.uQ(e = 2 * r - (r = r < .5 ? r * (1 + e) : r + e - r * e), r, t + 1 / 3),
                        a = this.uQ(e, r, t),
                        o = this.uQ(e, r, t - 1 / 3)),
                        [i, a, o, n]
                    },
                    uQ: function(t, e, r) {
                        return r < 0 && (r += 1),
                        1 < r && --r,
                        r < 1 / 6 ? t + 6 * (e - t) * r : r < .5 ? e : r < 2 / 3 ? t + (e - t) * (2 / 3 - r) * 6 : t
                    },
                    rgbHex2Rgba: function(t) {
                        return t.startsWith("#") && (t = t.slice(1)),
                        v.argbHex2Rgba("ff" + t)
                    },
                    argbHex2Rgba: function(t) {
                        for (var e = [], r = 0, n = (t = t.startsWith("#") ? t.slice(1) : t).length; r < n; r += 2)
                            e.push(parseInt(t.substr(r, 2), 16));
                        return e.push((e.shift() / 255).toFixed(2)),
                        "rgba(" + e.join(",") + ")"
                    },
                    Opacity2Rgba: function(t, e) {
                        var r = e;
                        return e && e[3] && t && (e[3] = Math.floor(255 * t)),
                        r
                    },
                    Hex2Rgba: function(t) {
                        if ("string" != typeof t)
                            return !1;
                        for (var e = [], r = 0, n = t.length; r < n; r += 2)
                            e.push(parseInt(t.substr(r, 2), 16));
                        return e.push(parseInt(e.shift())),
                        e
                    },
                    zg: function(t) {
                        return this.uE(t + "ff")
                    },
                    qg: function(t) {
                        for (var e = [], r = 0, n = t.length; r < n; r += 2)
                            e.push(parseInt(t.substr(r, 2), 16) / 255);
                        return e.push(e.shift()),
                        e
                    },
                    uE: function(t) {
                        return [((t = parseInt(t, 16)) >> 24 & 255) / 255, (t >> 16 & 255) / 255, (t >> 8 & 255) / 255, (255 & t) / 255]
                    },
                    isEmpty: function(t) {
                        for (var e in t)
                            if (t.hasOwnProperty(e))
                                return !1;
                        return !0
                    },
                    Wg: function(t, e) {
                        return 0 <= e && t.splice(e, 1),
                        t
                    },
                    startsWith: function(t, e) {
                        return t.startsWith ? t.startsWith(e) : t.substr(0, e.length) === e
                    },
                    deleteItemFromArray: function(t, e) {
                        return e = v.indexOf(t, e),
                        v.Wg(t, e)
                    },
                    deleteItemFromArrayByIndex: function(t, e) {
                        return v.Wg(t, e)
                    },
                    filter: function(t, r, n) {
                        var i = [];
                        return v.Cg(t, function(t, e) {
                            r.call(n, t, e) && i.push(t)
                        }),
                        i
                    },
                    indexOf: function(t, e) {
                        if (t && t.length) {
                            if (t.indexOf)
                                return t.indexOf(e);
                            for (var r = 0; r < t.length; r += 1)
                                if (t[r] === e)
                                    return r
                        }
                        return -1
                    },
                    Gg: function(t, e) {
                        return t.endsWith ? t.endsWith(e) : !(t.length < e.length) && t.substr(t.length - e.length) == e
                    },
                    bind: (n = !1,
                    Boolean(Function.prototype.bind) && (n = !0),
                    function(t, e) {
                        var r = 2 < arguments.length ? Array.prototype.slice.call(arguments, 2) : null;
                        return n ? r ? (r.unshift(e),
                        t.bind.apply(t, r)) : t.bind(e) : function() {
                            return t.apply(e, r || arguments)
                        }
                    }
                    ),
                    setOptions: function(t, e) {
                        return t.opts = assign({}, t.opts, e = e || {}),
                        t.opts
                    },
                    yn: function(t, e, r) {
                        return "function" == typeof e ? this.Hg(t, !0, this.Vg(e, r, 1)) : this.Hg(t, !0)
                    },
                    Hg: function(r, n, i, t, e, a, o) {
                        var s;
                        if ((s = i ? e ? i(r, t, e) : i(r) : s) === undefined) {
                            if (!this.$g(r))
                                return r;
                            if (t = this.isArray(r)) {
                                if (s = this.Yg(r),
                                !n)
                                    return this.Kg(r, s)
                            } else {
                                var u = Object.prototype.toString.call(r)
                                  , f = "[object Function]" == u;
                                if ("[object Object]" != u && "[object Arguments]" != u && (!f || e))
                                    return e ? r : {};
                                if (s = this.Xg(f ? {} : r),
                                !n)
                                    return this.baseAssign(s, r)
                            }
                            o = o || [];
                            for (var c = (a = a || []).length; c--; )
                                if (a[c] == r)
                                    return o[c];
                            a.push(r),
                            o.push(s),
                            (t ? this.Zg : this.Qg)(r, function(t, e) {
                                s[e] = v.Hg(t, n, i, e, r, a, o)
                            })
                        }
                        return s
                    },
                    baseAssign: function(t, e) {
                        return null == e ? t : this.tM(e, Object.keys(e), t)
                    },
                    $g: function(t) {
                        var e = typeof t;
                        return !!t && ("object" == e || "function" == e)
                    },
                    rM: function(t) {
                        return !!t && "object" == typeof t
                    },
                    nM: function(t) {
                        return "number" == typeof t && -1 < t && t % 1 == 0 && t <= 9007199254740991
                    },
                    Yg: function(t) {
                        var e = t.length
                          , r = new Array(e);
                        return e && "string" == typeof t[0] && Object.hasOwnProperty.call(t, "index") && (r.index = t.index,
                        r.input = t.input),
                        r
                    },
                    Kg: function(t, e) {
                        var r = -1
                          , n = t.length;
                        for (e = e || Array(n); ++r < n; )
                            e[r] = t[r];
                        return e
                    },
                    Xg: function(t) {
                        return new (t = "function" == typeof (t = t.constructor) && t instanceof t ? t : Object)
                    },
                    Vg: function(a, o, t) {
                        if ("function" != typeof a)
                            return this.identity;
                        if (o === undefined)
                            return a;
                        switch (t) {
                        case 1:
                            return function(t) {
                                return a.call(o, t)
                            }
                            ;
                        case 3:
                            return function(t, e, r) {
                                return a.call(o, t, e, r)
                            }
                            ;
                        case 4:
                            return function(t, e, r, n) {
                                return a.call(o, t, e, r, n)
                            }
                            ;
                        case 5:
                            return function(t, e, r, n, i) {
                                return a.call(o, t, e, r, n, i)
                            }
                        }
                        return function() {
                            return a.apply(o, arguments)
                        }
                    },
                    Zg: function(t, e) {
                        for (var r = -1, n = t.length; ++r < n && !1 !== e(t[r], r, t); )
                            ;
                        return t
                    },
                    identity: function(t) {
                        return t
                    },
                    iM: function(u) {
                        return function(t, e, r) {
                            for (var n = v.eM(t), i = r(t), a = i.length, o = u ? a : -1; u ? o-- : ++o < a; ) {
                                var s = i[o];
                                if (!1 === e(n[s], s, n))
                                    break
                            }
                            return t
                        }
                    },
                    Qg: function(t, e) {
                        return v.iM()(t, e, Object.keys)
                    },
                    eM: function(t) {
                        return v.$g(t) ? t : Object(t)
                    },
                    tM: function(t, e, r) {
                        r = r || {};
                        for (var n = -1, i = e.length; ++n < i; ) {
                            var a = e[n];
                            r[a] = t[a]
                        }
                        return r
                    },
                    oM: function() {
                        return !1
                    },
                    aM: "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",
                    uM: Date.now ? function() {
                        return Date.now()
                    }
                    : function() {
                        return (new Date).getTime()
                    }
                    ,
                    sM: function(t, e, r, n) {
                        var i, a, o, s, u, f, c;
                        return s = n ? (i = 0,
                        o = this.uM,
                        function() {
                            if ((a = o()) - i < e)
                                return !1;
                            i = a,
                            t.apply(r, arguments)
                        }
                        ) : (c = function() {
                            u = !1,
                            f && (s.apply(r, f),
                            f = !1)
                        }
                        ,
                        function() {
                            u ? f = arguments : (u = !0,
                            t.apply(r, arguments),
                            setTimeout(c, e))
                        }
                        )
                    },
                    format: function(t, e) {
                        return t === t << 0 ? t : +parseFloat(t + "").toFixed(e || 0)
                    },
                    isArray: Array.isArray || function(t) {
                        return this.is(t, "array")
                    }
                    ,
                    is: function(t, e) {
                        return Object.prototype.toString.call(t).split(" ")[1].slice(0, -1).toLowerCase() === e.toLowerCase()
                    },
                    includes: "function" == typeof Array.prototype.includes ? function(t, e) {
                        return t.includes(e)
                    }
                    : function(t, e) {
                        return -1 !== this.indexOf(t, e)
                    }
                    ,
                    fM: function(t) {
                        var e = 0;
                        if (0 !== t.length)
                            for (var r = 0, n = t.length; r < n; r += 1)
                                e = (e << 5) - e + t.charCodeAt(r),
                                e &= e;
                        return e
                    },
                    hM: function(t, e) {
                        e = e ? Math.ceil(parseInt(e.substr(6)) / 24) : 1;
                        for (var r = "", n = 0, i = t.length; n < i; n++)
                            r += String.fromCharCode((t.charCodeAt(n) - 256 - e + 65535) % 65535);
                        return r
                    },
                    cM: function(t, e) {
                        var r = (t + "").slice(-2)
                          , n = (e + "").slice(-2)
                          , i = (t = t.slice(0, -2),
                        e = e.slice(0, -2),
                        parseInt((n + r).slice(1)))
                          , a = Math.ceil(i / 250) % 2 ? 1 : -1
                          , i = 1 < i / 500 ? 1 : -1;
                        return t -= parseInt("1" + r) / 3e3 * a,
                        e -= parseInt("1" + n) / 3e3 * i,
                        new LngLat$2(parseFloat(t).toFixed(5),parseFloat(e).toFixed(5))
                    },
                    vM: function(t) {
                        return "undefined" != typeof JSON && JSON.stringify ? v.fM(JSON.stringify(t)) : null
                    },
                    lM: function(t, e) {
                        var r = "_amap_hash";
                        return !e && t.hasOwnProperty(r) || (e = v.vM(t)) && (t[r] = e),
                        t[r]
                    },
                    parseLngLatData: function(t) {
                        if (v.isArray(t)) {
                            var e;
                            if (!v.isArray(t[0]))
                                return "string" == (e = typeof t[0]) || "number" == e ? new LngLat$2(t[0],t[1]) : t;
                            for (var r = 0; r < t.length; r += 1)
                                t[r] = v.parseLngLatData(t[r])
                        }
                        return t
                    },
                    dM: function(t) {
                        for (var e = [], r = 0, n = t.length; r < n; r += 1)
                            e[r] = [t[r].x, t[r].y];
                        return e
                    },
                    bM: function(t) {
                        return v.isArray(t) ? new Size(t[0],t[1]) : t
                    },
                    hp: function(t, e) {
                        var r, n = [0, 0], i = v.getOptimalZoom(e.viewState.zoom);
                        return t && LocalZoom <= i ? (i = lcs.getSize(),
                        e = e.viewState.centerCoord,
                        e = lcs.getLocalByCoord([e[0], e[1]]),
                        r = t.x - e.x,
                        e = t.y - e.y,
                        0 != r && (r *= i[0],
                        n[0] = r),
                        0 != e && (e *= i[1],
                        n[1] = e)) : t && (n[0] += t.center[0],
                        n[1] += t.center[1]),
                        n
                    },
                    dS: function(t, e) {
                        return t >= e[0] && t <= e[1]
                    },
                    kD: function(t, e, r) {
                        return void 0 === r && (r = !1),
                        t = (t = void 0 === t ? "" : t).split(",")[0] || "",
                        !r && t && e && TagMap[e] || "all"
                    },
                    VF: function(t, e, r) {
                        return !(r = void 0 !== r && r) && t && e && TagMap[e] || "all"
                    },
                    LD: function(t, e) {
                        return !(!t || !e) && (t = this.iN(t),
                        this.iN(e) <= t)
                    },
                    SD: function(t) {
                        var e;
                        switch (t = void 0 === t ? "all" : t) {
                        case "lite":
                            e = 0;
                            break;
                        case "left":
                            e = 1;
                            break;
                        default:
                            e = 2
                        }
                        return e
                    },
                    pW: function(t) {
                        var e;
                        switch (t = void 0 === t ? 2 : t) {
                        case 0:
                            e = exports.zB.LITE;
                            break;
                        case 1:
                            e = exports.zB.LEFT;
                            break;
                        default:
                            e = exports.zB.ALL
                        }
                        return e
                    },
                    iN: function(t) {
                        var e = 0;
                        switch (t) {
                        case "lite":
                            e = 0;
                            break;
                        case "left":
                            e = 1;
                            break;
                        case "all":
                            e = 2
                        }
                        return e
                    },
                    loadBaxia: function(e) {
                        var t, r;
                        window || e({
                            code: "0",
                            I8t: "霸下加载失败"
                        }),
                        window.__AMap_web_baxia__ ? e({
                            code: "2",
                            I8t: "霸下已加载，无需重复加载"
                        }) : (window.__AMap_web_baxia__ = !0,
                        t = document.body || document.head,
                        (r = document.createElement("script")).type = "text/javascript",
                        r.src = "//g.alicdn.com/??AWSC/AWSC/awsc.js,sd/baxia-entry/baxiaCommon.js",
                        r.onerror = function(t) {
                            window.__AMap_web_baxia__ = !1,
                            e({
                                code: "0",
                                I8t: "霸下加载失败"
                            })
                        }
                        ,
                        r.onload = function() {
                            e({
                                code: "1",
                                I8t: "霸下加载成功"
                            })
                        }
                        ,
                        t.appendChild(r))
                    },
                    getMarkUrl: function() {
                        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAM1BMVEUAAAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AAD/AADpjjcQAAAAEHRSTlMA3yAQQO+/n2CPcM+vgFAwuy68RwAACZhJREFUeNrswYEAAAAAgKD9qRepAgAAAAAAAAAAAAAAAAAAmL14uQEQBKAAhohi/OXtP60HlyChvRQAAAAAAACGV4+zTGt9+5KkzKX19v/sSbb7Si1T+cgzlySHQRiItoTEH7vvf9opwFRmjuDM2yRF4kVL0JKwMQHoTjIOA9J/CwDYAETnFTAZNPwDdLBiE6lLd8Zi/IcdoMmZjs7KfNcCESzK9wcgRzJpyHr2AklHZgXwzR6gj+kLZWq/luDSSLJYAETWP/q3lsHOAGShJMsDQF2ZjpIGt+1lJgAQwXdSeQGa8jG8uIQG4CY5AoDECgRGfCf3SrBK2lkOXvTS3QjQKQaoUGEs+DJMgbO3FYMDyClkOrfWi04TloCbouW72oC7RnIcE+gegSR7lXFI22ej0LRRgUFxD/gSNHeZOhlX5ZelGTqikC1d4fFFFF4sCHV3Qez4BsKVGkmZOtuUaZTEvhxPelYsrhxWIQhseGhkf/0WeOY6NgV2hncX0BwA4ydGHRPviFQsjE3o490hSCRjNQjDZ9ybFN5A9F8x2j+XVSInQWgYPp9/cQwyS1iB2Kqssp30Vk01We5OtmIezwY5MSosAMJw+ov64ax/b7OUEZOLRZdWUjEJdGGG09OlgPHxvQC47K8SsLCM11Ap5zbrUS6+5GZOWrHKLUedkgFLW3niVnsB6LyB8aq8f0hMJe5zfxbM1gq339/sT4nbhyI0FsDm6iEzw+g33sddG8nWx43DRZIea2fGQmTvlMKCSYhsl/xOt7ID+XX515yElJQVnYpDoBf7bf+JN4AR4A2b6mQzBQ7xTROAlQzgXqO8lPuTZLNHDQMmvhbn/yoWnzAlLuR1w+9do2+z69Pf9LnFUKbc/dS7wesJxHPVzfg56hNtTLCaorQ3vQbZO95jFQZAA07lClcnKf00dMbyGQWGAY1Y6D4UWTjwMsLayYzFnt7lUNPYJeAGrifBgW2PAmwBk0L72KE1yovK/MRqPJPN3+b2rk9Th54M0LPeHmsU4vREHxMYTO+y++Kk96yjbgc0PNObyorKVQNCcfoITY5OwyTtz/NAafQAvKPNVxwSiy0RZV9kVJzpTfwGgsSlsUb2whuT85l35o8JVHlP7jMND9fp2bcBegAq86nv50VGsAnrn9dbygbolYRvq3afu8lzT6suxYC6JBr7Cc1g3Saxlhj/BACNikJK+WHfypLdCGEgQohlgKHvf9pkJMDOUtl/SNJV743L5Y8BtLTU4piTXzDSxhr2IvSfdHZD4qI4VvcF1NwE1HIT1Tg39dvNED6H4vpqbdo24zU35JnEOnqCxEXgm62wiite5BrLaS47esLmTccsXiF1Z+2M7AlI5g5q89wWfU0Z1/5lI9u956uB4k4WNxr8JnKIgk409yWwsr4RrpJSuj3ijhQZQxmybpamhCDnENyRbjPVYbH/3oYgoHtKtRHe+Ds7wzZyRA31NFu9/rbgwGek+nmGRvH7kq9GeBbsI6YjmILvC9Bz+og+JsXZdR9pENAtQjzF53k+MmTS1gdehFDdhU6IuLRRYftSnqU91l8pTHK7Fc9EzpDPifcsaVF8Oz7/+PjUMlSvvSySVZo1zO0+AaNOkzmF2n6KjhxEizuqJuNk5wq19Dy5YHfwG/zO6+HqqcUYa7O4cLCaz0KOrbirEoFa6ElzZvJMgHHcMG3cxlcChGJsKbWuNa3aRDtTy5wjWUNJXKqPZqsUzuSr1DOy5TguyKtnyfwu+cJK30Oc3t/73YvGuvp4fQZignNZjMctasMz9klkgHjty5Z8rTquBzV1GOR3R4sf/w2a/5CdR3j++EKfabHvBUdwDkblC8KWfON13ghDRyyvd2cq5tyP49fiAghY3UlE1+nd/x2S9oB6NJ3nQJ8f1/u7z5wXhXVYI4pMHuDZqE0DsRqCH84tdqsJ8pw0r9g+a++u8l3+JI/fEEi8xux53kZtUPi9nPGiWe+s0Z3QlZKGVDFXqGJdRXs5RXWOYwnW89SfeVt/3xzXujla+N3nCPbWqUXW9B1LMDHDpnJENhEA/LQQI0T2dYLcU/PtsxNeT2phPwemR26Na2abTtpTORVhGwCyCybtNa9TTDav45fhw3jxMQfPj2C3z9ILbd2VhnuxnrwMIKC5Is/OsMpbQzRV+u1FqeSj1OoLfRJ0vtV019tXsFmGrTaU+4l+yVWyKiawJ2LdgWNO+2uY7ep+Rc14yt4VBa0qA1jlX9SxFitw8n3jdqO70cZ93ogef2YAbqjbev0Uly0bA/BrNInkrd1PaclZuFw/iNzuWtxn7Wn5OWEqst29ugljAJvIJIRXu1+KVfyj45w23j55oVJhE8dVDXm4hnslgjdOsMjAuPqbUBmhndyCnuis+cxInyu2N4rJMXlL2D63x6Vn22OVQnVPsenvM4LzgnpQtrOjU64j8WW2mc38vS5lmbxRXp7ifuwhwWtaWP3Qu/FRLdx9vdSiulXthl3IGumFYLzmdQakTEvJKldtGeQ4dLV7xDl4MXwLL7t4ity4BhYQXLiWTkm0qsL2pnvm2x2HaoMXsmw4CyjYajTB08yC7kIVIMzlJoQ8qRCHhOTOQWj5i/i/j06ic5mIbc6awM6/eUnLfhl6NqeZVUA+yenDJjSe9yNIf91E41y6jnF03DsE2CTX1vv8chp3XhffqM3uV7gohaP4Sf+uSW6ZiAOSuywE8OY7U91qh5G8N0RkXSRimFUaBJeV8va9KTtDpxZCyuH6dDBrHOXyn8PnCuBTppKAbs0e7XtsbBWHwtauDhZvdhca8mkvMqMSxqVVD83T3cauD0GfBEBxYh/3wbLvHc12L4c9iIep9G81zCZGvmZ/J8GhC1+ItYTX1Rtj/9lxa/xqbRE1+2QgeW0T4lH9nG8gI63eJfrKjauIr0yy+ZxFfsNZ1c034UGJPtElmKjKCvCeUHit+qii/mcuIe76fgmYKl3ZkKKvoG5bw3/ZzWvt8CvIfxIGi105YxGe1+zO0m1+DNPu7wiISHcLF+o8675iAl9/18kbSLSaYYkQ/3bHgJM3Edf/RTfNv4axG1fRLtRSZ7fAaEw4SbT6VQxEa3lzMl6kXh8arhHPLXB+AhFBN2EFO2EjgOmvtv4XLhvW2bS+Z9NAD5xU+CUEu07ccGD37k/Ak608H13S/9b6i33AgQ3s3we/qv32NxKd7yP8E3nuP/7jP/7jP/7jPz6wBwcCAAAAAED+r42gqqqqqqqqqqqqqqqqqqq0BwckAAAAAIL+v+5HqAAAAADwEBZschjmcBcQAAAAAElFTkSuQmCC"
                    }
                };
                function l(t) {
                    var e = +new Date
                      , r = Math.max(0, (Browser.android ? 50 : 20) - (e - a));
                    return a = e + r,
                    globalInstance.setTimeout(t, 50)
                }
                function d(t) {
                    for (var e, r = ["webkit", "moz", "o", "ms"], n = 0; n < r.length && !e; n += 1)
                        e = globalInstance[r[n] + t];
                    return e
                }
                a = 0,
                t = function(t) {
                    globalInstance.clearTimeout(t)
                }
                ,
                Browser.DW ? (s = l,
                u = t,
                h.requestAnimFrame = function(t, e, r, n) {
                    if (!r)
                        return s(function() {
                            e ? v.bind(t, e).call(e, n) : t()
                        });
                    e ? v.bind(t, e).call(e, n) : t()
                }
                ,
                h.cancelAnimFrame = function(t) {
                    t && u.call(globalInstance, t)
                }
                ) : (f = globalInstance.requestAnimationFrame || d("RequestAnimationFrame") || l,
                c = globalInstance.cancelAnimationFrame || d("CancelAnimationFrame") || d("CancelRequestAnimationFrame") || t,
                h.requestAnimFrame = function(t, e, r, n) {
                    if (!r)
                        return f(function() {
                            e ? v.bind(t, e).call(e, n) : t()
                        });
                    e ? v.bind(t, e).call(e, n) : t()
                }
                ,
                h.cancelAnimFrame = function(t) {
                    t && c.call(globalInstance, t)
                }
                ),
                Browser.DW || (h.requestIdleCallback = globalInstance.requestIdleCallback ? function(t, e) {
                    return globalInstance.requestIdleCallback(t, e)
                }
                : function(t, e) {
                    void 0 === e && (e = {});
                    var r = v.uM();
                    return setTimeout(function() {
                        t({
                            didTimeout: !1,
                            timeRemaining: function() {
                                return Math.max(0, 70 - (v.uM() - r))
                            }
                        })
                    }, e.timeout || 0)
                }
                ,
                h.cancelIdleCallback = globalInstance.cancelIdleCallback ? function(t) {
                    return globalInstance.cancelIdleCallback(t)
                }
                : function(t) {
                    clearTimeout(t)
                }
                );
                var v = h;
                return v
            }()
              , extendStatics = function(t, e) {
                return (extendStatics = Object.setPrototypeOf || ({
                    __proto__: []
                }instanceof Array ? function(t, e) {
                    t.__proto__ = e
                }
                : function(t, e) {
                    for (var r in e)
                        Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r])
                }
                ))(t, e)
            };
            function __extends(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");
                function r() {
                    this.constructor = t
                }
                extendStatics(t, e),
                t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype,
                new r)
            }
            function __decorate(t, e, r, n) {
                var i, a = arguments.length, o = a < 3 ? e : null === n ? n = Object.getOwnPropertyDescriptor(e, r) : n;
                if ("object" == typeof Reflect && "function" == typeof Reflect.yV)
                    o = Reflect.yV(t, e, r, n);
                else
                    for (var s = t.length - 1; 0 <= s; s--)
                        (i = t[s]) && (o = (a < 3 ? i(o) : 3 < a ? i(e, r, o) : i(e, r)) || o);
                return 3 < a && o && Object.defineProperty(e, r, o),
                o
            }
            function __awaiter(t, e, s, u) {
                return new (s = s || Promise)(function(r, n) {
                    function i(t) {
                        try {
                            o(u.next(t))
                        } catch (e) {
                            n(e)
                        }
                    }
                    function a(t) {
                        try {
                            o(u["throw"](t))
                        } catch (e) {
                            n(e)
                        }
                    }
                    function o(t) {
                        var e;
                        t.done ? r(t.value) : ((e = t.value)instanceof s ? e : new s(function(t) {
                            t(e)
                        }
                        )).then(i, a)
                    }
                    o((u = u.apply(t, e || [])).next())
                }
                )
            }
            function __generator(r, n) {
                var i, a, o, s = {
                    label: 0,
                    y8t: function() {
                        if (1 & o[0])
                            throw o[1];
                        return o[1]
                    },
                    m8t: [],
                    b8t: []
                }, u = Object.create(("function" == typeof Iterator ? Iterator : Object).prototype);
                return u.next = t(0),
                u["throw"] = t(1),
                u["return"] = t(2),
                "function" == typeof Symbol && (u[Symbol.iterator] = function() {
                    return this
                }
                ),
                u;
                function t(e) {
                    return function(t) {
                        return f([e, t])
                    }
                }
                function f(t) {
                    if (i)
                        throw new TypeError("Generator is already executing.");
                    for (; s = u && t[u = 0] ? 0 : s; )
                        try {
                            if (i = 1,
                            a && (o = 2 & t[0] ? a["return"] : t[0] ? a["throw"] || ((o = a["return"]) && o.call(a),
                            0) : a.next) && !(o = o.call(a, t[1])).done)
                                return o;
                            switch (a = 0,
                            (t = o ? [2 & t[0], o.value] : t)[0]) {
                            case 0:
                            case 1:
                                o = t;
                                break;
                            case 4:
                                return s.label++,
                                {
                                    value: t[1],
                                    done: !1
                                };
                            case 5:
                                s.label++,
                                a = t[1],
                                t = [0];
                                continue;
                            case 7:
                                t = s.b8t.pop(),
                                s.m8t.pop();
                                continue;
                            default:
                                if (!(o = 0 < (o = s.m8t).length && o[o.length - 1]) && (6 === t[0] || 2 === t[0])) {
                                    s = 0;
                                    continue
                                }
                                if (3 === t[0] && (!o || t[1] > o[0] && t[1] < o[3]))
                                    s.label = t[1];
                                else if (6 === t[0] && s.label < o[1])
                                    s.label = o[1],
                                    o = t;
                                else {
                                    if (!(o && s.label < o[2])) {
                                        o[2] && s.b8t.pop(),
                                        s.m8t.pop();
                                        continue
                                    }
                                    s.label = o[2],
                                    s.b8t.push(t)
                                }
                            }
                            t = n.call(r, s)
                        } catch (e) {
                            t = [6, e],
                            a = 0
                        } finally {
                            i = o = 0
                        }
                    if (5 & t[0])
                        throw t[1];
                    return {
                        value: t[0] ? t[1] : void 0,
                        done: !0
                    }
                }
            }
            function __spreadArrays() {
                for (var t = 0, e = 0, r = arguments.length; e < r; e++)
                    t += arguments[e].length;
                for (var n = Array(t), i = 0, e = 0; e < r; e++)
                    for (var a = arguments[e], o = 0, s = a.length; o < s; o++,
                    i++)
                        n[i] = a[o];
                return n
            }
            exports.Ln = function() {
                return exports.Ln = Object.assign || function(t) {
                    for (var e, r = 1, n = arguments.length; r < n; r++)
                        for (var i in e = arguments[r])
                            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                    return t
                }
                ,
                exports.Ln.apply(this, arguments)
            }
            ;
            var _SuppressedError = "function" == typeof SuppressedError ? SuppressedError : function(t, e, r) {
                return (r = new Error(r)).name = "SuppressedError",
                r.error = t,
                r.S8t = e,
                r
            }
              , LabelFormat = function() {
                function t() {
                    this.Fs = {},
                    this.Es = {},
                    this.Ts = []
                }
                return t.prototype.Ns = function(t, e) {
                    e.lang && (this.lang = e.lang)
                }
                ,
                t.prototype.rV = function(t, e) {
                    return t
                }
                ,
                t.prototype.Ws = function(t, e) {
                    for (var r = this.Es, t = labelsUtil.EQ(t = void 0 === t ? "" : t, e = void 0 === e ? [] : e), n = labelsUtil.aQ(t), i = 0; i < n.length; i++)
                        r[n[i]] = 1
                }
                ,
                t.id = "labelFormat",
                t
            }();
            function noop$1() {}
            var URLObject = "undefined" != typeof window ? window.URL || window.webkitURL || {
                createObjectURL: function() {
                    console.error("URL not exist, please use more popular browser")
                }
            } : URL || webkitURL || {
                createObjectURL: function() {
                    console.error("URL not exist, please use more popular browser")
                }
            }
              , MockMap = function() {
                function t() {
                    this.gV = {}
                }
                return t.prototype.has = function(t) {
                    return Boolean(this.gV[t])
                }
                ,
                t.prototype.set = function(t, e) {
                    return this.gV[t] = e
                }
                ,
                t.prototype.get = function(t) {
                    return this.gV[t]
                }
                ,
                t.prototype.pV = function(t) {
                    delete this.gV[t]
                }
                ,
                t.prototype.clear = function() {
                    this.gV = {}
                }
                ,
                t.prototype.forEach = function(t) {
                    for (var e in this.gV)
                        this.gV.hasOwnProperty(e) && t(this.gV[e])
                }
                ,
                t
            }()
              , AdaptorMap = globalInstance.Map || MockMap
              , SmartTypedArray = function() {
                function t(t, e) {
                    void 0 === e && (e = 1024),
                    this.type = t,
                    this.length = 0,
                    this.uf = 0,
                    this.value = this.cf(e)
                }
                return t.prototype.set = function(t) {
                    this.check(t) && (t.length < this.uf ? this.value.set(t) : (this.cf(t.length),
                    this.value.set(t),
                    this.length = t.length))
                }
                ,
                t.prototype.check = function(t) {
                    if (Array.isArray(t))
                        return !0;
                    var e = !1;
                    switch (this.type) {
                    case "uint8":
                        e = t instanceof Uint8Array;
                        break;
                    case "int8":
                        e = t instanceof Int8Array;
                        break;
                    case "uint16":
                        e = t instanceof Uint16Array;
                        break;
                    case "int16":
                        e = t instanceof Int16Array;
                        break;
                    case "uint32":
                        e = t instanceof Uint32Array;
                        break;
                    case "int32":
                        e = t instanceof Int32Array;
                        break;
                    case "float32":
                        e = t instanceof Float32Array;
                        break;
                    case "float64":
                        e = t instanceof Float64Array;
                        break;
                    default:
                        e = !1
                    }
                    return e
                }
                ,
                t.prototype.subarray = function(t, e) {
                    return this.value.subarray(t, e)
                }
                ,
                t.prototype.ff = function(t) {
                    this.uf < t && this.cf(t),
                    this.length = t
                }
                ,
                t.prototype.cf = function(t) {
                    var e = this.pf()
                      , r = this.value;
                    return this.value = new e(t),
                    r && this.value.set(r),
                    this.uf = t,
                    this.value
                }
                ,
                t.prototype.pf = function() {
                    var t = Float32Array;
                    switch (this.type) {
                    case "uint8":
                        t = Uint8Array;
                        break;
                    case "int8":
                        t = Int8Array;
                        break;
                    case "uint16":
                        t = Uint16Array;
                        break;
                    case "int16":
                        t = Int16Array;
                        break;
                    case "uint32":
                        t = Uint32Array;
                        break;
                    case "int32":
                        t = Int32Array;
                        break;
                    case "float32":
                        t = Float32Array;
                        break;
                    case "float64":
                        t = Float64Array;
                        break;
                    default:
                        t = Float32Array
                    }
                    return t
                }
                ,
                __decorate([InnerClass("SmartTypedArray")], t)
            }()
              , INF = (function(t) {
                t[t.fontWidth = 0] = "fontWidth",
                t[t.fontHeight = 1] = "fontHeight",
                t[t.horiBearingX = 2] = "horiBearingX",
                t[t.horiBearingY = 3] = "horiBearingY",
                t[t.horiAdvance = 4] = "horiAdvance",
                t[t.posX = 5] = "posX",
                t[t.posY = 6] = "posY",
                t[t.iconWidth = 7] = "iconWidth",
                t[t.iconHeight = 8] = "iconHeight"
            }(exports.dY || (exports.dY = {})),
            1e20)
              , ControlChars = [[0, 31], [127, 159]]
              , ZeroWidthChars = [[8203, 8207], [8287, 8288]]
              , f = new SmartTypedArray("float64",4096)
              , d = new SmartTypedArray("float64",4096)
              , z = new SmartTypedArray("float64",4096)
              , v = new SmartTypedArray("float64",4096)
              , ua = navigator.userAgent
              , TinySDF = function() {
                function t(t, e, r, n, i, a, o) {
                    this.fontSize = t || 24,
                    this.buffer = r === undefined ? 3 : r,
                    this.MU = i || .25,
                    this.fontFamily = a || "sans-serif",
                    this.fontWeight = o || "lighter",
                    this.radius = n || 8,
                    this.size = e,
                    this.xU(),
                    t = e[0] * e[1],
                    this.TU = new SmartTypedArray("float64",t),
                    this.AU = new SmartTypedArray("float64",t),
                    r = 0 <= ua.indexOf("Gecko/") || 0 <= ua.indexOf("Windows"),
                    this.wU = Math.round(e[1] / 2 * (r ? 1.2 : 1))
                }
                return t.prototype.bU = function(t) {
                    this.size = t || [],
                    this.xU(),
                    this.mU()
                }
                ,
                t.prototype.Ce = function(t) {
                    var e = this.size
                      , r = e[0]
                      , n = r * (e = e[1]);
                    if (i = this.Nz) {
                        i.clearRect(0, 0, r, e),
                        i.fillText(t, this.buffer, this.wU);
                        var a = i.getImageData(0, 0, r, e)
                          , o = new Uint8ClampedArray(n)
                          , s = ((i = new Array(9).fill(0))[0] = 1,
                        i[1] = 1,
                        t.charCodeAt(0));
                        if (this.RU(s))
                            return {
                                bitmap: o,
                                info: i
                            };
                        for (var u = INF, f = INF, c = 0, h = 0, l = 0; l < n; l++) {
                            var d, v = l - (d = Math.floor(l / r)) * r, g = a.data[4 * l + 3] / 255;
                            0 < g && (d < u && (u = d),
                            v < f && (f = v),
                            c < d && (c = d),
                            h < v) && (h = v),
                            this.TU.value[l] = 1 == g ? 0 : 0 == g ? INF : Math.pow(Math.max(0, .5 - g), 2),
                            this.AU.value[l] = 1 == g ? INF : 0 == g ? 0 : Math.pow(Math.max(0, g - .5), 2)
                        }
                        var i = this.buffer
                          , t = this.getWidth(t, h - f)
                          , s = 32 === s ? [6, 6, 0, -21, 9, 0, 0, r, e] : [t, c - u, f, -u + i, t, f - 3, u - 3, r, e];
                        for (edt(this.TU.value, r, e),
                        edt(this.AU.value, r, e),
                        l = 0; l < n; l++) {
                            var p = this.TU.value[l] - this.AU.value[l]
                              , p = Math.max(0, Math.min(255, Math.round(255 - 255 * (p / this.radius + this.MU))));
                            o[l] = p
                        }
                        return {
                            bitmap: o,
                            info: s
                        }
                    }
                    return {}
                }
                ,
                t.prototype.getWidth = function(t, e) {
                    var r;
                    switch (t) {
                    case "y":
                    case "A":
                    case "T":
                    case "V":
                    case "W":
                    case "Y":
                        r = e;
                        break;
                    default:
                        r = e + 2
                    }
                    return r
                }
                ,
                t.prototype.measureText = function(t) {
                    return this.Nz.measureText(t)
                }
                ,
                t.prototype.xU = function() {
                    var t = this.size;
                    this.canvas || (this.canvas = document.createElement("canvas")),
                    this.canvas.width = t[0],
                    this.canvas.height = t[1],
                    this.Nz = this.canvas.getContext("2d", {
                        C8t: !0
                    }),
                    this.Nz && (this.Nz.font = this.fontWeight + " " + this.fontSize + "px " + this.fontFamily,
                    this.Nz.textBaseline = "middle",
                    this.Nz.fillStyle = "black")
                }
                ,
                t.prototype.mU = function() {
                    var t = this.size
                      , e = ((e = t[0] * (t = t[1])) > this.AU.uf && (this.AU.ff(e),
                    this.TU.ff(e)),
                    0 <= ua.indexOf("Gecko/") || 0 <= ua.indexOf("Windows"));
                    this.wU = Math.round(t / 2 * (e ? 1.2 : 1))
                }
                ,
                t.prototype.RU = function(t) {
                    var e = this.SU(t, ControlChars)
                      , t = this.SU(t, ZeroWidthChars);
                    return e || t
                }
                ,
                t.prototype.SU = function(t, e) {
                    for (var r = 0, n = e; r < n.length; r++) {
                        var i = n[r];
                        if (t >= i[0] && t <= i[1])
                            return !0
                    }
                }
                ,
                t
            }();
            function expandTypeArray(t) {
                f.ff(t),
                d.ff(t),
                z.ff(t),
                v.ff(t)
            }
            function edt(t, e, r) {
                f.uf < r && expandTypeArray(r);
                for (var n = 0; n < e; n++) {
                    for (var i = 0; i < r; i++)
                        f.value[i] = t[i * e + n];
                    for (edt1d(f.value, d.value, v.value, z.value, r),
                    i = 0; i < r; i++)
                        t[i * e + n] = d.value[i]
                }
                for (f.uf < e && expandTypeArray(r),
                i = 0; i < r; i++) {
                    for (n = 0; n < e; n++)
                        f.value[n] = t[i * e + n];
                    for (edt1d(f.value, d.value, v.value, z.value, e),
                    n = 0; n < e; n++)
                        t[i * e + n] = Math.sqrt(d.value[n])
                }
            }
            function edt1d(t, e, r, n, i) {
                n[r[0] = 0] = -INF,
                n[1] = +INF;
                for (var a = 1, o = 0; a < i; a++) {
                    for (var s = (t[a] + a * a - (t[r[o]] + r[o] * r[o])) / (2 * a - 2 * r[o]); s <= n[o]; )
                        o--,
                        s = (t[a] + a * a - (t[r[o]] + r[o] * r[o])) / (2 * a - 2 * r[o]);
                    r[++o] = a,
                    n[o] = s,
                    n[o + 1] = +INF
                }
                for (o = a = 0; a < i; a++) {
                    for (; n[o + 1] < a; )
                        o++;
                    e[a] = (a - r[o]) * (a - r[o]) + t[r[o]]
                }
            }
            var LangConf = {
                ch: {
                    type: "ch",
                    size: [32, 32],
                    fontSize: 24,
                    name: "中文简体"
                },
                en: {
                    type: "en",
                    size: [32, 32],
                    fontSize: 24,
                    name: "英文"
                },
                th: {
                    type: "th",
                    size: [32, 32],
                    fontSize: 24,
                    name: "泰语"
                },
                my: {
                    type: "my",
                    size: [56, 56],
                    fontSize: 24,
                    name: "缅甸语"
                },
                ja: {
                    type: "ja",
                    size: [32, 32],
                    fontSize: 24,
                    name: "日文"
                },
                km: {
                    type: "km",
                    size: [40, 40],
                    fontSize: 24,
                    name: "高棉语"
                },
                PU: {
                    type: "lao",
                    size: [40, 40],
                    fontSize: 24,
                    name: "老挝语"
                },
                arabic: {
                    type: "arabic",
                    size: [32, 32],
                    fontSize: 24,
                    name: "阿拉伯语"
                },
                "default": {
                    type: "default",
                    size: [32, 32],
                    fontSize: 24,
                    name: "default"
                }
            }
              , Lang = function() {
                function t(t, e) {
                    var r = (t = this.CU = t).type
                      , n = t.size
                      , t = t.fontSize
                      , r = (this.type = r,
                    this.width = n[0])
                      , n = this.height = n[1];
                    this.languageCode = e,
                    this.NU = new TinySDF(t,[r, n],(r - t) / 2,8,.25,"PingFang SC","normal")
                }
                return t.prototype.Ce = function(t) {
                    var e;
                    return this.languageCode && this.type === LangConf.arabic.type && (e = Math.floor(this.CU.size[0] * t.length * .5),
                    this.width !== e) && (this.width = e,
                    this.NU.bU([this.width, this.height])),
                    this.NU.Ce(t)
                }
                ,
                t
            }()
              , LangManager = function() {
                function n(t) {
                    this.OU = {},
                    this.languageCode = t && t.Fyt && t.Fyt.languageCode
                }
                return n.gG = function(t) {
                    return t = t.split("|"),
                    t = parseInt(t[0], 10),
                    this.IU(t)
                }
                ,
                n.kU = function(t) {
                    for (var e = [], r = 0; r < t.length; r++)
                        e.push(t.charCodeAt(r));
                    return n.gG(e.join("|"))
                }
                ,
                n.LU = function(t) {
                    return t = n.kU(t),
                    -1 !== n.EU.indexOf(t)
                }
                ,
                n.IU = function(t) {
                    return 1536 <= t && t <= 1791 ? "arabic" : "ch"
                }
                ,
                n.prototype.D$ = function(t) {
                    var e, r = this.OU[t = void 0 === t ? "default" : t];
                    return r || (e = LangConf[t] || LangConf["default"],
                    r = new Lang(e,this.languageCode),
                    this.OU[t] = r),
                    r
                }
                ,
                n.EU = [LangConf.my.type, LangConf.km.type, LangConf.PU.type],
                n
            }()
              , CHN = [["90.398619", "47.62125"], ["90.493569", "47.512157"], ["90.491338", "47.430787"], ["90.552986", "47.391174"], ["90.522859", "47.318461"], ["90.584915", "47.224989"], ["90.782025", "47.019194"], ["90.923517", "46.97996"], ["90.986624", "46.807403"], ["91.082926", "46.722064"], ["91.051812", "46.596604"], ["91.100242", "46.564068"], ["91.102624", "46.537196"], ["90.935125", "46.300398"], ["91.032801", "46.126363"], ["91.055181", "46.011658"], ["90.741148", "45.713536"], ["90.699563", "45.544726"], ["90.700228", "45.504993"], ["90.795887", "45.449956"], ["90.832257", "45.31629"], ["90.919719", "45.26871"], ["90.920899", "45.225065"], ["91.136978", "45.244316"], ["91.253943", "45.164928"], ["91.372068", "45.142003"], ["91.45689", "45.18485"], ["91.624753", "45.098124"], ["92.062061", "45.11548"], ["92.497694", "45.030848"], ["92.887666", "45.075869"], ["93.513157", "44.997233"], ["94.22699", "44.694971"], ["94.374082", "44.542037"], ["94.620202", "44.47394"], ["94.737532", "44.366876"], ["95.002041", "44.282908"], ["95.42701", "44.324539"], ["95.440292", "44.292217"], ["95.365491", "44.054053"], ["95.549126", "44.026335"], ["95.883651", "43.431746"], ["95.911953", "43.287656"], ["96.385653", "42.919774"], ["96.41151", "42.75927"], ["97.176454", "42.824161"], ["98.198333", "42.682435"], ["99.505985", "42.597497"], ["99.964106", "42.676693"], ["100.259793", "42.666107"], ["100.320604", "42.718863"], ["100.867753", "42.700052"], ["101.814637", "42.530852"], ["102.090733", "42.250567"], ["102.451458", "42.173439"], ["102.716911", "42.181644"], ["103.426452", "41.910629"], ["103.858223", "41.830321"], ["104.537873", "41.903108"], ["104.55755", "41.881352"], ["104.554117", "41.69046"], ["104.929798", "41.682608"], ["105.010371", "41.620463"], ["105.220141", "41.778353"], ["105.732529", "41.977008"], ["106.776853", "42.319288"], ["107.167833", "42.354897"], ["107.458928", "42.487147"], ["107.937949", "42.433308"], ["108.241189", "42.489425"], ["108.84269", "42.425722"], ["109.022141", "42.487574"], ["109.290662", "42.465227"], ["109.534657", "42.500548"], ["109.723763", "42.60669"], ["110.100045", "42.671172"], ["110.420666", "42.80617"], ["111.005001", "43.354829"], ["111.446257", "43.521761"], ["111.555004", "43.519925"], ["111.780481", "43.697712"], ["111.925235", "43.719055"], ["111.936243", "43.796237"], ["111.863286", "43.902314"], ["111.643689", "44.039247"], ["111.386948", "44.360034"], ["111.610923", "44.793044"], ["111.742544", "44.988614"], ["111.9942", "45.118751"], ["112.435906", "45.103062"], ["112.61512", "44.956037"], ["112.806373", "44.882816"], ["113.624854", "44.775834"], ["113.896701", "44.9424"], ["114.104283", "44.984106"], ["114.437113", "45.233044"], ["114.543629", "45.41585"], ["114.742713", "45.46746"], ["114.977202", "45.40645"], ["115.36123", "45.421513"], ["115.688202", "45.487095"], ["116.023886", "45.712008"], ["116.163919", "45.717567"], ["116.251037", "45.785617"], ["116.213851", "45.874652"], ["116.246574", "45.98171"], ["116.56904", "46.316673"], ["116.83033", "46.413023"], ["117.353361", "46.390324"], ["117.41533", "46.528251"], ["117.39222", "46.582448"], ["117.411768", "46.610108"], ["117.618878", "46.628442"], ["117.72387", "46.549579"], ["118.312433", "46.768455"], ["118.774374", "46.71799"], ["118.828619", "46.795917"], ["118.912926", "46.804113"], ["118.941979", "46.764971"], ["119.028625", "46.769292"], ["119.119864", "46.669494"], ["119.724391", "46.623078"], ["119.791059", "46.707882"], ["119.884572", "46.701717"], ["119.896224", "46.880494"], ["119.836485", "46.899381"], ["119.742007", "47.13776"], ["119.30249", "47.404711"], ["119.315214", "47.461827"], ["119.134262", "47.517476"], ["119.10804", "47.64174"], ["118.755577", "47.747779"], ["118.55396", "47.96464"], ["118.177657", "48.02096"], ["117.82558", "47.987997"], ["117.388809", "47.612384"], ["117.082887", "47.796869"], ["116.816533", "47.867783"], ["116.452289", "47.808327"], ["116.270714", "47.845797"], ["115.938377", "47.653883"], ["115.559971", "47.900966"], ["115.500727", "48.161305"], ["115.791907", "48.279437"], ["115.776629", "48.537807"], ["116.042275", "48.826715"], ["116.024444", "48.890046"], ["116.709459", "49.880215"], ["117.07866", "49.723328"], ["117.482128", "49.648667"], ["117.801998", "49.554185"], ["117.858689", "49.620567"], ["118.068073", "49.643304"], ["118.210831", "49.759243"], ["118.358674", "49.80286"], ["118.37378", "49.853853"], ["118.468623", "49.857768"], ["118.559926", "49.957101"], ["119.082034", "50.01451"], ["119.311051", "50.169532"], ["119.328389", "50.327724"], ["119.175332", "50.320094"], ["119.103534", "50.373674"], ["119.103642", "50.409488"], ["119.224019", "50.469114"], ["119.262214", "50.625767"], ["119.470096", "50.763554"], ["119.480245", "50.910299"], ["119.734497", "51.106944"], ["119.73542", "51.228925"], ["119.789064", "51.243368"], ["119.787948", "51.298691"], ["119.896417", "51.365189"], ["119.889615", "51.410731"], ["119.950318", "51.426267"], ["120.067241", "51.699773"], ["120.632029", "51.963004"], ["120.755196", "52.16206"], ["120.733974", "52.23734"], ["120.60276", "52.318868"], ["120.688398", "52.529211"], ["120.459208", "52.615218"], ["120.046556", "52.554881"], ["120.004778", "52.785297"], ["120.275145", "52.889292"], ["120.877526", "53.323248"], ["121.231921", "53.310391"], ["122.338707", "53.534212"], ["122.443142", "53.474191"], ["122.84101", "53.486577"], ["123.278553", "53.592823"], ["123.480492", "53.533829"], ["123.518364", "53.587614"], ["123.901491", "53.509565"], ["124.129157", "53.379309"], ["124.260864", "53.404185"], ["124.447374", "53.252351"], ["124.696798", "53.233398"], ["124.854212", "53.143501"], ["124.877429", "53.19179"], ["125.14374", "53.233437"], ["125.500989", "53.129213"], ["125.53472", "53.084642"], ["125.631731", "53.108131"], ["125.776978", "53.000452"], ["125.732839", "52.906456"], ["125.842016", "52.927481"], ["125.973551", "52.795444"], ["126.049747", "52.829373"], ["126.137295", "52.788424"], ["126.136093", "52.7501"], ["126.082878", "52.727183"], ["126.094744", "52.66376"], ["126.01078", "52.632295"], ["126.225078", "52.557751"], ["126.227546", "52.502887"], ["126.28664", "52.498733"], ["126.378071", "52.405299"], ["126.365626", "52.334723"], ["126.460233", "52.313556"], ["126.457937", "52.278438"], ["126.370797", "52.21752"], ["126.587327", "52.146539"], ["126.544647", "52.022831"], ["126.483493", "52.004144"], ["126.489866", "51.963387"], ["126.757379", "51.72942"], ["126.769931", "51.638237"], ["126.737959", "51.604012"], ["126.870396", "51.541384"], ["126.8313", "51.449554"], ["126.939726", "51.411373"], ["126.952021", "51.35238"], ["127.007918", "51.339647"], ["126.930671", "51.194554"], ["126.950047", "51.077214"], ["127.328668", "50.761993"], ["127.324612", "50.674039"], ["127.399564", "50.585975"], ["127.336199", "50.480736"], ["127.39435", "50.441709"], ["127.374866", "50.346296"], ["127.622938", "50.242265"], ["127.624762", "50.159938"], ["127.524126", "50.053819"], ["127.569466", "49.832087"], ["127.686474", "49.798414"], ["127.716987", "49.69577"], ["127.838395", "49.617717"], ["128.185065", "49.56898"], ["128.533065", "49.633229"], ["128.791094", "49.618148"], ["128.84167", "49.562161"], ["128.811865", "49.506248"], ["129.022107", "49.485245"], ["129.11165", "49.389985"], ["129.230032", "49.429552"], ["129.343135", "49.392234"], ["129.383497", "49.461849"], ["129.526126", "49.451932"], ["129.593332", "49.316758"], ["129.745059", "49.313625"], ["129.972146", "49.057136"], ["130.243692", "48.89923"], ["130.444579", "48.939218"], ["130.526934", "48.889044"], ["130.693552", "48.907086"], ["130.705612", "48.869994"], ["130.580449", "48.630526"], ["130.630317", "48.609845"], ["130.648105", "48.52472"], ["130.790884", "48.525345"], ["130.778868", "48.413864"], ["130.875106", "48.300724"], ["130.708423", "48.108792"], ["130.914073", "47.945556"], ["131.01546", "47.736076"], ["131.552374", "47.750448"], ["131.621768", "47.692216"], ["131.711934", "47.740348"], ["131.958075", "47.703033"], ["131.995368", "47.741041"], ["132.235458", "47.739381"], ["132.340472", "47.796162"], ["132.546873", "47.750881"], ["132.655685", "47.89209"], ["132.654505", "47.979308"], ["132.811511", "47.967327"], ["133.097413", "48.158185"], ["133.473394", "48.128346"], ["133.728504", "48.281365"], ["134.199908", "48.411499"], ["134.519091", "48.448618"], ["134.797053", "48.402511"], ["134.903462", "48.476549"], ["135.111473", "48.465979"], ["135.087461", "48.366044"], ["134.70854", "48.235879"], ["134.705815", "48.142967"], ["134.587133", "47.991745"], ["134.802439", "47.732613"], ["134.805079", "47.701502"], ["134.584837", "47.454022"], ["134.327302", "47.405829"], ["134.203448", "47.309543"], ["134.189801", "47.25835"], ["134.258273", "47.190339"], ["134.25029", "47.096963"], ["134.160018", "47.066453"], ["134.091868", "46.968583"], ["134.042215", "46.633997"], ["133.892806", "46.477753"], ["133.978872", "46.404235"], ["133.938468", "46.35728"], ["133.943124", "46.251663"], ["133.734856", "46.143924"], ["133.77584", "46.068467"], ["133.698828", "45.924364"], ["133.509421", "45.823745"], ["133.533154", "45.779212"], ["133.488886", "45.719859"], ["133.513906", "45.69461"], ["133.496869", "45.599732"], ["133.229721", "45.489276"], ["133.168674", "45.414886"], ["133.124621", "45.258199"], ["133.158975", "45.105773"], ["132.946351", "44.989767"], ["131.996377", "45.226214"], ["131.893723", "45.301592"], ["131.80903", "45.186922"], ["131.72307", "45.208468"], ["131.688416", "45.166214"], ["131.716461", "45.107939"], ["131.507506", "44.942491"], ["131.131804", "44.90387"], ["131.021662", "44.839439"], ["131.137726", "44.723122"], ["131.338398", "44.056058"], ["131.273661", "43.974086"], ["131.248341", "43.566337"], ["131.344342", "43.514183"], ["131.346252", "43.391702"], ["131.236002", "43.22857"], ["131.242955", "43.131057"], ["131.13749", "43.018486"], ["131.168904", "42.923466"], ["131.065779", "42.901952"], ["131.05005", "42.834641"], ["130.673962", "42.819219"], ["130.46123", "42.731347"], ["130.617421", "42.685874"], ["130.650616", "42.595365"], ["130.604267", "42.509264"], ["130.661752", "42.412289"], ["130.553477", "42.421191"], ["130.507536", "42.571366"], ["130.42958", "42.523293"], ["130.416105", "42.590452"], ["130.235238", "42.692151"], ["130.237405", "42.873951"], ["130.125611", "42.876169"], ["130.075765", "42.911319"], ["130.092008", "42.956423"], ["129.933178", "42.975108"], ["129.878311", "42.92378"], ["129.795163", "42.719399"], ["129.815032", "42.601778"], ["129.735103", "42.411401"], ["129.607751", "42.418118"], ["129.55415", "42.330996"], ["129.383025", "42.403749"], ["129.268527", "42.323223"], ["129.222093", "42.257635"], ["129.2434", "42.19201"], ["128.992774", "42.075243"], ["128.959644", "41.997184"], ["128.121765", "41.974471"], ["128.183949", "41.746614"], ["128.336234", "41.608881"], ["128.268621", "41.434008"], ["128.127944", "41.337429"], ["128.00482", "41.417516"], ["127.65285", "41.377517"], ["127.537794", "41.447986"], ["127.248116", "41.454805"], ["127.234962", "41.492217"], ["127.08566", "41.544545"], ["127.128081", "41.592273"], ["127.012339", "41.679643"], ["127.035706", "41.702541"], ["126.914964", "41.778689"], ["126.809177", "41.669562"], ["126.74607", "41.691325"], ["126.612003", "41.629975"], ["126.529799", "41.412013"], ["126.562243", "41.368516"], ["126.557908", "41.33825"], ["126.45328", "41.325763"], ["126.3043", "41.139979"], ["126.148946", "41.070584"], ["126.132917", "40.990783"], ["126.041744", "40.924117"], ["126.041787", "40.876401"], ["125.721896", "40.840697"], ["125.681319", "40.80754"], ["125.712733", "40.774611"], ["125.686641", "40.761853"], ["125.582743", "40.75319"], ["125.423162", "40.624246"], ["125.310595", "40.636606"], ["125.022783", "40.521123"], ["125.06057", "40.46396"], ["124.907556", "40.445935"], ["124.374311", "40.078794"], ["124.388452", "39.905638"], ["123.741782", "39.10294"], ["123.282201", "38.058466"], ["124.24299", "31.368588"], ["124.714351", "29.508006"], ["125.072136", "25.859069"], ["124.935837", "25.676612"], ["123.836839", "25.5127"], ["122.751321", "24.515956"], ["121.947788", "22.070621"], ["121.867355", "21.383021"], ["119.827087", "18.177352"], ["119.026527", "16.873489"], ["119.11665", "15.951676"], ["119.101406", "14.063252"], ["119.100623", "12.209516"], ["119.07742", "11.23357"], ["116.011301", "7.678721"], ["114.941852", "6.182877"], ["114.229887", "5.47862"], ["113.86269", "4.692236"], ["112.795642", "3.695169"], ["111.953841", "3.231846"], ["109.894631", "3.714037"], ["108.659956", "4.748032"], ["107.925439", "5.91737"], ["107.96348", "6.895899"], ["108.555028", "9.28242"], ["110.128544", "11.338543"], ["109.983314", "12.44102"], ["109.806102", "13.535124"], ["109.636428", "14.636855"], ["109.78629", "15.402577"], ["109.449813", "15.723154"], ["108.117871", "17.258818"], ["107.310076", "18.842045"], ["107.374728", "19.467179"], ["108.051095", "20.114414"], ["108.328478", "21.187373"], ["108.278139", "21.403412"], ["108.107378", "21.47839"], ["107.943356", "21.509097"], ["107.849844", "21.619412"], ["107.547355", "21.55724"], ["107.470751", "21.571209"], ["107.451932", "21.615722"], ["107.357798", "21.570152"], ["107.289755", "21.702532"], ["107.207551", "21.682454"], ["106.998789", "21.79714"], ["107.015655", "21.907972"], ["106.951239", "21.893876"], ["106.768184", "21.978429"], ["106.703854", "21.935422"], ["106.674027", "21.941175"], ["106.664565", "22.266461"], ["106.643493", "22.30484"], ["106.538715", "22.328641"], ["106.53142", "22.460275"], ["106.592939", "22.622033"], ["106.708553", "22.615477"], ["106.793547", "22.794758"], ["106.548972", "22.899047"], ["106.304634", "22.830954"], ["106.190543", "22.951201"], ["106.088791", "22.966118"], ["105.867991", "22.889816"], ["105.712488", "23.033058"], ["105.550311", "23.045755"], ["105.530806", "23.163759"], ["105.330691", "23.346393"], ["105.249667", "23.237422"], ["105.089657", "23.231409"], ["104.951169", "23.149476"], ["104.843495", "23.101267"], ["104.893084", "22.94393"], ["104.747257", "22.79551"], ["104.567764", "22.813411"], ["104.371855", "22.65974"], ["104.249053", "22.720536"], ["104.237015", "22.806132"], ["104.137495", "22.783462"], ["104.078336", "22.740585"], ["104.017096", "22.520843"], ["103.962035", "22.492019"], ["103.666692", "22.741534"], ["103.525093", "22.580551"], ["103.458703", "22.648987"], ["103.394201", "22.751092"], ["103.341286", "22.767397"], ["103.306804", "22.661878"], ["103.215652", "22.621855"], ["103.205309", "22.536362"], ["103.107505", "22.486567"], ["103.076606", "22.416444"], ["102.91784", "22.456309"], ["102.840786", "22.583305"], ["102.610223", "22.696625"], ["102.558017", "22.673838"], ["102.493515", "22.738071"], ["102.424293", "22.676273"], ["102.446694", "22.621241"], ["102.327948", "22.511268"], ["102.278531", "22.386786"], ["102.142661", "22.36867"], ["102.03475", "22.427651"], ["101.942096", "22.415036"], ["101.8765", "22.355136"], ["101.764791", "22.472926"], ["101.700847", "22.453176"], ["101.694624", "22.349917"], ["101.579332", "22.223979"], ["101.631925", "21.988099"], ["101.718335", "21.962549"], ["101.79863", "21.848016"], ["101.778824", "21.73654"], ["101.856952", "21.62392"], ["101.847124", "21.595911"], ["101.773932", "21.558438"], ["101.760328", "21.349162"], ["101.862724", "21.239522"], ["101.764727", "21.115389"], ["101.663511", "21.164623"], ["101.587808", "21.146813"], ["101.574161", "21.209359"], ["101.53264", "21.221881"], ["101.293538", "21.149214"], ["101.203866", "21.206559"], ["101.216612", "21.289294"], ["101.114173", "21.403592"], ["101.183052", "21.497378"], ["101.111941", "21.560533"], ["101.095719", "21.734009"], ["100.901892", "21.659343"], ["100.747526", "21.494902"], ["100.586185", "21.423588"], ["100.468576", "21.433695"], ["100.414267", "21.504705"], ["100.248806", "21.434534"], ["100.115855", "21.481604"], ["100.078626", "21.591362"], ["100.11579", "21.654357"], ["100.010068", "21.666462"], ["99.916813", "21.811046"], ["99.968591", "21.972539"], ["99.950867", "22.023392"], ["99.699748", "22.008512"], ["99.585378", "22.083453"], ["99.19384", "22.094388"], ["99.129961", "22.147006"], ["99.24403", "22.347694"], ["99.226069", "22.407775"], ["99.348979", "22.505302"], ["99.289627", "22.751963"], ["99.429595", "22.858203"], ["99.422858", "22.95454"], ["99.521735", "22.955884"], ["99.488432", "23.051046"], ["99.336512", "23.101188"], ["99.258964", "23.048934"], ["99.10449", "23.057463"], ["98.99924", "23.151389"], ["98.858693", "23.167152"], ["98.89811", "23.292382"], ["98.844295", "23.323341"], ["98.878284", "23.4184"], ["98.821571", "23.466061"], ["98.773527", "23.530055"], ["98.849638", "23.617887"], ["98.774085", "23.751823"], ["98.656368", "23.775684"], ["98.63961", "23.801661"], ["98.649909", "23.978332"], ["98.828974", "24.077833"], ["98.83893", "24.109859"], ["98.594849", "24.051324"], ["98.534853", "24.098401"], ["98.118939", "24.06406"], ["97.652578", "23.812007"], ["97.500916", "23.916402"], ["97.507889", "23.946076"], ["97.703905", "24.12772"], ["97.7321", "24.242073"], ["97.646012", "24.307132"], ["97.678134", "24.384313"], ["97.653759", "24.420913"], ["97.528617", "24.403523"], ["97.504349", "24.421636"], ["97.520614", "24.750904"], ["97.686181", "24.867223"], ["97.726886", "24.872596"], ["97.701159", "24.901891"], ["97.691374", "25.085579"], ["97.816257", "25.289948"], ["97.844152", "25.297669"], ["97.93803", "25.249897"], ["98.122308", "25.413237"], ["98.152177", "25.643055"], ["98.313818", "25.589382"], ["98.380058", "25.615679"], ["98.510756", "25.863626"], ["98.635018", "25.83211"], ["98.668857", "25.860517"], ["98.546226", "26.121072"], ["98.648708", "26.171346"], ["98.686366", "26.138757"], ["98.648", "26.279486"], ["98.751404", "26.620222"], ["98.701365", "26.849746"], ["98.733852", "27.033154"], ["98.685272", "27.065508"], ["98.663149", "27.194049"], ["98.708661", "27.325701"], ["98.657935", "27.422786"], ["98.67244", "27.532116"], ["98.574979", "27.540164"], ["98.537407", "27.61841"], ["98.464022", "27.631357"], ["98.417695", "27.512725"], ["98.29766", "27.498051"], ["98.144388", "27.832814"], ["98.155954", "27.920407"], ["98.109477", "27.953809"], ["98.111", "28.123353"], ["97.991245", "28.182664"], ["97.984571", "28.253152"], ["97.904449", "28.328541"], ["97.775702", "28.306704"], ["97.650433", "28.498038"], ["97.537651", "28.471615"], ["97.537544", "28.300942"], ["97.374809", "28.215134"], ["97.340262", "28.085365"], ["97.441328", "28.020526"], ["97.41045", "27.866111"], ["97.271254", "27.865238"], ["97.104206", "27.710621"], ["97.074959", "27.716851"], ["96.959302", "27.833554"], ["96.799979", "27.862962"], ["96.485238", "28.041967"], ["96.435456", "28.122218"], ["96.282742", "28.11548"], ["96.254032", "28.195619"], ["96.011753", "28.160892"], ["95.866721", "28.266533"], ["95.747824", "28.246895"], ["95.417182", "28.118906"], ["95.304315", "27.916842"], ["94.898787", "27.716889"], ["94.531603", "27.567615"], ["94.290032", "27.552854"], ["93.888688", "27.17204"], ["93.845987", "27.008916"], ["93.571308", "26.909059"], ["92.944937", "26.862668"], ["92.647405", "26.922873"], ["92.093539", "26.830122"], ["92.094247", "26.952103"], ["91.998589", "27.089524"], ["92.083004", "27.299047"], ["92.034273", "27.387239"], ["91.995907", "27.444668"], ["91.729424", "27.433927"], ["91.566002", "27.518015"], ["91.534996", "27.644815"], ["91.602566", "27.75719"], ["91.514804", "27.82382"], ["91.562676", "27.867913"], ["91.468799", "27.914302"], ["91.441784", "27.98019"], ["91.319818", "28.026891"], ["91.09123", "27.815659"], ["90.700164", "28.042914"], ["90.592875", "27.992071"], ["90.457885", "28.016188"], ["90.284765", "28.126494"], ["90.15898", "28.149257"], ["90.026414", "28.108761"], ["89.808083", "28.209972"], ["89.741178", "28.14466"], ["89.620585", "28.133666"], ["89.394701", "27.853894"], ["89.261577", "27.776101"], ["89.129934", "27.494282"], ["89.208705", "27.359876"], ["89.003119", "27.183627"], ["88.914757", "27.261172"], ["88.754318", "27.459692"], ["88.742559", "27.575756"], ["88.824484", "27.683585"], ["88.858366", "27.84585"], ["88.817167", "27.989323"], ["88.749833", "28.04227"], ["88.643789", "28.079175"], ["88.414536", "27.948938"], ["88.164768", "27.927649"], ["88.119621", "27.836742"], ["87.844298", "27.914245"], ["87.731731", "27.773994"], ["87.596998", "27.78341"], ["87.555606", "27.832169"], ["87.226918", "27.783961"], ["87.114007", "27.809055"], ["87.017899", "27.921014"], ["86.741974", "28.007834"], ["86.699681", "28.06541"], ["86.621253", "28.036683"], ["86.583402", "28.057988"], ["86.53626", "27.935498"], ["86.410089", "27.875861"], ["86.21079", "27.953771"], ["86.168518", "28.117581"], ["86.115561", "28.075237"], ["86.149271", "27.905693"], ["85.994046", "27.879218"], ["85.944521", "27.932939"], ["85.832512", "28.151055"], ["85.730202", "28.210313"], ["85.701256", "28.320003"], ["85.608344", "28.222546"], ["85.501399", "28.296408"], ["85.379283", "28.245137"], ["85.108273", "28.308745"], ["85.080035", "28.467918"], ["85.159664", "28.55567"], ["85.153999", "28.618263"], ["85.06716", "28.641711"], ["84.995663", "28.560816"], ["84.851232", "28.539159"], ["84.68178", "28.609315"], ["84.624424", "28.696084"], ["84.465938", "28.711423"], ["84.389849", "28.828396"], ["84.202845", "28.880867"], ["84.21602", "29.009754"], ["84.163899", "29.035197"], ["84.138279", "29.170731"], ["84.156046", "29.210987"], ["84.110534", "29.218441"], ["84.085858", "29.266484"], ["83.922973", "29.294016"], ["83.658078", "29.134976"], ["83.571818", "29.151918"], ["83.232014", "29.552591"], ["83.070545", "29.578981"], ["82.920063", "29.684809"], ["82.816744", "29.661877"], ["82.675381", "29.739992"], ["82.684436", "29.800693"], ["82.605515", "29.811846"], ["82.541184", "29.930689"], ["82.159367", "30.045582"], ["82.174859", "30.141657"], ["82.084479", "30.216893"], ["82.077913", "30.310431"], ["81.993091", "30.291904"], ["81.637645", "30.413095"], ["81.562006", "30.34101"], ["81.44238", "30.380465"], ["81.419613", "30.185719"], ["81.306617", "30.138261"], ["81.279452", "29.994378"], ["81.11603", "30.010804"], ["80.995588", "30.23662"], ["80.302677", "30.539587"], ["80.0878", "30.543727"], ["79.94236", "30.672449"], ["79.868267", "30.834188"], ["79.825373", "30.839126"], ["79.673774", "30.945519"], ["79.593372", "30.894565"], ["79.4033", "31.036535"], ["79.346716", "31.001927"], ["79.336288", "30.933391"], ["79.224193", "30.920174"], ["79.170227", "30.981969"], ["79.092743", "30.963258"], ["78.986249", "31.027673"], ["78.96668", "31.157988"], ["78.856924", "31.281503"], ["78.783796", "31.274131"], ["78.728542", "31.344273"], ["78.757918", "31.433515"], ["78.697536", "31.51499"], ["78.804524", "31.611708"], ["78.62458", "31.82264"], ["78.722126", "31.927562"], ["78.578596", "31.999524"], ["78.497701", "32.11424"], ["78.432641", "32.118838"], ["78.402622", "32.220389"], ["78.4762", "32.31131"], ["78.36638", "32.528271"], ["78.381336", "32.554898"], ["78.75176", "32.731065"], ["78.809223", "32.496551"], ["78.976872", "32.364195"], ["79.005883", "32.376536"], ["79.080126", "32.394077"], ["79.114029", "32.491665"], ["79.279168", "32.61355"], ["79.272795", "32.713951"], ["79.195912", "32.779409"], ["79.222884", "32.93039"], ["79.135616", "33.001861"], ["79.1289", "33.16414"], ["78.818901", "33.407102"], ["78.715496", "33.540948"], ["78.723736", "33.604683"], ["78.656015", "33.65053"], ["78.749506", "33.746395"], ["78.715582", "33.972994"], ["78.631468", "34.014908"], ["78.635867", "34.100789"], ["78.894839", "34.171104"], ["78.97243", "34.341399"], ["78.867137", "34.336615"], ["78.698266", "34.491737"], ["78.566988", "34.478543"], ["78.527312", "34.539705"], ["78.430667", "34.514354"], ["78.403587", "34.570207"], ["78.247139", "34.615374"], ["78.238835", "34.685346"], ["78.179204", "34.722162"], ["78.172767", "34.964414"], ["78.056982", "35.102584"], ["77.985699", "35.231108"], ["77.986279", "35.376996"], ["78.060694", "35.455461"], ["77.904546", "35.435236"], ["77.815948", "35.484733"], ["77.688854", "35.41908"], ["77.389219", "35.439747"], ["77.300084", "35.509365"], ["77.189727", "35.490691"], ["76.844516", "35.637645"], ["76.746969", "35.630442"], ["76.675837", "35.721674"], ["76.57151", "35.752903"], ["76.552477", "35.878323"], ["76.372211", "35.795695"], ["76.149781", "35.797227"], ["76.124933", "35.947734"], ["75.922673", "36.058952"], ["75.911558", "36.150212"], ["76.037836", "36.25097"], ["75.962627", "36.325913"], ["75.987883", "36.449905"], ["75.852334", "36.642976"], ["75.645268", "36.740208"], ["75.442793", "36.696296"], ["75.389578", "36.92691"], ["75.229053", "36.936669"], ["75.144038", "36.993436"], ["74.896481", "36.905551"], ["74.830134", "37.022531"], ["74.731107", "36.999897"], ["74.690745", "37.052831"], ["74.559724", "37.004866"], ["74.481919", "37.046871"], ["74.437845", "37.120308"], ["74.499922", "37.266966"], ["74.739861", "37.314987"], ["74.866312", "37.253902"], ["75.109062", "37.372562"], ["75.102367", "37.44057"], ["74.921629", "37.536802"], ["74.864573", "37.654148"], ["74.964759", "37.773242"], ["74.890065", "37.834937"], ["74.908884", "37.982278"], ["74.777327", "38.153069"], ["74.761705", "38.335766"], ["74.838288", "38.415972"], ["74.834661", "38.466073"], ["74.630191", "38.571841"], ["74.373536", "38.625873"], ["74.159667", "38.646204"], ["74.103234", "38.581"], ["74.111817", "38.521998"], ["74.000838", "38.494528"], ["73.77285", "38.599147"], ["73.670411", "38.8621"], ["73.725193", "38.95749"], ["73.802719", "38.951449"], ["73.807654", "38.986017"], ["73.72221", "39.008697"], ["73.473516", "39.38863"], ["73.616295", "39.498494"], ["73.852308", "39.511093"], ["73.918183", "39.600828"], ["73.897347", "39.705585"], ["73.808942", "39.800228"], ["73.93934", "39.994893"], ["73.923182", "40.040084"], ["74.206402", "40.150079"], ["74.349396", "40.120697"], ["74.57305", "40.295485"], ["74.65313", "40.30568"], ["74.68538", "40.371234"], ["74.834146", "40.370645"], ["74.764109", "40.445837"], ["74.82522", "40.547706"], ["74.991968", "40.485604"], ["75.234225", "40.478276"], ["75.595829", "40.68866"], ["75.623209", "40.675235"], ["75.670288", "40.537172"], ["75.761075", "40.482617"], ["75.702088", "40.361506"], ["75.718331", "40.319244"], ["75.831778", "40.356634"], ["75.909498", "40.327457"], ["75.962198", "40.405801"], ["76.169136", "40.4108"], ["76.276231", "40.468254"], ["76.350474", "40.381058"], ["76.518981", "40.485522"], ["76.629574", "40.63177"], ["76.618888", "40.769281"], ["76.705191", "40.836687"], ["76.738064", "40.970777"], ["76.866853", "41.052415"], ["77.002079", "41.102703"], ["77.174621", "41.038594"], ["77.761016", "41.051719"], ["77.819595", "41.177071"], ["78.104789", "41.252161"], ["78.153155", "41.41058"], ["78.633699", "41.494773"], ["78.691227", "41.573398"], ["79.204752", "41.752489"], ["79.314144", "41.836204"], ["79.760721", "41.919283"], ["79.886034", "42.062214"], ["80.133162", "42.067184"], ["80.141101", "42.212865"], ["80.253518", "42.271926"], ["80.176806", "42.427971"], ["80.233755", "42.509043"], ["80.134728", "42.629333"], ["80.233669", "42.836907"], ["80.527124", "42.908804"], ["80.358446", "43.012006"], ["80.363209", "43.05597"], ["80.77054", "43.196057"], ["80.751915", "43.283969"], ["80.657952", "43.321619"], ["80.722024", "43.489763"], ["80.498157", "43.799783"], ["80.367136", "44.112086"], ["80.382199", "44.282371"], ["80.320637", "44.484489"], ["80.375676", "44.600628"], ["80.200903", "44.711915"], ["80.153825", "44.809898"], ["79.982829", "44.769908"], ["79.863417", "44.896027"], ["79.863911", "44.925979"], ["80.099001", "45.081976"], ["80.380783", "45.073778"], ["80.472493", "45.151008"], ["80.593643", "45.1361"], ["80.723355", "45.20611"], ["80.897505", "45.157969"], ["81.777248", "45.412611"], ["81.933761", "45.262246"], ["82.295816", "45.254845"], ["82.544253", "45.206065"], ["82.569401", "45.340669"], ["82.52743", "45.402307"], ["82.265496", "45.514783"], ["82.238288", "45.626914"], ["82.311373", "45.780155"], ["82.319655", "45.956177"], ["82.440763", "46.003982"], ["82.822452", "46.775333"], ["83.012309", "47.24291"], ["83.148286", "47.241861"], ["83.371532", "47.179737"], ["83.583899", "47.087891"], ["83.927865", "46.999324"], ["84.753106", "47.038661"], ["84.955001", "46.896507"], ["85.227256", "47.083274"], ["85.529079", "47.087102"], ["85.670679", "47.295094"], ["85.656817", "47.416255"], ["85.581307", "47.505664"], ["85.500433", "48.023314"], ["85.564678", "48.210504"], ["85.778117", "48.445159"], ["86.21609", "48.461326"], ["86.297393", "48.520485"], ["86.571493", "48.56921"], ["86.745751", "48.738276"], ["86.72689", "48.79468"], ["86.785169", "48.850936"], ["86.706676", "48.980358"], ["86.708565", "49.011387"], ["86.889625", "49.162344"], ["87.145572", "49.183316"], ["87.435358", "49.10582"], ["87.476878", "49.120484"], ["87.490826", "49.169134"], ["87.836187", "49.198616"], ["87.895432", "49.115877"], ["87.87024", "49.056222"], ["87.9406", "48.974696"], ["87.803872", "48.87904"], ["88.125672", "48.72326"], ["88.023491", "48.591881"], ["88.35763", "48.495848"], ["88.450756", "48.423234"], ["88.527102", "48.435337"], ["88.631537", "48.352171"], ["88.608513", "48.280466"], ["88.657844", "48.207172"], ["88.828926", "48.136652"], ["88.942652", "48.146274"], ["89.088199", "48.017358"], ["89.571383", "48.066881"], ["89.777999", "47.863838"], ["90.077548", "47.910676"], ["90.155997", "47.747389"], ["90.399628", "47.669347"], ["90.413575", "47.647046"], ["90.398619", "47.62125"]]
              , JPN = [["145.824681", "43.408601"], ["145.802708", "43.198731"], ["145.188847", "43.068449"], ["144.992667", "42.907867"], ["143.970938", "42.890345"], ["143.384543", "42.351736"], ["143.299399", "41.875506"], ["142.95333", "42.100071"], ["142.391844", "42.272669"], ["141.369501", "42.535185"], ["140.832544", "42.147648"], ["141.028863", "41.945699"], ["141.296655", "41.765675"], ["141.564447", "41.265171"], ["141.675004", "40.481173"], ["141.829516", "40.300647"], ["141.982619", "40.122464"], ["142.142627", "39.594221"], ["142.025897", "39.368452"], ["142.021777", "39.317473"], ["141.850783", "38.901626"], ["140.939308", "35.65669"], ["139.436268", "34.193845"], ["137.347075", "34.1603"], ["135.63835", "33.29272"], ["133.488103", "32.70897"], ["131.614016", "31.325292"], ["130.633951", "28.842845"], ["127.785048", "25.789008"], ["126.597333", "26.344784"], ["128.404011", "28.563857"], ["128.940636", "30.856318"], ["128.544464", "32.79621"], ["129.194642", "34.475467"], ["129.324698", "34.765641"], ["129.502255", "34.700627"], ["129.480282", "33.855809"], ["130.439605", "33.915587"], ["130.801388", "34.159716"], ["130.791882", "34.445506"], ["131.121471", "34.437578"], ["131.298124", "34.567727"], ["132.535148", "35.287335"], ["132.978675", "36.154847"], ["133.268559", "36.366209"], ["134.710796", "35.708808"], ["135.303308", "35.794165"], ["136.404389", "36.456814"], ["136.612743", "37.37546"], ["137.409252", "37.580348"], ["137.291471", "36.906421"], ["137.982237", "37.126821"], ["138.504087", "37.383552"], ["138.758146", "37.83898"], ["139.207212", "38.04151"], ["139.310081", "38.315743"], ["139.737028", "38.85997"], ["139.403318", "39.234917"], ["139.952634", "39.328459"], ["140.002073", "39.745742"], ["139.695586", "39.824208"], ["139.679107", "40.025361"], ["139.935912", "40.077921"], ["140.001079", "40.309807"], ["139.922802", "40.434311"], ["139.828954", "40.646676"], ["139.95008", "40.766604"], ["139.957833", "41.432491"], ["140.001779", "42.027933"], ["139.389291", "42.038134"], ["139.346719", "42.242877"], ["139.63099", "42.291658"], ["139.72712", "42.641155"], ["139.942098", "42.710048"], ["140.194783", "42.842098"], ["140.30396", "42.856193"], ["140.309453", "43.306551"], ["140.393224", "43.399418"], ["140.61976", "43.355264"], ["140.788732", "43.238558"], ["140.923314", "43.24556"], ["141.029058", "43.24356"], ["141.083989", "43.216544"], ["141.141667", "43.185513"], ["141.336675", "43.240561"], ["141.328435", "43.731771"], ["141.350408", "43.792272"], ["141.594854", "43.937818"], ["141.565334", "44.291761"], ["141.70541", "44.45177"], ["141.708157", "44.742196"], ["141.683437", "45.002047"], ["141.226594", "45.076599"], ["141.053559", "45.165748"], ["140.987641", "45.335905"], ["140.943696", "45.481498"], ["141.201589", "45.501064"], ["141.972005", "45.52416"], ["142.341996", "45.204477"], ["142.567215", "45.014513"], ["142.747966", "44.801094"], ["143.487122", "44.343678"], ["144.463587", "44.078617"], ["144.874201", "44.098345"], ["145.125513", "44.222478"], ["145.300832", "44.391445"], ["145.487445", "44.320885"], ["145.111163", "43.848378"], ["145.420933", "43.545126"], ["145.451146", "43.393635"]]
              , EAST = [["73.757316", "29.95798"], ["73.045185", "28.989136"], ["72.434431", "28.60931"], ["72.060098", "28.097836"], ["71.631749", "27.60702"], ["70.67236", "27.593264"], ["69.82743", "27.041579"], ["70.337045", "26.566045"], ["70.070655", "26.098932"], ["70.070655", "25.85946"], ["70.290717", "25.713457"], ["70.626599", "25.671708"], ["70.68451", "25.201036"], ["70.974064", "24.791642"], ["70.811914", "24.612763"], ["70.139151", "24.465923"], ["69.268014", "24.435423"], ["68.313114", "24.267539"], ["67.911051", "23.808548"], ["68.547651", "23.00912"], ["69.11724", "22.684917"], ["68.748682", "22.406416"], ["69.301519", "21.536417"], ["70.153052", "20.55461"], ["71.170222", "20.332219"], ["72.234349", "21.204506"], ["72.501752", "21.087142"], ["72.627589", "19.003767"], ["72.973641", "16.878922"], ["74.267757", "13.888898"], ["75.369075", "10.48118"], ["76.976429", "7.781262"], ["78.374805", "8.242836"], ["79.427902", "9.641233"], ["80.513091", "10.734685"], ["80.254133", "11.953377"], ["80.702994", "13.082541"], ["80.402232", "15.312175"], ["82.991824", "16.887862"], ["85.259974", "19.051683"], ["87.784208", "21.10679"], ["89.263244", "21.658877"], ["89.121009", "23.437218"], ["88.869364", "23.717994"], ["88.93501", "24.317619"], ["88.267603", "24.596482"], ["88.727129", "25.073086"], ["89.186656", "25.132532"], ["88.891246", "25.626788"], ["88.650542", "25.666241"], ["88.201956", "25.892841"], ["88.420778", "26.12883"], ["88.54113", "26.285892"], ["89.241361", "26.020727"], ["89.613359", "25.863309"], ["89.657124", "25.330477"], ["90.190932", "25.070998"], ["91.175632", "25.051175"], ["91.811935", "25.05221"], ["92.234344", "24.983507"], ["92.104658", "24.649259"], ["91.844714", "24.363456"], ["91.46563", "24.215373"], ["90.999897", "23.839459"], ["91.216517", "23.054471"], ["91.389672", "22.300847"], ["92.125338", "20.623521"], ["93.946113", "18.753448"], ["92.823675", "16.135717"], ["91.224276", "9.998681"], ["93.522355", "5.752403"], ["96.409859", "0.991383"], ["100.048825", "-3.72227"], ["104.60328", "-7.736835"], ["114.01025", "-9.967468"], ["123.433702", "-11.032285"], ["123.717523", "-10.536628"], ["124.427075", "-10.257467"], ["125.004217", "-9.79418"], ["125.026253", "-9.527403"], ["125.12788", "-9.406056"], ["125.031601", "-9.358561"], ["124.946021", "-9.216037"], ["125.026253", "-9.168516"], ["125.192065", "-9.13155"], ["125.181368", "-8.982538"], ["124.999509", "-8.987821"], ["124.919277", "-8.924418"], ["125.095787", "-8.596662"], ["125.555784", "-8.088612"], ["125.721597", "-8.120384"], ["127.292232", "-8.326419"], ["132.424841", "-8.447132"], ["139.646777", "-8.512957"], ["141.039618", "-9.209048"], ["141.025347", "-6.894209"], ["140.978655", "-6.887392"], ["140.92235", "-6.851943"], ["140.912737", "-6.791946"], ["140.905871", "-6.737397"], ["140.850939", "-6.695117"], ["140.903124", "-6.59554"], ["140.945696", "-6.509588"], ["141.000442", "-6.341825"], ["140.971754", "-2.322171"], ["131.63417", "2.671779"], ["125.182746", "17.665698"], ["120.512231", "19.243264"], ["119.486602", "16.550429"], ["119.820154", "12.379244"], ["115.293339", "5.77989"], ["114.675587", "4.850295"], ["114.550618", "4.735342"], ["113.923024", "4.60805"], ["113.581092", "3.881824"], ["113.423754", "3.763395"], ["113.138025", "3.427757"], ["112.798973", "3.119213"], ["111.886744", "2.960093"], ["109.608393", "3.016867"], ["108.771364", "3.935896"], ["107.181008", "7.101455"], ["110.509765", "12.398562"], ["108.171244", "18.449712"], ["108.482399", "21.923911"], ["106.042422", "23.36869"], ["103.861684", "23.500971"], ["101.853026", "22.51803"], ["101.964992", "22.453371"], ["102.079606", "22.467488"], ["102.100842", "22.366033"], ["102.192713", "22.264854"], ["102.457234", "22.052786"], ["102.482552", "21.991854"], ["102.505944", "21.933096"], ["102.598494", "21.858522"], ["102.635027", "21.768076"], ["102.625285", "21.706993"], ["102.652076", "21.663993"], ["102.749497", "21.641356"], ["102.798208", "21.673047"], ["102.841349", "21.836472"], ["102.857688", "21.688772"], ["102.936435", "21.684707"], ["102.971433", "21.587108"], ["102.897061", "21.530145"], ["102.831439", "21.416153"], ["102.853313", "21.363197"], ["102.770191", "21.249074"], ["102.905811", "20.975636"], ["103.219101", "20.747931"], ["103.517772", "20.714677"], ["103.809332", "20.581588"], ["103.928404", "20.796397"], ["104.17602", "20.868718"], ["104.456453", "20.674762"], ["104.597217", "20.649539"], ["104.494205", "20.561152"], ["104.33078", "20.448774"], ["104.574769", "20.381484"], ["104.658948", "20.213054"], ["104.76838", "20.149846"], ["104.838529", "20.181454"], ["104.938282", "20.043215"], ["104.745932", "19.888842"], ["104.790827", "19.817585"], ["104.656142", "19.725166"], ["104.580381", "19.643265"], ["104.41625", "19.738372"], ["104.315236", "19.711959"], ["104.004834", "19.776374"], ["103.978829", "19.601517"], ["104.057089", "19.487272"], ["103.795479", "19.292317"], ["104.05618", "19.205901"], ["104.303857", "19.041792"], ["104.509718", "18.953592"], ["104.638381", "18.819682"], ["104.82816", "18.734411"], ["105.081179", "18.714495"], ["105.090265", "18.561021"], ["105.010482", "18.494337"], ["105.215532", "18.232365"], ["105.507333", "18.022503"], ["105.673181", "17.706155"], ["105.959258", "17.411042"], ["106.393016", "16.974064"], ["106.530565", "16.907086"], ["106.511314", "16.705452"], ["106.610307", "16.485756"], ["106.704089", "16.360817"], ["106.855183", "16.430793"], ["106.917705", "16.245803"], ["107.074009", "16.275813"], ["107.178212", "16.130721"], ["107.386617", "15.975505"], ["107.256364", "15.895346"], ["107.157745", "15.729918"], ["107.270294", "15.538977"], ["107.541111", "15.371176"], ["107.598724", "15.119441"], ["107.495192", "15.087312"], ["107.421241", "14.973038"], ["107.491494", "14.719275"], ["107.439728", "14.558285"], ["107.365777", "14.619117"], ["107.28443", "14.576179"], ["107.125343", "14.454386"], ["107.058787", "14.468707"], ["106.862816", "14.336197"], ["106.714913", "14.443644"], ["106.640961", "14.525985"], ["106.467176", "14.622607"], ["106.385829", "14.475868"], ["106.219438", "14.500928"], ["106.189858", "14.42932"], ["106.104814", "14.407834"], ["105.956911", "14.346944"], ["105.993887", "14.192854"], ["106.138092", "14.056594"], ["106.067838", "13.984846"], ["105.938423", "13.948964"], ["105.860774", "14.067355"], ["105.570516", "14.196239"], ["105.40579", "14.123984"], ["105.307739", "14.207645"], ["105.23322", "14.257067"], ["105.284207", "14.321679"], ["105.397946", "14.336879"], ["105.499919", "14.435654"], ["105.550906", "14.617894"], ["105.535217", "14.773437"], ["105.660723", "14.90613"], ["105.629347", "15.019802"], ["105.511685", "15.118269"], ["105.543062", "15.182626"], ["105.660723", "15.2848"], ["105.543062", "15.368016"], ["105.641113", "15.40205"], ["105.652879", "15.526792"], ["105.672489", "15.723201"], ["105.433244", "15.866611"], ["105.419865", "16.077323"], ["105.134284", "16.158015"], ["105.05029", "16.303179"], ["104.798307", "16.56635"], ["104.815106", "16.791639"], ["104.807079", "17.064937"], ["104.834545", "17.357467"], ["104.746654", "17.518618"], ["104.392993", "17.569592"], ["104.221867", "17.790865"], ["104.071113", "18.043041"], ["103.989584", "18.196169"], ["103.880878", "18.236734"], ["103.692584", "18.269917"], ["103.616878", "18.310466"], ["103.546996", "18.349162"], ["103.428584", "18.336313"], ["103.370348", "18.277339"], ["103.302336", "18.221647"], ["103.237773", "18.102183"], ["103.207191", "18.040806"], ["103.105249", "17.937384"], ["102.938746", "17.875949"], ["102.914959", "17.827432"], ["102.813018", "17.765959"], ["102.687291", "17.753015"], ["102.568359", "17.830667"], ["102.510593", "17.840371"], ["102.422244", "17.921219"], ["102.310109", "17.960013"], ["102.204769", "17.995566"], ["102.143605", "18.066652"], ["101.987295", "17.966477"], ["101.868364", "17.927685"], ["101.647491", "17.811257"], ["101.148809", "17.535022"], ["101.023374", "17.599797"], ["101.039054", "17.808912"], ["101.175591", "17.993048"], ["101.212078", "18.10208"], ["101.219896", "18.173904"], ["101.206865", "18.240749"], ["101.212078", "18.344679"], ["101.107829", "18.394147"], ["101.092192", "18.45349"], ["101.206865", "18.578877"], ["101.31372", "18.655442"], ["101.272021", "18.741845"], ["101.272021", "18.830671"], ["101.311114", "18.939171"], ["101.370997", "19.079681"], ["101.298023", "19.148632"], ["101.279779", "19.212632"], ["101.22818", "19.375675"], ["101.230424", "19.441269"], ["101.295484", "19.487804"], ["101.29997", "19.591402"], ["101.239397", "19.633668"], ["101.145173", "19.587175"], ["101.093574", "19.629442"], ["100.94102", "19.650571"], ["100.893907", "19.65691"], ["100.864742", "19.616763"], ["100.835578", "19.570265"], ["100.770518", "19.534326"], ["100.611233", "19.574493"], ["100.584312", "19.52164"], ["100.525983", "19.540669"], ["100.46541", "19.637894"], ["100.436245", "19.777288"], ["100.541687", "19.91867"], ["100.597773", "20.190526"], ["100.502946", "20.195053"], ["100.428788", "20.262059"], ["100.379218", "20.36601"], ["100.329779", "20.413638"], ["100.244635", "20.387895"], ["100.173224", "20.317079"], ["100.160865", "20.244943"], ["100.114789", "20.260301"], ["100.107922", "20.315689"], ["100.155988", "20.507461"], ["100.211891", "20.650056"], ["100.290818", "20.736459"], ["100.399973", "20.811825"], ["100.562866", "20.788277"], ["100.673701", "20.899705"], ["100.59616", "20.954029"], ["100.751867", "21.254036"], ["100.998402", "21.338663"], ["101.211622", "21.580378"], ["101.209043", "21.846211"], ["100.909901", "21.894492"], ["100.207565", "21.580378"], ["100.051491", "22.159742"], ["99.466212", "22.436515"], ["99.71333", "23.024318"], ["99.352488", "23.281431"], ["99.03983", "24.3247"], ["98.101855", "24.95993"], ["98.855913", "25.608485"], ["98.911088", "26.812993"], ["98.892697", "27.483968"], ["98.340947", "27.826069"], ["98.120247", "28.377665"], ["97.586888", "28.733061"], ["97.108705", "28.329109"], ["96.658506", "27.787659"], ["96.296725", "28.010502"], ["95.847241", "28.136253"], ["95.288126", "27.787659"], ["94.685158", "27.233428"], ["93.281889", "26.647032"], ["92.037851", "26.720259"], ["90.141229", "26.820605"], ["88.984724", "26.833974"], ["88.731159", "27.080308"], ["88.794435", "27.331629"], ["88.741186", "27.914582"], ["88.223484", "27.953015"], ["88.169108", "27.50057"], ["87.774017", "27.262697"], ["88.215457", "26.870398"], ["87.783036", "26.535989"], ["87.047344", "26.702224"], ["84.777332", "27.310285"], ["83.539214", "27.665305"], ["82.385985", "27.880248"], ["81.010299", "28.662263"], ["80.547568", "29.001896"], ["81.345045", "30.304903"], ["80.749935", "31.185747"], ["80.056967", "31.015739"], ["79.215234", "31.178494"], ["78.991224", "31.346766"], ["79.254658", "31.656243"], ["78.835019", "31.979804"], ["78.65109", "32.12011"], ["78.595912", "32.240756"], ["78.591313", "32.400075"], ["78.669483", "32.54361"], ["78.739513", "32.426665"], ["78.84424", "32.288005"], ["79.067657", "32.24668"], ["79.277111", "32.470789"], ["79.395802", "32.676713"], ["79.235221", "33.233259"], ["79.011803", "33.47819"], ["78.84424", "33.681772"], ["79.182009", "34.336185"], ["78.821102", "34.565916"], ["78.428537", "34.758609"], ["78.294895", "34.940474"], ["78.23791", "35.530039"], ["77.722544", "35.628785"], ["77.294994", "35.609184"], ["76.821489", "35.701892"], ["76.684572", "35.988603"], ["76.399329", "35.919333"], ["76.159724", "35.933192"], ["76.165429", "36.20986"], ["76.074151", "36.366207"], ["75.999987", "36.641347"], ["75.714744", "36.787688"], ["75.562518", "36.805399"], ["75.481245", "36.811057"], ["75.45651", "36.950968"], ["75.253968", "37.023882"], ["75.084541", "37.066268"], ["74.894884", "37.084426"], ["74.735572", "37.122745"], ["74.643309", "37.074934"], ["74.566145", "37.033976"], ["74.549925", "36.938948"], ["74.491692", "37.015218"], ["74.377803", "36.998366"], ["74.261908", "36.915016"], ["74.132106", "36.91687"], ["74.057933", "36.840851"], ["73.967535", "36.853836"], ["73.925813", "36.892775"], ["73.808039", "36.908632"], ["73.728388", "36.920709"], ["73.639124", "36.911926"], ["73.699986", "36.820121"], ["73.765904", "36.814624"], ["73.833196", "36.776135"], ["73.853795", "36.743128"], ["73.834569", "36.711208"], ["73.735692", "36.736525"], ["73.657414", "36.707906"], ["73.599736", "36.711208"], ["73.57227", "36.735425"], ["73.517339", "36.729922"], ["73.397862", "36.757433"], ["73.319585", "36.738726"], ["73.241307", "36.720664"], ["73.175389", "36.732772"], ["73.112218", "36.71516"], ["73.032567", "36.686532"], ["73.039433", "36.651284"], ["73.060033", "36.609405"], ["73.036687", "36.564195"], ["73.002355", "36.529994"], ["72.958409", "36.507921"], ["72.944676", "36.475904"], ["72.886998", "36.474799"], ["72.855412", "36.448292"], ["72.848546", "36.400777"], ["72.832334", "36.374217"], ["72.796629", "36.362053"], ["72.685258", "36.303681"], ["72.663286", "36.274901"], ["72.574022", "36.267151"], ["72.461412", "36.175196"], ["73.530389", "35.809316"], ["74.170542", "35.420826"], ["74.340245", "35.055408"], ["73.9237", "34.612198"], ["73.676858", "34.332391"], ["73.880481", "33.422673"], ["74.651862", "32.906095"], ["75.747223", "32.542685"], ["75.623802", "32.256112"], ["74.975842", "31.968632"], ["74.759855", "31.732749"], ["74.759855", "30.955369"], ["74.327882", "30.584206"], ["74.18929", "30.224947"], ["74.035013", "29.864372"]]
              , getOutseaData = function(t) {
                return t && "mapbox" === t ? {
                    boundsP16: [[CHN]],
                    nebulaOutSea: []
                } : {
                    boundsP16: [[CHN], [JPN], [EAST]],
                    nebulaOutSea: [[JPN], [EAST]]
                }
            }
              , geoUtil = new GeometryUtilCls({})
              , CONSTS$1 = {
                sV: "https://webapi.amap.com/style_icon/sprite_v8@2x.png",
                EU: [LangConf.my.type, LangConf.km.type, LangConf.PU.type, LangConf.th.type, LangConf.arabic.type]
            }
              , MapboxLabelFormat = function(r) {
                function t(t) {
                    var e = r.call(this) || this;
                    return e.kQ = {},
                    e
                }
                return __extends(t, r),
                t.prototype.Ns = function(t, e) {
                    return r.prototype.Ns.call(this, t, e),
                    this.rV(t, e)
                }
                ,
                t.prototype.rV = function(t, e) {
                    var r, n, i = (t.data || {}).poilabel || [], a = t.road || [], o = {}, s = this.hV(t);
                    for (r in i)
                        i.hasOwnProperty(r) && (n = i[r],
                        n = this.nV(n, s, e.zoom, e.VQ),
                        o[r] = n);
                    return this.oV(a, {}),
                    o
                }
                ,
                t.prototype.nV = function(t, e, r, n) {
                    for (var i = [], a = this.kQ, o = 0, s = t; o < s.length; o++) {
                        var u, f, c, h, l, d, v, g, y, m = (p = s[o]).name, b = p.position, w = p.id, A = p.minzoom, T = p.maxzoom, p = void 0 === (p = p.style) ? {} : p;
                        "mapbox" !== n && 9 <= r && e && !this.uV(b[0]) || (u = p.lV,
                        f = p.th,
                        c = p.ih,
                        d = p.qU,
                        h = void 0 === (h = p.textAnchor) ? "bottom" : h,
                        l = p.rh,
                        v = p.Kr,
                        y = p.Qr,
                        A = [A, T],
                        T = null,
                        p.nh && d && p.eh && (this.Fs[CONSTS$1.sV] = 1,
                        T = [{
                            image: CONSTS$1.sV,
                            size: [d[6] / 2, d[7] / 2],
                            clipOrigin: [d[4], d[5]],
                            clipSize: [d[6], d[7]]
                        }]),
                        p = null,
                        m && v && (a[v] || (a[v] = Util.color2RgbaArray(v)),
                        d = a[v],
                        v = void 0,
                        g = 0,
                        a[y] || (a[y] = Util.color2RgbaArray(y || "")),
                        a[y] && (v = a[y],
                        g = 3),
                        y = this.fV(m) ? [0, m.length] : [],
                        this.Ws(m, y),
                        p = {
                            txt: m,
                            $G: y,
                            direction: h || "center",
                            offset: [0, 0],
                            style: {
                                fontSize: l,
                                fillColor: d,
                                strokeColor: v,
                                strokeWidth: g,
                                fold: !1
                            }
                        }),
                        y = {
                            data: {
                                id: w,
                                name: m,
                                txt: m,
                                position: b[0],
                                positionType: "relative",
                                zooms: [f, c],
                                extData: {
                                    id: w,
                                    type: "poi"
                                }
                            },
                            opts: {
                                zIndex: u,
                                zooms: A,
                                visible: !0
                            }
                        },
                        T && (y.opts.icon = T),
                        p && (y.opts.text = p),
                        (y.opts.text || y.opts.icon) && i.push(y))
                    }
                    return i
                }
                ,
                t.prototype.oV = function(t, e) {
                    for (var r = 0, n = t; r < n.length; r++) {
                        var i = n[r].name
                          , a = this.fV(i) ? [0, i.length] : [];
                        i && this.Ws(i, a)
                    }
                }
                ,
                t.prototype.DQ = function(t, e) {
                    for (var r = [], n = 0, i = t; n < i.length; n++) {
                        var a = i[n]
                          , o = a.path
                          , s = a.name || ""
                          , u = labelsUtil.aQ(s.split(""))
                          , f = a.distance || 1e5;
                        a.style && a.style[1];
                        var c = void 0 === (c = (a = a.style || {}).th) ? zoomRange[0] : c
                          , h = void 0 === (h = a.ih) ? zoomRange[1] : h
                          , l = a.Hr;
                        s && o && o.length && r.push({
                            path: o,
                            positionType: "absolute",
                            name: s,
                            $G: [],
                            CO: u,
                            rank: a.zIndex,
                            BG: void 0 === l ? "name_en" : l,
                            distance: f,
                            zooms: [c, h],
                            style: {
                                fontSize: a.rh || 12,
                                fillColor: a.Kr,
                                strokeColor: a.Qr
                            }
                        })
                    }
                    return r
                }
                ,
                t.prototype.fV = function(t) {
                    return t = LangManager.kU(t),
                    -1 !== CONSTS$1.EU.indexOf(t)
                }
                ,
                t.prototype.uV = function(t) {
                    for (var e = ProjectionManager.getProjection("EPSG:3857").unproject(t[0], t[1]), r = getOutseaData("mapbox").boundsP16, n = 0; n < r.length; n++) {
                        var i = r[n];
                        if (geoUtil.isPointInPolygon(e, i[0]))
                            return !1
                    }
                    return !0
                }
                ,
                t.prototype.hV = function(t) {
                    return t = [[(t = t.Ro)[0], t[1]], [t[2], t[1]], [t[2], t[3]], [t[0], t[3]]],
                    this.cV(t)
                }
                ,
                t.prototype.cV = function(t) {
                    for (var e = [], r = 0; r < t.length; r++) {
                        var n = t[r]
                          , n = ProjectionManager.getProjection("EPSG:3857").unproject(n[0], n[1]);
                        e.push(n)
                    }
                    for (var i = getOutseaData("mapbox").boundsP16, a = 0; a < i.length; a++) {
                        var o = i[a];
                        if (geoUtil.isRingInRingByMapboxB(e, o[0]))
                            return !0
                    }
                    return !1
                }
                ,
                t.id = "mapbox",
                t
            }(LabelFormat)
              , Color = function() {
                function t(t) {
                    this.type = "AMap.Color",
                    this.rgba = [],
                    this.Vb(t)
                }
                var e = t;
                return t.Wb = function(t, e) {
                    return {
                        rgba: t.rgba
                    }
                }
                ,
                t.Gb = function(t) {
                    return new e(t.rgba)
                }
                ,
                t.FV = function(t, e) {
                    var r = (t = this.DV(t[0], t[1], t[2], t[3]))[0]
                      , n = t[1]
                      , i = t[2];
                    return this.GQ(r += (.5 < r ? -.5 : .5) * e * .35, n -= (n - .5) * e * .35 * 5, i -= (i - .5) * e * .35, t[3])
                }
                ,
                t.DV = function(t, e, r, n) {
                    var i, a, o, s = Math.max(t, e, r), u = Math.min(t, e, r), f = (s + u) / 2;
                    if (s === u)
                        i = a = 0;
                    else {
                        switch (o = s - u,
                        a = .5 < f ? o / (2 - s - u) : o / (s + u),
                        s) {
                        case t:
                            i = (e - r) / o + (e < r ? 6 : 0);
                            break;
                        case e:
                            i = (r - t) / o + 2;
                            break;
                        case r:
                            i = (t - e) / o + 4
                        }
                        i /= 6
                    }
                    return [i, a, f, n]
                }
                ,
                t.uQ = function(t, e, r) {
                    return r < 0 && (r += 1),
                    1 < r && --r,
                    r < 1 / 6 ? t + 6 * (e - t) * r : r < .5 ? e : r < 2 / 3 ? t + (e - t) * (2 / 3 - r) * 6 : t
                }
                ,
                t.GQ = function(t, e, r, n) {
                    var i, a, o;
                    return 0 === e ? i = a = o = r : (i = this.uQ(e = 2 * r - (r = r < .5 ? r * (1 + e) : r + e - r * e), r, t + 1 / 3),
                    a = this.uQ(e, r, t),
                    o = this.uQ(e, r, t - 1 / 3)),
                    [i, a, o, n]
                }
                ,
                t.Hb = function(t, e) {
                    void 0 === e && (e = []);
                    for (var r = 0, n = t.length; r < n; r += 2)
                        e[r / 2] = parseInt(t.substr(r, 2), 16);
                    return e
                }
                ,
                t.Yx = function(t) {
                    return t.startsWith("#") && (t = t.substr(1)),
                    colorNames[t] ? e.Hb(colorNames[t].substr(1)) : 1 === t.length ? e.Hb(t + t + t + t + t + t) : 3 === t.length ? e.Hb(t[0] + t[0] + t[1] + t[1] + t[2] + t[2]) : 6 === t.length ? e.Hb(t) : [0, 0, 0]
                }
                ,
                t.normalize = function(t) {
                    var e = [];
                    if (t && t.length)
                        for (var r = 0, n = t.length; r < n; r++)
                            e[r] = t[r] / 255;
                    return e
                }
                ,
                t.create = function(t) {
                    return t ? new e(t) : null
                }
                ,
                t.prototype.normalize = function() {
                    return [this.rgba[0] / 255, this.rgba[1] / 255, this.rgba[2] / 255, this.rgba[3] / 255]
                }
                ,
                t.prototype.Vb = function(t) {
                    "string" == typeof t ? colorNames[t] ? this.Hb(colorNames[t].substr(1)) : 0 !== t.length && (1 === (t = t.startsWith("#") ? t.substr(1) : t).length ? this.Hb(t + t + t + t + t + t) : 3 === t.length ? this.Hb(t[0] + t[0] + t[1] + t[1] + t[2] + t[2]) : 6 === t.length ? this.Hb(t) : 8 === t.length ? this.$b(t) : t.startsWith("rgba(") ? this.Yb(colorNames[t].substr(1)) : t.startsWith("rgb(") && this.Kb(colorNames[t].substr(1))) : t instanceof Array && (this.rgba[0] = t[0],
                    this.rgba[1] = t[1],
                    this.rgba[2] = t[2],
                    this.rgba[3] = t[3] || 255)
                }
                ,
                t.prototype.Hb = function(t) {
                    this.$b(t + "FF")
                }
                ,
                t.prototype.$b = function(t) {
                    for (var e = 0, r = t.length; e < r; e += 2)
                        this.rgba[e / 2] = parseInt(t.substr(e, 2), 16)
                }
                ,
                t.prototype.Kb = function(t) {
                    t = t.split(","),
                    this.rgba[0] = parseInt(t[0].substr(4), 10),
                    this.rgba[1] = parseInt(t[1], 10),
                    this.rgba[2] = parseInt(t[2], 10),
                    this.rgba[3] = 255
                }
                ,
                t.prototype.Yb = function(t) {
                    t = t.split(","),
                    this.rgba[0] = parseInt(t[0].substr(5), 10),
                    this.rgba[1] = parseInt(t[1], 10),
                    this.rgba[2] = parseInt(t[2], 10),
                    this.rgba[3] = 255 * parseFloat(t[3]) << 0
                }
                ,
                t._8t = function(t) {
                    return t === undefined || null === t ? undefined : {
                        rgba: t = [t >>> 16 & 255, t >>> 8 & 255, 255 & t, t >>> 24 & 255],
                        U8t: e.normalize(t),
                        type: "AMap.Color"
                    }
                }
                ,
                e = __decorate([InnerClass("Color")], t)
            }()
              , colorNames = {
                aliceblue: "#f0f8ff",
                antiquewhite: "#faebd7",
                aqua: "#00ffff",
                aquamarine: "#7fffd4",
                azure: "#f0ffff",
                beige: "#f5f5dc",
                bisque: "#ffe4c4",
                black: "#000000",
                blanchedalmond: "#ffebcd",
                blue: "#0000ff",
                blueviolet: "#8a2be2",
                brown: "#a52a2a",
                burlywood: "#deb887",
                cadetblue: "#5f9ea0",
                chartreuse: "#7fff00",
                chocolate: "#d2691e",
                coral: "#ff7f50",
                cornflowerblue: "#6495ed",
                cornsilk: "#fff8dc",
                crimson: "#dc143c",
                cyan: "#00ffff",
                darkblue: "#00008b",
                darkcyan: "#008b8b",
                darkgoldenrod: "#b8860b",
                darkgray: "#a9a9a9",
                darkgreen: "#006400",
                darkkhaki: "#bdb76b",
                darkmagenta: "#8b008b",
                darkolivegreen: "#556b2f",
                darkorange: "#ff8c00",
                darkorchid: "#9932cc",
                darkred: "#8b0000",
                darksalmon: "#e9967a",
                darkseagreen: "#8fbc8f",
                darkslateblue: "#483d8b",
                darkslategray: "#2f4f4f",
                darkturquoise: "#00ced1",
                darkviolet: "#9400d3",
                deeppink: "#ff1493",
                deepskyblue: "#00bfff",
                dimgray: "#696969",
                dodgerblue: "#1e90ff",
                firebrick: "#b22222",
                floralwhite: "#fffaf0",
                forestgreen: "#228b22",
                fuchsia: "#ff00ff",
                gainsboro: "#dcdcdc",
                ghostwhite: "#f8f8ff",
                gold: "#ffd700",
                goldenrod: "#daa520",
                gray: "#808080",
                green: "#008000",
                greenyellow: "#adff2f",
                honeydew: "#f0fff0",
                hotpink: "#ff69b4",
                indianred: "#cd5c5c",
                indigo: "#4b0082",
                ivory: "#fffff0",
                khaki: "#f0e68c",
                lavender: "#e6e6fa",
                lavenderblush: "#fff0f5",
                lawngreen: "#7cfc00",
                lemonchiffon: "#fffacd",
                lightblue: "#add8e6",
                lightcoral: "#f08080",
                lightcyan: "#e0ffff",
                lightgoldenrodyellow: "#fafad2",
                lightgrey: "#d3d3d3",
                lightgreen: "#90ee90",
                lightpink: "#ffb6c1",
                lightsalmon: "#ffa07a",
                lightseagreen: "#20b2aa",
                lightskyblue: "#87cefa",
                lightslategray: "#778899",
                lightsteelblue: "#b0c4de",
                lightyellow: "#ffffe0",
                lime: "#00ff00",
                limegreen: "#32cd32",
                linen: "#faf0e6",
                magenta: "#ff00ff",
                maroon: "#800000",
                mediumaquamarine: "#66cdaa",
                mediumblue: "#0000cd",
                mediumorchid: "#ba55d3",
                mediumpurple: "#9370d8",
                mediumseagreen: "#3cb371",
                mediumslateblue: "#7b68ee",
                mediumspringgreen: "#00fa9a",
                mediumturquoise: "#48d1cc",
                mediumvioletred: "#c71585",
                midnightblue: "#191970",
                mintcream: "#f5fffa",
                mistyrose: "#ffe4e1",
                moccasin: "#ffe4b5",
                navajowhite: "#ffdead",
                navy: "#000080",
                oldlace: "#fdf5e6",
                olive: "#808000",
                olivedrab: "#6b8e23",
                orange: "#ffa500",
                orangered: "#ff4500",
                orchid: "#da70d6",
                palegoldenrod: "#eee8aa",
                palegreen: "#98fb98",
                paleturquoise: "#afeeee",
                palevioletred: "#d87093",
                papayawhip: "#ffefd5",
                peachpuff: "#ffdab9",
                peru: "#cd853f",
                pink: "#ffc0cb",
                plum: "#dda0dd",
                powderblue: "#b0e0e6",
                purple: "#800080",
                rebeccapurple: "#663399",
                red: "#ff0000",
                rosybrown: "#bc8f8f",
                royalblue: "#4169e1",
                saddlebrown: "#8b4513",
                salmon: "#fa8072",
                sandybrown: "#f4a460",
                seagreen: "#2e8b57",
                seashell: "#fff5ee",
                sienna: "#a0522d",
                silver: "#c0c0c0",
                skyblue: "#87ceeb",
                slateblue: "#6a5acd",
                slategray: "#708090",
                snow: "#fffafa",
                springgreen: "#00ff7f",
                steelblue: "#4682b4",
                tan: "#d2b48c",
                teal: "#008080",
                thistle: "#d8bfd8",
                tomato: "#ff6347",
                turquoise: "#40e0d0",
                violet: "#ee82ee",
                wheat: "#f5deb3",
                white: "#ffffff",
                whitesmoke: "#f5f5f5",
                yellow: "#ffff00",
                yellowgreen: "#9acd32"
            }
              , BaseConfig = {
                feitianHost: "https://pre-vdata.amap.com/web/rendering/vdata/getTiles",
                needKey: ["vdata.amap.com", "pre-lbs-jsapi-vdata.amap.com", "c-webapi.amap.com"],
                ifNeedKey: function(t) {
                    for (var e = !1, r = 0; r < BaseConfig.needKey.length; r++) {
                        var n = BaseConfig.needKey[r];
                        if (-1 < t.indexOf(n) && -1 === t.indexOf("key=")) {
                            e = !0;
                            break
                        }
                    }
                    return e
                },
                getImgUrl: function(t, e) {
                    var r, n;
                    return BaseConfig.ifNeedKey(t) && (r = e.bmt,
                    e = e.poiImgVersion,
                    n = [],
                    r && n.push("key=" + r),
                    e && n.push("v=" + e),
                    -1 < t.indexOf("?") ? t += "&" + n.join("&") : t += "?" + n.join("&")),
                    t
                },
                poiIcon: ["icons_1", "icons_4", "icons_9", "icons_64"],
                getIconUrls: function(e, t) {
                    var r, n = function(t, e) {
                        return "https://o4.amap.com/icon/" + (e.Cmt || "") + "/v1/" + (e.Smt || "") + "/" + t + "?key=" + (e.key || "")
                    };
                    return "string" == typeof e ? this.poiIcon.includes(e) ? n(e, t) : undefined : (r = [],
                    BaseConfig.poiIcon.forEach(function(t) {
                        r.push(n(t, e))
                    }),
                    r)
                },
                getDataHost: function(t) {
                    return t ? t + "://pre-vdata.amap.com/web/rendering/vdata/getTiles" : "https://pre-vdata.amap.com/web/rendering/vdata/getTiles"
                },
                getDataUrl: function(e) {
                    var r = ["p=v2", "v=24_12_19_00"].join("&");
                    return Object.keys(e).forEach(function(t) {
                        r += "&" + t + "=" + e[t]
                    }),
                    BaseConfig.feitianHost + "?" + r
                },
                getTileUrl: function(t, e) {
                    var r = "v2"
                      , n = t.tileVersion
                      , i = t.flds.split(",").reverse().join("_")
                      , a = t.t.split(";")
                      , o = ""
                      , s = ""
                      , a = (a.forEach(function(t, e) {
                        t = t.split(","),
                        o += t[1] + "_" + t[2] + "_" + t[0] + ",",
                        0 === e && (s = t[3])
                    }),
                    o = o.slice(0, -1),
                    t.languageCode && "default" !== t.languageCode ? "global/" : "")
                      , e = e ? e + "/combo?p=tile/" + n + "/" + r + "/" + i + "/pbf/" + s + "," + o : "https://{o1,o2,o3,o4,o5}.amap.com/combo?p=tile/" + n + "/" + r + "/" + a + i + "/pbf/" + s + "," + o
                      , a = /\{([\w,-]+)\}/
                      , n = (e = !1 === t.tileCombo ? "https://{o3}.amap.com/tile/" + n + "/" + r + "/" + i + "/pbf/" + s + "/" + o + "?key=" + t.key + "&oversea=" + t.oversea : e).match(a);
                    if (n && n[0])
                        return t = (i = n[0].replace(/[{}]/g, "").split(",")).length,
                        "undefined" == typeof this.$D && (this.$D = 0),
                        n = i[this.$D % t],
                        r = e.replace(a, n),
                        this.$D = (this.$D + 1) % t,
                        r;
                    throw new Error("No matching pattern found in baseUrl")
                }
            }
              , NebulaLabelFormat = function(r) {
                function t(t) {
                    var e = r.call(this) || this;
                    return e.bt = 20,
                    e.WW = 20,
                    e._opts = {},
                    e.uA = {},
                    e.fff = 1,
                    e.vn = t.vn,
                    e
                }
                return __extends(t, r),
                t.prototype.Ns = function(t, e) {
                    return e.lang && (this.lang = e.lang),
                    this._opts = e,
                    this.bt = e.zoom,
                    this.WW = e.ZL,
                    this.rV(t, e.R_, e)
                }
                ,
                t.prototype.rV = function(t, e, r) {
                    var n, i, a = t.data || {}, o = a.poilabel || [], s = {}, u = t.cQ;
                    for (n in o)
                        o.hasOwnProperty(n) && (i = this.nV(o[n], {
                            aV: t.zo.z < 10,
                            cQ: u,
                            R_: e,
                            Cmt: r.Cmt,
                            Smt: r.Smt,
                            bmt: r.bmt,
                            languageCode: r.languageCode
                        }),
                        s[n] = i);
                    return a = this.oV(a.roadName || [], {
                        R_: e
                    }),
                    s.eA = a,
                    s
                }
                ,
                t.prototype.nV = function(t, e) {
                    var r, n, i, a, o, s, u, f = CONSTS.Lj.size, E = CONSTS.Mp, U = CONSTS.Pp, j = CONSTS.jp, R = this._opts.scale, D = (e = void 0 === e ? {} : e).aV, c = e.cQ, B = e.Cmt, G = e.Smt, V = e.bmt, z = this.bt, H = [], W = this.lang, q = !c && 5 <= z, Z = e.languageCode;
                    if (t && 0 < t.length)
                        for (var h = 0, K = t; h < K.length; h++) {
                            var l = K[h]
                              , d = l.rti
                              , v = l.ew
                              , g = l.pos
                              , y = (C = Z ? labelsUtil.s6t(l, Z) : labelsUtil.tQ(l, W, q ? e.R_ : undefined)).name
                              , Y = C.$G || []
                              , p = l.rank
                              , m = l.minZoom || E
                              , b = (D ? zoomRange[1] : l.maxZoom,
                            l.Fp)
                              , w = l.Ep;
                            if (3 === m && (m = 2),
                            (10002 !== b || 28 !== w) && (r = this.oA(b, w, this.WW))) {
                                128 === r.iconID && "icons_1" === r.iconName && (r.iconID = undefined),
                                (l = 1 < R || 9 < r.fontSize ? r.fontSize : 9) || (y = undefined);
                                var X = r.Qe
                                  , A = r.forceShow
                                  , T = r.zIndex
                                  , J = r.q8t
                                  , S = r.iconName;
                                if (x = labelsUtil.Jj([m, zoomRange[1]], r.zooms)) {
                                    for (var x, m = r.canCovered || undefined, Q = r.clickable || undefined, tt = r.K8t || undefined, et = r.Y8t || undefined, rt = r.Z8t || undefined, nt = r.X8t || undefined, M = (x = labelsUtil.$p(x))[0], P = [], I = {}; M <= x[1]; ) {
                                        var $ = this.vn.dn(b, w, M);
                                        $ && $.iconID && "0" !== $.iconID && (_ = $.iconID,
                                        -1 === P.indexOf(_) && (P.push(_),
                                        I[_] = []),
                                        I[_].push(M)),
                                        M++
                                    }
                                    for (var k = [x[0] - U, x[1] + j], L = ("天津市" !== y && "重庆市" !== y && "上海市" !== y || (k = [3.8, 4.7],
                                    S = undefined),
                                    "北京市" === y && (k = [3.8, 4.7]),
                                    o = S ? BaseConfig.getIconUrls(S, {
                                        Smt: G,
                                        Cmt: B,
                                        key: V
                                    }) : undefined,
                                    g = {
                                        data: {
                                            id: d ? d + w : "",
                                            position: g,
                                            name: y,
                                            txt: y,
                                            rank: p,
                                            BG: C.type,
                                            u6t: C.u6t,
                                            extData: {
                                                mainKey: b,
                                                subKey: w,
                                                id: d,
                                                type: "poi",
                                                bz: v
                                            }
                                        },
                                        opts: {
                                            type: "billboard",
                                            angle: 0,
                                            forceShow: A,
                                            zIndex: T,
                                            visible: !0,
                                            zooms: k
                                        }
                                    },
                                    s = r.nn || 0,
                                    u = r.an || 0,
                                    []), p = void 0, C = [0, 0], N = 0; N < P.length; N++) {
                                        var _ = P[N]
                                          , it = S && this.aA(parseInt(_, 10), r)
                                          , F = (r.styleHeight && r.styleWidth && (f = [r.styleWidth, r.styleHeight],
                                        r.q8t) && y && (F = (O = F = 0) < y.length ? 32 * y.length : 32,
                                        f[0] = F,
                                        O = 0 < this.J8t(y) ? 32 * this.J8t(y) : 32,
                                        f[1] = O),
                                        f)
                                          , O = labelsUtil.$p(I[_])
                                          , at = vector.Up(F, 2)
                                          , ot = "icons_9" === S ? !1 : !0;
                                        o && (it = {
                                            type: "image",
                                            image: o,
                                            clipOrigin: vector.add(it, [0, 0]),
                                            size: [+at[0], +at[1]],
                                            offset: [0, 0],
                                            clipSize: r.iconImageSize,
                                            anchor: ot ? [10 - 20 * s / 24, 10 - 20 * u / 24] : "bottom-center",
                                            angle: 0,
                                            retina: !0,
                                            zooms: [O[0] - U, O[O.length - 1] + j]
                                        },
                                        L.push(it))
                                    }
                                    y && (C = "曾母暗沙" === y ? (p = "top",
                                    [0, 5]) : L.length && L[0].image ? (_ = P[0],
                                    c && (p = "bottom",
                                    C = [0, 0]),
                                    "北京" === y ? (p = "top",
                                    [0, 3]) : "天安门" === y || "B000A60DA1" === d ? (p = "bottom",
                                    [0, -3]) : "澳门" === y ? (p = "left",
                                    [0, -2]) : "合肥" === y || "太原" === y || "西安" === y || "郑州" === y || "杭州" === y || "台北" === y || "加德满都" === y ? (p = "bottom",
                                    [0, -3]) : 10002 === b && 5 === w ? (p = "right",
                                    [-3, -3]) : 1 === X ? (p = "right",
                                    [0, -2]) : "密支那" === y || "藩郎-塔占" === y || "甘托克" === y ? (p = "top",
                                    [0, -2]) : "153" === _ || 75 === _ || J ? (p = "center",
                                    [0, -1]) : (p = "right",
                                    [0, -2])) : (p = "center",
                                    [s, u])),
                                    (A = this.uA[v = "" + b + w]) ? (n = A.faceColor,
                                    i = A.borderColor,
                                    a = A.holoColor) : (n = r.faceColor && Color.normalize(r.faceColor.rgba),
                                    i = r.borderColor && Color.normalize(r.borderColor.rgba),
                                    a = 3 === r.Qe ? r.holoColor && Color.normalize(r.holoColor.rgba) : null,
                                    this.uA[v] = {
                                        faceColor: n,
                                        borderColor: i,
                                        holoColor: a
                                    }),
                                    T = y ? {
                                        direction: p,
                                        offset: C,
                                        $G: Y,
                                        style: {
                                            fontSize: l,
                                            canCovered: m,
                                            clickable: Q,
                                            K8t: tt,
                                            Y8t: et,
                                            Z8t: rt,
                                            X8t: nt,
                                            strokeWidth: 2,
                                            padding: [0, 1, 0, 1],
                                            fold: !c && 5 <= z
                                        }
                                    } : {},
                                    g.opts && (g.opts.icon = L,
                                    g.opts.text = T),
                                    o && (this.Fs[o] = 1),
                                    y && this.Ws(y, Y),
                                    H.push(g),
                                    r = null
                                }
                            }
                        }
                    return H
                }
                ,
                t.prototype.oV = function(t, e) {
                    for (var r = CONSTS.Lj, n = r.file, i = r.size, a = CONSTS.Mp, o = CONSTS.Rp, s = CONSTS.Pp, u = CONSTS.jp, f = [], c = this._opts.scale, h = this.lang, l = (e = void 0 === e ? {} : e) && e.R_ && e.R_.protocol || "https", d = 0, v = t; d < v.length; d++) {
                        var g, y, p, m, b, w = v[d], A = w.path, T = w.rank, S = w.minzoom || a, x = w.maxzoom || o, M = w.shield, P = w.shieldType;
                        (b = (w = labelsUtil.j8t(w, h)).name) && this.Ws(b, w.$G),
                        !M || (m = Math.floor(A.length / 2)) < 1 || (m = [A[m - 1], A[m]],
                        (P = this.oA(40001, A = P, this.WW)) && (g = 1 < c || 9 < P.fontSize ? P.fontSize : 9,
                        y = P.faceColor,
                        p = P.iconID,
                        m = {
                            data: {
                                id: Util.stamp(this),
                                position: m,
                                positionType: "relative",
                                name: b,
                                txt: M,
                                rank: T,
                                BG: w.type,
                                extData: {
                                    type: "shield",
                                    mainKey: 40001,
                                    subKey: A
                                }
                            },
                            opts: {
                                type: "billboard",
                                angle: 0,
                                zooms: [S - s, x + u],
                                visible: !0
                            }
                        },
                        b = this.aA(parseInt(p, 10), P),
                        T = 1 < M.length / 4 ? M.length / 4 : 1,
                        w = {
                            type: "image",
                            image: l + n[0],
                            clipOrigin: b,
                            clipSize: i,
                            size: [24 * (1 < c ? T : 9 * T / 7), 24],
                            anchor: "center",
                            angle: 0,
                            retina: !0
                        },
                        A = M ? {
                            direction: "center",
                            offset: [0, 0],
                            style: {
                                fontSize: g,
                                fillColor: y && Color.normalize(y.rgba),
                                strokeWidth: 0,
                                padding: [0, 1, 0, 1]
                            }
                        } : {},
                        m.opts && (m.opts.text = A,
                        m.opts.icon = [w]),
                        M && this.Ws(M),
                        f.push(m)))
                    }
                    return f
                }
                ,
                t.prototype.DQ = function(t, e) {
                    for (var r, n, i = CONSTS.Mp, a = CONSTS.Rp, o = CONSTS.Pp, s = CONSTS.jp, u = (e.zoom,
                    0), f = [], c = this.lang, h = 0, l = t; h < l.length; h++) {
                        var d, v, g, y, p, m, b, w, A, T, S = l[h];
                        (d = S.id) || (this.fff += 1,
                        d = S.uid),
                        r = (v = labelsUtil.j8t(S, c)).name,
                        n = v.$G || [],
                        r && (v = v.type,
                        g = labelsUtil.EQ(r, n),
                        g = labelsUtil.aQ(g),
                        y = S.rank,
                        p = S.Fp,
                        m = S.Ep,
                        u = S.distance || 0,
                        b = S.minzoom || i,
                        w = S.maxzoom || a,
                        (A = (A = this.vn.dn(p, m, 16)) && A[1] || {}).fontSize,
                        A = A.borderColor,
                        b = (T = labelsUtil.$p([b, w]))[0],
                        w = 20 <= (w = T[1]) ? zoomRange[1] : w,
                        r) && d && (T = {
                            id: d,
                            positionType: "relative",
                            name: r,
                            $G: n,
                            CO: g,
                            rank: y,
                            BG: v,
                            distance: u,
                            zooms: [b - o, w + s],
                            path: 0 < S.path.length ? S.path : undefined,
                            style: {
                                strokeColor: A && vector.Up(A.rgba, 255)
                            },
                            extData: {
                                mainkey: p,
                                subkey: m
                            }
                        },
                        S.lang && (T.lang = S.lang),
                        f.push(T))
                    }
                    return f
                }
                ,
                t.prototype.aA = function(t, e) {
                    var n = void 0 === (n = (r = CONSTS.Lj).columnNum) ? 10 : n
                      , r = r.size
                      , e = (e && e.columnNum && (n = e.columnNum),
                    e && e.iconSize && (r = e.iconSize),
                    Math.floor(t / n));
                    return t % n == 0 && --e,
                    [(t - n * e - 1) * r[0], e * r[1]]
                }
                ,
                t.prototype.J8t = function(t) {
                    for (var e = 0, r = 0; r < t.length; r++)
                        "\n" === t[r] && e++;
                    return e
                }
                ,
                t.prototype.oA = function(t, e, r) {
                    var n = [3, 20]
                      , i = this.vn.dn(t, e, r)
                      , a = this.vn.mn(t, e);
                    if (!i)
                        for (var o = 1; (n[0] <= r - o || r + o <= n[1]) && !(i = (i = this.vn.dn(t, e, r - o)) || this.vn.dn(t, e, r + o)); )
                            o++;
                    return i && (i.zooms = a),
                    i
                }
                ,
                t.prototype.mN = function(t, e) {
                    var r = [0, 0];
                    if ("0" === t)
                        switch (e) {
                        case "3":
                            r = [6, 6];
                            break;
                        case "4":
                        case "5":
                        case "6":
                            r = [9, 9]
                        }
                    return r
                }
                ,
                t.prototype.TN = function(t, e, r) {
                    var n = r = void 0 === r ? [0, 0] : r;
                    if ("0" === t)
                        switch (e) {
                        case "3":
                            n = [30, 30];
                            break;
                        case "4":
                        case "5":
                        case "6":
                            n = [20, 20]
                        }
                    return n
                }
                ,
                t.id = exports.n0.nebulaLabel,
                t
            }(LabelFormat)
              , TileCoord = (function(t) {
                t.TOLOAD = "toload",
                t.LOADING = "loading",
                t.LOADED = "loaded",
                t.UNLOADED = "unloaded",
                t.ERROR = "error",
                t.RELOADING = "reloading"
            }(exports.TileState || (exports.TileState = {})),
            function() {
                function t(t, e, r) {
                    this.x = e,
                    this.y = r,
                    this.z = t,
                    this.key = t + "," + e + "," + r
                }
                var n = t;
                return t.prototype.s0 = function(t) {
                    var e = t - this.z
                      , r = Math.floor(Math.pow(2, e) * this.x)
                      , e = Math.floor(Math.pow(2, e) * this.y);
                    return new n(t,r,e)
                }
                ,
                n = __decorate([InnerClass("TileCoord")], t)
            }())
              , Tile = function() {
                function t(t) {
                    this.type = "tile",
                    this.Ro = [0, 0, 0, 0],
                    this.stamp = 0,
                    this.zo = t,
                    this.status = exports.TileState.TOLOAD,
                    this._v = null,
                    this.data = {}
                }
                return t.YH = function(t) {
                    return t.status === exports.TileState.LOADED || t.status === exports.TileState.RELOADING
                }
                ,
                t.prototype.destroy = function() {}
                ,
                t.prototype.nG = function(t) {
                    this.type = t
                }
                ,
                __decorate([InnerClass("Tile")], t)
            }()
              , NebulaTile = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.type = "nebula",
                    t.region = "world",
                    t.aN = exports.zB.NONE,
                    t.BN = exports.zB.NONE,
                    t
                }
                return __extends(t, e),
                Object.defineProperty(t.prototype, "tag", {
                    get: function() {
                        return this.nN
                    },
                    set: function(t) {
                        this.aN = this.tag,
                        this.nN = t
                    },
                    enumerable: !1,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "gB", {
                    get: function() {
                        return this.VN
                    },
                    set: function(t) {
                        this.BN = this.gB,
                        this.VN = t
                    },
                    enumerable: !1,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "data", {
                    get: function() {
                        var t = [];
                        return this.qc && this.qc.Dc ? t.push(this.qc) : (this.sN && t.push(this.sN),
                        this.uN && t.push(this.uN)),
                        this.lU && this.lU.Dc ? t.push(this.lU) : (this.fU && t.push(this.fU),
                        this.cU && t.push(this.cU)),
                        this.zN && this.zN.labels ? t.push(this.zN) : (this.HN && t.push(this.HN),
                        this.WN && t.push(this.WN)),
                        this.dU && this.dU.labels ? t.push(this.dU) : (this.vU && t.push(this.vU),
                        this.gU && t.push(this.gU)),
                        t
                    },
                    set: function(t) {},
                    enumerable: !1,
                    configurable: !0
                }),
                t.prototype.xa = function(t, e) {
                    if (void 0 === e && (e = exports.zB.ALL),
                    Object.keys(t))
                        switch (e) {
                        case exports.zB.LITE:
                            this.uN = exports.Ln(exports.Ln({}, this.uN), t);
                            break;
                        case exports.zB.LEFT:
                            this.sN = exports.Ln(exports.Ln({}, this.sN), t);
                            break;
                        default:
                            exports.zB.ALL,
                            this.qc = exports.Ln(exports.Ln({}, this.qc), t)
                        }
                }
                ,
                t.prototype.JE = function(t, e) {
                    if (void 0 === e && (e = exports.zB.ALL),
                    Object.keys(t))
                        switch (e) {
                        case exports.zB.LITE:
                            this.cU = exports.Ln(exports.Ln({}, this.cU), t);
                            break;
                        case exports.zB.LEFT:
                            this.fU = exports.Ln(exports.Ln({}, this.fU), t);
                            break;
                        default:
                            exports.zB.ALL,
                            this.lU = exports.Ln(exports.Ln({}, this.lU), t)
                        }
                }
                ,
                t.prototype.rO = function(t, e) {
                    if (void 0 === e && (e = exports.zB.ALL),
                    Object.keys(t))
                        switch (e) {
                        case exports.zB.LITE:
                            this.WN = exports.Ln(exports.Ln({}, this.WN), t);
                            break;
                        case exports.zB.LEFT:
                            this.HN = exports.Ln(exports.Ln({}, this.HN), t);
                            break;
                        default:
                            exports.zB.ALL,
                            this.zN = exports.Ln(exports.Ln({}, this.zN), t)
                        }
                }
                ,
                t.prototype.qE = function(t, e) {
                    if (void 0 === e && (e = exports.zB.ALL),
                    Object.keys(t))
                        switch (e) {
                        case exports.zB.LITE:
                            this.gU = exports.Ln(exports.Ln({}, this.gU), t);
                            break;
                        case exports.zB.LEFT:
                            this.vU = exports.Ln(exports.Ln({}, this.vU), t);
                            break;
                        default:
                            exports.zB.ALL,
                            this.dU = exports.Ln(exports.Ln({}, this.dU), t)
                        }
                }
                ,
                t.prototype.ID = function(t) {
                    t && (t.uN && (this.uN = t.uN),
                    t.sN && (this.sN = t.sN),
                    t.qc && (this.qc = t.qc),
                    t.WN && (this.WN = t.WN),
                    t.HN && (this.HN = t.HN),
                    t.zN) && (this.zN = t.zN)
                }
                ,
                t.prototype.rN = function() {
                    this.aN ? this.nN = this.aN : this.nN = exports.zB.NONE,
                    this.BN && (this.VN = this.BN,
                    this.nN = exports.zB.NONE)
                }
                ,
                t.prototype.AB = function() {
                    var t = [];
                    return this.qc && this.qc.road && this.zN && this.zN.labels ? t.push(this.qc) : (this.sN && this.sN.road && this.HN && this.HN.labels && t.push(this.sN),
                    this.uN && this.uN.road && this.WN && this.WN.labels && t.push(this.uN)),
                    t
                }
                ,
                t.prototype.LY = function(t, e) {
                    for (var r = 0, n = this.data; r < n.length; r++) {
                        var i = n[r];
                        i.Dc && i.Dc.upload(t, !0),
                        i.$c && i.$c.upload(t, !0),
                        i.A_ && i.A_.upload(t, !0),
                        i.FD && i.FD.upload(t, !0)
                    }
                }
                ,
                t.prototype.destroy = function() {
                    var t = this.data;
                    if (t)
                        for (var e = 0, r = t; e < r.length; e++) {
                            var n = r[e];
                            if (n.Dc && (n.Dc.destroy(),
                            delete n.Dc),
                            n.$c && (n.$c.destroy(),
                            delete n.$c),
                            n.labels) {
                                for (var i = 0, a = n.labels; i < a.length; i++)
                                    a[i].destroy();
                                delete n.labels
                            }
                            n.Ta = !1,
                            delete n.gf
                        }
                }
                ,
                t.prototype.KE = function(t) {
                    for (var e, r = this.data, n = [], i = 0, a = t; i < a.length; i++)
                        (o = a[i]).road && n.push(o.road);
                    for (var o, s = 0, u = r; s < u.length; s++)
                        (o = u[s]).XE && (e = o.XE,
                        this.pU(n, e))
                }
                ,
                t.prototype.reload = function() {
                    delete this.lU,
                    delete this.cU,
                    delete this.fU,
                    delete this.zN,
                    delete this.WN,
                    delete this.HN,
                    delete this.VN,
                    this.BN = exports.zB.NONE
                }
                ,
                t.prototype.pU = function(t, e) {
                    for (var r = 0, n = e; r < n.length; r++) {
                        var i = n[r]
                          , a = i.id;
                        if (i.path)
                            break;
                        for (var o = 0, s = t; o < s.length; o++) {
                            var u = s[o];
                            i.path = this.yU(u, a)
                        }
                    }
                }
                ,
                t.prototype.yU = function(t, e) {
                    for (var r = 0, n = t; r < n.length; r++) {
                        var i = n[r];
                        if (i.id === e)
                            return i.path
                    }
                }
                ,
                t.prototype.oN = function() {
                    var t = this.qc;
                    return !!(t = Object.keys(t || {})).length && (1 !== t.length || "sdfLoaded" !== t[0])
                }
                ,
                __decorate([InnerClass("NebulaTile")], t)
            }(Tile)
              , RasterTile = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.type = "raster",
                    t
                }
                return __extends(t, e),
                t.prototype.destroy = function() {
                    var t = this.data;
                    t && (t.texture && (t.texture.destroy(),
                    delete t.texture),
                    t.zs && (t.zs.context.deleteBuffer(t.zs),
                    delete t.zs),
                    t.Js) && (t.Js.destroy(),
                    delete t.Js)
                }
                ,
                t
            }(Tile)
              , VectorTile = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.type = "vector",
                    t
                }
                return __extends(t, e),
                t.prototype.destroy = function() {
                    var t = this.data;
                    t && (t.$c && (t.$c.destroy(),
                    delete t.$c),
                    t.Uc) && delete t.Uc
                }
                ,
                __decorate([InnerClass("VectorTile")], t)
            }(Tile);
            function quickselect(t, e, r, n, i) {
                quickselectStep(t, e, r || 0, n || t.length - 1, i || defaultCompare)
            }
            function quickselectStep(t, e, r, n, i) {
                for (; r < n; ) {
                    600 < n - r && (a = n - r + 1,
                    o = e - r + 1,
                    u = Math.log(a),
                    s = .5 * Math.exp(2 * u / 3),
                    u = .5 * Math.sqrt(u * s * (a - s) / a) * (o - a / 2 < 0 ? -1 : 1),
                    quickselectStep(t, e, Math.max(r, Math.floor(e - o * s / a + u)), Math.min(n, Math.floor(e + (a - o) * s / a + u)), i));
                    var a, o, s, u, f = t[e], c = r, h = n;
                    for (swap(t, r, e),
                    0 < i(t[n], f) && swap(t, r, n); c < h; ) {
                        for (swap(t, c, h),
                        c++,
                        h--; i(t[c], f) < 0; )
                            c++;
                        for (; 0 < i(t[h], f); )
                            h--
                    }
                    0 === i(t[r], f) ? swap(t, r, h) : swap(t, ++h, n),
                    h <= e && (r = h + 1),
                    e <= h && (n = h - 1)
                }
            }
            function swap(t, e, r) {
                var n = t[e];
                t[e] = t[r],
                t[r] = n
            }
            function defaultCompare(t, e) {
                return t < e ? -1 : e < t ? 1 : 0
            }
            var rbush_1 = rbush, default_1 = rbush, Status, M;
            function rbush(t, e) {
                if (!(this instanceof rbush))
                    return new rbush(t,e);
                this.Bc = Math.max(4, t || 9),
                this.Wc = Math.max(2, Math.ceil(.4 * this.Bc)),
                e && this.Gc(e),
                this.clear()
            }
            function findItem(t, e, r) {
                if (!r)
                    return e.indexOf(t);
                for (var n = 0; n < e.length; n++)
                    if (r(t, e[n]))
                        return n;
                return -1
            }
            function calcBBox(t, e) {
                distBBox(t, 0, t.children.length, e, t)
            }
            function distBBox(t, e, r, n, i) {
                (i = i || createNode(null)).ja = Infinity,
                i.Fa = Infinity,
                i.Oa = -Infinity,
                i.Ea = -Infinity;
                for (var a, o = e; o < r; o++)
                    a = t.children[o],
                    extend$1(i, t.Zc ? n(a) : a);
                return i
            }
            function extend$1(t, e) {
                t.ja = Math.min(t.ja, e.ja),
                t.Fa = Math.min(t.Fa, e.Fa),
                t.Oa = Math.max(t.Oa, e.Oa),
                t.Ea = Math.max(t.Ea, e.Ea)
            }
            function compareNodeMinX(t, e) {
                return t.ja - e.ja
            }
            function compareNodeMinY(t, e) {
                return t.Fa - e.Fa
            }
            function bboxArea(t) {
                return (t.Oa - t.ja) * (t.Ea - t.Fa)
            }
            function bboxMargin(t) {
                return t.Oa - t.ja + (t.Ea - t.Fa)
            }
            function enlargedArea(t, e) {
                return (Math.max(e.Oa, t.Oa) - Math.min(e.ja, t.ja)) * (Math.max(e.Ea, t.Ea) - Math.min(e.Fa, t.Fa))
            }
            function intersectionArea(t, e) {
                var r = Math.max(t.ja, e.ja)
                  , n = Math.max(t.Fa, e.Fa)
                  , i = Math.min(t.Oa, e.Oa)
                  , t = Math.min(t.Ea, e.Ea);
                return Math.max(0, i - r) * Math.max(0, t - n)
            }
            function contains(t, e) {
                return t.ja <= e.ja && t.Fa <= e.Fa && e.Oa <= t.Oa && e.Ea <= t.Ea
            }
            function intersects(t, e) {
                return e.ja <= t.Oa && e.Fa <= t.Ea && e.Oa >= t.ja && e.Ea >= t.Fa
            }
            function createNode(t) {
                return {
                    children: t,
                    height: 1,
                    Zc: !0,
                    ja: Infinity,
                    Fa: Infinity,
                    Oa: -Infinity,
                    Ea: -Infinity
                }
            }
            function multiSelect(t, e, r, n, i) {
                for (var a, o = [e, r]; o.length; )
                    (r = o.pop()) - (e = o.pop()) <= n || (quickselect(t, a = e + Math.ceil((r - e) / n / 2) * n, e, r, i),
                    o.push(e, a, a, r))
            }
            function getModule() {
                return M = M || {
                    nS: function(clsName, clsText) {
                        try {
                            eval(clsText)
                        } catch (e) {
                            throw e
                        }
                    },
                    eS: {
                        iS: "1756187598305",
                        BY: !Browser.DW && config[13]
                    }
                },
                M
            }
            rbush.prototype = {
                all: function() {
                    return this.qc(this.data, [])
                },
                search: function(t) {
                    var e = this.data
                      , r = []
                      , n = this.Yc;
                    if (intersects(t, e))
                        for (var i, a, o, s, u = []; e; ) {
                            for (i = 0,
                            a = e.children.length; i < a; i++)
                                o = e.children[i],
                                intersects(t, s = e.Zc ? n(o) : o) && (e.Zc ? r.push(o) : contains(t, s) ? this.qc(o, r) : u.push(o));
                            e = u.pop()
                        }
                    return r
                },
                Vc: function(t) {
                    var e = this.data
                      , r = this.Yc;
                    if (intersects(t, e))
                        for (var n, i, a, o, s = []; e; ) {
                            for (n = 0,
                            i = e.children.length; n < i; n++)
                                if (a = e.children[n],
                                intersects(t, o = e.Zc ? r(a) : a)) {
                                    if (e.Zc || contains(t, o))
                                        return !0;
                                    s.push(a)
                                }
                            e = s.pop()
                        }
                    return !1
                },
                load: function(t) {
                    if (t && t.length)
                        if (t.length < this.Wc)
                            for (var e = 0, r = t.length; e < r; e++)
                                this.Xc(t[e]);
                        else {
                            var n, i = this.Hc(t.slice(), 0, t.length - 1, 0);
                            this.data.children.length ? this.data.height === i.height ? this.Jc(this.data, i) : (this.data.height < i.height && (n = this.data,
                            this.data = i,
                            i = n),
                            this.Kc(i, this.data.height - i.height - 1, !0)) : this.data = i
                        }
                    return this
                },
                Xc: function(t) {
                    return t && this.Kc(t, this.data.height - 1),
                    this
                },
                clear: function() {
                    return this.data = createNode([]),
                    this
                },
                remove: function(t, e) {
                    if (t)
                        for (var r, n, i, a, o = this.data, s = this.Yc(t), u = [], f = []; o || u.length; ) {
                            if (o || (o = u.pop(),
                            n = u[u.length - 1],
                            r = f.pop(),
                            a = !0),
                            o.Zc && -1 !== (i = findItem(t, o.children, e)))
                                return o.children.splice(i, 1),
                                u.push(o),
                                this.Qc(u),
                                this;
                            a || o.Zc || !contains(o, s) ? n ? (r++,
                            o = n.children[r],
                            a = !1) : o = null : (u.push(o),
                            f.push(r),
                            o = (n = o).children[r = 0])
                        }
                    return this
                },
                Yc: function(t) {
                    return t
                },
                tf: compareNodeMinX,
                "if": compareNodeMinY,
                toJSON: function() {
                    return this.data
                },
                ef: function(t) {
                    return this.data = t,
                    this
                },
                qc: function(t, e) {
                    for (var r = []; t; )
                        t.Zc ? e.push.apply(e, t.children) : r.push.apply(r, t.children),
                        t = r.pop();
                    return e
                },
                Hc: function(t, e, r, n) {
                    var i, a = r - e + 1, o = this.Bc;
                    if (a <= o)
                        calcBBox(i = createNode(t.slice(e, r + 1)), this.Yc);
                    else {
                        n || (n = Math.ceil(Math.log(a) / Math.log(o)),
                        o = Math.ceil(a / Math.pow(o, n - 1))),
                        (i = createNode([])).Zc = !1,
                        i.height = n;
                        var s, u, f, c, h = Math.ceil(a / o), l = h * Math.ceil(Math.sqrt(o));
                        for (multiSelect(t, e, r, l, this.tf),
                        s = e; s <= r; s += l)
                            for (multiSelect(t, s, f = Math.min(s + l - 1, r), h, this["if"]),
                            u = s; u <= f; u += h)
                                c = Math.min(u + h - 1, f),
                                i.children.push(this.Hc(t, u, c, n - 1));
                        calcBBox(i, this.Yc)
                    }
                    return i
                },
                nf: function(t, e, r, n) {
                    for (var i, a, o, s, u, f, c, h; n.push(e),
                    !e.Zc && n.length - 1 !== r; ) {
                        for (c = h = Infinity,
                        i = 0,
                        a = e.children.length; i < a; i++)
                            u = bboxArea(o = e.children[i]),
                            (f = enlargedArea(t, o) - u) < h ? (h = f,
                            c = u < c ? u : c,
                            s = o) : f === h && u < c && (c = u,
                            s = o);
                        e = s || e.children[0]
                    }
                    return e
                },
                Kc: function(t, e, r) {
                    var n = this.Yc
                      , r = r ? t : n(t)
                      , i = [];
                    for ((n = this.nf(r, this.data, e, i)).children.push(t),
                    extend$1(n, r); 0 <= e && i[e].children.length > this.Bc; )
                        this.af(i, e),
                        e--;
                    this.sf(r, i, e)
                },
                af: function(t, e) {
                    var r = t[e]
                      , n = r.children.length
                      , i = this.Wc
                      , i = (this.rf(r, i, n),
                    this.hf(r, i, n));
                    (n = createNode(r.children.splice(i, r.children.length - i))).height = r.height,
                    n.Zc = r.Zc,
                    calcBBox(r, this.Yc),
                    calcBBox(n, this.Yc),
                    e ? t[e - 1].children.push(n) : this.Jc(r, n)
                },
                Jc: function(t, e) {
                    this.data = createNode([t, e]),
                    this.data.height = t.height + 1,
                    this.data.Zc = !1,
                    calcBBox(this.data, this.Yc)
                },
                hf: function(t, e, r) {
                    for (var n, i, a, o, s, u = o = Infinity, f = e; f <= r - e; f++)
                        i = intersectionArea(a = distBBox(t, 0, f, this.Yc), n = distBBox(t, f, r, this.Yc)),
                        a = bboxArea(a) + bboxArea(n),
                        i < u ? (u = i,
                        s = f,
                        o = a < o ? a : o) : i === u && a < o && (o = a,
                        s = f);
                    return s
                },
                rf: function(t, e, r) {
                    var n = t.Zc ? this.tf : compareNodeMinX
                      , i = t.Zc ? this["if"] : compareNodeMinY;
                    this.lf(t, e, r, n) < this.lf(t, e, r, i) && t.children.sort(n)
                },
                lf: function(t, e, r, n) {
                    t.children.sort(n);
                    for (var i, a = this.Yc, o = distBBox(t, 0, e, a), s = distBBox(t, r - e, r, a), u = bboxMargin(o) + bboxMargin(s), f = e; f < r - e; f++)
                        i = t.children[f],
                        extend$1(o, t.Zc ? a(i) : i),
                        u += bboxMargin(o);
                    for (f = r - e - 1; e <= f; f--)
                        i = t.children[f],
                        extend$1(s, t.Zc ? a(i) : i),
                        u += bboxMargin(s);
                    return u
                },
                sf: function(t, e, r) {
                    for (var n = r; 0 <= n; n--)
                        extend$1(e[n], t)
                },
                Qc: function(t) {
                    for (var e, r = t.length - 1; 0 <= r; r--)
                        0 === t[r].children.length ? 0 < r ? (e = t[r - 1].children).splice(e.indexOf(t[r]), 1) : this.clear() : calcBBox(t[r], this.Yc)
                },
                Gc: function(t) {
                    var e = ["return a", " - b", ";"];
                    this.tf = new Function("a","b",e.join(t[0])),
                    this["if"] = new Function("a","b",e.join(t[1])),
                    this.Yc = new Function("a","return {minX: a" + t[0] + ", minY: a" + t[1] + ", maxX: a" + t[2] + ", maxY: a" + t[3] + "};")
                }
            },
            rbush_1["default"] = default_1,
            function(t) {
                t.loading = "loading",
                t.loaded = "loaded"
            }(Status = Status || {});
            var M = getModule()
              , Queue = function() {
                function t() {
                    this.tT = {}
                }
                return t.prototype.add = function(t, e) {
                    for (var r = t.length, n = 0, i = function() {
                        (n += 1) === r && e && e()
                    }, a = 0, o = t; a < o.length; a++)
                        this._add(o[a], i)
                }
                ,
                t.prototype.has = function(t) {
                    return (t = this.tT[t]) && t.status === Status.loaded
                }
                ,
                t.prototype.finish = function(t) {
                    if (t = this.tT[t]) {
                        t.status = Status.loaded;
                        for (var e = 0, r = t.pI; e < r.length; e++) {
                            var n = r[e];
                            n && n()
                        }
                    }
                }
                ,
                t.prototype._add = function(t, e) {
                    var r = this.tT[t];
                    r ? r.status === Status.loading ? r.pI.push(e) : e() : this.tT[t] = {
                        pI: [e],
                        status: Status.loading
                    }
                }
                ,
                t
            }()
              , Module = getModule();
            function InnerClass(e) {
                return function(t) {
                    getModule()[e] = t
                }
            }
            getModule().MapboxLabelFormat = MapboxLabelFormat,
            getModule().NebulaLabelFormat = NebulaLabelFormat,
            getModule()._LocalZoom = {
                Ra: 13,
                za: 12,
                Ge: ""
            },
            getModule().Support = Browser,
            getModule().geo = {
                lcs: lcs,
                ProjectionManager: ProjectionManager
            },
            getModule().transform = transform,
            getModule().Util = Util,
            getModule().TileState = exports.TileState,
            getModule().assign = assign,
            getModule().labelsUtil = labelsUtil,
            getModule().LabelsRenderUtil = LabelsRenderUtil,
            getModule().vector = vector,
            getModule().rbush = rbush_1,
            getModule().lodash = {
                map: map,
                find: find,
                assign: assign,
                every: every,
                some: some
            };
            var isSupportFloat32Array = "undefined" != typeof Float32Array
              , EPSILON = (isSupportFloat32Array || (window.Float32Array = undefined,
            setMatrixArrayType(Array)),
            1e-6)
              , ARRAY_TYPE = "undefined" != typeof Float32Array ? Float32Array : Array;
            function setMatrixArrayType(t) {
                ARRAY_TYPE = t
            }
            function fromValues(t, e, r, n) {
                var i = new ARRAY_TYPE(4);
                return i[0] = t,
                i[1] = e,
                i[2] = r,
                i[3] = n,
                i
            }
            function create() {
                var t = new ARRAY_TYPE(16);
                return ARRAY_TYPE != Float32Array && (t[1] = 0,
                t[2] = 0,
                t[3] = 0,
                t[4] = 0,
                t[6] = 0,
                t[7] = 0,
                t[8] = 0,
                t[9] = 0,
                t[11] = 0,
                t[12] = 0,
                t[13] = 0,
                t[14] = 0),
                t[0] = 1,
                t[5] = 1,
                t[10] = 1,
                t[15] = 1,
                t
            }
            function identity$1(t) {
                return t[0] = 1,
                t[1] = 0,
                t[2] = 0,
                t[3] = 0,
                t[4] = 0,
                t[5] = 1,
                t[6] = 0,
                t[7] = 0,
                t[8] = 0,
                t[9] = 0,
                t[10] = 1,
                t[11] = 0,
                t[12] = 0,
                t[13] = 0,
                t[14] = 0,
                t[15] = 1,
                t
            }
            function invert(t, e) {
                var r = e[0]
                  , n = e[1]
                  , i = e[2]
                  , a = e[3]
                  , o = e[4]
                  , s = e[5]
                  , u = e[6]
                  , f = e[7]
                  , c = e[8]
                  , h = e[9]
                  , l = e[10]
                  , d = e[11]
                  , v = e[12]
                  , g = e[13]
                  , y = e[14]
                  , p = r * s - n * o
                  , m = r * u - i * o
                  , b = r * f - a * o
                  , w = n * u - i * s
                  , A = n * f - a * s
                  , T = i * f - a * u
                  , S = c * g - h * v
                  , x = c * y - l * v
                  , M = c * (e = e[15]) - d * v
                  , P = h * y - l * g
                  , I = h * e - d * g
                  , $ = l * e - d * y
                  , k = p * $ - m * I + b * P + w * M - A * x + T * S;
                return k ? (t[0] = (s * $ - u * I + f * P) * (k = 1 / k),
                t[1] = (i * I - n * $ - a * P) * k,
                t[2] = (g * T - y * A + e * w) * k,
                t[3] = (l * A - h * T - d * w) * k,
                t[4] = (u * M - o * $ - f * x) * k,
                t[5] = (r * $ - i * M + a * x) * k,
                t[6] = (y * b - v * T - e * m) * k,
                t[7] = (c * T - l * b + d * m) * k,
                t[8] = (o * I - s * M + f * S) * k,
                t[9] = (n * M - r * I - a * S) * k,
                t[10] = (v * A - g * b + e * p) * k,
                t[11] = (h * b - c * A - d * p) * k,
                t[12] = (s * x - o * P - u * S) * k,
                t[13] = (r * P - n * x + i * S) * k,
                t[14] = (g * m - v * w - y * p) * k,
                t[15] = (c * w - h * m + l * p) * k,
                t) : null
            }
            function multiply(t, e, r) {
                var n = e[0]
                  , i = e[1]
                  , a = e[2]
                  , o = e[3]
                  , s = e[4]
                  , u = e[5]
                  , f = e[6]
                  , c = e[7]
                  , h = e[8]
                  , l = e[9]
                  , d = e[10]
                  , v = e[11]
                  , g = e[12]
                  , y = e[13]
                  , p = e[14]
                  , e = e[15]
                  , m = r[0]
                  , b = r[1]
                  , w = r[2]
                  , A = r[3];
                return t[0] = m * n + b * s + w * h + A * g,
                t[1] = m * i + b * u + w * l + A * y,
                t[2] = m * a + b * f + w * d + A * p,
                t[3] = m * o + b * c + w * v + A * e,
                t[4] = (m = r[4]) * n + (b = r[5]) * s + (w = r[6]) * h + (A = r[7]) * g,
                t[5] = m * i + b * u + w * l + A * y,
                t[6] = m * a + b * f + w * d + A * p,
                t[7] = m * o + b * c + w * v + A * e,
                t[8] = (m = r[8]) * n + (b = r[9]) * s + (w = r[10]) * h + (A = r[11]) * g,
                t[9] = m * i + b * u + w * l + A * y,
                t[10] = m * a + b * f + w * d + A * p,
                t[11] = m * o + b * c + w * v + A * e,
                t[12] = (m = r[12]) * n + (b = r[13]) * s + (w = r[14]) * h + (A = r[15]) * g,
                t[13] = m * i + b * u + w * l + A * y,
                t[14] = m * a + b * f + w * d + A * p,
                t[15] = m * o + b * c + w * v + A * e,
                t
            }
            function getTranslation(t, e) {
                return t[0] = e[12],
                t[1] = e[13],
                t[2] = e[14],
                t
            }
            function perspective(t, e, r, n, i) {
                return e = 1 / Math.tan(e / 2),
                t[0] = e / r,
                t[1] = 0,
                t[2] = 0,
                t[3] = 0,
                t[4] = 0,
                t[5] = e,
                t[6] = 0,
                t[7] = 0,
                t[8] = 0,
                t[9] = 0,
                t[11] = -1,
                t[12] = 0,
                t[13] = 0,
                t[15] = 0,
                null != i && i !== Infinity ? (t[10] = (i + n) * (r = 1 / (n - i)),
                t[14] = 2 * i * n * r) : (t[10] = -1,
                t[14] = -2 * n),
                t
            }
            function ortho(t, e, r, n, i, a, o) {
                var s = 1 / (e - r)
                  , u = 1 / (n - i)
                  , f = 1 / (a - o);
                return t[0] = -2 * s,
                t[1] = 0,
                t[2] = 0,
                t[3] = 0,
                t[4] = 0,
                t[5] = -2 * u,
                t[6] = 0,
                t[7] = 0,
                t[8] = 0,
                t[9] = 0,
                t[10] = 2 * f,
                t[11] = 0,
                t[12] = (e + r) * s,
                t[13] = (i + n) * u,
                t[14] = (o + a) * f,
                t[15] = 1,
                t
            }
            function lookAt(t, e, r, n) {
                var i, a, o, s, u = e[0], f = e[1], e = e[2], c = n[0], h = n[1], n = n[2], l = r[0], d = r[1], r = r[2];
                return Math.abs(u - l) < EPSILON && Math.abs(f - d) < EPSILON && Math.abs(e - r) < EPSILON ? identity$1(t) : (l = u - l,
                d = f - d,
                r = e - r,
                i = h * (r *= s = 1 / Math.hypot(l, d, r)) - n * (d *= s),
                n = n * (l *= s) - c * r,
                c = c * d - h * l,
                (s = Math.hypot(i, n, c)) ? (i *= s = 1 / s,
                n *= s,
                c *= s) : c = n = i = 0,
                h = d * c - r * n,
                a = r * i - l * c,
                o = l * n - d * i,
                (s = Math.hypot(h, a, o)) ? (h *= s = 1 / s,
                a *= s,
                o *= s) : o = a = h = 0,
                t[0] = i,
                t[1] = h,
                t[2] = l,
                t[3] = 0,
                t[4] = n,
                t[5] = a,
                t[6] = d,
                t[7] = 0,
                t[8] = c,
                t[9] = o,
                t[10] = r,
                t[11] = 0,
                t[12] = -(i * u + n * f + c * e),
                t[13] = -(h * u + a * f + o * e),
                t[14] = -(l * u + d * f + r * e),
                t[15] = 1,
                t)
            }
            function equals(t, e) {
                var r = t[0]
                  , n = t[1]
                  , i = t[2]
                  , a = t[3]
                  , o = t[4]
                  , s = t[5]
                  , u = t[6]
                  , f = t[7]
                  , c = t[8]
                  , h = t[9]
                  , l = t[10]
                  , d = t[11]
                  , v = t[12]
                  , g = t[13]
                  , y = t[14]
                  , t = t[15]
                  , p = e[0]
                  , m = e[1]
                  , b = e[2]
                  , w = e[3]
                  , A = e[4]
                  , T = e[5]
                  , S = e[6]
                  , x = e[7]
                  , M = e[8]
                  , P = e[9]
                  , I = e[10]
                  , $ = e[11]
                  , k = e[12]
                  , L = e[13]
                  , C = e[14]
                  , e = e[15];
                return Math.abs(r - p) <= EPSILON * Math.max(1, Math.abs(r), Math.abs(p)) && Math.abs(n - m) <= EPSILON * Math.max(1, Math.abs(n), Math.abs(m)) && Math.abs(i - b) <= EPSILON * Math.max(1, Math.abs(i), Math.abs(b)) && Math.abs(a - w) <= EPSILON * Math.max(1, Math.abs(a), Math.abs(w)) && Math.abs(o - A) <= EPSILON * Math.max(1, Math.abs(o), Math.abs(A)) && Math.abs(s - T) <= EPSILON * Math.max(1, Math.abs(s), Math.abs(T)) && Math.abs(u - S) <= EPSILON * Math.max(1, Math.abs(u), Math.abs(S)) && Math.abs(f - x) <= EPSILON * Math.max(1, Math.abs(f), Math.abs(x)) && Math.abs(c - M) <= EPSILON * Math.max(1, Math.abs(c), Math.abs(M)) && Math.abs(h - P) <= EPSILON * Math.max(1, Math.abs(h), Math.abs(P)) && Math.abs(l - I) <= EPSILON * Math.max(1, Math.abs(l), Math.abs(I)) && Math.abs(d - $) <= EPSILON * Math.max(1, Math.abs(d), Math.abs($)) && Math.abs(v - k) <= EPSILON * Math.max(1, Math.abs(v), Math.abs(k)) && Math.abs(g - L) <= EPSILON * Math.max(1, Math.abs(g), Math.abs(L)) && Math.abs(y - C) <= EPSILON * Math.max(1, Math.abs(y), Math.abs(C)) && Math.abs(t - e) <= EPSILON * Math.max(1, Math.abs(t), Math.abs(e))
            }
            function create$1() {
                var t = new ARRAY_TYPE(3);
                return ARRAY_TYPE != Float32Array && (t[0] = 0,
                t[1] = 0,
                t[2] = 0),
                t
            }
            function fromValues$1(t, e, r) {
                var n = new ARRAY_TYPE(3);
                return n[0] = t,
                n[1] = e,
                n[2] = r,
                n
            }
            function copy(t, e) {
                t[0] = e[0],
                t[1] = e[1],
                t[2] = e[2]
            }
            function set(t, e, r, n) {
                return t[0] = e,
                t[1] = r,
                t[2] = n,
                t
            }
            function subtract(t, e, r) {
                return t[0] = e[0] - r[0],
                t[1] = e[1] - r[1],
                t[2] = e[2] - r[2],
                t
            }
            function cross(t, e, r) {
                var n = e[0]
                  , i = e[1]
                  , e = e[2]
                  , a = r[0]
                  , o = r[1]
                  , r = r[2];
                t[0] = i * r - e * o,
                t[1] = e * a - n * r,
                t[2] = n * o - i * a
            }
            Math.hypot || (Math.hypot = function() {
                for (var t = 0, e = arguments.length; e--; )
                    t += arguments[e] * arguments[e];
                return Math.sqrt(t)
            }
            );
            var sub = subtract
              , forEach$1 = function() {
                var u = create$1();
                return function(t, e, r, n, i, a) {
                    var o, s;
                    for (e = e || 3,
                    r = r || 0,
                    s = n ? Math.min(n * e + r, t.length) : t.length,
                    o = r; o < s; o += e)
                        u[0] = t[o],
                        u[1] = t[o + 1],
                        u[2] = t[o + 2],
                        i(u, u, a),
                        t[o] = u[0],
                        t[o + 1] = u[1],
                        t[o + 2] = u[2];
                    return t
                }
            }();
            function create$2() {
                var t = new ARRAY_TYPE(4);
                return ARRAY_TYPE != Float32Array && (t[0] = 0,
                t[1] = 0,
                t[2] = 0,
                t[3] = 0),
                t
            }
            function fromValues$2(t, e, r, n) {
                var i = new ARRAY_TYPE(4);
                return i[0] = t,
                i[1] = e,
                i[2] = r,
                i[3] = n,
                i
            }
            function scale$1(t, e, r) {
                return t[0] = e[0] * r,
                t[1] = e[1] * r,
                t[2] = e[2] * r,
                t[3] = e[3] * r,
                t
            }
            function transformMat4(t, e, r) {
                var n = e[0]
                  , i = e[1]
                  , a = e[2]
                  , e = e[3];
                return t[0] = r[0] * n + r[4] * i + r[8] * a + r[12] * e,
                t[1] = r[1] * n + r[5] * i + r[9] * a + r[13] * e,
                t[2] = r[2] * n + r[6] * i + r[10] * a + r[14] * e,
                t[3] = r[3] * n + r[7] * i + r[11] * a + r[15] * e,
                t
            }
            var forEach$2 = function() {
                var u = create$2();
                return function(t, e, r, n, i, a) {
                    var o, s;
                    for (e = e || 4,
                    r = r || 0,
                    s = n ? Math.min(n * e + r, t.length) : t.length,
                    o = r; o < s; o += e)
                        u[0] = t[o],
                        u[1] = t[o + 1],
                        u[2] = t[o + 2],
                        u[3] = t[o + 3],
                        i(u, u, a),
                        t[o] = u[0],
                        t[o + 1] = u[1],
                        t[o + 2] = u[2],
                        t[o + 3] = u[3];
                    return t
                }
            }();
            function create$3() {
                var t = new ARRAY_TYPE(2);
                return ARRAY_TYPE != Float32Array && (t[0] = 0,
                t[1] = 0),
                t
            }
            function clone$1(t) {
                var e = new ARRAY_TYPE(2);
                return e[0] = t[0],
                e[1] = t[1],
                e
            }
            function fromValues$3(t, e) {
                var r = new ARRAY_TYPE(2);
                return r[0] = t,
                r[1] = e,
                r
            }
            function copy$1(t, e) {
                t[0] = e[0],
                t[1] = e[1]
            }
            function set$1(t, e, r) {
                return t[0] = e,
                t[1] = r,
                t
            }
            function add(t, e, r) {
                t[0] = e[0] + r[0],
                t[1] = e[1] + r[1]
            }
            function subtract$1(t, e, r) {
                return t[0] = e[0] - r[0],
                t[1] = e[1] - r[1],
                t
            }
            function multiply$1(t, e, r) {
                return t[0] = e[0] * r[0],
                t[1] = e[1] * r[1],
                t
            }
            function scale$2(t, e, r) {
                t[0] = e[0] * r,
                t[1] = e[1] * r
            }
            function distance(t, e) {
                var r = e[0] - t[0];
                return Math.hypot(r, e[1] - t[1])
            }
            function negate(t, e) {
                t[0] = -e[0],
                t[1] = -e[1]
            }
            function normalize(t, e) {
                var r = e[0]
                  , n = e[1];
                0 < (r = r * r + n * n) && (r = 1 / Math.sqrt(r)),
                t[0] = e[0] * r,
                t[1] = e[1] * r
            }
            function dot(t, e) {
                return t[0] * e[0] + t[1] * e[1]
            }
            function cross$1(t, e, r) {
                e = e[0] * r[1] - e[1] * r[0],
                t[0] = t[1] = 0,
                t[2] = e
            }
            function transformMat2(t, e, r) {
                var n = e[0]
                  , e = e[1];
                t[0] = r[0] * n + r[2] * e,
                t[1] = r[1] * n + r[3] * e
            }
            function rotate(t, e, r, n) {
                var i = e[0] - r[0]
                  , e = e[1] - r[1]
                  , a = Math.sin(n)
                  , n = Math.cos(n);
                t[0] = i * n - e * a + r[0],
                t[1] = i * a + e * n + r[1]
            }
            function angle(t, e) {
                var r = t[0]
                  , t = t[1]
                  , n = e[0]
                  , i = r * r + t * t
                  , a = n * n + (e = e[1]) * e;
                return 1 < (r = (r * n + t * e) * (0 < i ? 1 / Math.sqrt(i) : i) * (0 < a ? 1 / Math.sqrt(a) : a)) ? 0 : r < -1 ? Math.PI : Math.acos(r)
            }
            function equals$1(t, e) {
                var r = t[0]
                  , t = t[1]
                  , n = e[0]
                  , e = e[1];
                return Math.abs(r - n) <= EPSILON * Math.max(1, Math.abs(r), Math.abs(n)) && Math.abs(t - e) <= EPSILON * Math.max(1, Math.abs(t), Math.abs(e))
            }
            var sub$1 = subtract$1
              , mul = multiply$1
              , dist$1 = distance
              , forEach$3 = function() {
                var u = create$3();
                return function(t, e, r, n, i, a) {
                    var o, s;
                    for (e = e || 2,
                    r = r || 0,
                    s = n ? Math.min(n * e + r, t.length) : t.length,
                    o = r; o < s; o += e)
                        u[0] = t[o],
                        u[1] = t[o + 1],
                        i(u, u, a),
                        t[o] = u[0],
                        t[o + 1] = u[1];
                    return t
                }
            }()
              , Event = function() {
                function t() {
                    this.vI = {}
                }
                return t.addListener = function(t, e, r) {
                    t.on(e, r)
                }
                ,
                t.trigger = function(t, e, r) {
                    t.emit(e, r)
                }
                ,
                t.clearListeners = function(t, e) {
                    t.clearEvents(e)
                }
                ,
                t.addDomListener = function(t, e, r) {
                    t.addEventListener(e, r)
                }
                ,
                t.extend = function(t, r, n) {
                    forEach(t = "string" == typeof t ? [t] : t, function(e) {
                        r.on(e, function(t) {
                            n.emit(e, t)
                        })
                    })
                }
                ,
                t.prototype.on = function(t, e, r, n) {
                    void 0 === r && (r = this),
                    void 0 === n && (n = !1);
                    for (var i = 0, a = Array.isArray(t) ? t : [t]; i < a.length; i++) {
                        var o = a[i];
                        this._on(o, e, r, n)
                    }
                    return this
                }
                ,
                t.prototype.off = function(t, e, r) {
                    void 0 === r && (r = this);
                    var n = this.vI;
                    if (t in n)
                        for (var i = 0; i < n[t].length; i += 1)
                            if (n[t][i].fn === e && n[t][i].context === r)
                                return n[t].splice(i, 1),
                                this;
                    return this
                }
                ,
                t.prototype.hasEvents = function(t, e, r) {
                    void 0 === r && (r = this);
                    var n = this.vI;
                    if (t && e && t in n)
                        for (var i = 0; i < n[t].length; i += 1)
                            if (n[t][i].fn === e && n[t][i].context === r)
                                return !0;
                    return !1
                }
                ,
                t.prototype.clearEvents = function(t) {
                    return t ? this.vI[t] && delete this.vI[t] : this.vI = {},
                    this
                }
                ,
                t.prototype.emit = function(t, e) {
                    if (void 0 === e && (e = {}),
                    t in this.vI) {
                        for (var r = exports.Ln(exports.Ln({}, e), {
                            type: t
                        }), n = this.vI[t], i = 0, a = n.length; i < a; i += 1) {
                            var o = n[i];
                            o && o.fn && (o.fn.call(o.context, r),
                            o.once) && (this.vI[t].splice(i, 1),
                            --i,
                            --a)
                        }
                        0 === n.length && delete this.vI[t]
                    }
                    return this
                }
                ,
                t.prototype.getEvents = function() {
                    return this.vI
                }
                ,
                t.prototype._on = function(t, e, r, n) {
                    var i;
                    return void 0 === n && (n = !1),
                    this.hasEvents(t, e, r = void 0 === r ? this : r) || ((i = this.vI)[t] = i[t] || [],
                    i[t].push({
                        fn: e,
                        context: r || this,
                        once: n
                    })),
                    this
                }
                ,
                t
            }()
              , NebulaTileCoord = function() {
                var o = [-180, -90]
                  , s = [180, 90]
                  , u = s[0] - o[0]
                  , f = s[1] - o[1];
                return {
                    ga: function(t, e, r, n) {
                        void 0 === n && (n = "lnglat");
                        var r = Math.pow(2, r)
                          , i = u / r
                          , r = f / r
                          , a = ProjectionManager.getProjection("EPSG:3857");
                        return "lnglat" === n ? [t * i + o[0], s[1] - e * r, (t + 1) * i + o[0], s[1] - (e + 1) * r] : "EPSG:3857" === n ? (n = a.project(t * i + o[0], s[1] - e * r),
                        t = a.project((t + 1) * i + o[0], s[1] - (e + 1) * r),
                        [n[0], n[1], t[0], t[1]]) : [0, 0, 0, 0]
                    }
                }
            }()
              , ComputeTileRange = function() {
                function t() {}
                return t.ha = function(t, e) {
                    for (var r = [t[0], t[3]], t = [t[2], t[1]], r = this.Ga(r, e), t = this.Ga(t, e), n = r[0], i = r[1], a = t[0], o = t[1], s = [], u = n; u <= a; u += 1)
                        for (var f = i; f <= o; f += 1)
                            s.push([e, u, f]);
                    return s
                }
                ,
                t.Ga = function(t, e) {
                    var r = 180 / (e = Math.pow(2, e));
                    return [Math.floor(t[0] / (360 / e)) + e / 2, e / 2 - Math.ceil(t[1] / r)]
                }
                ,
                t.ra = function(t) {
                    return {
                        2: 3,
                        3: 3,
                        4: 3,
                        5: 3,
                        6: 6,
                        7: 6,
                        8: 8,
                        9: 8,
                        10: 10,
                        11: 10,
                        12: 10,
                        13: 12,
                        14: 12,
                        15: 14,
                        16: 14,
                        17: 14,
                        18: 14,
                        19: 14,
                        20: 14,
                        21: 14,
                        22: 14
                    }[t]
                }
                ,
                t
            }()
              , Task = function() {
                function t(t) {
                    var r = this;
                    this.xN = t,
                    this.cancel = function() {
                        r.xN && r.xN.cancel();
                        for (var t = 0, e = r.children; t < e.length; t++)
                            e[t].cancel.apply(r)
                    }
                    ,
                    this.children = []
                }
                return t.prototype._H = function(t) {
                    this.children.push(t)
                }
                ,
                t
            }()
              , LabelPlacement = function() {
                function t(t) {
                    this.options = {},
                    this.Gj = {},
                    this.Hj = {},
                    this.Vj = {},
                    this.Wj = {},
                    this.$j = 0,
                    this.render = null,
                    this.N8t = [],
                    this.NO = {},
                    this.ac = t.z_,
                    this.Mf = t.R_,
                    this.io = t.canvas,
                    this.NT = t.Nz
                }
                return t.prototype.nO = function(t, e) {
                    this.iO = (e = void 0 === e ? {} : e).from || "inner",
                    labelsUtil.zj(this, t),
                    this.eO(e)
                }
                ,
                t.prototype.destroy = function() {}
                ,
                t.prototype.setRichtoImage = function(t) {
                    t && (this.N8t = t)
                }
                ,
                t.prototype.oO = function() {
                    return this.gs.aO()
                }
                ,
                t.prototype.uO = function() {
                    return this.oO().viewMode,
                    !0
                }
                ,
                t.prototype.eO = function(t) {
                    var e, r, n, i, a, o, s = (t = void 0 === t ? {} : t).center, u = this.Gj || {}, f = this.Vj || {}, c = this.Hj || {}, h = this.iO, l = 0;
                    for (e in u)
                        u.hasOwnProperty(e) && e && (o = u[e] || {},
                        c[e] = this.sO(e, o),
                        f[e] = this.fO(e, o, c[e], {
                            from: h,
                            center: s
                        }),
                        i = o.data.txt,
                        n = (r = o.opts).icon,
                        a = r.text || {},
                        o = o.CO,
                        i && o && (l += o.length + 1,
                        a.style) && a.style.borderWidth && (l += 4),
                        n && n.length && n[0].image && (l += n.length),
                        i = r.richText) && i.image && i.image.src && (l += 1);
                    this.$j = l,
                    this.Vj = f,
                    this.Hj = c
                }
                ,
                t.prototype.hO = function(t, e) {
                    var r = CONSTS.Mp
                      , n = CONSTS.Rp
                      , i = (t = void 0 === t ? [] : t)[0] || r
                      , t = t[1] || n;
                    return [(r = (e = void 0 === e ? [] : e)[0] || r) < i ? i : r, t < (e = e[1] || n) ? t : e]
                }
                ,
                t.prototype.cO = function(t, e) {
                    var r = {};
                    return r.type = (t = void 0 === t ? {} : t).type || e.type,
                    r.image = t.image || "",
                    r.clipOrigin = t.clipOrigin || e.clipOrigin,
                    r.clipSize = t.clipSize,
                    r.size = t.size,
                    r.offset = t.offset,
                    r.anchor = t.anchor || e.anchor,
                    r.angel = t.angel || e.angel,
                    r.retina = t.retina || e.retina,
                    r.zooms = t.zooms || e.zooms,
                    r
                }
                ,
                t.prototype.vO = function(t, e) {
                    var r = {}
                      , e = (r.type = (t = void 0 === t ? {} : t).type || e.type,
                    r.direction = t.direction || e.direction,
                    r.offset = t.offset || e.offset,
                    r.zooms = t.zooms || e.zooms,
                    e.style)
                      , t = t.style || {}
                      , n = (r.style = {},
                    r.style.fontFamily = t.fontFamily || e.fontFamily,
                    r.style.fontSize = t.fontSize || e.fontSize,
                    r.style.fontWeight = t.fontWeight || e.fontWeight,
                    r.style.fillColor = t.fillColor || e.fillColor,
                    t.strokeColor)
                      , i = t.strokeWidth;
                    return isUndefined(i) && isUndefined(n) ? r.style.strokeWidth = e.strokeWidth : isUndefined(i) && !isUndefined(n) ? r.style.strokeWidth = 1 : r.style.strokeWidth = t.strokeWidth,
                    r.style.borderColor = t.borderColor,
                    r.style.borderWidth = t.borderWidth,
                    r.style.strokeColor = t.strokeColor || e.strokeColor,
                    r.style.borderColor = t.borderColor || e.borderColor,
                    r.style.backgroundColor = t.backgroundColor,
                    r.style.padding = t.padding || e.padding,
                    r.style.fold = "undefined" != typeof t.fold && t.fold,
                    r.style.canCovered = t.canCovered || undefined,
                    r.style.clickable = t.clickable || undefined,
                    r.style.K8t = t.K8t || undefined,
                    r.style.Y8t = t.Y8t || undefined,
                    r.style.Z8t = t.Z8t || undefined,
                    r.style.X8t = t.X8t || undefined,
                    r
                }
                ,
                t.prototype.lO = function(t, e) {
                    return t && "object" == typeof t && null !== t ? [(e = this.ac.getImage("rich-icon_" + e)).width || 36, e.height || 36] : [(e = (this.ac.Fs || {})[t] || {}).width || 36, e.height || 36]
                }
                ,
                t.prototype.dO = function(t, e) {
                    var r = CONSTS.sj
                      , e = ((r = this.cO(t, r.icon)).zooms = t.zooms || e.bO,
                    this.hO(e.zooms, r.zooms))
                      , e = (r.zooms = e,
                    "");
                    return t && t.hS && (e = t.hS),
                    r.size && r.clipSize || (e = (t = this.lO(t.image || "", e))[0] || 0,
                    t = t[1] || 0,
                    r.size || (r.size = [e, t]),
                    r.clipSize) || (r.clipSize = [e, t]),
                    r
                }
                ,
                t.prototype.pO = function(t, e) {
                    var r = CONSTS.sj
                      , t = ((r = this.vO(t = void 0 === t ? {} : t, r.text)).zooms = t.zooms || e.bO,
                    e.yO)
                      , n = (t = this.mO(r.direction || "", t)).textAlign
                      , t = t.verticalAlign
                      , n = (r.style && (r.style.textAlign = n,
                    r.style.verticalAlign = t),
                    this.hO(e.zooms, r.zooms));
                    return r.zooms = n,
                    r
                }
                ,
                t.prototype.sO = function(t, e) {
                    var r, i = (n = e.data).id, n = n && n.txt, a = (e = e.opts || {}).angle || 0, o = isUndefined(e.opacity) ? 1 : e.opacity, s = e.icon, u = e.richText, f = e.text, c = e.zooms, e = e.visible, h = {
                        angle: a,
                        opacity: o,
                        zooms: this.options.zooms,
                        bO: c
                    }, l = (u && u.image && "string" != typeof u.image && (0 === Object.keys(s).length && u ? (u.hS !== i && (u.hS = i),
                    s = [u],
                    r = {
                        img: u.image,
                        startX: 0,
                        startY: 0,
                        status: u.LOADED,
                        height: u.height,
                        width: u.width,
                        name: "rich-icon_" + i,
                        type: "richImage"
                    },
                    this.ac.addImageData("rich-icon_" + i, r)) : u && (u.hS !== i && (u.hS = i),
                    r = {
                        img: (s[0] = u).image,
                        startX: 0,
                        startY: 0,
                        status: u.LOADED,
                        height: u.height,
                        width: u.width,
                        name: "rich-icon_" + i,
                        type: "richImage"
                    },
                    this.ac.addImageData("rich-icon_" + i, r))),
                    []);
                    if (s)
                        for (var d = 0, v = s; d < v.length; d++) {
                            var g = v[d];
                            l.push(this.dO(g, h))
                        }
                    return h.yO = !!s,
                    (a = n ? this.pO(f, h) : null) && (a.txt = n),
                    o = {
                        icon: l,
                        text: a,
                        visible: e
                    },
                    "labelsLayer" === this.iO && (o.showText = 1,
                    o.showIcon = 1),
                    o
                }
                ,
                t.prototype.gO = function(t) {
                    var e;
                    return this.oO().zoom < LocalZoom ? t : (e = lcs.getLocalByCoord(t),
                    vector.Ip(t, e.center))
                }
                ,
                t.prototype.wO = function(t, e) {
                    var r, n;
                    return e && e.image ? (n = CONSTS.sj.icon,
                    r = e.size || this.lO(e.image),
                    e = e.anchor || n.anchor,
                    {
                        size: r,
                        origin: t,
                        anchorOffset: n = this._getAnchorOffset(r, e),
                        coords: vector.add(t, n)
                    }) : {
                        size: [0, 0],
                        origin: t,
                        anchorOffset: [0, 0],
                        coords: t
                    }
                }
                ,
                t.prototype.MO = function(t, e, r) {
                    var n, i, a, o, s, u;
                    return "text" === (t = void 0 === t ? "icon" : t) ? (t = e.origin,
                    o = r.padding,
                    u = r.c,
                    r = void 0,
                    n = o.offsetX,
                    i = o.offsetY,
                    a = o.w,
                    o = o.h,
                    s = (this.uO() ? (r = u[0],
                    u) : (r = t[0],
                    t))[1],
                    {
                        x: r + n,
                        y: s + i,
                        width: a,
                        height: o
                    }) : (t = e.size,
                    {
                        x: (u = e.c)[0],
                        y: u[1],
                        width: (r = void 0 === t ? [] : t)[0] || 0,
                        height: r[1] || 0
                    })
                }
                ,
                t.prototype._getAnchorOffset = function(t, e) {
                    var r = CONSTS.JM
                      , n = t[0] || 0
                      , i = t[1] || 0;
                    if ("[object Array]" === Object.prototype.toString.apply(e)) {
                        if ("number" == typeof e[0] && "number" == typeof e[1])
                            return vector.tA(e)
                    } else if ("string" == typeof e) {
                        var e = (t = e.split("-"))[0]
                          , t = t[1]
                          , a = 0
                          , o = 0;
                        switch (e !== r.ij || t || (e = r.nj,
                        t = r.ij),
                        t) {
                        case r.LEFT:
                            a = 0;
                            break;
                        case r.ij:
                            a = -n / 2;
                            break;
                        case r.QM:
                            a = -n;
                            break;
                        default:
                            a = 0
                        }
                        switch (e) {
                        case r.ZM:
                            o = 0;
                            break;
                        case r.nj:
                            o = -i / 2;
                            break;
                        case r.tj:
                            o = -i;
                            break;
                        default:
                            o = 0
                        }
                        return [a, o]
                    }
                    return [0, 0]
                }
                ,
                t.prototype.jO = function(t) {
                    return this._getAnchorOffset(t.size || [0, 0], "middle-center")
                }
                ,
                t.prototype.AO = function(t, e, r, n) {
                    var i, o = CONSTS.JM, u = void 0 === (s = (n = void 0 === n ? {} : n).kO) ? 0 : s, f = void 0 !== (s = n.yO) && s, s = n.padding, c = n.lines, h = (n = this.jO(t))[0] || 0, l = t.anchorOffset || [], d = l[0] || 0, v = l[1] || 0, g = (l = t.size || [])[0] || 0, y = l[1] || 0, p = d - h, m = v - (n[1] || 0), b = s[0], w = s[1], A = s[2], T = s[3], S = .8 * u;
                    switch (r) {
                    case o.ZM:
                        a = f ? (i = p,
                        v - A - .2 * u - (x = S * c + 3 * (c - 1))) : (i = d + T,
                        v + b);
                        break;
                    case o.QM:
                        var x = S / 2 * c + 1.5 * (c - 1)
                          , a = f ? (i = d + g + T,
                        m - x) : (i = d - w,
                        v - x - A);
                        break;
                    case o.tj:
                        a = f ? (i = p,
                        v + y + b) : (i = d + T,
                        v - A - (x = S * c + 3 * (c - 1)));
                        break;
                    case o.LEFT:
                        x = S / 2 * c + 1.5 * (c - 1);
                        a = f ? (i = d - w,
                        m - x) : (i = d + T,
                        v - x - A);
                        break;
                    case o.nj:
                    case o.ij:
                        a = f ? (i = d + g / 2,
                        m - (x = S / 2 * c + 1.5 * (c - 1))) : (i = d,
                        v - (x = S / 2 * c + 1.5 * (c - 1)) - A);
                        break;
                    default:
                        i = d,
                        a = v - (x = S / 2 * c + 1.5 * (c - 1)) - A
                    }
                    return [i, a]
                }
                ,
                t.prototype.OO = function(t, e) {
                    var r, n, i = CONSTS.JM, a = (e = void 0 === e ? {} : e).xO, u = e.lines, f = e.size, c = t[0] || 0, h = t[1] || 0;
                    switch (this.mO(e.direction, e.yO).textAlign) {
                    case i.LEFT:
                        r = c,
                        n = h;
                        break;
                    case i.QM:
                        r = c - a,
                        n = h;
                        break;
                    case i.ij:
                        r = c - a / 2,
                        n = h
                    }
                    return {
                        x: r,
                        y: n,
                        w: a,
                        h: this.TO(f, u),
                        FO: c,
                        _O: h
                    }
                }
                ,
                t.prototype.mO = function(t, e) {
                    var r, n, i = CONSTS.JM;
                    if (e)
                        switch (t) {
                        case i.LEFT:
                            r = i.QM;
                            break;
                        case i.QM:
                            r = i.LEFT;
                            break;
                        case i.ZM:
                        case i.tj:
                        default:
                            r = i.ij,
                            n = i.tj
                        }
                    else
                        switch (t) {
                        case i.LEFT:
                        case i.ij:
                        case i.QM:
                            r = t,
                            n = i.tj;
                            break;
                        case i.ZM:
                        case i.tj:
                        case i.nj:
                        default:
                            r = i.LEFT,
                            n = t
                        }
                    return {
                        textAlign: r,
                        verticalAlign: n
                    }
                }
                ,
                t.prototype.TO = function(t, e) {
                    void 0 === t && (t = 12);
                    var r = CONSTS.linePadding;
                    return (t *= 5 / 4) * (e = void 0 === e ? 1 : e) + (e - 1) * (void 0 === r ? 3 : r)
                }
                ,
                t.prototype.SO = function(t, e, r) {
                    var n, i, a, o, s, u, f, c;
                    return e && r.txt ? (n = (i = CONSTS.sj.text).direction,
                    o = i.style,
                    f = r.yO,
                    n = e.direction || n,
                    i = e.offset || i.offset,
                    a = (e = e.style || o).fontSize || 12,
                    c = e.padding || o.padding,
                    e = !1 === e.fold ? 100 : o.fj,
                    o = r.txt.length,
                    s = (r = this.Mf.lineBreak(r.txt, {
                        fontSize: a,
                        CO: r.CO,
                        type: r.BG || "ch",
                        fj: e,
                        YQ: this.NT,
                        from: r.from,
                        u6t: r.u6t
                    })).lines.length,
                    u = this.TO(a, 1),
                    r = {
                        xO: r.maxWidth,
                        kO: u,
                        yO: f,
                        direction: n,
                        padding: c,
                        fj: e,
                        lines: s,
                        size: a,
                        IO: o
                    },
                    u = this.AO(t, t.size, n, r),
                    f = vector.add(u, i),
                    c = vector.add(t.origin, f),
                    e = this.OO(c, r),
                    {
                        origin: t.origin,
                        offset: f,
                        coords: c,
                        start: e
                    }) : {
                        origin: t.origin,
                        offset: [0, 0],
                        coords: t.coords,
                        start: {}
                    }
                }
                ,
                t.prototype.EO = function(t, e, r) {
                    if (!e || !r.txt)
                        return {
                            offsetX: 0,
                            offsetY: 0,
                            w: 0,
                            h: 0
                        };
                    var n, i, a = CONSTS.JM, o = CONSTS.sj, s = (t.coords,
                    t.start), u = (t = void 0 === (t = t.offset) ? [] : t)[0], f = t[1], c = s.w, t = s.h, s = r.yO, o = (r = o.text).direction, r = r.style, o = e.direction || o, h = (e = (e.style || r).padding || r.padding)[0], r = e[1], l = e[2], d = e[3];
                    if (s)
                        switch (o) {
                        case a.ZM:
                            n = u - c / 2 - d,
                            i = f - h;
                            break;
                        case a.QM:
                            n = u - d,
                            i = f - h;
                            break;
                        case a.tj:
                            n = u - c / 2 - d,
                            i = f - h;
                            break;
                        case a.LEFT:
                            n = u - c - d,
                            i = f - h;
                            break;
                        case a.nj:
                        case a.ij:
                            n = u - c / 2 - d,
                            i = f - h;
                            break;
                        default:
                            n = u - c / 2 - d,
                            i = f + l
                        }
                    else
                        switch (o) {
                        case a.ZM:
                            n = u - d,
                            i = f + l;
                            break;
                        case a.QM:
                            n = u - c - d,
                            i = f + l;
                            break;
                        case a.tj:
                        case a.LEFT:
                            n = u - d,
                            i = f + l;
                            break;
                        case a.nj:
                        case a.ij:
                            n = u - c / 2 - d,
                            i = f - h;
                            break;
                        default:
                            n = u - c / 2 - d,
                            i = f + l
                        }
                    return {
                        offsetX: n,
                        offsetY: i,
                        w: c + d + r,
                        h: t + h + l
                    }
                }
                ,
                t.prototype.fO = function(t, e, r, n) {
                    var i = (n = void 0 === n ? {} : n).from
                      , a = n.center
                      , o = e.data
                      , u = o.position
                      , f = o.txt
                      , c = (s = e.opts || {}).icon
                      , s = s.richText
                      , r = r.text
                      , e = e.CO
                      , h = this.oO().zoom
                      , h = (a[2] = a[2] || 0,
                    i = "inner" !== i || "relative" !== o.positionType && LocalZoom <= h ? vector.Ip(u, a) : u,
                    vector.add(i, [0, 0]))
                      , a = !!(c = s && s.image && "string" != typeof s.image && 0 === Object.keys(c).length && s ? [s] : c);
                    return {
                        origin: i,
                        icon: u = this.wO(h, c && c[0]),
                        text: s = this.SO(u, r, {
                            CO: e,
                            txt: f,
                            yO: a,
                            BG: o.BG,
                            from: n.from,
                            u6t: o.u6t
                        }),
                        padding: this.EO(s, r, {
                            txt: f,
                            yO: a
                        })
                    }
                }
                ,
                t
            }()
              , LabelGroup = function() {
                function t() {
                    this.oT = {},
                    this.index = 1
                }
                return t.prototype.nT = function(t) {
                    var e, r, n, i, a;
                    return t ? (e = t.fontSize,
                    a = void 0 === (a = t.fillColor) ? CONSTS.COLOR.Uj : a,
                    r = void 0 === (r = t.strokeColor) ? CONSTS.COLOR.Uj : r,
                    n = t.strokeWidth,
                    i = t.backgroundColor,
                    t = t.borderColor,
                    a = labelsUtil.toString(a) + labelsUtil.toString(r) + (i ? labelsUtil.toString(i) : "" + (t ? labelsUtil.toString(t) : "")) + e + n,
                    this.AS(a),
                    this.oT[a]) : ""
                }
                ,
                t.prototype.AS = function(t) {
                    this.oT[t] || (this.oT[t] = this.index++)
                }
                ,
                t
            }()
              , labelGroup = new LabelGroup
              , isSupportFloat64Array = "undefined" != typeof Float64Array
              , isSupportFloat32Array$1 = "undefined" != typeof Float32Array
              , RESIZE_MULTIPLIER = (isSupportFloat64Array ? setMatrixArrayType(Float64Array) : isSupportFloat32Array$1 ? setMatrixArrayType(Float32Array) : (window.Float32Array = undefined,
            setMatrixArrayType(Array)),
            2)
              , DEFAULT_CAPACITY = 128
              , StructArray = function() {
                function t() {
                    this.pM = !1,
                    this.yM = -1,
                    this.length = 0
                }
                return t.Wb = function(t, e) {
                    return t.trim(),
                    e && (t.pM = !0,
                    e.push(t.arrayBuffer)),
                    {
                        length: t.length,
                        arrayBuffer: t.arrayBuffer
                    }
                }
                ,
                t.Gb = function(t) {
                    var e = Object.create(this.prototype);
                    return e.arrayBuffer = t.arrayBuffer,
                    e.length = t.length,
                    e.yM = t.arrayBuffer.byteLength / this.Rb,
                    e.mM(),
                    e
                }
                ,
                t.prototype.trim = function() {
                    this.length !== this.yM && (this.yM = this.length,
                    this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.constructor.Rb),
                    this.mM())
                }
                ,
                t.prototype.resize = function(t) {
                    this.gM(t),
                    this.length = t
                }
                ,
                t.prototype.gM = function(t) {
                    t > this.yM && (this.yM = Math.max(t, Math.floor(this.yM * RESIZE_MULTIPLIER), DEFAULT_CAPACITY),
                    t = this.wM,
                    this.arrayBuffer = new ArrayBuffer(this.yM * this.constructor.Rb),
                    this.mM(),
                    t) && this.wM.set(t)
                }
                ,
                t
            }()
              , FillArray = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.pM = !1,
                    t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e) {
                    var r = this.length;
                    this.resize(this.length + 1),
                    this.MM(r, t, e)
                }
                ,
                t.prototype.MM = function(t, e, r) {
                    this.Mb[t *= 2] = e,
                    this.Mb[1 + t] = r
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.Mb = new Float32Array(this.arrayBuffer)
                }
                ,
                t.Rb = 8,
                t
            }(StructArray)
              , FillExtrusionArray = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.pM = !1,
                    t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e, r, n, i, a) {
                    var o = this.length;
                    this.resize(o + 1),
                    this.MM(o, t, e, r, n, i, a)
                }
                ,
                t.prototype.MM = function(t, e, r, n, i, a, o) {
                    var s = 8 * t
                      , e = (this.Mb[s] = e,
                    this.Mb[1 + s] = r,
                    this.Mb[2 + s] = n,
                    this.Mb[3 + s] = i,
                    this.Mb[4 + s] = a[0],
                    this.Mb[5 + s] = a[1],
                    this.Mb[6 + s] = a[2],
                    16 * t);
                    this.jM[14 + e] = o[0],
                    this.jM[15 + e] = o[1]
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.Mb = new Float32Array(this.arrayBuffer),
                    this.jM = new Uint16Array(this.arrayBuffer)
                }
                ,
                t.Rb = 32,
                t
            }(StructArray)
              , LinesIndexArray = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.length = 0,
                    t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e) {
                    var r = this.length;
                    this.resize(this.length + 1),
                    this.MM(r, t, e)
                }
                ,
                t.prototype.MM = function(t, e, r) {
                    this.jM[t *= 2] = e,
                    this.jM[1 + t] = r
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.jM = new Uint16Array(this.arrayBuffer)
                }
                ,
                t.Rb = 4,
                t
            }(StructArray)
              , LinesIndexArrayUint = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.length = 0,
                    t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e) {
                    var r = this.length;
                    this.resize(this.length + 1),
                    this.MM(r, t, e)
                }
                ,
                t.prototype.MM = function(t, e, r) {
                    this.UI[t *= 2] = e,
                    this.UI[1 + t] = r
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.UI = new Uint32Array(this.arrayBuffer)
                }
                ,
                t.Rb = 8,
                t
            }(StructArray)
              , LineArrayBuffer = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e, r, n) {
                    var i = this.length;
                    this.resize(i + 1),
                    this.MM(i, t, e, r, n)
                }
                ,
                t.prototype.MM = function(t, e, r, n, i) {
                    t *= this.constructor.Rb / 4,
                    this.Mb[t] = e[0],
                    this.Mb[1 + t] = e[1],
                    this.Mb[2 + t] = r[0],
                    this.Mb[3 + t] = r[1],
                    this.Mb[4 + t] = n,
                    this.Mb[5 + t] = i[0],
                    this.Mb[6 + t] = i[1]
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.Mb = new Float32Array(this.arrayBuffer)
                }
                ,
                t.Rb = 28,
                t
            }(StructArray)
              , TriangleIndexArray = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e, r) {
                    var n = this.length;
                    this.resize(n + 1),
                    this.MM(n, t, e, r)
                }
                ,
                t.prototype.MM = function(t, e, r, n) {
                    this.jM[t *= 3] = e,
                    this.jM[1 + t] = r,
                    this.jM[2 + t] = n
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.jM = new Uint16Array(this.arrayBuffer)
                }
                ,
                t.Rb = 6,
                t
            }(StructArray)
              , TriangleIndexArrayUint = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e, r) {
                    var n = this.length;
                    this.resize(n + 1),
                    this.MM(n, t, e, r)
                }
                ,
                t.prototype.MM = function(t, e, r, n) {
                    this.UI[t *= 3] = e,
                    this.UI[1 + t] = r,
                    this.UI[2 + t] = n
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.UI = new Uint32Array(this.arrayBuffer)
                }
                ,
                t.Rb = 12,
                t
            }(StructArray)
              , SymbolArray = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.pM = !1,
                    t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e, r) {
                    var n = this.length;
                    this.resize(this.length + 1),
                    this.MM(n, t, e, r)
                }
                ,
                t.prototype.MM = function(t, e, r, n) {
                    var t = 13 * t
                      , e = (this.Mb[t] = e,
                    this.Mb[1 + t] = r,
                    n.color)
                      , r = n.borderColor
                      , i = n.borderWidth;
                    this.Mb[2 + t] = n.radius,
                    this.Mb[3 + t] = i,
                    this.Mb[4 + t] = e[0],
                    this.Mb[5 + t] = e[1],
                    this.Mb[6 + t] = e[2],
                    this.Mb[7 + t] = e[3],
                    this.Mb[8 + t] = r[0],
                    this.Mb[9 + t] = r[1],
                    this.Mb[10 + t] = r[2],
                    this.Mb[11 + t] = r[3],
                    this.Mb[12 + t] = +(n.visible && n.filter)
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.Mb = new Float32Array(this.arrayBuffer)
                }
                ,
                t.Rb = 52,
                t
            }(StructArray)
              , SimpleSymbolArray = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.pM = !1,
                    t.resize(0),
                    t
                }
                return __extends(t, e),
                t.prototype.kb = function(t, e) {
                    var r = this.length;
                    this.resize(this.length + 1),
                    this.MM(r, t, e)
                }
                ,
                t.prototype.MM = function(t, e, r) {
                    this.Mb[t *= 2] = e,
                    this.Mb[1 + t] = r
                }
                ,
                t.prototype.mM = function() {
                    this.wM = new Uint8Array(this.arrayBuffer),
                    this.Mb = new Float32Array(this.arrayBuffer)
                }
                ,
                t.Rb = 4,
                t
            }(StructArray)
              , SmartArrayBuffer = function() {
                function t(t, e, r, n) {
                    void 0 === n && (n = "ARRAY_BUFFER"),
                    this.AM = t,
                    this.kM = r,
                    this.type = n,
                    t && (this.buffer = "ARRAY_BUFFER" === n ? t.fe(e, r, "DYNAMIC_DRAW") : t.ve(e),
                    this.uf = e.byteLength,
                    this.byteLength = e.byteLength)
                }
                return t.prototype.update = function(t) {
                    var e, r, n;
                    0 !== t.length && this.AM && (e = "ARRAY_BUFFER" === this.type,
                    r = this.AM.gl,
                    n = (e ? this.AM.de : this.AM.me).current,
                    (e ? this.AM.de : this.AM.me).set(this.buffer),
                    this.uf < t.byteLength ? (r.bufferData(r[this.type], t, r.STATIC_DRAW),
                    this.byteLength = t.byteLength,
                    this.uf = t.byteLength) : (r.bufferSubData(r[this.type], 0, t),
                    this.byteLength = t.byteLength),
                    (e ? this.AM.de : this.AM.me).set(n))
                }
                ,
                t.prototype.destroy = function() {
                    this.buffer && this.AM && this.AM.deleteBuffer(this.buffer)
                }
                ,
                t.prototype.TX = function() {
                    this.AM = null
                }
                ,
                __decorate([InnerClass("SmartArrayBuffer")], t)
            }()
              , COS_HALF_SHARP_CORNER = Math.cos(Math.PI / 180 * 75)
              , prepMatClockwise = fromValues(0, -1, 1, 0)
              , perpMatCounterClockwise = fromValues(0, 1, -1, 0);
            function perpCounterClockwise(t, e) {
                transformMat2(t, e, perpMatCounterClockwise)
            }
            function perpClockwise(t, e) {
                transformMat2(t, e, prepMatClockwise)
            }
            var minRoundAngle = Math.PI / 9, emptyVec2 = create$3(), emptyVec3 = create$1(), prevPos = create$3(), currentPos = create$3(), nextPos = create$3(), tmpPos = create$3(), currentNormal = create$3(), nextNormal = create$3(), distance$1 = 0, nextDir = create$3(), currentDir = create$3(), negateCurrentNormal = create$3(), lineJoin, lineCap, currentNormal_addLineVertex = create$3(), leftNormal = create$3(), rightNormal = create$3(), offsetLeft = create$3(), offsetRight = create$3(), joinNormal_addMiter = create$3(), tmp_addTiangleVertex = create$1(), currentNormal_addTiangleVertex = create$3(), nextNormal_addTiangleVertex = create$3(), normal_addTiangleVertex = create$3(), tmp_addRoundVertex = create$1(), currentNormal_addRoundVertex = create$3(), nextNormal_addRoundVertex = create$3(), tmpNormal_addRoundVertex = create$3(), roundCenter_addRoundVertex = create$3(), CoreLineBucket = function() {
                function h() {
                    this._b = new LineArrayBuffer,
                    this.e1 = this.e2 = this.e3 = -1,
                    this.uploaded = !1
                }
                return h.OM = function(t, e, r) {
                    sub$1(t, e, r),
                    normalize(t, t),
                    perpCounterClockwise(t, t)
                }
                ,
                h.xM = function(t, e, r) {
                    add(t, e, r),
                    0 === t[0] && 0 === t[1] || normalize(t, t)
                }
                ,
                h.prototype.hb = function(t, e) {
                    if (t.length < 4)
                        return {
                            Iw: 0,
                            distance: 0
                        };
                    "auto" === (e = void (distance$1 = 0) === e ? {
                        X_: 1,
                        lineJoin: "miter",
                        lineCap: "butt"
                    } : e).lineJoin && (e.lineJoin = "miter"),
                    lineJoin = e.lineJoin,
                    lineCap = e.lineCap || "butt";
                    for (var r, n = this.Qx.length, i = 0, a = t.length; i < a; i += 2)
                        0 === i ? (currentPos[0] = t[i],
                        currentPos[1] = t[i + 1],
                        nextPos[0] = t[i + 2],
                        nextPos[1] = t[i + 3],
                        h.OM(nextNormal, nextPos, currentPos),
                        copy$1(currentNormal, nextNormal),
                        sub$1(nextDir, nextPos, currentPos),
                        normalize(nextDir, nextDir),
                        "square" === lineCap ? this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, e.X_, "bevel") : ("round" === lineCap && (copy$1(negateCurrentNormal, currentNormal),
                        negate(negateCurrentNormal, currentNormal),
                        this.DI(currentPos, negateCurrentNormal, currentNormal, distance$1)),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, "bevel")),
                        copy$1(currentDir, nextDir),
                        copy$1(prevPos, currentPos)) : i === a - 2 ? (currentPos[0] = t[i],
                        currentPos[1] = t[i + 1],
                        r = dist$1(currentPos, prevPos),
                        distance$1 += r,
                        "square" === lineCap ? this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !1, -1 * e.X_, "miter") : "round" === lineCap ? (this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !1, 0, "miter"),
                        copy$1(negateCurrentNormal, nextNormal),
                        negate(negateCurrentNormal, nextNormal),
                        this.DI(currentPos, nextNormal, negateCurrentNormal, distance$1)) : this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, "miter")) : (currentPos[0] = t[i],
                        currentPos[1] = t[i + 1],
                        nextPos[0] = t[i + 2],
                        nextPos[1] = t[i + 3],
                        h.OM(nextNormal, nextPos, currentPos),
                        0 === nextNormal[0] && 0 === nextNormal[1] || (r = dist$1(currentPos, prevPos),
                        distance$1 += r,
                        sub$1(nextDir, nextPos, currentPos),
                        normalize(nextDir, nextDir),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, e.lineJoin),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, e.lineJoin),
                        copy$1(prevPos, currentPos),
                        copy$1(currentNormal, nextNormal),
                        copy$1(currentDir, nextDir)));
                    return {
                        Iw: 3 * (this.Qx.length - n),
                        distance: distance$1
                    }
                }
                ,
                h.prototype.g0 = function(t, e) {
                    if (t.length < 2)
                        return {
                            Iw: 0,
                            distance: 0
                        };
                    "auto" === (e = void (distance$1 = 0) === e ? {
                        X_: 1,
                        lineJoin: "miter",
                        lineCap: "butt"
                    } : e).lineJoin && (e.lineJoin = "miter"),
                    lineJoin = e.lineJoin,
                    lineCap = e.lineCap || "butt";
                    for (var r, n = this.Qx.length, i = 0, a = t.length; i < a; i++)
                        0 === i ? (currentPos[0] = t[i][0],
                        currentPos[1] = t[i][1],
                        nextPos[0] = t[i + 1][0],
                        nextPos[1] = t[i + 1][1],
                        h.OM(nextNormal, nextPos, currentPos),
                        copy$1(currentNormal, nextNormal),
                        sub$1(nextDir, nextPos, currentPos),
                        normalize(nextDir, nextDir),
                        "square" === lineCap ? this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, e.X_, "bevel") : ("round" === lineCap && (copy$1(negateCurrentNormal, currentNormal),
                        negate(negateCurrentNormal, currentNormal),
                        this.DI(currentPos, negateCurrentNormal, currentNormal, distance$1)),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, "bevel")),
                        copy$1(currentDir, nextDir),
                        copy$1(prevPos, currentPos)) : i === a - 1 ? (currentPos[0] = t[i][0],
                        currentPos[1] = t[i][1],
                        r = dist$1(currentPos, prevPos),
                        distance$1 += r,
                        "square" === lineCap ? this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !1, -1 * e.X_, "miter") : "round" === lineCap ? (this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !1, 0, "miter"),
                        copy$1(negateCurrentNormal, nextNormal),
                        negate(negateCurrentNormal, nextNormal),
                        this.DI(currentPos, nextNormal, negateCurrentNormal, distance$1)) : this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, "miter")) : (currentPos[0] = t[i][0],
                        currentPos[1] = t[i][1],
                        nextPos[0] = t[i + 1][0],
                        nextPos[1] = t[i + 1][1],
                        h.OM(nextNormal, nextPos, currentPos),
                        0 === nextNormal[0] && 0 === nextNormal[1] || (r = dist$1(currentPos, prevPos),
                        distance$1 += r,
                        sub$1(nextDir, nextPos, currentPos),
                        normalize(nextDir, nextDir),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, e.lineJoin),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, e.lineJoin),
                        copy$1(prevPos, currentPos),
                        copy$1(currentNormal, nextNormal),
                        copy$1(currentDir, nextDir)));
                    return {
                        Iw: 3 * (this.Qx.length - n),
                        distance: distance$1
                    }
                }
                ,
                h.prototype.eD = function(t, e, r) {
                    if (void 0 === r && (r = 3e3),
                    t.length < 4)
                        return {
                            Iw: 0,
                            distance: 0
                        };
                    "auto" === (e = void (distance$1 = 0) === e ? {
                        X_: 1,
                        lineJoin: "miter",
                        lineCap: "butt"
                    } : e).lineJoin && (e.lineJoin = "miter"),
                    lineJoin = e.lineJoin,
                    lineCap = e.lineCap || "butt";
                    for (var n = this.Qx.length, i = 0, a = t.length; i < a; i += 2)
                        if (0 === i)
                            currentPos[0] = t[i],
                            currentPos[1] = t[i + 1],
                            nextPos[0] = t[i + 2],
                            nextPos[1] = t[i + 3],
                            h.OM(nextNormal, nextPos, currentPos),
                            copy$1(currentNormal, nextNormal),
                            sub$1(nextDir, nextPos, currentPos),
                            normalize(nextDir, nextDir),
                            "square" === lineCap ? this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, e.X_, "bevel") : ("round" === lineCap && (copy$1(negateCurrentNormal, currentNormal),
                            negate(negateCurrentNormal, currentNormal),
                            this.DI(currentPos, negateCurrentNormal, currentNormal, distance$1)),
                            this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, "bevel")),
                            copy$1(currentDir, nextDir),
                            copy$1(prevPos, currentPos);
                        else if (i === a - 2) {
                            tmpPos[0] = t[i],
                            tmpPos[1] = t[i + 1];
                            var o = dist$1(tmpPos, prevPos);
                            copy$1(tmpPos, prevPos);
                            for (var s = 0; r < o - s; )
                                tmpPos[0] = tmpPos[0] + currentDir[0] * r,
                                tmpPos[1] = tmpPos[1] + currentDir[1] * r,
                                s += r,
                                this.IM(tmpPos, currentNormal, nextNormal, distance$1 + s, currentDir, !1, 0, "miter"),
                                this.IM(tmpPos, currentNormal, nextNormal, distance$1 + s, currentDir, !0, 0, "miter");
                            currentPos[0] = t[i],
                            currentPos[1] = t[i + 1],
                            distance$1 += o,
                            "square" === lineCap ? this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !1, -1 * e.X_, "miter") : "round" === lineCap ? (this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !1, 0, "miter"),
                            copy$1(negateCurrentNormal, nextNormal),
                            negate(negateCurrentNormal, nextNormal),
                            this.DI(currentPos, nextNormal, negateCurrentNormal, distance$1)) : this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, "miter")
                        } else if (currentPos[0] = t[i],
                        currentPos[1] = t[i + 1],
                        nextPos[0] = t[i + 2],
                        nextPos[1] = t[i + 3],
                        h.OM(nextNormal, nextPos, currentPos),
                        0 !== nextNormal[0] || 0 !== nextNormal[1]) {
                            var u = dist$1(currentPos, prevPos);
                            for (copy$1(tmpPos, prevPos),
                            s = 0; r < u - s; )
                                tmpPos[0] = tmpPos[0] + currentDir[0] * r,
                                tmpPos[1] = tmpPos[1] + currentDir[1] * r,
                                s += r,
                                this.IM(tmpPos, currentNormal, currentNormal, distance$1 + s, currentDir, !1, 0, "miter"),
                                this.IM(tmpPos, currentNormal, currentNormal, distance$1 + s, currentDir, !0, 0, "miter");
                            currentPos[0] = t[i],
                            currentPos[1] = t[i + 1],
                            distance$1 += u,
                            sub$1(nextDir, nextPos, currentPos),
                            normalize(nextDir, nextDir),
                            this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, e.lineJoin),
                            this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, e.lineJoin),
                            copy$1(prevPos, currentPos),
                            copy$1(currentNormal, nextNormal),
                            copy$1(currentDir, nextDir)
                        }
                    return {
                        Iw: 3 * (this.Qx.length - n),
                        distance: distance$1
                    }
                }
                ,
                h.prototype.Nx = function(t, e) {
                    if (void 0 === e && (e = {
                        lineJoin: "miter"
                    }),
                    t.length < 2)
                        return {
                            Iw: 0,
                            distance: 0
                        };
                    for (var r, n, i = this.Qx.length, a = 0, o = t.length; a < o; a++)
                        0 === a ? (copy$1(currentPos, t[a]),
                        r = t[a + 1],
                        n = t[o - 2],
                        h.OM(nextNormal, r, currentPos),
                        h.OM(currentNormal, currentPos, n),
                        sub$1(nextDir, r, currentPos),
                        normalize(nextDir, nextDir),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, e.lineJoin),
                        copy$1(currentDir, nextDir),
                        copy$1(currentNormal, nextNormal),
                        copy$1(prevPos, currentPos)) : a === o - 1 ? (copy$1(currentPos, t[a]),
                        copy$1(nextPos, t[1]),
                        distance$1 += dist$1(currentPos, prevPos),
                        h.OM(nextNormal, nextPos, currentPos),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, e.lineJoin)) : (copy$1(currentPos, t[a]),
                        copy$1(nextPos, t[a + 1]),
                        distance$1 += dist$1(currentPos, prevPos),
                        h.OM(nextNormal, nextPos, currentPos),
                        sub$1(nextDir, nextPos, currentPos),
                        normalize(nextDir, nextDir),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, currentDir, !1, 0, e.lineJoin),
                        this.IM(currentPos, currentNormal, nextNormal, distance$1, nextDir, !0, 0, e.lineJoin),
                        copy$1(prevPos, currentPos),
                        copy$1(currentNormal, nextNormal),
                        copy$1(currentDir, nextDir));
                    return {
                        Iw: 3 * (this.Qx.length - i),
                        distance: distance$1
                    }
                }
                ,
                h.prototype.destroy = function() {
                    this.uploaded = !1,
                    this.zs && (this.zs.destroy(),
                    delete this.zs),
                    this.Pc && (this.Pc.destroy(),
                    delete this.Pc)
                }
                ,
                h.prototype.IM = function(t, e, r, n, i, a, o, s) {
                    copy$1(joinNormal_addMiter, emptyVec2),
                    h.xM(joinNormal_addMiter, e, r);
                    var u = dot(joinNormal_addMiter, e)
                      , f = (scale$2(joinNormal_addMiter, joinNormal_addMiter, 1 / u),
                    0)
                      , c = 0;
                    o && (c = f = o),
                    "bevel" === s || "miter" === s && u < COS_HALF_SHARP_CORNER ? a ? this.SM(t, r, n, f, c, i) : (this.SM(t, e, n, f, c, i),
                    this.e3 = this._b.length - 2,
                    this.e2 = this.e3 - 1,
                    this.e1 = this.e2 - 1,
                    this.Qx.kb(this.e1, this.e2, this.e3),
                    this.e1 = this.e2,
                    this.e2 = this.e3,
                    this.e3 = this.e3 + 1,
                    this.Qx.kb(this.e1, this.e2, this.e3),
                    this.CM(t, e, r, n)) : "round" === s ? a ? this.SM(t, r, n, f, c, i) : (this.SM(t, e, n, f, c, i),
                    this.e3 = this._b.length - 2,
                    this.e2 = this.e3 - 1,
                    this.e1 = this.e2 - 1,
                    this.Qx.kb(this.e1, this.e2, this.e3),
                    this.e1 = this.e2,
                    this.e2 = this.e3,
                    this.e3 = this.e3 + 1,
                    this.Qx.kb(this.e1, this.e2, this.e3),
                    this.DI(t, e, r, n)) : (this.SM(t, joinNormal_addMiter, n, f, c, i),
                    a || (this.e3 = this._b.length - 2,
                    this.e2 = this.e3 - 1,
                    this.e1 = this.e2 - 1,
                    this.Qx.kb(this.e1, this.e2, this.e3),
                    this.e1 = this.e2,
                    this.e2 = this.e3,
                    this.e3 = this.e3 + 1,
                    this.Qx.kb(this.e1, this.e2, this.e3)))
                }
                ,
                h.prototype.SM = function(t, e, r, n, i, a) {
                    copy$1(currentNormal_addLineVertex, e),
                    copy$1(leftNormal, currentNormal_addLineVertex),
                    copy$1(rightNormal, currentNormal_addLineVertex),
                    copy$1(offsetLeft, emptyVec2),
                    copy$1(offsetRight, emptyVec2),
                    scale$2(rightNormal, currentNormal_addLineVertex, -1),
                    n && (perpCounterClockwise(offsetLeft, leftNormal),
                    scale$2(offsetLeft, offsetLeft, n),
                    add(leftNormal, offsetLeft, leftNormal)),
                    i && (perpClockwise(offsetRight, rightNormal),
                    scale$2(offsetRight, offsetRight, i),
                    add(rightNormal, offsetRight, rightNormal)),
                    this._b.kb(t, leftNormal, r, a),
                    this._b.kb(t, rightNormal, r, a)
                }
                ,
                h.prototype.CM = function(t, e, r, n) {
                    void 0 === n && (n = 0),
                    copy(tmp_addTiangleVertex, emptyVec3),
                    copy$1(currentNormal_addTiangleVertex, e),
                    copy$1(nextNormal_addTiangleVertex, r),
                    copy$1(normal_addTiangleVertex, emptyVec2),
                    cross$1(tmp_addTiangleVertex, currentNormal_addTiangleVertex, nextNormal_addTiangleVertex),
                    e = 0 < tmp_addTiangleVertex[2],
                    this._b.kb(t, normal_addTiangleVertex, n, normal_addTiangleVertex),
                    e && (negate(currentNormal_addTiangleVertex, currentNormal_addTiangleVertex),
                    negate(nextNormal_addTiangleVertex, nextNormal_addTiangleVertex)),
                    this._b.kb(t, currentNormal_addTiangleVertex, n, normal_addTiangleVertex),
                    this._b.kb(t, nextNormal_addTiangleVertex, n, normal_addTiangleVertex),
                    this.e3 = this._b.length - 1,
                    this.e2 = this.e3 - 1,
                    this.e1 = this.e2 - 1,
                    this.Qx.kb(this.e1, this.e2, this.e3)
                }
                ,
                h.prototype.DI = function(t, e, r, n) {
                    void 0 === n && (n = 0),
                    copy(tmp_addRoundVertex, emptyVec3),
                    copy$1(currentNormal_addRoundVertex, e),
                    copy$1(nextNormal_addRoundVertex, r);
                    var i = angle(currentNormal_addRoundVertex, nextNormal_addRoundVertex)
                      , a = (cross$1(tmp_addRoundVertex, currentNormal_addRoundVertex, nextNormal_addRoundVertex),
                    0 < tmp_addRoundVertex[2])
                      , o = [];
                    o.push(currentNormal_addRoundVertex);
                    for (var s = minRoundAngle; s < i; s += minRoundAngle) {
                        var u = create$3();
                        rotate(u, currentNormal_addRoundVertex, fromValues$3(0, 0), a ? s : -1 * s),
                        o.push(u)
                    }
                    o.push(nextNormal_addRoundVertex),
                    a && forEach(o, function(t) {
                        negate(t, t)
                    }),
                    copy$1(roundCenter_addRoundVertex, emptyVec2),
                    this._b.kb(t, roundCenter_addRoundVertex, n, roundCenter_addRoundVertex);
                    var f = this._b.length - 1;
                    this._b.kb(t, o[0], n, roundCenter_addRoundVertex),
                    this.e3 = this._b.length - 1,
                    this.e2 = this.e3 - 1;
                    for (var c = 1, h = o.length; c < h; c++)
                        this._b.kb(t, o[c], n, roundCenter_addRoundVertex),
                        this.e3 = this._b.length - 1,
                        this.e2 = this.e3 - 1,
                        this.Qx.kb(f, this.e2, this.e3)
                }
                ,
                h
            }(), PolylineBucket = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.Qx = new TriangleIndexArrayUint,
                    t
                }
                return __extends(t, e),
                t.prototype.upload = function(t, e) {
                    void 0 === e && (e = !1),
                    this.uploaded || (this.uploaded = !0,
                    this.zs ? this.zs.update(this._b.Mb) : this.zs = new SmartArrayBuffer(t,this._b.Mb,LineArrayBuffer.Rb),
                    this.Pc ? this.Pc.update(this.Qx.UI) : this.Pc = new SmartArrayBuffer(t,this.Qx.UI,32,"ELEMENT_ARRAY_BUFFER"),
                    e && (delete this.Qx,
                    delete this._b))
                }
                ,
                t.prototype.reset = function() {
                    this.uploaded = !1,
                    this._b = new LineArrayBuffer,
                    this.Qx = new TriangleIndexArrayUint,
                    this.e1 = this.e2 = this.e3 = -1,
                    this.uploaded = !1
                }
                ,
                t
            }(CoreLineBucket), earcut_1 = earcut, default_1$1 = earcut;
            function earcut(t, e, r) {
                r = r || 2;
                var n, i, a, o, s, u = e && e.length, f = u ? e[0] * r : t.length, c = linkedList(t, 0, f, r, !0), h = [];
                if (c && c.next !== c.NM) {
                    if (u && (c = eliminateHoles(t, e, c, r)),
                    t.length > 80 * r) {
                        for (var l = n = t[0], d = i = t[1], v = r; v < f; v += r)
                            (a = t[v]) < l && (l = a),
                            (o = t[v + 1]) < d && (d = o),
                            n < a && (n = a),
                            i < o && (i = o);
                        s = 0 !== (s = Math.max(n - l, i - d)) ? 32767 / s : 0
                    }
                    earcutLinked(c, h, r, l, d, s, 0)
                }
                return h
            }
            function linkedList(t, e, r, n, i) {
                var a, o;
                if (i === 0 < signedArea(t, e, r, n))
                    for (a = e; a < r; a += n)
                        o = insertNode(a, t[a], t[a + 1], o);
                else
                    for (a = r - n; e <= a; a -= n)
                        o = insertNode(a, t[a], t[a + 1], o);
                return o && equals$2(o, o.next) && (removeNode(o),
                o = o.next),
                o
            }
            function filterPoints(t, e) {
                if (!t)
                    return t;
                e = e || t;
                var r, n = t;
                do {
                    if (r = !1,
                    n.LM || !equals$2(n, n.next) && 0 !== area(n.NM, n, n.next))
                        n = n.next;
                    else {
                        if (removeNode(n),
                        (n = e = n.NM) === n.next)
                            break;
                        r = !0
                    }
                } while (r || n !== e);
                return e
            }
            function earcutLinked(t, e, r, n, i, a, o) {
                if (t) {
                    !o && a && indexCurve(t, n, i, a);
                    for (var s, u, f = t; t.NM !== t.next; )
                        if (s = t.NM,
                        u = t.next,
                        a ? isEarHashed(t, n, i, a) : isEar(t))
                            e.push(s.i / r | 0),
                            e.push(t.i / r | 0),
                            e.push(u.i / r | 0),
                            removeNode(t),
                            t = u.next,
                            f = u.next;
                        else if ((t = u) === f) {
                            o ? 1 === o ? earcutLinked(t = cureLocalIntersections(filterPoints(t), e, r), e, r, n, i, a, 2) : 2 === o && splitEarcut(t, e, r, n, i, a) : earcutLinked(filterPoints(t), e, r, n, i, a, 1);
                            break
                        }
                }
            }
            function isEar(t) {
                var e = t.NM
                  , r = t;
                if (!(0 <= area(e, r, t = t.next))) {
                    for (var n = e.x, i = r.x, a = t.x, o = e.y, s = r.y, u = t.y, f = n < i ? n < a ? n : a : i < a ? i : a, c = o < s ? o < u ? o : u : s < u ? s : u, h = i < n ? a < n ? n : a : a < i ? i : a, l = s < o ? u < o ? o : u : u < s ? s : u, d = t.next; d !== e; ) {
                        if (d.x >= f && d.x <= h && d.y >= c && d.y <= l && pointInTriangle(n, o, i, s, a, u, d.x, d.y) && 0 <= area(d.NM, d, d.next))
                            return;
                        d = d.next
                    }
                    return 1
                }
            }
            function isEarHashed(t, e, r, n) {
                var i = t.NM
                  , a = t
                  , o = t.next;
                if (!(0 <= area(i, a, o))) {
                    for (var s = i.x, u = a.x, f = o.x, c = i.y, h = a.y, l = o.y, d = s < u ? s < f ? s : f : u < f ? u : f, v = c < h ? c < l ? c : l : h < l ? h : l, g = u < s ? f < s ? s : f : f < u ? u : f, y = h < c ? l < c ? c : l : l < h ? h : l, p = zOrder(d, v, e, r, n), m = zOrder(g, y, e, r, n), b = t.DM, w = t.RM; b && b.z >= p && w && w.z <= m; ) {
                        if (b.x >= d && b.x <= g && b.y >= v && b.y <= y && b !== i && b !== o && pointInTriangle(s, c, u, h, f, l, b.x, b.y) && 0 <= area(b.NM, b, b.next))
                            return;
                        if (b = b.DM,
                        w.x >= d && w.x <= g && w.y >= v && w.y <= y && w !== i && w !== o && pointInTriangle(s, c, u, h, f, l, w.x, w.y) && 0 <= area(w.NM, w, w.next))
                            return;
                        w = w.RM
                    }
                    for (; b && b.z >= p; ) {
                        if (b.x >= d && b.x <= g && b.y >= v && b.y <= y && b !== i && b !== o && pointInTriangle(s, c, u, h, f, l, b.x, b.y) && 0 <= area(b.NM, b, b.next))
                            return;
                        b = b.DM
                    }
                    for (; w && w.z <= m; ) {
                        if (w.x >= d && w.x <= g && w.y >= v && w.y <= y && w !== i && w !== o && pointInTriangle(s, c, u, h, f, l, w.x, w.y) && 0 <= area(w.NM, w, w.next))
                            return;
                        w = w.RM
                    }
                    return 1
                }
            }
            function cureLocalIntersections(t, e, r) {
                var n = t;
                do {
                    var i = n.NM
                      , a = n.next.next
                } while (!equals$2(i, a) && intersects$1(i, n, n.next, a) && locallyInside(i, a) && locallyInside(a, i) && (e.push(i.i / r | 0),
                e.push(n.i / r | 0),
                e.push(a.i / r | 0),
                removeNode(n),
                removeNode(n.next),
                n = t = a),
                (n = n.next) !== t);
                return filterPoints(n)
            }
            function splitEarcut(t, e, r, n, i, a) {
                var o = t;
                do {
                    for (var s, u = o.next.next; u !== o.NM; ) {
                        if (o.i !== u.i && isValidDiagonal(o, u))
                            return s = splitPolygon(o, u),
                            o = filterPoints(o, o.next),
                            s = filterPoints(s, s.next),
                            earcutLinked(o, e, r, n, i, a, 0),
                            earcutLinked(s, e, r, n, i, a, 0);
                        u = u.next
                    }
                } while ((o = o.next) !== t)
            }
            function eliminateHoles(t, e, r, n) {
                for (var i, a = [], o = 0, s = e.length; o < s; o++)
                    (i = linkedList(t, e[o] * n, o < s - 1 ? e[o + 1] * n : t.length, n, !1)) === i.next && (i.LM = !0),
                    a.push(getLeftmost(i));
                for (a.sort(compareX),
                o = 0; o < a.length; o++)
                    r = eliminateHole(a[o], r);
                return r
            }
            function compareX(t, e) {
                return t.x - e.x
            }
            function eliminateHole(t, e) {
                var r = findHoleBridge(t, e);
                return r ? (filterPoints(t = splitPolygon(r, t), t.next),
                filterPoints(r, r.next)) : e
            }
            function findHoleBridge(t, e) {
                var r, n = e, i = t.x, a = t.y, o = -Infinity;
                do {
                    if (a <= n.y && a >= n.next.y && n.next.y !== n.y) {
                        var s = n.x + (a - n.y) * (n.next.x - n.x) / (n.next.y - n.y);
                        if (s <= i && o < s && (r = n.x < n.next.x ? n : n.next,
                        (o = s) === i))
                            return r
                    }
                } while ((n = n.next) !== e);
                if (!r)
                    return null;
                for (var u, f = r, c = r.x, h = r.y, l = Infinity, n = r; i >= n.x && n.x >= c && i !== n.x && pointInTriangle(a < h ? i : o, a, c, h, a < h ? o : i, a, n.x, n.y) && (u = Math.abs(a - n.y) / (i - n.x),
                locallyInside(n, t)) && (u < l || u === l && (n.x > r.x || n.x === r.x && sectorContainsSector(r, n))) && (r = n,
                l = u),
                (n = n.next) !== f; )
                    ;
                return r
            }
            function sectorContainsSector(t, e) {
                return area(t.NM, t, e.NM) < 0 && area(e.next, t, t.next) < 0
            }
            function indexCurve(t, e, r, n) {
                for (var i = t; 0 === i.z && (i.z = zOrder(i.x, i.y, e, r, n)),
                i.DM = i.NM,
                i.RM = i.next,
                (i = i.next) !== t; )
                    ;
                i.DM.RM = null,
                i.DM = null,
                sortLinked(i)
            }
            function sortLinked(t) {
                var e, r, n, i, a, o, s, u, f = 1;
                do {
                    for (r = t,
                    a = t = null,
                    o = 0; r; ) {
                        for (o++,
                        n = r,
                        e = s = 0; e < f && (s++,
                        n = n.RM); e++)
                            ;
                        for (u = f; 0 < s || 0 < u && n; )
                            0 !== s && (0 === u || !n || r.z <= n.z) ? (r = (i = r).RM,
                            s--) : (n = (i = n).RM,
                            u--),
                            a ? a.RM = i : t = i,
                            i.DM = a,
                            a = i;
                        r = n
                    }
                } while (a.RM = null,
                f *= 2,
                1 < o)
            }
            function zOrder(t, e, r, n, i) {
                return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = (t - r) * i | 0) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = (e - n) * i | 0) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1
            }
            function getLeftmost(t) {
                for (var e = t, r = t; (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e),
                (e = e.next) !== t; )
                    ;
                return r
            }
            function pointInTriangle(t, e, r, n, i, a, o, s) {
                return (t - o) * (a - s) <= (i - o) * (e - s) && (r - o) * (e - s) <= (t - o) * (n - s) && (i - o) * (n - s) <= (r - o) * (a - s)
            }
            function isValidDiagonal(t, e) {
                return t.next.i !== e.i && t.NM.i !== e.i && !intersectsPolygon(t, e) && (locallyInside(t, e) && locallyInside(e, t) && middleInside(t, e) && (area(t.NM, t, e.NM) || area(t, e.NM, e)) || equals$2(t, e) && 0 < area(t.NM, t, t.next) && 0 < area(e.NM, e, e.next))
            }
            function area(t, e, r) {
                return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)
            }
            function equals$2(t, e) {
                return t.x === e.x && t.y === e.y
            }
            function intersects$1(t, e, r, n) {
                var i = sign(area(t, e, r))
                  , a = sign(area(t, e, n))
                  , o = sign(area(r, n, t))
                  , s = sign(area(r, n, e));
                return i !== a && o !== s || 0 === i && onSegment(t, r, e) || 0 === a && onSegment(t, n, e) || 0 === o && onSegment(r, t, n) || 0 === s && onSegment(r, e, n)
            }
            function onSegment(t, e, r) {
                return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y)
            }
            function sign(t) {
                return 0 < t ? 1 : t < 0 ? -1 : 0
            }
            function intersectsPolygon(t, e) {
                var r = t;
                do {
                    if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && intersects$1(r, r.next, t, e))
                        return 1
                } while ((r = r.next) !== t)
            }
            function locallyInside(t, e) {
                return area(t.NM, t, t.next) < 0 ? 0 <= area(t, e, t.next) && 0 <= area(t, t.NM, e) : area(t, e, t.NM) < 0 || area(t, t.next, e) < 0
            }
            function middleInside(t, e) {
                for (var r = t, n = !1, i = (t.x + e.x) / 2, a = (t.y + e.y) / 2; r.y > a != r.next.y > a && r.next.y !== r.y && i < (r.next.x - r.x) * (a - r.y) / (r.next.y - r.y) + r.x && (n = !n),
                (r = r.next) !== t; )
                    ;
                return n
            }
            function splitPolygon(t, e) {
                var r = new Node(t.i,t.x,t.y)
                  , n = new Node(e.i,e.x,e.y)
                  , i = t.next
                  , a = e.NM;
                return (t.next = e).NM = t,
                (r.next = i).NM = r,
                (n.next = r).NM = n,
                (a.next = n).NM = a,
                n
            }
            function insertNode(t, e, r, n) {
                return t = new Node(t,e,r),
                n ? (t.next = n.next,
                (t.NM = n).next.NM = t,
                n.next = t) : (t.NM = t).next = t,
                t
            }
            function removeNode(t) {
                t.next.NM = t.NM,
                t.NM.next = t.next,
                t.DM && (t.DM.RM = t.RM),
                t.RM && (t.RM.DM = t.DM)
            }
            function Node(t, e, r) {
                this.i = t,
                this.x = e,
                this.y = r,
                this.NM = null,
                this.next = null,
                this.z = 0,
                this.DM = null,
                this.RM = null,
                this.LM = !1
            }
            function signedArea(t, e, r, n) {
                for (var i = 0, a = e, o = r - n; a < r; a += n)
                    i += (t[o] - t[a]) * (t[a + 1] + t[o + 1]),
                    o = a;
                return i
            }
            earcut.PM = function(t, e, r, n) {
                var i = e && e.length
                  , a = i ? e[0] * r : t.length
                  , o = Math.abs(signedArea(t, 0, a, r));
                if (i)
                    for (var s = 0, u = e.length; s < u; s++) {
                        var f = e[s] * r
                          , c = s < u - 1 ? e[s + 1] * r : t.length;
                        o -= Math.abs(signedArea(t, f, c, r))
                    }
                for (var h = 0, s = 0; s < n.length; s += 3) {
                    var l = n[s] * r
                      , d = n[s + 1] * r
                      , v = n[s + 2] * r;
                    h += Math.abs((t[l] - t[v]) * (t[1 + d] - t[1 + l]) - (t[l] - t[d]) * (t[1 + v] - t[1 + l]))
                }
                return 0 === o && 0 === h ? 0 : Math.abs((h - o) / o)
            }
            ,
            earcut.UM = function(t) {
                for (var e = t[0][0].length, r = {
                    rp: [],
                    BM: [],
                    dimensions: e
                }, n = 0, i = 0; i < t.length; i++) {
                    for (var a = 0; a < t[i].length; a++)
                        for (var o = 0; o < e; o++)
                            r.rp.push(t[i][a][o]);
                    0 < i && (n += t[i - 1].length,
                    r.BM.push(n))
                }
                return r
            }
            ,
            earcut_1["default"] = default_1$1;
            var CoreFillBucket = function() {
                function t() {
                    this._b = new FillArray,
                    this.zM = new FillArray,
                    this.uploaded = !1
                }
                return t.prototype.Nx = function(t, e) {
                    if (t.length < 6)
                        return 0;
                    for (var r = this.Qx.length, n = this._b.length, i = earcut_1(t, e), a = 0, o = i.length; a < o; a += 3)
                        this.Qx.kb(n + i[a], n + i[a + 1], n + i[a + 2]);
                    for (a = 0,
                    o = t.length; a < o; a += 2)
                        this._b.kb(t[a], t[a + 1]);
                    return 0 < (e = 3 * (this.Qx.length - r)) && (this.uploaded = !1),
                    e
                }
                ,
                t.prototype.Ew = function(t) {
                    if (t.length < 2)
                        return 0;
                    for (var e = this.qM.length, r = this.zM.length, n = 0, i = t.length; n < i; n += 2)
                        this.zM.kb(t[n][0], t[n][1]),
                        this.zM.kb(t[n + 1][0], t[n + 1][1]),
                        this.qM.kb(r + n, r + n + 1);
                    return 0 < (e = 2 * (this.qM.length - e)) && (this.uploaded = !1),
                    e
                }
                ,
                t.prototype.destroy = function() {
                    this.uploaded = !1,
                    this.zs && (this.zs.context.deleteBuffer(this.zs),
                    delete this.zs),
                    this.Pc && (this.Pc.context.deleteBuffer(this.Pc),
                    delete this.Pc),
                    this.Ec && (this.Ec.context.deleteBuffer(this.Ec),
                    delete this.Ec),
                    this.Nc && (this.Nc.context.deleteBuffer(this.Nc),
                    delete this.Nc)
                }
                ,
                t
            }()
              , PolygonBucket = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.Qx = new TriangleIndexArrayUint,
                    t.qM = new LinesIndexArrayUint,
                    t
                }
                return __extends(t, e),
                t.prototype.upload = function(t, e) {
                    void 0 === e && (e = !1),
                    this.uploaded || (this.destroy(),
                    this.uploaded = !0,
                    this.zs = t.fe(this._b.Mb, FillArray.Rb),
                    this.Pc = t.ve(this.Qx.UI),
                    this.Ec = t.fe(this.zM.Mb, LinesIndexArray.Rb),
                    this.Nc = t.ve(this.qM.UI),
                    e && (delete this.Qx,
                    delete this._b,
                    delete this.zM,
                    delete this.qM))
                }
                ,
                t.prototype.reset = function() {
                    this._b = new FillArray,
                    this.zM = new FillArray,
                    this.Qx = new TriangleIndexArrayUint,
                    this.qM = new LinesIndexArrayUint,
                    this.uploaded = !1
                }
                ,
                t
            }(CoreFillBucket)
              , FaceTextureCoord = {
                empty: fromValues$3(-1, -1),
                Gm: fromValues$3(1, 1),
                qm: fromValues$3(0, 1),
                Nm: fromValues$3(1, 0),
                Um: fromValues$3(0, 0)
            }
              , MaxInfo = {
                Gm: create$3(),
                qm: create$3(),
                Nm: create$3(),
                Um: create$3()
            }
              , floorHeight = 6
              , FillExtrusionBucket = function() {
                function t() {
                    this._b = new FillExtrusionArray,
                    this.uploaded = !1
                }
                return t.prototype.tz = function(t, e, r) {
                    void 0 === e && (e = 100);
                    for (var n = [], i = [], a = t.length, o = 0; o < a; o += 2)
                        i[s = o / 2 * 3] = t[o],
                        i[s + 1] = t[o + 1],
                        i[s + 2] = 0;
                    for (var s, o = 0; o < a; o += 2)
                        n[s = o / 2 * 3] = t[o],
                        n[s + 1] = t[o + 1],
                        n[s + 2] = e;
                    return this.Nx(n, e, r) + this.RI(i, n, r)
                }
                ,
                t.prototype.RI = function(t, e, r) {
                    var n = e.length
                      , i = e[2]
                      , a = this._b.length;
                    t = t.concat(t.slice(0, 3)),
                    e = e.concat(e.slice(0, 3));
                    for (var o = 0; o < n - 3; o += 3) {
                        var s = Math.abs(t[o] - t[o + 3])
                          , u = Math.abs(t[o + 1] - t[o + 4])
                          , f = Math.round(i)
                          , s = Math.round(Math.sqrt(Math.pow(s, 2) + Math.pow(u, 2)))
                          , s = (0 < (u = fromValues$3(Math.ceil(s / floorHeight), Math.round(f / floorHeight)))[1] ? (mul(MaxInfo.qm, FaceTextureCoord.qm, u),
                        mul(MaxInfo.Gm, FaceTextureCoord.Gm, u),
                        mul(MaxInfo.Um, FaceTextureCoord.Um, u),
                        mul(MaxInfo.Nm, FaceTextureCoord.Nm, u)) : (set$1(MaxInfo.qm, -1, -1),
                        set$1(MaxInfo.Gm, -1, -1),
                        set$1(MaxInfo.Um, -1, -1),
                        set$1(MaxInfo.Nm, -1, -1)),
                        this.zI(t.slice(o, o + 3), t.slice(o + 3, o + 6), e.slice(o + 3, o + 6)));
                        this._b.kb(t[o], t[o + 1], t[o + 2], i, s, MaxInfo.qm),
                        this._b.kb(e[o + 3], e[o + 4], e[o + 5], i, s, MaxInfo.Nm),
                        this._b.kb(t[o + 3], t[o + 4], t[o + 5], i, s, MaxInfo.Gm),
                        this._b.kb(t[o], t[o + 1], t[o + 2], i, s, MaxInfo.qm),
                        this._b.kb(e[o], e[o + 1], e[o + 2], i, s, MaxInfo.Um),
                        this._b.kb(e[o + 3], e[o + 4], e[o + 5], i, s, MaxInfo.Nm)
                    }
                    return 0 < (a = this._b.length - a) && (this.uploaded = !1),
                    a
                }
                ,
                t.prototype.Nx = function(t, e, r) {
                    if (t.length < 9)
                        return 0;
                    for (var n = this._b.length, i = earcut_1(t, r, 3), a = i.length - 1; 0 <= a; a--) {
                        var o = 3 * i[a];
                        this._b.kb(t[o], t[1 + o], t[2 + o], e, fromValues$1(0, 0, 1), FaceTextureCoord.empty)
                    }
                    return 0 < (r = this._b.length - n) && (this.uploaded = !1),
                    r
                }
                ,
                t.prototype.zI = function(t, e, r) {
                    var t = fromValues$1(t[0], t[1], t[2])
                      , e = fromValues$1(e[0], e[1], e[2])
                      , r = fromValues$1(r[0], r[1], r[2])
                      , n = create$1()
                      , i = create$1()
                      , a = create$1();
                    return sub(i, t, e),
                    sub(a, r, e),
                    cross(n, i, a),
                    n
                }
                ,
                t.prototype.upload = function(t, e) {
                    void 0 === e && (e = !1),
                    this.uploaded || (this.destroy(),
                    this.uploaded = !0,
                    this.zs = t.fe(this._b.Mb, FillExtrusionArray.Rb),
                    e && delete this._b)
                }
                ,
                t.prototype.destroy = function() {
                    this.uploaded = !1,
                    this.zs && (this.zs.context.deleteBuffer(this.zs),
                    delete this.zs),
                    this.Pc && (this.Pc.context.deleteBuffer(this.Pc),
                    delete this.Pc)
                }
                ,
                t.prototype.reset = function() {
                    this._b = new FillExtrusionArray,
                    this.uploaded = !1
                }
                ,
                t
            }()
              , mainkeyMap = {
                1: "poi",
                2: "road",
                3: "region",
                4: "roadSigns",
                5: {
                    55: "building",
                    "default": "building_model"
                }
            };
            function getLineTypeStyle(t) {
                switch (t) {
                case 0:
                case 1:
                case 2:
                    return "solid";
                case 3:
                    return "dash(12,12)";
                case 4:
                    return "dash(2,2)";
                case 5:
                    return "dash(6,3,2,3)";
                case 6:
                    return "railway(12,12)";
                case 7:
                    return "solid";
                case 8:
                    return "dash(3,3)";
                case 9:
                    return "dash(12,4)";
                case 10:
                    return "solid";
                case 11:
                    return "dash(4,4)";
                case 12:
                    return "dash(12,4)";
                case 13:
                    return "solid_squarecap";
                case 14:
                    return "solid_roundcap";
                case 15:
                    return "dash(6,6)_roundcap";
                case 16:
                    return "dash(6,6)_squarecap";
                default:
                    return "solid"
                }
            }
            function getTypeByKey(t) {
                var e = (t = t.toString()).slice(0, 1)
                  , r = mainkeyMap[e];
                return r === undefined || "string" == typeof r ? r : r[e = t.slice(0, 2)] !== undefined ? r[e] : r["default"]
            }
            function getLineType(t) {
                return getLineTypeStyle(t)
            }
            var StyleParser = function() {
                function t() {
                    this.Ve = null,
                    this.RV = null,
                    this.bN = null
                }
                return t.prototype.parseStyle = function(t) {
                    var e = {
                        poi: {},
                        road: {},
                        region: {},
                        roadSigns: {},
                        building: {}
                    };
                    if (t && t.styles)
                        for (var t = this.U9t(t.styles), r = 0, n = Object.entries(t); r < n.length; r++) {
                            var i = n[r]
                              , a = i[0];
                            if (e[a])
                                for (var o = 0, s = Object.entries(i[1]); o < s.length; o++) {
                                    var f = (u = s[o])[0]
                                      , u = u[1];
                                    e[a][f] = {};
                                    for (var c = 0, h = Object.entries(u); c < h.length; c++) {
                                        for (var d = (l = h[c])[0], v = l[1], l = this.D9t(v), g = [], y = 0; y < v.length; y++) {
                                            var p = v[y];
                                            g.push({
                                                minZoom: p.minZoom,
                                                maxZoom: p.maxZoom,
                                                style: this.B9t(p, a)
                                            })
                                        }
                                        e[a][f][d] = {
                                            zooms: l,
                                            styles: g
                                        }
                                    }
                                }
                        }
                    return e
                }
                ,
                t.prototype._Q = function() {
                    return Boolean(this.styles)
                }
                ,
                t.prototype.jY = function(t) {
                    this.styles = t
                }
                ,
                t.prototype.clearStyleCache = function() {
                    this.EI = -1
                }
                ,
                t.prototype.setStyle = function(t) {
                    this.Ve = t,
                    this.clearStyleCache()
                }
                ,
                t.prototype.EY = function(t) {
                    this.RV = t
                }
                ,
                t.prototype.MS = function(t) {
                    if (this.RV)
                        return this.RV[t]
                }
                ,
                t.prototype.kF = function(t) {
                    this.bN = t
                }
                ,
                t.prototype.mn = function(t, e) {
                    var r = getTypeByKey(t);
                    return this.styles === undefined || this.styles[r] === undefined || this.styles[r][t] === undefined || this.styles[r][t][e] === undefined ? null : this.styles[r][t][e].zooms
                }
                ,
                t.prototype.mW = function(t, e, r) {
                    var n = ["butt", "butt"];
                    return (t = this.dn(t, e, r)) && t[0] && (r = (e = t[0]).borderStyle,
                    (t = e.hn) && -1 < t.indexOf("roundcap") && (n[0] = "round"),
                    r) && -1 < r.indexOf("roundcap") && (n[1] = "round"),
                    n
                }
                ,
                t.prototype.Lw = function(t, e) {
                    return null
                }
                ,
                t.prototype.dn = function(t, e, r) {
                    var n, i = getTypeByKey(t);
                    return this.styles !== undefined && this.styles[i] !== undefined && this.styles[i][t] !== undefined && this.styles[i][t][e] !== undefined && (i = this.styles[i][t][e].styles,
                    t = Math.floor(r),
                    e = Math.ceil(r),
                    n = r - t < .8 ? t : e,
                    r = i.find(function(t) {
                        return t.minZoom <= n && t.maxZoom >= n
                    })) && r.style ? r.style : undefined
                }
                ,
                t.prototype.nX = function(t, e, r, n) {
                    return null
                }
                ,
                t.prototype.destroy = function() {
                    this.styles && (this.styles = {})
                }
                ,
                t.prototype.U9t = function(t) {
                    for (var e = {}, r = 0, n = t; r < n.length; r++) {
                        var i = n[r]
                          , a = getTypeByKey(i.mainKey);
                        a && (e[a] || (e[a] = {}),
                        e[a][i.mainKey] || (e[a][i.mainKey] = {}),
                        e[a][i.mainKey][i.subKey] || (e[a][i.mainKey][i.subKey] = []),
                        e[a][i.mainKey][i.subKey].push(i))
                    }
                    return e
                }
                ,
                t.prototype.D9t = function(t) {
                    for (var e = Infinity, r = -Infinity, n = 0; n < t.length; n++) {
                        var i = t[n];
                        i.minZoom < e && (e = i.minZoom),
                        r < i.maxZoom && (r = i.maxZoom)
                    }
                    return [e, r]
                }
                ,
                t.prototype.B9t = function(t, e) {
                    switch (e) {
                    case "poi":
                        return this.R9t(t);
                    case "road":
                        return this.G9t(t);
                    case "region":
                        return this.V9t(t);
                    case "building":
                        return this.z9t(t);
                    case "roadSigns":
                        return this.H9t(t);
                    default:
                        return {}
                    }
                }
                ,
                t.prototype.R9t = function(t) {
                    var e, r, n, i, a, o, s, u, f;
                    return t.poi ? (e = {
                        fontSize: t.poi.f7t,
                        showText: 1,
                        clickable: !0,
                        K8t: !0
                    },
                    t.poi.styleColor !== undefined && (n = t.poi.styleColor,
                    e.faceColor = {
                        rgba: null == (r = Color._8t(n)) ? void 0 : r.rgba,
                        U8t: null == (r = Color._8t(n)) ? void 0 : r.U8t,
                        type: "AMap.Color"
                    }),
                    t.poi.styleTextStrokeColor !== undefined && (n = t.poi.styleTextStrokeColor,
                    e.borderColor = {
                        rgba: null == (r = Color._8t(n)) ? void 0 : r.rgba,
                        U8t: null == (r = Color._8t(n)) ? void 0 : r.U8t,
                        type: "AMap.Color"
                    }),
                    t.poi.W9t !== undefined && (e.iconName = "icons_" + t.poi.W9t,
                    e.sn = "0",
                    e.iconID = t.poi.iconIndex,
                    e.columnNum = t.poi.v7t / t.poi.d7t || 8,
                    e.iconSize = [t.poi.d7t || 64, t.poi.g7t || 64],
                    e.iconImageSize = [t.poi.d7t || 64, t.poi.g7t || 64],
                    e.styleHeight = t.poi.styleHeight || 42,
                    e.styleWidth = t.poi.styleWidth || 42,
                    e.q8t = !1,
                    t.poi.flags) && t.poi.flags !== undefined && (n = this.K9t(t.poi.flags),
                    e.canCovered = n.canCovered || !1,
                    e.Y8t = n.Y8t || !1,
                    e.X8t = n.X8t || !1),
                    t.poi.q9t !== undefined && (r = "icons_" + t.poi.q9t,
                    n = t.poi.y7t,
                    i = t.poi.m7t,
                    a = t.poi.p7t,
                    o = t.poi.b7t,
                    s = t.poi.w7t,
                    u = t.poi.styleHeight || 42,
                    f = t.poi.styleWidth || 42,
                    f = s && 0 < s ? (u = Math.floor(a / s),
                    Math.floor(i / s)) : (u = a,
                    i),
                    r) && n && (e.iconID = n,
                    e.sn = "0",
                    e.iconName = r || t.poi.q9t,
                    e.columnNum = Math.floor(o / i),
                    e.iconSize = [i, a],
                    e.iconImageSize = [i, a],
                    e.styleHeight = u,
                    e.styleWidth = f,
                    e.q8t = !0),
                    e) : {}
                }
                ,
                t.prototype.K9t = function(t) {
                    return {
                        canCovered: 0 != (1 & t),
                        Y8t: 0 != (4 & t),
                        X8t: 0 != (8 & t)
                    }
                }
                ,
                t.prototype.G9t = function(t) {
                    var e = (t = t.road).P7t
                      , r = t.T7t
                      , n = t.fillColor
                      , i = t.strokeWidth
                      , a = t.strokeColor
                      , o = t.fontSize
                      , s = t.Y9t
                      , u = t.Z9t
                      , a = (0 === (n = t = {
                        roadWidth: t.lineWidth || 0,
                        roadColor: n && Color._8t(n),
                        hn: getLineType(r),
                        borderWidth: i || 0,
                        borderColor: a && Color._8t(a),
                        borderStyle: getLineType(e),
                        roadDash: [1, 0, 1, 0],
                        borderDash: [1, 0, 1, 0]
                    }).hn.indexOf("dash") && (n.roadDash = n.hn.substring(4).slice(1, -1).split(","),
                    n.roadDash = map(n.roadDash, function(t) {
                        return parseInt(t, 10)
                    }),
                    2 === n.roadDash.length) && (r = n.roadDash).push.apply(r, n.roadDash),
                    n.borderStyle && n.borderStyle.indexOf && 0 === n.borderStyle.indexOf("dash") && (n.borderDash = n.borderStyle.substring(4).slice(1, -1).split(","),
                    n.borderDash = map(n.borderDash, function(t) {
                        return parseInt(t, 10)
                    }),
                    2 === n.borderDash.length) && (i = n.borderDash).push.apply(i, n.borderDash),
                    {});
                    return [n, a = o ? {
                        fontSize: o,
                        faceColor: s && Color._8t(s),
                        borderColor: u && Color._8t(u)
                    } : a]
                }
                ,
                t.prototype.V9t = function(t) {
                    var e = t.region.fillColor
                      , e = {
                        borderColor: null,
                        borderWidth: 0,
                        faceColor: Color._8t(e)
                    };
                    return "" !== t.region.texture && (e.texture = AMap.getConfig().protocol + "://" + t.region.texture),
                    e
                }
                ,
                t.prototype.z9t = function(t) {
                    var r = (e = t.building).roofColor
                      , e = e.wallColor;
                    return r && e ? (r = {
                        faceColor: Color._8t(r),
                        borderColor: Color._8t(e)
                    },
                    "" !== t.building.texture && (r.texture = AMap.getConfig().protocol + "://" + t.building.texture,
                    r.i6t = t.building.f5t),
                    r) : undefined
                }
                ,
                t.prototype.H9t = function(t) {
                    var e, r, n, i, a, o, s, u, f, c;
                    return t.guide && t.guide.styleColor ? (e = (t = t.guide).styleColor,
                    r = t.f7t,
                    i = t.y7t,
                    a = t.m7t,
                    o = t.p7t,
                    s = (c = {}).iconID,
                    u = c.iconNames,
                    f = c.columnNum,
                    c = c.iconImageSize,
                    (n = t.q9t) && i && (s = i,
                    u = n,
                    f = Math.floor(t.b7t / a),
                    c = [a, o]),
                    {
                        fontSize: r,
                        faceColor: Color._8t(e),
                        iconID: s,
                        iconName: u,
                        columnNum: f,
                        iconImageSize: c
                    }) : undefined
                }
                ,
                t
            }()
              , NebulaSegements = function() {
                function t() {
                    this.jc = [],
                    this.GM = -1,
                    this.HM = -1,
                    this.VM = 0,
                    this.WM = new LineSegement(-1,-1,-1,-1,-1)
                }
                return t.prototype.add = function(t, e, r, n, i, a, o, s) {
                    this.WM.eT(t, e, i, n) && a === this.WM.bz && o + "" == this.WM.roofColor + "" && s + "" == this.WM.wallColor + "" || (this.GM = t,
                    this.HM = e,
                    this.VM += this.WM ? this.WM.length : 0,
                    this.WM = new LineSegement(t,e,this.VM,n,i,a,o,s),
                    this.jc.push(this.WM)),
                    this.WM.add(r)
                }
                ,
                t.prototype.reset = function() {
                    this.WM = new LineSegement(-1,-1,-1,-1,-1)
                }
                ,
                t
            }()
              , LineSegement = function() {
                function t(t, e, r, n, i, a, o, s) {
                    this.mainkey = t,
                    this.subkey = e,
                    this.offset = r,
                    this.minzoom = n,
                    this.maxzoom = i,
                    this.bz = a,
                    this.roofColor = o,
                    this.wallColor = s,
                    this.length = 0
                }
                return t.prototype.add = function(t) {
                    this.length += t
                }
                ,
                t.prototype.eT = function(t, e, r, n) {
                    return this.mainkey === t && this.subkey === e && this.maxzoom === r && this.minzoom === n
                }
                ,
                t
            }()
              , PolygonSegements = function() {
                function t() {
                    this.jc = [],
                    this.VM = 0
                }
                return t.prototype.add = function(t) {
                    this.jc.push({
                        length: t,
                        offset: this.VM
                    }),
                    this.VM += t
                }
                ,
                t.prototype.reset = function() {
                    this.jc = [],
                    this.VM = 0
                }
                ,
                t.prototype.destroy = function() {
                    this.jc && 0 < this.jc.length && (this.jc = [])
                }
                ,
                t
            }()
              , VectorTileFeature = function(t, e, r, n, i) {
                this.properties = {},
                this.extent = r,
                this.type = 0,
                this.fA = t,
                this.hA = -1,
                this.cA = n,
                this.vA = i,
                t.nw(readFeature, this, e)
            };
            function readFeature(t, e, r) {
                1 === t ? e.id = r.ow() : 2 === t ? readTag(r, e) : 3 === t ? e.type = r.ow() : 4 === t && (e.hA = r.pos)
            }
            function readTag(t, e) {
                for (var r = t.ow() + t.pos; t.pos < r; ) {
                    var n = e.cA[t.ow()]
                      , i = e.vA[t.ow()];
                    e.properties[n] = i
                }
            }
            function classifyRings(t) {
                var e = t.length;
                if (e <= 1)
                    return [t];
                for (var r, n = [], i = [], a = 0; a < e; a++) {
                    var o = signedArea$1(t[a]);
                    0 !== o && ((r = r === undefined ? o < 0 : r) === o < 0 ? (i && n.push(i),
                    i = [t[a]]) : i.push(t[a]))
                }
                return i && n.push(i),
                n
            }
            function signedArea$1(t) {
                for (var e, r, n = 0, i = 0, a = t.length, o = a - 1; i < a; o = i++)
                    e = t[i],
                    n += ((r = t[o]).x - e.x) * (e.y + r.y);
                return n
            }
            VectorTileFeature.types = ["Unknown", "Point", "LineString", "Polygon"],
            VectorTileFeature.prototype.Dw = function() {
                for (var t, e = this.fA, r = (e.pos = this.hA,
                e.ow() + e.pos), n = 1, i = 0, a = 0, o = 0, s = [], u = []; e.pos < r; )
                    if (i <= 0 && (n = 7 & (t = e.ow()),
                    i = t >> 3),
                    i--,
                    1 === n || 2 === n)
                        a += e.lA(),
                        o += e.lA(),
                        1 === n && (u && 0 < u.length && s.push(u),
                        u = []),
                        u.push([a, o]);
                    else {
                        if (7 !== n)
                            throw new Error("unknown command " + n);
                        u && u.push([u[0][0], u[0][1]])
                    }
                return u && 0 < u.length && s.push(u),
                this.lines = s
            }
            ,
            VectorTileFeature.prototype.Ro = function() {
                for (var t, e = this.fA, r = (e.pos = this.hA,
                e.ow() + e.pos), n = 1, i = 0, a = 0, o = 0, s = Infinity, u = -Infinity, f = Infinity, c = -Infinity; e.pos < r; )
                    if (i <= 0 && (n = 7 & (t = e.ow()),
                    i = t >> 3),
                    i--,
                    1 === n || 2 === n)
                        (a += e.lA()) < s && (s = a),
                        u < a && (u = a),
                        (o += e.lA()) < f && (f = o),
                        c < o && (c = o);
                    else if (7 !== n)
                        throw new Error("unknown command " + n);
                return [s, f, u, c]
            }
            ,
            VectorTileFeature.prototype.dA = function(t, e, r) {
                var n, i = this.extent * Math.pow(2, r), a = this.extent * t, o = this.extent * e, s = this.Dw(), r = VectorTileFeature.types[this.type];
                function u(t) {
                    for (var e = 0; e < t.length; e++) {
                        var r = t[e]
                          , n = 180 - 360 * (r.y + o) / i;
                        t[e] = [360 * (r.x + a) / i - 180, 360 / Math.PI * Math.atan(Math.exp(n * Math.PI / 180)) - 90]
                    }
                }
                switch (this.type) {
                case 1:
                    for (var f = [], c = 0; c < s.length; c++)
                        f[c] = s[c][0];
                    u(s = f);
                    break;
                case 2:
                    for (c = 0; c < s.length; c++)
                        u(s[c]);
                    break;
                case 3:
                    for (s = classifyRings(s),
                    c = 0; c < s.length; c++)
                        for (n = 0; n < s[c].length; n++)
                            u(s[c][n])
                }
                return 1 === s.length ? s = s[0] : r = "Multi" + r,
                t = {
                    type: "Feature",
                    geometry: {
                        type: r,
                        coordinates: s
                    },
                    properties: this.properties
                },
                "id"in this && (t.id = this.id),
                t
            }
            ;
            var VectorTileLayer = function(t, e) {
                this.version = 1,
                this.name = null,
                this.extent = 4096,
                this.length = 0,
                this.fA = t,
                this.cA = [],
                this.vA = [],
                this.Cw = [],
                t.nw(readLayer, this, e),
                this.length = this.Cw.length
            };
            function readLayer(t, e, r) {
                15 === t ? e.version = r.ow() : 1 === t ? e.name = r.aw() : 5 === t ? e.extent = r.ow() : 2 === t ? e.Cw.push(r.pos) : 3 === t ? e.cA.push(r.aw()) : 4 === t && e.vA.push(readValueMessage(r))
            }
            function readValueMessage(t) {
                for (var e = null, r = t.ow() + t.pos; t.pos < r; )
                    var n = t.ow() >> 3
                      , e = 1 == n ? t.aw() : 2 == n ? t.pA() : 3 == n ? t.yA() : 4 == n ? t.mA() : 5 == n ? t.ow() : 6 == n ? t.lA() : 7 == n ? t.vw() : null;
                return e
            }
            VectorTileLayer.prototype.Gw = function(t) {
                if (t < 0 || t >= this.Cw.length)
                    throw new Error("feature index out of bounds");
                return this.fA.pos = this.Cw[t],
                t = this.fA.ow() + this.fA.pos,
                new VectorTileFeature(this.fA,t,this.extent,this.cA,this.vA)
            }
            ;
            var VectorTile$1 = function(t, e) {
                this.type = "vector",
                this.layers = t.nw(readTile, {}, e)
            };
            function readTile(t, e, r) {
                3 === t && (t = new VectorTileLayer(r,r.ow() + r.pos)).length && (e[t.name] = t)
            }
            VectorTile$1.Wb = function(t) {
                return t
            }
            ,
            VectorTile$1.Gb = function(t) {
                return t
            }
            ,
            VectorTile$1.prototype.nG = function(t) {
                this.type = t
            }
            ;
            var SHIFT_LEFT_32 = 4294967296
              , SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32
              , Pbf = function() {
                function n(t) {
                    this.gA = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0),
                    this.pos = 0,
                    this.type = 0,
                    this.length = this.gA.length
                }
                return n.prototype.destroy = function() {
                    this.gA = new Uint8Array(0)
                }
                ,
                n.prototype.nw = function(t, e, r) {
                    for (r = r || this.length; this.pos < r; ) {
                        var n = this.ow()
                          , i = n >> 3
                          , a = this.pos;
                        this.type = 7 & n,
                        t(i, e, this),
                        this.pos === a && this.wA(n)
                    }
                    return e
                }
                ,
                n.prototype.MA = function(t, e) {
                    return this.nw(t, e, this.ow() + this.pos)
                }
                ,
                n.prototype.jA = function() {
                    var t = readUInt32(this.gA, this.pos);
                    return this.pos += 4,
                    t
                }
                ,
                n.prototype.AA = function() {
                    var t = readInt32(this.gA, this.pos);
                    return this.pos += 4,
                    t
                }
                ,
                n.prototype.kA = function() {
                    var t = readUInt32(this.gA, this.pos) + readUInt32(this.gA, this.pos + 4) * SHIFT_LEFT_32;
                    return this.pos += 8,
                    t
                }
                ,
                n.prototype.OA = function() {
                    var t = readUInt32(this.gA, this.pos) + readInt32(this.gA, this.pos + 4) * SHIFT_LEFT_32;
                    return this.pos += 8,
                    t
                }
                ,
                n.prototype.pA = function() {
                    var t = this.xA(this.gA, this.pos, !0, 23, 4);
                    return this.pos += 4,
                    t
                }
                ,
                n.prototype.yA = function() {
                    var t = this.xA(this.gA, this.pos, !0, 52, 8);
                    return this.pos += 8,
                    t
                }
                ,
                n.prototype.ow = function(t) {
                    var e = this.gA
                      , r = e[this.pos++]
                      , n = 127 & r;
                    return r < 128 || (n |= (127 & (r = e[this.pos++])) << 7,
                    r < 128) || (n |= (127 & (r = e[this.pos++])) << 14,
                    r < 128) || (n |= (127 & (r = e[this.pos++])) << 21,
                    r < 128) ? n : readVarintRemainder(n |= (15 & e[this.pos]) << 28, t, this)
                }
                ,
                n.prototype.mA = function() {
                    return this.ow(!0)
                }
                ,
                n.prototype.lA = function() {
                    var t = this.ow();
                    return t % 2 == 1 ? (t + 1) / -2 : t / 2
                }
                ,
                n.prototype.vw = function() {
                    return Boolean(this.ow())
                }
                ,
                n.prototype.aw = function() {
                    var t = this.ow() + this.pos
                      , e = readUtf8(this.gA, this.pos, t);
                    return this.pos = t,
                    e
                }
                ,
                n.prototype.mw = function() {
                    var t = this.ow() + this.pos
                      , e = this.gA.subarray(this.pos, t);
                    return this.pos = t,
                    e
                }
                ,
                n.prototype.tw = function(t, e) {
                    var r = readPackedEnd(this);
                    for (t = t || []; this.pos < r; )
                        t.push(this.ow(e));
                    return t
                }
                ,
                n.prototype.IA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.lA());
                    return t
                }
                ,
                n.prototype.TA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.vw());
                    return t
                }
                ,
                n.prototype.FA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.pA());
                    return t
                }
                ,
                n.prototype._A = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.yA());
                    return t
                }
                ,
                n.prototype.SA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.jA());
                    return t
                }
                ,
                n.prototype.CA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.AA());
                    return t
                }
                ,
                n.prototype.EA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.kA());
                    return t
                }
                ,
                n.prototype.NA = function(t) {
                    var e = readPackedEnd(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.OA());
                    return t
                }
                ,
                n.prototype.wA = function(t) {
                    (t &= 7) !== n.LA && (t === n.DA ? this.pos = this.ow() + this.pos : t === n.RA ? this.pos += 4 : t === n.PA ? this.pos += 8 : console.log("Unimplemented type: " + t))
                }
                ,
                n.prototype.UA = function(t, e) {
                    this.BA(t << 3 | e)
                }
                ,
                n.prototype.zA = function(t) {
                    for (var e, r = this.length || 16; r < this.pos + t; )
                        r *= 2;
                    r !== this.length && ((e = new Uint8Array(r)).set(this.gA),
                    this.gA = e,
                    this.length = r)
                }
                ,
                n.prototype.finish = function() {
                    return this.length = this.pos,
                    this.pos = 0,
                    this.gA.subarray(0, this.length)
                }
                ,
                n.prototype.qA = function(t) {
                    this.zA(4),
                    writeInt32(this.gA, t, this.pos),
                    this.pos += 4
                }
                ,
                n.prototype.WA = function(t) {
                    this.zA(4),
                    writeInt32(this.gA, t, this.pos),
                    this.pos += 4
                }
                ,
                n.prototype.GA = function(t) {
                    this.zA(8),
                    writeInt32(this.gA, -1 & t, this.pos),
                    writeInt32(this.gA, Math.floor(t * SHIFT_RIGHT_32), this.pos + 4),
                    this.pos += 8
                }
                ,
                n.prototype.HA = function(t) {
                    this.zA(8),
                    writeInt32(this.gA, -1 & t, this.pos),
                    writeInt32(this.gA, Math.floor(t * SHIFT_RIGHT_32), this.pos + 4),
                    this.pos += 8
                }
                ,
                n.prototype.BA = function(t) {
                    268435455 < (t = +t || 0) || t < 0 ? writeBigVarint(t, this) : (this.zA(4),
                    this.gA[this.pos++] = 127 & t | (127 < t ? 128 : 0),
                    t <= 127 || (this.gA[this.pos++] = 127 & (t >>>= 7) | (127 < t ? 128 : 0),
                    t <= 127) || (this.gA[this.pos++] = 127 & (t >>>= 7) | (127 < t ? 128 : 0),
                    t <= 127) || (this.gA[this.pos++] = t >>> 7 & 127))
                }
                ,
                n.prototype.VA = function(t) {
                    this.BA(t < 0 ? 2 * -t - 1 : 2 * t)
                }
                ,
                n.prototype.$A = function(t) {
                    this.BA(Boolean(t))
                }
                ,
                n.prototype.YA = function(t) {
                    t = String(t),
                    this.zA(4 * t.length),
                    this.pos++;
                    var e = this.pos;
                    this.pos = writeUtf8(this.gA, t, this.pos),
                    128 <= (t = this.pos - e) && makeRoomForExtraLength(e, t, this),
                    this.pos = e - 1,
                    this.BA(t),
                    this.pos += t
                }
                ,
                n.prototype.KA = function(t) {
                    this.zA(4),
                    this.XA(this.gA, t, this.pos, !0, 23, 4),
                    this.pos += 4
                }
                ,
                n.prototype.JA = function(t) {
                    this.zA(8),
                    this.XA(this.gA, t, this.pos, !0, 52, 8),
                    this.pos += 8
                }
                ,
                n.prototype.ZA = function(t) {
                    var e = t.length;
                    this.BA(e),
                    this.zA(e);
                    for (var r = 0; r < e; r++)
                        this.gA[this.pos++] = t[r]
                }
                ,
                n.prototype.QA = function(t, e) {
                    this.pos++;
                    var r = this.pos;
                    t(e, this),
                    128 <= (e = this.pos - r) && makeRoomForExtraLength(r, e, this),
                    this.pos = r - 1,
                    this.BA(e),
                    this.pos += e
                }
                ,
                n.prototype.fw = function(t, e, r) {
                    this.UA(t, n.DA),
                    this.QA(e, r)
                }
                ,
                n.prototype.tk = function(t, e) {
                    this.fw(t, writePackedVarint, e)
                }
                ,
                n.prototype.rk = function(t, e) {
                    this.fw(t, writePackedSVarint, e)
                }
                ,
                n.prototype.nk = function(t, e) {
                    this.fw(t, writePackedBoolean, e)
                }
                ,
                n.prototype.ik = function(t, e) {
                    this.fw(t, writePackedFloat, e)
                }
                ,
                n.prototype.ek = function(t, e) {
                    this.fw(t, writePackedDouble, e)
                }
                ,
                n.prototype.ak = function(t, e) {
                    this.fw(t, writePackedFixed32, e)
                }
                ,
                n.prototype.uk = function(t, e) {
                    this.fw(t, writePackedSFixed32, e)
                }
                ,
                n.prototype.sk = function(t, e) {
                    this.fw(t, writePackedFixed64, e)
                }
                ,
                n.prototype.fk = function(t, e) {
                    this.fw(t, writePackedSFixed64, e)
                }
                ,
                n.prototype.ww = function(t, e) {
                    this.UA(t, n.DA),
                    this.ZA(e)
                }
                ,
                n.prototype.hk = function(t, e) {
                    this.UA(t, n.RA),
                    this.qA(e)
                }
                ,
                n.prototype.ck = function(t, e) {
                    this.UA(t, n.RA),
                    this.WA(e)
                }
                ,
                n.prototype.vk = function(t, e) {
                    this.UA(t, n.PA),
                    this.GA(e)
                }
                ,
                n.prototype.lk = function(t, e) {
                    this.UA(t, n.PA),
                    this.HA(e)
                }
                ,
                n.prototype.rw = function(t, e) {
                    this.UA(t, n.LA),
                    this.BA(e)
                }
                ,
                n.prototype.dk = function(t, e) {
                    this.UA(t, n.LA),
                    this.VA(e)
                }
                ,
                n.prototype.uw = function(t, e) {
                    this.UA(t, n.DA),
                    this.YA(e)
                }
                ,
                n.prototype.bk = function(t, e) {
                    this.UA(t, n.RA),
                    this.KA(e)
                }
                ,
                n.prototype.pk = function(t, e) {
                    this.UA(t, n.PA),
                    this.JA(e)
                }
                ,
                n.prototype.hw = function(t, e) {
                    this.rw(t, Boolean(e))
                }
                ,
                n.prototype.xA = function(t, e, r, n, i) {
                    var a, o, s = 8 * i - n - 1, u = (1 << s) - 1, f = u >> 1, c = -7, h = r ? i - 1 : 0, l = r ? -1 : 1, i = t[e + h];
                    for (h += l,
                    a = i & (1 << -c) - 1,
                    i >>= -c,
                    c += s; 0 < c; a = 256 * a + t[e + h],
                    h += l,
                    c -= 8)
                        ;
                    for (o = a & (1 << -c) - 1,
                    a >>= -c,
                    c += n; 0 < c; o = 256 * o + t[e + h],
                    h += l,
                    c -= 8)
                        ;
                    if (0 === a)
                        a = 1 - f;
                    else {
                        if (a === u)
                            return o ? NaN : (i ? -1 : 1) * Infinity;
                        o += Math.pow(2, n),
                        a -= f
                    }
                    return (i ? -1 : 1) * o * Math.pow(2, a - n)
                }
                ,
                n.prototype.XA = function(t, e, r, n, i, a) {
                    var o, s, u = 8 * a - i - 1, f = (1 << u) - 1, c = f >> 1, h = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0, l = n ? 0 : a - 1, d = n ? 1 : -1, a = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
                    for (e = Math.abs(e),
                    isNaN(e) || e === Infinity ? (s = isNaN(e) ? 1 : 0,
                    o = f) : (o = Math.floor(Math.log(e) / Math.LN2),
                    e * (n = Math.pow(2, -o)) < 1 && (o--,
                    n *= 2),
                    2 <= (e += 1 <= o + c ? h / n : h * Math.pow(2, 1 - c)) * n && (o++,
                    n /= 2),
                    f <= o + c ? (s = 0,
                    o = f) : 1 <= o + c ? (s = (e * n - 1) * Math.pow(2, i),
                    o += c) : (s = e * Math.pow(2, c - 1) * Math.pow(2, i),
                    o = 0)); 8 <= i; t[r + l] = 255 & s,
                    l += d,
                    s /= 256,
                    i -= 8)
                        ;
                    for (o = o << i | s,
                    u += i; 0 < u; t[r + l] = 255 & o,
                    l += d,
                    o /= 256,
                    u -= 8)
                        ;
                    t[r + l - d] |= 128 * a
                }
                ,
                n.LA = 0,
                n.PA = 1,
                n.DA = 2,
                n.RA = 5,
                n
            }();
            function readVarintRemainder(t, e, r) {
                var n = r.gA
                  , i = n[r.pos++]
                  , a = (112 & i) >> 4;
                if (i < 128)
                    return toNum(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 3,
                i < 128)
                    return toNum(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 10,
                i < 128)
                    return toNum(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 17,
                i < 128)
                    return toNum(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 24,
                i < 128)
                    return toNum(t, a, e);
                if (a |= (1 & (i = n[r.pos++])) << 31,
                i < 128)
                    return toNum(t, a, e);
                throw new Error("Expected varint not more than 10 bytes")
            }
            function readPackedEnd(t) {
                return t.type === Pbf.DA ? t.ow() + t.pos : t.pos + 1
            }
            function toNum(t, e, r) {
                return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0)
            }
            function writeBigVarint(t, e) {
                var r, n;
                if (0 <= t ? (r = t % 4294967296 | 0,
                n = t / 4294967296 | 0) : (n = ~(-t / 4294967296),
                4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : n = n + 1 | (r = 0)),
                0x10000000000000000 <= t || t < -0x10000000000000000)
                    throw new Error("Given varint doesn't fit into 10 bytes");
                e.zA(10),
                writeBigVarintLow(r, n, e),
                writeBigVarintHigh(n, e)
            }
            function writeBigVarintLow(t, e, r) {
                r.gA[r.pos++] = 127 & t | 128,
                t >>>= 7,
                r.gA[r.pos++] = 127 & t | 128,
                t >>>= 7,
                r.gA[r.pos++] = 127 & t | 128,
                t >>>= 7,
                r.gA[r.pos++] = 127 & t | 128,
                r.gA[r.pos] = 127 & (t >>>= 7)
            }
            function writeBigVarintHigh(t, e) {
                var r = (7 & t) << 4;
                e.gA[e.pos++] |= r | ((t >>>= 3) ? 128 : 0),
                t && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t)
            }
            function makeRoomForExtraLength(t, e, r) {
                var n = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.ceil(Math.log(e) / (7 * Math.LN2));
                r.zA(n);
                for (var i = r.pos - 1; t <= i; i--)
                    r.gA[i + n] = r.gA[i]
            }
            function writePackedVarint(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.BA(t[r])
            }
            function writePackedSVarint(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.VA(t[r])
            }
            function writePackedFloat(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.KA(t[r])
            }
            function writePackedDouble(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.JA(t[r])
            }
            function writePackedBoolean(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.$A(t[r])
            }
            function writePackedFixed32(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.qA(t[r])
            }
            function writePackedSFixed32(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.WA(t[r])
            }
            function writePackedFixed64(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.GA(t[r])
            }
            function writePackedSFixed64(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.HA(t[r])
            }
            function readUInt32(t, e) {
                return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3]
            }
            function writeInt32(t, e, r) {
                t[r] = e,
                t[r + 1] = e >>> 8,
                t[r + 2] = e >>> 16,
                t[r + 3] = e >>> 24
            }
            function readInt32(t, e) {
                return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24)
            }
            function readUtf8(t, e, r) {
                for (var n = "", i = e; i < r; ) {
                    var a = t[i]
                      , o = null
                      , s = 239 < a ? 4 : 223 < a ? 3 : 191 < a ? 2 : 1;
                    if (r < i + s)
                        break;
                    var u, f = void 0, c = void 0;
                    1 === s ? a < 128 && (o = a) : 2 === s ? 128 == (192 & (f = t[i + 1])) && (o = (31 & a) << 6 | 63 & f) <= 127 && (o = null) : 3 === s ? (f = t[i + 1],
                    c = t[i + 2],
                    128 == (192 & f) && 128 == (192 & c) && ((o = (15 & a) << 12 | (63 & f) << 6 | 63 & c) <= 2047 || 55296 <= o && o <= 57343) && (o = null)) : 4 === s && (f = t[i + 1],
                    c = t[i + 2],
                    u = t[i + 3],
                    128 == (192 & f)) && 128 == (192 & c) && 128 == (192 & u) && ((o = (15 & a) << 18 | (63 & f) << 12 | (63 & c) << 6 | 63 & u) <= 65535 || 1114112 <= o) && (o = null),
                    null === o ? (o = 65533,
                    s = 1) : 65535 < o && (o -= 65536,
                    n += String.fromCharCode(o >>> 10 & 1023 | 55296),
                    o = 56320 | 1023 & o),
                    n += String.fromCharCode(o),
                    i += s
                }
                return n
            }
            function writeUtf8(t, e, r) {
                for (var n = 0, i = void 0, a = void 0; n < e.length; n++) {
                    if (55295 < (i = e.charCodeAt(n)) && i < 57344) {
                        if (!a) {
                            56319 < i || n + 1 === e.length ? (t[r++] = 239,
                            t[r++] = 191,
                            t[r++] = 189) : a = i;
                            continue
                        }
                        if (i < 56320) {
                            t[r++] = 239,
                            t[r++] = 191,
                            t[r++] = 189,
                            a = i;
                            continue
                        }
                        i = a - 55296 << 10 | i - 56320 | 65536,
                        a = null
                    } else
                        a && (t[r++] = 239,
                        t[r++] = 191,
                        t[r++] = 189,
                        a = null);
                    i < 128 ? t[r++] = i : (i < 2048 ? t[r++] = i >> 6 | 192 : (i < 65536 ? t[r++] = i >> 12 | 224 : (t[r++] = i >> 18 | 240,
                    t[r++] = i >> 12 & 63 | 128),
                    t[r++] = i >> 6 & 63 | 128),
                    t[r++] = 63 & i | 128)
                }
                return r
            }
            var StyleOptionsBuilding = function() {
                this.hideWithoutStyle = !1,
                this.areas = []
            }, VectorTileSegements = function() {
                function t() {
                    this.jc = [],
                    this.VM = 0
                }
                return t.prototype.add = function(t, e, r, n, i) {
                    VTLineSegement.getKey(t, e, i, n) !== (this.WM ? this.WM.getKey() : "-1") && (this.VM += this.WM ? this.WM.length : 0,
                    this.WM = new VTLineSegement(t,e,this.VM,n,i),
                    this.jc.push(this.WM)),
                    this.WM.add(r)
                }
                ,
                t
            }(), VTLineSegement = function() {
                function t(t, e, r, n, i) {
                    this.mainkey = t,
                    this.subkey = e,
                    this.offset = r,
                    this.minzoom = n,
                    this.maxzoom = i,
                    this.length = 0
                }
                return t.getKey = function(t, e, r, n) {
                    return t + ":" + e + ":" + r + ":" + n
                }
                ,
                t.prototype.add = function(t) {
                    this.length += t
                }
                ,
                t.prototype.getKey = function() {
                    return this.mainkey + ":" + this.subkey + ":" + this.maxzoom + ":" + this.minzoom
                }
                ,
                t
            }(), MapboxSegements = function() {
                function t() {
                    this.jc = [],
                    this.GM = -1,
                    this.HM = -1,
                    this.VM = 0
                }
                return t.prototype.add = function(t, e) {
                    MBLineSegement.getKey(t),
                    this.WM && this.WM.getKey(),
                    this.GM = t,
                    this.VM += this.WM ? this.WM.length : 0,
                    this.WM = new MBLineSegement(t,this.VM),
                    this.jc.push(this.WM),
                    this.WM.add(e)
                }
                ,
                t
            }(), MBLineSegement = function() {
                function t(t, e) {
                    this.style = t,
                    this.offset = e,
                    this.length = 0
                }
                return t.getKey = function(t) {
                    return "" + t
                }
                ,
                t.prototype.add = function(t) {
                    this.length += t
                }
                ,
                t.prototype.getKey = function() {
                    return "" + this.style
                }
                ,
                t
            }(), ImageDataWraperType, ImageDataWraper = (function(t) {
                t.base64 = "base64",
                t.arraybuffer = "arraybuffer",
                t.bitmap = "bitmap",
                t.empty = "empty"
            }(ImageDataWraperType = ImageDataWraperType || {}),
            function() {
                function t(t, e, r) {
                    this.hash = t,
                    this.IV = !1,
                    "string" != typeof e ? r && r.imageBitmap && typeof createImageBitmap !== undefined ? (this.type = ImageDataWraperType.bitmap,
                    this.status = "success",
                    this.data = e) : (t = new Blob([e],{
                        type: "image/png"
                    }),
                    (r = URLObject.createObjectURL(t)) ? (this.data = r,
                    this.type = ImageDataWraperType.arraybuffer,
                    this.status = "success") : (this.data = "",
                    this.type = ImageDataWraperType.arraybuffer,
                    this.status = "error")) : (this.data = e,
                    this.type = ImageDataWraperType.base64,
                    this.status = "success")
                }
                return t.AV = function(t) {
                    return createImageBitmap(new Blob([new Uint8Array(t)]))
                }
                ,
                t.Wb = function(t) {
                    var e = {
                        data: t.data,
                        type: t.type,
                        status: t.status,
                        IV: t.IV,
                        hash: t.hash
                    };
                    return t.transform(),
                    e
                }
                ,
                t.prototype.transform = function() {
                    this.IV = !0,
                    this.type === ImageDataWraperType.bitmap && (this.data = "")
                }
                ,
                t.prototype.destroy = function() {
                    "destroyed" !== this.status && (this.type === ImageDataWraperType.arraybuffer && URLObject.revokeObjectURL(this.data),
                    this.data = "",
                    this.status = "destroyed")
                }
                ,
                t.prototype.IZ = function(t) {
                    var e;
                    this.type === ImageDataWraperType.bitmap ? t(this.data) : ((e = new Image).crossOrigin = "",
                    e.onload = function() {
                        t(e)
                    }
                    ,
                    e.src = this.data)
                }
                ,
                t
            }()), EmptyImageDataWraper = new ImageDataWraper("",""), CircleBucket = (EmptyImageDataWraper.type = ImageDataWraperType.empty,
            function() {
                function t() {
                    this._b = new SymbolArray,
                    this.uploaded = !1
                }
                return t.prototype.wb = function(t, e) {
                    var r = this._b.length;
                    return this._b.kb(t[0], t[1], e),
                    this._b.length - r
                }
                ,
                t.prototype.upload = function(t) {
                    this.uploaded || (this.destroy(),
                    this.uploaded = !0,
                    this.zs = t.fe(this._b.Mb, SymbolArray.Rb))
                }
                ,
                t.prototype.destroy = function() {
                    this.uploaded = !1,
                    this.zs && this.zs.context && (this.zs.context.deleteBuffer(this.zs),
                    delete this.zs)
                }
                ,
                t.prototype.reset = function() {
                    this._b = new SymbolArray,
                    this.uploaded = !1
                }
                ,
                t
            }()), SimpleCircleBucket = function() {
                function t() {
                    this._b = new SimpleSymbolArray,
                    this.uploaded = !1
                }
                return t.prototype.wb = function(t) {
                    var e = this._b.length;
                    return this._b.kb(t[0], t[1]),
                    this._b.length - e
                }
                ,
                t.prototype.upload = function(t) {
                    this.uploaded || (this.destroy(),
                    this.uploaded = !0,
                    this.zs = t.fe(this._b.Mb, SimpleSymbolArray.Rb))
                }
                ,
                t.prototype.destroy = function() {
                    this.uploaded = !1,
                    this.zs && this.zs.context && (this.zs.context.deleteBuffer(this.zs),
                    delete this.zs)
                }
                ,
                t.prototype.reset = function() {
                    this._b = new SimpleSymbolArray,
                    this.uploaded = !1
                }
                ,
                t
            }(), DistrictLayerStyle = function() {
                this["stroke-width"] = "",
                this["coastline-stroke"] = "",
                this["nation-stroke"] = "",
                this["province-stroke"] = "",
                this["city-stroke"] = "",
                this["county-stroke"] = "",
                this.fill = ""
            }, registry = {};
            function register(t, e, r) {
                void 0 === r && (r = {}),
                Object.defineProperty(e, "yk", {
                    value: t,
                    writable: !1
                }),
                registry[t] = {
                    mk: e,
                    gk: r.gk || [],
                    wk: r.wk || []
                }
            }
            function serialize(t, e) {
                if (null === t || t === undefined || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp)
                    return t;
                if (t instanceof ArrayBuffer)
                    return e && e.push(t),
                    t;
                if (Browser.imageBitmap && t instanceof ImageBitmap)
                    return e && e.indexOf(t) < 0 && e.push(t),
                    t;
                if (ArrayBuffer.isView(t))
                    return o = t,
                    e && e.push(o.buffer),
                    o;
                if (t instanceof ImageData)
                    return e && e.push(t.data.buffer),
                    t;
                if (Array.isArray(t)) {
                    for (var r = [], n = 0, i = t; n < i.length; n++) {
                        var a = i[n];
                        r.push(serialize(a, e))
                    }
                    return r
                }
                if ("object" != typeof t)
                    throw new Error("can't serialize object of type " + typeof t);
                var o = t.constructor
                  , s = o.yk;
                if (!s)
                    throw new Error("can't serialize object of unregistered class");
                var u, f = void 0;
                if (o.Wb)
                    f = o.Wb(t, e);
                else {
                    for (var c in f = {},
                    t)
                        !t.hasOwnProperty(c) || 0 <= registry[s].gk.indexOf(c) || (u = t[c],
                        f[c] = 0 <= registry[s].wk.indexOf(c) ? u : serialize(u, e));
                    t instanceof Error && (f.message = t.message)
                }
                if (f.$name)
                    throw new Error("$name property is reserved for worker serialization logic.");
                return "Object" !== s && (f.$name = s),
                f
            }
            function deserialize(t) {
                if (null === t || t === undefined || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof ArrayBuffer || ArrayBuffer.isView(t) || t instanceof ImageData || Browser.imageBitmap && t instanceof ImageBitmap)
                    return t;
                if (Array.isArray(t))
                    return map(t, deserialize);
                if ("object" != typeof t)
                    throw new Error("can't deserialize object of type " + typeof t);
                var e = t.$name || "Object"
                  , r = registry[e].mk;
                if (!r)
                    throw new Error("can't deserialize unregistered class " + e);
                if (r.Gb)
                    return r.Gb(t);
                for (var n = Object.create(r.prototype), i = 0, a = Object.keys(t); i < a.length; i++) {
                    var o, s = a[i];
                    "$name" !== s && (o = t[s],
                    n[s] = 0 <= registry[e].wk.indexOf(s) ? o : deserialize(o))
                }
                return n
            }
            register("Object", Object),
            register("LineArrayBuffer", LineArrayBuffer),
            register("TriangleIndexArray", TriangleIndexArray),
            register("TriangleIndexArrayUint", TriangleIndexArrayUint),
            register("PolylineBucket", PolylineBucket),
            register("LinesIndexArray", LinesIndexArray),
            register("LinesIndexArrayUint", LinesIndexArrayUint),
            register("FillArray", FillArray),
            register("PolygonBucket", PolygonBucket),
            register("CircleBucket", CircleBucket),
            register("SymbolArray", SymbolArray),
            register("FillExtrusionBucket", FillExtrusionBucket),
            register("FillExtrusionArray", FillExtrusionArray),
            register("SmartArrayBuffer", SmartArrayBuffer),
            register("Color", Color),
            register("Segements", NebulaSegements),
            register("VectorTileSegements", VectorTileSegements),
            register("VTLineSegement", VTLineSegement),
            register("LineSegement", LineSegement),
            register("PolygonSegements", PolygonSegements),
            register("VectorTile", VectorTile$1),
            register("VectorTileLayer", VectorTileLayer),
            register("VectorTileFeature", VectorTileFeature),
            register("Pbf", Pbf),
            register("StyleOptionsBuilding", StyleOptionsBuilding),
            register("DistrictStyleOptions", DistrictLayerStyle),
            register("MapboxSegements", MapboxSegements),
            register("MBLineSegement", MBLineSegement),
            register("ImageDataWraper", ImageDataWraper),
            register("TileCoord", TileCoord),
            register("Tile", Tile),
            register("StyleParser", StyleParser);
            var LabelTextStyle = function() {
                function t(t) {
                    this.origin = t
                }
                return t.BV = function(t, e) {
                    var r = DangerousFontSize
                      , n = void 0 === (n = t.fontSize) ? 12 : n
                      , i = t.fillColor
                      , a = t.strokeColor
                      , o = void 0 === (o = t.strokeWidth) ? 0 : o
                      , s = void 0 === (s = t.backgroundColor) ? 0 : s
                      , t = t.borderColor
                      , i = labelsUtil.Yj(Util.color2RgbaArray(void 0 === i ? [0, 0, 0, 1] : i))
                      , s = s ? labelsUtil.Yj(Util.color2RgbaArray(s)) : [0, 0, 0, 0]
                      , a = labelsUtil.Yj(Util.color2RgbaArray(a), [.988, .988, .988, 1])
                      , t = labelsUtil.Yj(Util.color2RgbaArray(t), [.988, .988, .988, 1])
                      , u = (n = n || 12) < 10 ? .78125 : 205 / 256
                      , f = 0
                      , r = (o && (f = u * (1 - (10 < o * e ? 10 : o) / 10.1)),
                    o = 1.4142 * (r < n || 1 < e ? 1.7 : 1.5) / n,
                    u + 1.5 / 256 * (e - 1));
                    return (n = new Float32Array(28)).set(i, 0),
                    n.set(a, 4),
                    n[8] = o,
                    n[9] = f,
                    n[10] = r,
                    n.set(s, 11),
                    n.set(t, 15),
                    n[19] = 1,
                    n.set(i, 20),
                    n.set(a, 24),
                    n
                }
                ,
                t.prototype.GV = function(t) {
                    switch (t) {
                    case "fillColor":
                        return this.origin.slice(0, 4);
                    case "strokeColor":
                        return this.origin.slice(4, 8);
                    case "backgroundColor":
                        return this.origin.slice(11, 15);
                    case "borderColor":
                        return this.origin.slice(15, 19);
                    case "u_gamma":
                        return this.origin[8];
                    case "u_borderBuffer":
                        return this.origin[9];
                    case "u_buffer":
                        return this.origin[10];
                    case "u_fontSizeFactor":
                        return this.origin[19];
                    case "u_highlightFillColor":
                        return this.origin.slice(20, 24);
                    case "u_highlightStrokeColor":
                        return this.origin.slice(24, 28);
                    default:
                        return undefined
                    }
                }
                ,
                t.prototype.VV = function(t, e) {
                    switch (t) {
                    case "u_fontSizeFactor":
                        this.origin[19] = e;
                        break;
                    case "fillColor":
                        this.origin.set(e, 0);
                        break;
                    case "strokeColor":
                        this.origin.set(e, 4);
                        break;
                    case "backgroundColor":
                        this.origin.set(e, 11);
                        break;
                    case "borderColor":
                        this.origin.set(e, 8);
                        break;
                    case "u_highlightFillColor":
                        this.origin.set(e, 20);
                        break;
                    case "u_highlightStrokeColor":
                        this.origin.set(e, 24)
                    }
                }
                ,
                t
            }()
              , LabelBucket = (register("LabelTextStyle", LabelTextStyle),
            function() {
                function t(t) {
                    this.DO = {
                        rp: [],
                        pp: [],
                        bd: [],
                        up: 0
                    },
                    this.ZO = [],
                    this.options = {},
                    this.Gj = {},
                    this.Hj = {},
                    this.Vj = {},
                    this.QO = {},
                    this.tI = {},
                    this.Fs = {},
                    this.$j = 0,
                    this.qO = {},
                    this.$O = 0,
                    this.rI = {},
                    this.iO = "inner",
                    this._id = Util.stamp(this),
                    this.Mf = t.R_,
                    this.ac = t.z_,
                    this.io = t.canvas,
                    this.NT = t.Nz
                }
                return t.prototype.rQ = function(t, e) {
                    var r = void 0 === (r = e.from) ? "inner" : r
                      , n = CONSTS.ud
                      , t = (labelsUtil.zj(this, t),
                    this.iO = r,
                    this.Mf && "SDFManagerBase" !== this.Mf.CLASS_NAME)
                      , i = this.DO
                      , a = (t && (i.rp = new Float32Array(this.$j * n * 6)),
                    this.Gj)
                      , o = this.Hj
                      , s = this.Vj;
                    if (!o || !s)
                        return null;
                    var r = assign(this.options, e)
                      , u = this.RO(a)
                      , f = isUndefined(r.opacity) ? 1 : r.opacity;
                    if (t) {
                        for (var c = 0, h = 0, l = 0; l < u.length; l++) {
                            for (var d = u[l], v = void 0, g = 0, y = d; g < y.length && !((v = o[y[g]]) && v.text && v.text.style); g++)
                                ;
                            var p, m = {
                                vd: []
                            }, b = this.ym().KO;
                            v && v.text && v.text.style ? (p = v.text.style || {},
                            m.vd = new LabelTextStyle(LabelTextStyle.BV(p, void 0 === b ? 1 : b))) : (m.vd = new LabelTextStyle(new Float32Array(28)),
                            m.vd.VV("u_fontSizeFactor", 1)),
                            p = h,
                            m.start = p;
                            var w = (b = a[d[0]]).opts || {}
                              , b = (b.data || {}).id || ""
                              , A = isUndefined(A = w.opacity) ? 1 : A
                              , T = w.icon && 1 < w.icon.length || w.richText && w.richText.image ? "rich-icon_" + b : w.icon && w.icon[0] && w.icon[0].image;
                            m.opacity = A,
                            m.rotation = w.rotation,
                            m.opacity *= f,
                            i.pp.push(m),
                            m.dp = [];
                            for (var S = 0, x = d; S < x.length; S++) {
                                var M = x[S]
                                  , P = a[M].CO || []
                                  , I = {
                                    height: a[M] && a[M].opts.height || 0,
                                    from: e.from,
                                    angle: a[M] && a[M].data.rotation || 0
                                }
                                  , $ = this.PO(M, s[M], o[M], i, I)
                                  , k = this.zV(M, s[M], o[M], a[M], i, I, P)
                                  , P = this.BO(M, s[M], o[M], a[M], i, P, I);
                                m.dp.push({
                                    id: M,
                                    Rd: P,
                                    icon: $,
                                    bg: k,
                                    kd: I = 6 * (P + $ + k)
                                }),
                                h += I * n
                            }
                            m.end = h,
                            m.pd = T,
                            c += b = h - p,
                            i.bd.push(b)
                        }
                        i.up = c
                    }
                    return i.Fz = u,
                    this.DO = i
                }
                ,
                t.prototype.destroy = function() {}
                ,
                t.prototype.ym = function() {
                    return this.gs.aO()
                }
                ,
                t.prototype.zO = function(t) {
                    var e;
                    return t ? this.qO[t] || (e = labelsUtil.Kj(parseInt(t, 10)),
                    this.qO[t] = e,
                    this.qO[t]) : []
                }
                ,
                t.prototype.RO = function(t) {
                    var e, r, n, i, a, o, s, u, f = {}, c = this.Gj, h = this.iO;
                    for (e in t)
                        t.hasOwnProperty(e) && (n = (r = c[e]).data || {},
                        i = (o = r.opts || {}).zIndex,
                        g = n.rank,
                        g = o.forceShow ? g - 1e5 : g,
                        n = isUndefined(o.opacity) ? 1 : o.opacity,
                        s = void 0 === (s = (a = this.Hj[e] || {}).text) ? {} : s,
                        a = a.icon,
                        o = o.richText,
                        f[i = ("labelsLayer" === h ? i || g : i) || 1] = f[i] || {},
                        s = s && s.style || "",
                        u = void 0,
                        "labelsLayer" === h ? (u = s ? labelGroup.nT(s) + n : u,
                        o && o.hS ? u += a && a[0] && a[0].image && a[0].image.currentSrc ? a[0].image.currentSrc : "" : u += a && a[0] && a[0].image ? a[0].image : "") : u = r.data.extData.mainKey ? (r.data.extData.mainKey << 16) + r.data.extData.subKey : s ? labelGroup.nT(s) + n : "-1-" + n,
                        f[i][u] || (f[i][u] = []),
                        f[i][u].push(e));
                    for (var l = [], d = 0, v = labelsUtil.rank(Object.keys(f)); d < v.length; d++)
                        for (var g, y = f[g = v[d]], p = 0, m = Object.keys(y).sort(); p < m.length; p++) {
                            var b = m[p];
                            l.push(y[b])
                        }
                    return l
                }
                ,
                t.prototype.WO = function(t, e) {
                    var r = Util.WorldAxesCenter;
                    return [t - r.x, e - r.y]
                }
                ,
                t.prototype.GO = function(t) {
                    return t
                }
                ,
                t.prototype.HO = function(t, e, r, n, i) {
                    var a, o, s = i.VO, u = void 0 === (u = i.type) ? EnumLabelFragType.icon : u, f = i.zooms, c = i.height, e = void 0 === (e = e.icon) ? [] : e, h = CONSTS.ud, l = this.$O, d = 0, v = 0, g = ((g = this.ac.getImage(r.image)) && (d = g.startX || 0,
                    v = g.startY || 0),
                    s[0]), s = s[1], y = f[0], f = f[1], p = exports.cY.icon, e = e.anchorOffset, A = (m = r.size)[0], m = m[1], T = (b = r.clipSize)[0], b = b[1], S = (w = r.clipOrigin)[0], w = w[1], x = (e = this.GO(e))[0] || 0, e = e[1] || 0, r = ((r = r.offset) && (o = r instanceof Array || r.x === undefined || r.y === undefined ? (a = r[0],
                    r[1]) : (a = r.x,
                    r.y)),
                    d + S), d = v + w, S = (a !== undefined && (x += a),
                    o !== undefined && (e += o),
                    -i.angle * Math.PI / 180 || 0), v = [x, e, r, d, g, s, p, u, y, f, c, S, 0, x + A, e, r + T, d, g, s, p, u, y, f, c, S, 0, x, m + e, r, d + b, g, s, p, u, y, f, c, S, 0, x + A, e, r + T, d, g, s, p, u, y, f, c, S, 0, x + A, m + e, r + T, d + b, g, s, p, u, y, f, c, S, 0, x, m + e, r, d + b, g, s, p, u, y, f, c, S, 0];
                    try {
                        n.set(v, l),
                        this.$O += 6 * h
                    } catch (M) {
                        console.warn("createIconVertex out of bounds")
                    }
                }
                ,
                t.prototype.PO = function(t, e, r, n, i) {
                    if (!e || !r)
                        return 0;
                    var a = e.icon;
                    if (!(r = void 0 === (r = r.icon) ? [] : r).length || !r[0].image)
                        return 0;
                    for (var o = (a = (void 0 === a ? {} : a).origin)[0], s = this.WO(o, a[1]), u = i.height, f = i.angle, c = 0, h = r; c < h.length; c++) {
                        var l = h[c];
                        this.HO(t, e, l, n.rp, {
                            VO: s,
                            zooms: l.zooms,
                            height: u,
                            angle: f
                        }),
                        delete l.clipOrigin,
                        delete l.clipSize,
                        delete l.size,
                        delete l.image,
                        delete l.type,
                        delete l.anchor,
                        delete l.retina
                    }
                    return r.length
                }
                ,
                t.prototype.YO = function(t, e, r, n, i) {
                    var a = i.VO
                      , o = void 0 === (o = i.type) ? EnumLabelFragType.bg : o
                      , u = i.height
                      , f = CONSTS.ud
                      , c = CONSTS.Kp
                      , h = this.$O
                      , e = e.padding
                      , l = a[0]
                      , a = a[1]
                      , d = (s = i.zooms)[0]
                      , s = s[1]
                      , v = e.w
                      , g = e.h
                      , c = e.offsetX - c.buffer
                      , e = e.offsetY
                      , i = -i.angle * Math.PI / 180 || 0;
                    if (n.set([c, e, 0, 0, l, a, 0, o, d, s, u, i, 0, c + v, e, 0, 0, l, a, 0, o, d, s, u, i, 0, c, g + e, 0, 0, l, a, 0, o, d, s, u, i, 0, c + v, e, 0, 0, l, a, 0, o, d, s, u, i, 0, c + v, g + e, 0, 0, l, a, 0, o, d, s, u, i, 0, c, g + e, 0, 0, l, a, 0, o, d, s, u, i, 0], h),
                    this.$O += 6 * f,
                    h = this.$O,
                    o = r.text.style.borderWidth) {
                        for (var y = [c, e, v, g, l, a, o, d, s, u, i], p = 0; p < 4; p++)
                            y[11] = p,
                            this.sT(y, n, h),
                            h += 6 * f;
                        this.$O = h
                    }
                }
                ,
                t.prototype.sT = function(t, e, r) {
                    var n = (t = void 0 === t ? {} : t)[0]
                      , i = t[1]
                      , a = t[2]
                      , o = t[3]
                      , s = t[4]
                      , u = t[5]
                      , f = t[6]
                      , c = t[7]
                      , h = t[8]
                      , l = t[9]
                      , d = t[10]
                      , t = t[11]
                      , v = EnumLabelFragType.tq
                      , g = 0
                      , y = 0
                      , p = 0
                      , m = 0
                      , b = 0
                      , w = 0
                      , A = 0
                      , T = 0;
                    switch (t) {
                    case 0:
                        m = y = i - f,
                        b = g = n + 0,
                        A = p = n + a,
                        T = w = i + 0;
                        break;
                    case 1:
                        p = (g = n + a) + f,
                        m = y = i - f,
                        A = (b = n + a) + f,
                        T = w = i + o + f;
                        break;
                    case 2:
                        b = g = n + 0,
                        A = p = n + a,
                        T = w = (m = y = i + o) + f;
                        break;
                    case 3:
                        g = n - f,
                        m = y = i - f,
                        b = (p = n) - f,
                        A = n,
                        T = w = i + o + f
                    }
                    e.set([g, y, 0, 0, s, u, 0, v, c, h, l, d, 0, p, m, 0, 0, s, u, 0, v, c, h, l, d, 0, b, w, 0, 0, s, u, 0, v, c, h, l, d, 0, p, m, 0, 0, s, u, 0, v, c, h, l, d, 0, b, w, 0, 0, s, u, 0, v, c, h, l, d, 0, A, T, 0, 0, s, u, 0, v, c, h, l, d, 0], r)
                }
                ,
                t.prototype.UO = function(t, e, r, n, i) {
                    var a, o, s, u, f;
                    return e && r && (a = CONSTS.Mp,
                    o = CONSTS.Rp,
                    u = e.text,
                    s = (r.text || {}).zooms,
                    r.text) && u.origin ? (f = (u = u.origin)[0],
                    i = i.height,
                    this.YO(t, e, r, n.rp, {
                        VO: [f, u[1]],
                        zooms: void 0 === s ? [a, o] : s,
                        height: i
                    }),
                    t = 1,
                    r.text.style.borderWidth && (t += 4),
                    t) : 0
                }
                ,
                t.prototype.zV = function(t, e, r, n, i, a, o) {
                    if (!e || !r)
                        return 0;
                    var s = CONSTS.Mp
                      , u = CONSTS.Rp
                      , c = e.text.offset
                      , l = (h = (f = r).text || {}).style
                      , d = void 0 === (d = h.direction) ? "left" : d
                      , s = void 0 === (h = h.zooms) ? [s, u] : h;
                    if (!f.text || !f.text.style)
                        return 0;
                    if (o.length,
                    u = !1 === (l = void 0 === l ? {} : l).fold ? 100 : 6,
                    h = this.Mf.lineBreak(f.text.txt, {
                        fontSize: l.fontSize,
                        CO: n.CO,
                        type: n.data && n.data.BG || "ch",
                        fj: u,
                        from: a.from,
                        u6t: n.data && n.data.u6t
                    }),
                    o = {
                        direction: d,
                        size: l.fontSize,
                        yO: f.icon.length && f.icon[0].image
                    },
                    f = (n = (u = e.text).origin)[0],
                    !r.text || !u.origin)
                        return 0;
                    var e = [f, n[1]]
                      , u = a.height
                      , f = EnumLabelFragType.bg
                      , v = CONSTS.ud
                      , g = this.$O
                      , n = e[0]
                      , e = e[1]
                      , y = s[0]
                      , s = s[1]
                      , p = i.rp
                      , i = h.maxWidth + 6
                      , l = l.fontSize * h.width.length + 8
                      , h = this.XV(i, d, o.yO)
                      , c = [d = c[0] + h[0] - 1, o = c[1] - 2, 0, 0, n, e, 0, f, y, s, u, h = -a.angle * Math.PI / 180 || 0, 0, d + i, o, 0, 0, n, e, 0, f, y, s, u, h, 0, d, l + o, 0, 0, n, e, 0, f, y, s, u, h, 0, d + i, o, 0, 0, n, e, 0, f, y, s, u, h, 0, d + i, l + o, 0, 0, n, e, 0, f, y, s, u, h, 0, d, l + o, 0, 0, n, e, 0, f, y, s, u, h, 0];
                    try {
                        p.set(c, g),
                        this.$O += 6 * v,
                        g = this.$O
                    } catch (w) {
                        console.warn("drawBg2 is out of bounds")
                    }
                    if (a = r.text.style.borderWidth) {
                        for (var m = [d, o, i, l, n, e, a, y, s, u, h], b = 0; b < 4; b++)
                            m[11] = b,
                            this.sT(m, p, g),
                            g += 6 * v;
                        return this.$O = g,
                        5
                    }
                    return 1
                }
                ,
                t.prototype.CT = function(t, e) {
                    return this.Mf ? this.Mf.measureText(t, e) : this.NT ? (this.NT.font = (e || 12) + "px",
                    this.NT.measureText(t.join("")).width) : 0
                }
                ,
                t.prototype.XO = function(t, e) {
                    var r = CONSTS.JM
                      , r = void 0 === (n = (e = void 0 === e ? {} : e).direction) ? r.LEFT : n
                      , n = e.size
                      , e = void 0 !== (e = e.yO) && e
                      , t = this.CT(t = void 0 === t ? [] : t, void 0 === n ? DangerousFontSize : n);
                    return this.XV(t, r, e)
                }
                ,
                t.prototype.XV = function(t, e, r) {
                    void 0 === r && (r = !1);
                    var n = 0
                      , i = 0;
                    switch (e) {
                    case (r = CONSTS.JM).LEFT:
                        n = -t,
                        i = 0;
                        break;
                    case r.QM:
                        i = n = 0;
                        break;
                    case r.ZM:
                    case r.tj:
                        n = -t / 2,
                        i = 0;
                        break;
                    case r.ij:
                    case r.nj:
                        n = -t / 2,
                        i = 0;
                        break;
                    default:
                        i = n = 0
                    }
                    return [n, i]
                }
                ,
                t.prototype.JO = function(t, e, r, n) {
                    var i = CONSTS.ud
                      , a = this.$O
                      , o = n.size
                      , s = n.VO
                      , u = void 0 === (u = n.type) ? EnumLabelFragType.text : u
                      , f = n.zooms
                      , c = n.height
                      , h = CONSTS.Kp;
                    if (l = this.Mf.mz(e)) {
                        var d = l.index
                          , v = l.pos
                          , l = l["char"]
                          , g = s[0]
                          , s = s[1]
                          , y = f[0]
                          , f = f[1]
                          , e = (l || (console.log("!metric", e, String.fromCharCode(e)),
                        l = this.Mf.mz(32)["char"]),
                        o / h.size)
                          , o = l[0]
                          , p = l[1]
                          , m = (l[2],
                        l[3],
                        l[4],
                        l[5])
                          , b = l[6]
                          , h = h.buffer;
                        if (0 < o && 0 < p) {
                            var T = (w = r.x) - h * e
                              , w = +(w + ((o += 2 * h) - h) * e)
                              , S = +((A = r.y) + b * e)
                              , A = +(A + ((p += 2 * h) + b) * e)
                              , h = 0
                              , x = 0
                              , x = [T, S, h = (h += v.startX) + m, m = (x += v.startY) + b, g, s, d, u, y, f, c, v = -n.angle * Math.PI / 180 || 0, 0, w, S, h + o, m, g, s, d, u, y, f, c, v, 0, T, A, h, m + p, g, s, d, u, y, f, c, v, 0, T, A, h, m + p, g, s, d, u, y, f, c, v, 0, w, S, h + o, m, g, s, d, u, y, f, c, v, 0, w, A, h + o, m + p, g, s, d, u, y, f, c, v, 0];
                            try {
                                t.set(x, a)
                            } catch (M) {
                                console.warn("createTextVertex is out of bounds")
                            }
                            this.$O += 6 * i
                        }
                        r.x = r.x + (l[0] + CONSTS.ic) * e
                    }
                }
                ,
                t.prototype.BO = function(t, e, r, n, i, a, o) {
                    if (!(e && r && r.text && r.text.txt))
                        return 0;
                    var s = CONSTS.Mp
                      , u = CONSTS.Rp
                      , f = (e = e.text).origin
                      , c = e.offset
                      , h = (e = r.text || {}).style
                      , l = void 0 === (l = e.direction) ? "left" : l
                      , d = void 0 === (e = e.zooms) ? [s, u] : e
                      , v = a
                      , s = f[0]
                      , u = f[1];
                    if (!r.text || !r.text.style)
                        return 0;
                    for (var g = v.length, y = g, e = !1 === (h = void 0 === h ? {} : h).fold ? 100 : 6, p = ((a = this.Mf.lineBreak(r.text.txt, {
                        fontSize: h.fontSize,
                        CO: (n = void 0 === n ? {} : n).CO,
                        type: n.data && n.data.BG || "ch",
                        fj: e,
                        from: o.from,
                        u6t: n.data && n.data.u6t
                    })).lines.length,
                    a.oQ), m = h.fontSize, b = {
                        direction: l,
                        size: m,
                        yO: r.icon.length && r.icon[0].image
                    }, w = [s, u], A = {
                        x: 0,
                        y: 0
                    }, T = o.height, S = o.angle, x = -1, M = 0, P = 0; P < g; P++) {
                        var I = v[P]
                          , $ = this.eQ(p, M)
                          , k = (M += I.split("|").length,
                        this.nQ(v, p[$], p[$ + 1]))
                          , k = v.slice.apply(v, k)
                          , k = this.XO(k, b)
                          , k = vector.add(c, k);
                        if (0 === $ && 0 === P && (A.x = k[0],
                        A.y = k[1]),
                        $ && (A.y = k[1] + (m + 3) * $,
                        x !== $)) {
                            if ("32" === I) {
                                y--;
                                continue
                            }
                            A.x = k[0]
                        }
                        x = $,
                        this.JO(i.rp, I, A, {
                            size: m,
                            VO: w,
                            id: t,
                            zooms: d,
                            height: T,
                            angle: S
                        })
                    }
                    return y
                }
                ,
                t.prototype.nQ = function(t, e, r) {
                    for (var n = 0, i = 0, a = 0, o = t.length, s = 0; s < o; s++) {
                        for (var u = t[s].split("|").length, f = 0; f < u; f++) {
                            var c = a + f;
                            c === e && (n = s),
                            c === r && (i = s)
                        }
                        a += u
                    }
                    return [n, i = a <= r ? o : i]
                }
                ,
                t.prototype.eQ = function(t, e) {
                    for (var r = (t = void 0 === t ? [] : t).length, n = 0; n < r - 1; n++)
                        if (e >= t[n] && e < t[n + 1])
                            return n;
                    return 0
                }
                ,
                t
            }())
              , DefaultLabelsLayerOpts = {
                opacity: 1,
                collision: !0,
                animation: !0
            }
              , Labels = function() {
                function t(t) {
                    if (this.CLASS_NAME = "AMap.LabelsLayer",
                    this.Gj = {},
                    this.Hj = {},
                    this.Vj = {},
                    this.Fs = {},
                    this.Es = {},
                    this.Wj = {},
                    this.$j = 0,
                    this.zp = {},
                    this.render = null,
                    this.$8t = [],
                    this.eI = {},
                    this.nI = [],
                    this.cI = !1,
                    this.iI = !1,
                    this.iO = "",
                    this.cI = !1,
                    this._opts = assign({}, DefaultLabelsLayerOpts, {
                        opacity: t.opacity
                    }),
                    this.Mf = t.R_,
                    this.ac = t.z_,
                    this.PN = t.info || {},
                    !this.Mf || "SDFManagerBase" === this.Mf.CLASS_NAME)
                        try {
                            var e = this.io = document.createElement("canvas")
                              , r = void 0;
                            e && (r = this.NT = e.getContext("2d")),
                            t.canvas = e,
                            t.Nz = r
                        } catch (n) {
                            console.log("canvas 初始化失败")
                        }
                    this.sI = new LabelPlacement(t),
                    this.fI = new LabelBucket(t)
                }
                return t.prototype.Ns = function(t, e) {
                    var r = (e = void 0 === e ? {} : e).zoom
                      , n = e.center
                      , i = e.from;
                    return this.nI = t,
                    this.iI = !0,
                    this.iO = i,
                    this.eI.zoom = r || 20,
                    this.oI(),
                    this.hu = n,
                    this.uI(e)
                }
                ,
                t.prototype.aO = function() {
                    return this.eI
                }
                ,
                t.prototype.zL = function(t) {
                    return this.Wj[t]
                }
                ,
                t.prototype.setRichtoImage = function(t) {
                    t && (this.$8t.push(t),
                    this.sI) && this.sI.setRichtoImage(this.$8t)
                }
                ,
                t.prototype.uI = function(t) {
                    var e = this.iO
                      , e = {
                        center: this.hu,
                        from: e
                    };
                    if (assign(e, t = void 0 === t ? {} : t),
                    this.sI.nO(this, e),
                    this.$j = this.sI.$j,
                    t = this.fI.rQ(this, e)) {
                        var r, n, i, a, o, s = {}, u = {}, e = t.Fz || {}, f = (delete t.Fz,
                        this.Gj);
                        if ("inner" !== this.iO)
                            return {
                                Nf: f,
                                style: this.Hj,
                                coords: this.Vj,
                                rp: t,
                                zp: this.zp,
                                Fz: e
                            };
                        for (r in f)
                            f.hasOwnProperty(r) && (n = f[r],
                            i = this.Vj[r],
                            o = (a = n.data).extData,
                            s[r] = {
                                data: {
                                    position: a.position,
                                    name: a.name,
                                    rank: a.rank,
                                    extData: {
                                        type: o.type,
                                        id: o.id,
                                        mainKey: o.mainKey,
                                        subKey: o.subKey,
                                        bz: o.bz
                                    }
                                }
                            },
                            u[r] = {
                                origin: i.origin,
                                icon: {
                                    anchorOffset: i.icon.anchorOffset,
                                    size: i.icon.size
                                },
                                padding: i.padding
                            },
                            n.opts) && (s[r].opts = {
                                zooms: n.opts.zooms
                            });
                        return {
                            Nf: s,
                            style: this.Hj,
                            coords: u,
                            rp: t,
                            zp: this.zp,
                            Fz: e
                        }
                    }
                }
                ,
                t.prototype.oI = function() {
                    for (var t = this.nI, e = this.Gj || {}, r = this.Wj, n = this.zp, i = CONSTS.Mp, a = CONSTS.Rp, o = CONSTS.Pp, s = CONSTS.jp, u = 0, f = t; u < f.length; u++) {
                        for (var c = f[u], h = c.opts && c.opts.zooms, l = ("北京市" === c.data.name && (c.data.id = "B000ABCR67"),
                        "重庆市" === c.data.name && (c.data.id = "B00178WI2P"),
                        "天津市" === c.data.name && (c.data.id = "B001612PAR"),
                        c.data.id), d = void 0 === (d = (h = h || [])[0]) ? i : d, v = void 0 === (h = h[1]) ? a : h, g = isUndefined(r[l]) ? Util.stamp(this) : r[l], y = (l && (r[l] = g),
                        Math.ceil(d - o)); y <= v + s; )
                            n[y] || (n[y] = []),
                            Array.isArray(n[y]) && n[y].push(g),
                            y++;
                        e[g] = c,
                        e[g].CO = this.Ws(c),
                        this.hI(c),
                        c.data && c.data.richText && this.k8t(c)
                    }
                    if ("undefined" != typeof Uint32Array)
                        for (var p in n)
                            n.hasOwnProperty(p) && (n[p] = new Uint32Array(n[p]));
                    this.Gj = e
                }
                ,
                t.prototype.k8t = function(t) {
                    if (this.$8t && 0 < this.$8t.length)
                        for (var e = this.$8t, r = t.data.id, n = (t.data.richText.content,
                        0), i = e; n < i.length; n++)
                            for (var a = i[n], o = 0, s = Object.keys(a); o < s.length; o++) {
                                var u, f, c = s[o];
                                parseInt(c) === r && (u = this.Fs,
                                t.opts.richText = a[c],
                                t.data.richText = a[c],
                                f = r || "") && (u[f] = a[c])
                            }
                }
                ,
                t.prototype.hI = function(t) {
                    var e = this.Fs;
                    (t = (t = t.opts.icon) && t.image || "") && (e[t] = 1)
                }
                ,
                t.prototype.Ws = function(t) {
                    this.Es;
                    var e = t.data.txt || ""
                      , t = (t.opts && t.opts.text || {}).$G || []
                      , e = labelsUtil.EQ(e, t);
                    return labelsUtil.aQ(e)
                }
                ,
                t
            }()
              , DynamicVerticeStyle = function() {}
              , DynamicVertice = function() {
                function r(t, e) {
                    this.zo = t,
                    this.Nf = e.Nf,
                    this.style = e.style,
                    Object.setPrototypeOf(this.style, new DynamicVerticeStyle),
                    this.coords = e.coords,
                    this.rp = e.rp,
                    this.zp = e.zp
                }
                return r.Wb = function(t, e) {
                    var r = {
                        zo: t.zo,
                        coords: t.coords,
                        Nf: t.Nf,
                        style: t.style
                    };
                    return {
                        JSON: JSON.stringify(r),
                        kV: {
                            rp: serialize(t.rp, e),
                            zp: serialize(t.zp, e)
                        }
                    }
                }
                ,
                r.Gb = function(t) {
                    var e = JSON.parse(t.JSON);
                    return t.kV.rp.pp = deserialize(t.kV.rp.pp),
                    e.rp = t.kV.rp,
                    e.zp = t.kV.zp,
                    new r(e.zo,e)
                }
                ,
                r.prototype.upload = function(t) {
                    this.buffer || (this.buffer = t.fe(this.rp.rp, CONSTS.sp))
                }
                ,
                r.prototype.destroy = function() {
                    this.buffer && (this.buffer.context.deleteBuffer(this.buffer),
                    delete this.buffer)
                }
                ,
                r
            }();
            function feature(t, e, r) {
                var n = {
                    type: "Feature"
                };
                return 0 !== (r = void 0 === r ? {} : r).id && !r.id || (n.id = r.id),
                r.Ro && (n.Ro = r.Ro),
                n.properties = e || {},
                n.geometry = t,
                n
            }
            function polygon(t, e, r) {
                void 0 === r && (r = {});
                for (var n = 0, i = t; n < i.length; n++) {
                    var a = i[n];
                    if (a.length < 4)
                        throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");
                    for (var o = 0; o < a[a.length - 1].length; o++)
                        if (a[a.length - 1][o] !== a[0][o])
                            throw new Error("First and last Position are not equivalent.")
                }
                return feature({
                    type: "Polygon",
                    coordinates: t
                }, e, r)
            }
            function lineString(t, e, r) {
                if (void 0 === r && (r = {}),
                t.length < 2)
                    throw new Error("coordinates must be an array of two or more positions");
                return feature({
                    type: "LineString",
                    coordinates: t
                }, e, r)
            }
            function multiLineString(t, e, r) {
                return feature({
                    type: "MultiLineString",
                    coordinates: t
                }, e, r = void 0 === r ? {} : r)
            }
            function multiPolygon(t, e, r) {
                return feature({
                    type: "MultiPolygon",
                    coordinates: t
                }, e, r = void 0 === r ? {} : r)
            }
            function getGeom(t) {
                return "Feature" === t.type ? t.geometry : t
            }
            function lineclip(t, e, r) {
                var n, i, a, o, s, u = t.length, f = bitCode(t[0], e), c = [];
                for (r = r || [],
                n = 1; n < u; n++) {
                    for (o = t[n - 1],
                    i = a = bitCode(s = t[n], e); ; ) {
                        if (!(f | i)) {
                            c.push(o),
                            i !== a ? (c.push(s),
                            n < u - 1 && (r.push(c),
                            c = [])) : n === u - 1 && c.push(s);
                            break
                        }
                        if (f & i)
                            break;
                        f ? f = bitCode(o = intersect(o, s, f, e), e) : i = bitCode(s = intersect(o, s, i, e), e)
                    }
                    f = a
                }
                c.length && r.push(c)
            }
            function polygonclip(t, e) {
                for (var r, n, i, a, o, s, u = 1; u <= 8; u *= 2) {
                    for (r = [],
                    i = !(bitCode(n = t[t.length - 1], e) & u),
                    a = 0; a < t.length; a++)
                        (s = !(bitCode(o = t[a], e) & u)) !== i && r.push(intersect(n, o, u, e)),
                        s && r.push(o),
                        n = o,
                        i = s;
                    if (!(t = r).length)
                        break
                }
                return r
            }
            function intersect(t, e, r, n) {
                return 8 & r ? [t[0] + (e[0] - t[0]) * (n[3] - t[1]) / (e[1] - t[1]), n[3]] : 4 & r ? [t[0] + (e[0] - t[0]) * (n[1] - t[1]) / (e[1] - t[1]), n[1]] : 2 & r ? [n[2], t[1] + (e[1] - t[1]) * (n[2] - t[0]) / (e[0] - t[0])] : 1 & r ? [n[0], t[1] + (e[1] - t[1]) * (n[0] - t[0]) / (e[0] - t[0])] : null
            }
            function bitCode(t, e) {
                var r = 0;
                return t[0] < e[0] ? r |= 1 : t[0] > e[2] && (r |= 2),
                t[1] < e[1] ? r |= 4 : t[1] > e[3] && (r |= 8),
                r
            }
            function bboxClip(t, e) {
                var r = getGeom(t)
                  , n = r.type
                  , i = "Feature" === t.type ? t.properties : {}
                  , a = r.coordinates;
                switch (n) {
                case "LineString":
                case "MultiLineString":
                    var o = [];
                    return (a = "LineString" === n ? [a] : a).forEach(function(t) {
                        lineclip(t, e, o)
                    }),
                    1 === o.length ? lineString(o[0], i) : multiLineString(o, i);
                case "Polygon":
                    return polygon(clipPolygon(a, e), i);
                case "MultiPolygon":
                    return multiPolygon(a.map(function(t) {
                        return clipPolygon(t, e)
                    }), i);
                default:
                    throw new Error("geometry " + n + " not supported")
                }
            }
            function clipPolygon(t, e) {
                for (var r = [], n = 0, i = t; n < i.length; n++) {
                    var a = polygonclip(i[n], e);
                    0 < a.length && (a[0][0] === a[a.length - 1][0] && a[0][1] === a[a.length - 1][1] || a.push(a[0]),
                    4 <= a.length) && r.push(a)
                }
                return r
            }
            register("DynamicVertice", DynamicVertice);
            var DEF_NDS_MAX_COORD = 2147483648
              , DEF_DEGREE_MAX_COORD = 180
              , MKT = 20037508.342789244;
            function tileInnerCoord2LngLat(t, e, r, n) {
                var a = r + (i = getTileSWCoord(t, e))[0]
                  , i = n + i[1];
                return r = a << (t = getCoordShift(t.z, e)),
                n = i << t,
                [coord2Degree(r = 0 < a && r < 0 ? DEF_NDS_MAX_COORD - 1 : r), coord2Degree(n)]
            }
            function LngLat2TileInnerCoord(t, e, r, n, i) {
                var r = degree2Coord(r)
                  , n = degree2Coord(n)
                  , a = getCoordShift(i.z, e)
                  , n = n >> a;
                return [(r = r >> a) - (a = getTileSWCoord(i, e))[0], n - a[1]]
            }
            var cache = {};
            function lnglat2WGSCoord2(t) {
                var e, r;
                return cache[t] || (r = 33 - t,
                e = degree2Coord(180) / (1 << r),
                r = degree2Coord(90) / (1 << r),
                e = 0 < e ? Math.floor(.5 + e) : Math.floor(e - .5),
                r = 0 < r ? Math.floor(.5 + r) : Math.floor(r - .5),
                cache[t] = [2 * e, 2 * r]),
                cache[t]
            }
            function getWorldSize(t, e) {
                return lnglat2WGSCoord2(t + e)
            }
            function getTileSWCoord(t, e) {
                var r = (e = getWorldSize(t.z, e))[0]
                  , e = e[1]
                  , n = 1 << t.z;
                return [-r / 2 + t.x * r / n, e / 2 - (t.y + 1) * e / n]
            }
            function degree2Coord(t) {
                return Math.floor(t * DEF_NDS_MAX_COORD / DEF_DEGREE_MAX_COORD + .5)
            }
            function coord2Degree(t) {
                return t * DEF_DEGREE_MAX_COORD / DEF_NDS_MAX_COORD
            }
            function getCoordShift(t, e) {
                return 33 - e - t
            }
            function getMVTTileBbox(t, e, r, n, i) {
                return [t * (i = void 0 === i ? 256 : i) * n - MKT, -((e + 1) * i * n - MKT), (t + 1) * i * n - MKT, -(e * i * n - MKT)]
            }
            var MapboxVTSourceWorker = function() {
                function t() {}
                return t.prototype.bw = function(t, e, r, n, i, a) {
                    var o = this
                      , s = {
                        point: {},
                        line: {},
                        polygon: {},
                        polyhedron: {},
                        label: {}
                    }
                      , u = new XMLHttpRequest;
                    return u.onreadystatechange = function() {
                        var t;
                        4 !== u.readyState || 200 !== u.status && 204 !== u.status || (s.point = o.AX(i.point),
                        s.line = o.AX(i.line),
                        s.polygon = o.AX(i.polygon),
                        s.polyhedron = o.AX(i.polyhedron),
                        s.label = o.AX(i.label),
                        t = new VectorTile$1(new Pbf(new Uint8Array(u.response))),
                        t = o.Ow(t, {
                            x: e.x,
                            y: e.y,
                            z: e.z,
                            projectionId: r,
                            tileSize: n
                        }, s),
                        a(null, exports.Ln({
                            zo: e
                        }, t)))
                    }
                    ,
                    u.responseType = "arraybuffer",
                    u.open("GET", t, !0),
                    u.send(),
                    {
                        cancel: function() {
                            u.abort()
                        }
                    }
                }
                ,
                t.prototype.mX = function(t, e, r) {
                    var n = {
                        point: {},
                        line: {},
                        polygon: {},
                        polyhedron: {},
                        label: {}
                    };
                    n.point = this.AX(e.point),
                    n.line = this.AX(e.line),
                    n.polygon = this.AX(e.polygon),
                    n.polyhedron = this.AX(e.polyhedron),
                    n.label = this.AX(e.label),
                    this.xw(t, n, !0),
                    this.zw(t, n, !0),
                    this.nz(t, n, !0),
                    this.SX(t, n, !0),
                    this.i1(t, n, !0),
                    r && r(null, t)
                }
                ,
                t.prototype.Ow = function(h, t, e) {
                    var r = t.x
                      , n = t.y
                      , i = t.z
                      , a = t.tileSize
                      , o = t.projectionId
                      , l = (h.z = i,
                    h.x = r,
                    h.y = n,
                    ProjectionManager.getProjection(o))
                      , t = l.getResolution(i)
                      , s = (h.projectionId = o,
                    h.Ro = getMVTTileBbox(r, n, i, t, a),
                    h.zS = lcs.getLocalByCoord([h.Ro[0], h.Ro[1]]),
                    h.visible = {
                        point: {},
                        line: {},
                        polygon: {},
                        label: {},
                        polyhedron: {}
                    },
                    ProjectionManager.getProjection(o).getResolution(i));
                    return forIn(h.layers, function(c) {
                        var t = c.Cw
                          , e = (c.Ah = [],
                        c.scale = s * a / c.extent,
                        transform[o].Xs(a * r, a * n, i));
                        c.ox = e[0],
                        c.oy = e[1],
                        forEach(t, function(t, e) {
                            if ((t = c.Gw(e)).Dw(),
                            c.Ah.push(t),
                            t.lines && 0 < t.lines.length) {
                                t.Rw = [],
                                t.n1 = [];
                                for (var r = 0, n = t.lines.length; r < n; r++) {
                                    for (var i = [], a = [], o = 0, s = t.lines[r].length; o < s; o++) {
                                        var u = [c.ox + c.scale * t.lines[r][o][0], c.oy - c.scale * t.lines[r][o][1]]
                                          , f = [u[0] - h.zS.center[0], u[1] - h.zS.center[1]];
                                        a.push(l.unproject(u[0], u[1])),
                                        i.push(f)
                                    }
                                    t.Rw.push(i),
                                    t.n1.push(a)
                                }
                            }
                        })
                    }),
                    this.uW(h),
                    this.xw(h, e),
                    this.zw(h, e),
                    this.nz(h, e),
                    this.SX(h, e),
                    this.i1(h, e),
                    h
                }
                ,
                t.prototype.uW = function(t) {
                    for (var e in t.polygons = {},
                    t.polygonOut = {},
                    t.polyhedrons = {},
                    t.polylines = {},
                    t.points = {},
                    t.layers)
                        if (t.layers.hasOwnProperty(e)) {
                            for (var r = t.layers[e], n = [], i = [], a = [], o = [], s = [], u = 0; u < r.Ah.length; u += 1) {
                                var f = r.Ah[u];
                                if (3 == +f.type && f.Rw) {
                                    for (var c = f.Rw, h = f.n1, l = [], d = this.g8t(f), v = d.w8t, g = d.height, y = 0; y < c.length; y++)
                                        PlaneGeometryUtilInstance.isClockwise(c[y]) ? l.push([y]) : l.length && l[l.length - 1].push(y);
                                    for (var p = 0; p < l.length; p++) {
                                        var m = l[p];
                                        if (1 < m.length)
                                            if (v) {
                                                for (var b = [], w = [], A = 0; A < m.length; A++) {
                                                    var T = h[m[A]];
                                                    if (P = this.d8t(t, T)) {
                                                        0 < A && b.push(w.length / 2);
                                                        for (var S = [], x = 0; x < P.length; x++) {
                                                            var M = P[x];
                                                            S.unshift(M[0], M[1])
                                                        }
                                                        w.push.apply(w, S)
                                                    }
                                                }
                                                a.push({
                                                    _id_: Util.getGuid("amap_"),
                                                    properties: f.properties,
                                                    path: w,
                                                    LQ: b,
                                                    height: g
                                                })
                                            } else {
                                                for (b = [],
                                                w = [],
                                                A = 0; A < m.length; A++) {
                                                    var P = c[m[A]];
                                                    for (0 < A && b.push(w.length / 2),
                                                    x = 0; x < P.length; x++) {
                                                        var I = P[x];
                                                        w.push(I[0], I[1])
                                                    }
                                                    i.push({
                                                        properties: f.properties,
                                                        path: P,
                                                        _id_: Util.getGuid("amap_")
                                                    })
                                                }
                                                n.push({
                                                    properties: f.properties,
                                                    path: w,
                                                    LQ: b
                                                })
                                            }
                                        else if (v) {
                                            if (w = [],
                                            T = h[m[0]],
                                            P = this.d8t(t, T)) {
                                                for (x = 0; x < P.length; x++) {
                                                    var $ = P[x];
                                                    w.unshift($[0], $[1])
                                                }
                                                a.push({
                                                    _id_: Util.getGuid("amap_"),
                                                    properties: f.properties,
                                                    path: w,
                                                    height: g
                                                })
                                            }
                                        } else {
                                            for (w = [],
                                            P = c[m[0]],
                                            x = 0; x < P.length; x++) {
                                                var k = P[x];
                                                w.push(k[0], k[1])
                                            }
                                            n.push({
                                                properties: f.properties,
                                                path: w
                                            }),
                                            i.push({
                                                properties: f.properties,
                                                path: P,
                                                _id_: Util.getGuid("amap_")
                                            })
                                        }
                                    }
                                } else if (2 == +f.type && f.Rw)
                                    for (var L = 0, C = f.Rw.length; L < C; L++)
                                        o.push({
                                            properties: f.properties,
                                            path: f.Rw[L],
                                            _id_: Util.getGuid("amap_")
                                        });
                                else if (1 == +f.type && f.Rw)
                                    for (h = f.n1,
                                    p = 0; p < f.Rw.length; p++)
                                        s.push({
                                            _id_: Util.getGuid("amap_"),
                                            properties: f.properties,
                                            path: f.Rw[p],
                                            lnglat: __spreadArrays(h[0][0])
                                        });
                                delete f.n1
                            }
                            t.polygons[e] = n,
                            t.polygonOut[e] = i,
                            t.polyhedrons[e] = a,
                            t.polylines[e] = o,
                            t.points[e] = s
                        }
                    delete t.layers
                }
                ,
                t.prototype.xw = function(t, e, r) {
                    if (void 0 === r && (r = !1),
                    !t || !t.$c || r) {
                        var n = new VectorTileSegements
                          , i = (t.Uc = n,
                        r || (t.$c = new PolylineBucket),
                        e.line.sourceLayer)
                          , a = t.polylines;
                        if (a)
                            for (var o in t.visible.line[i] = [],
                            a)
                                if (!i || i === o)
                                    for (var u = a[o], f = 0, c = u.length; f < c; f++) {
                                        var h, l = u[f], v = (d = this.Mn(e.line, l.properties)).color, g = d.lineWidth, y = d.dash, d = +(d.visible || !d.filter);
                                        t.visible.line[i] || (t.visible.line[i] = []),
                                        d && t.visible.line[i].push(l._id_),
                                        v[3] *= d,
                                        r ? n.add(v + ":" + g + ":" + y, 0, l.a1, 0, 22) : (h = (d = t.$c.g0(l.path, {
                                            X_: 0,
                                            lineJoin: "round",
                                            lineCap: "butt"
                                        })).Iw,
                                        d = d.distance,
                                        0 < h && (l.a1 = h,
                                        n.add(v + ":" + g + ":" + y, 0, h, 0, 22),
                                        l.distance = d))
                                    }
                    }
                }
                ,
                t.prototype.zw = function(t, e, r) {
                    if (void 0 === r && (r = !1),
                    !t || !t.Dc || r) {
                        var n = new VectorTileSegements
                          , i = (t.Oc = n,
                        new VectorTileSegements)
                          , a = (t.Fc = i,
                        r || (t.Dc = new PolygonBucket,
                        t.pX = new PolylineBucket),
                        e.polygon.sourceLayer)
                          , o = t.polygons;
                        if (o) {
                            for (var s in o)
                                if (!a || a === s)
                                    for (var u = 0, f = (v = o[s]).length; u < f; u++) {
                                        var c, h = v[u], l = +((g = this.Mn(e.polygon, h.properties)).visible || !g.filter);
                                        g.color[3] *= l,
                                        r ? n.add(g.color + "", 0, h.a1, 0, 22) : 0 < (c = t.Dc.Nx(h.path, h.LQ)) && (h.a1 = c,
                                        n.add(g.color + "", 0, c, 0, 22))
                                    }
                            var d = t.polygonOut;
                            for (s in d)
                                if (!a || a === s)
                                    for (var v, u = 0, f = (v = d[s]).length; u < f; u++) {
                                        var g, y, p, m = v[u], l = +((g = this.Mn(e.polygon, m.properties)).visible || !g.filter);
                                        t.visible.polygon[a] || (t.visible.polygon[a] = []),
                                        l && t.visible.polygon[a].push(m._id_),
                                        g.borderWidth *= l,
                                        r ? i.add(g.borderColor + ":" + g.dash + ":" + g.borderWidth, 0, m.a1, 0, 22) : (y = (p = t.pX.g0(m.path, {
                                            X_: 0,
                                            lineJoin: "round",
                                            lineCap: "butt"
                                        })).Iw,
                                        p = p.distance,
                                        0 < y && (m.a1 = y,
                                        i.add(g.borderColor + ":" + g.dash + ":" + g.borderWidth, 0, y, 0, 22),
                                        m.distance = p))
                                    }
                        }
                    }
                }
                ,
                t.prototype.nz = function(t, e, r) {
                    if (void 0 === r && (r = !1),
                    !t || !t.A_ || r) {
                        var n = new NebulaSegements
                          , i = (t.w0 = n,
                        r || (t.A_ = new FillExtrusionBucket),
                        e.polyhedron.sourceLayer)
                          , a = t.polyhedrons;
                        if (a)
                            for (var o in t.visible.polyhedron[i] = [],
                            a)
                                if (!i || i === o)
                                    for (var u = a[o], f = 0, c = u.length; f < c; f++) {
                                        var h = u[f]
                                          , l = h.properties
                                          , d = +((l = this.Mn(e.polyhedron, void 0 === l ? {} : l)).visible || !l.filter);
                                        t.visible.polyhedron[i] || (t.visible.polyhedron[i] = []),
                                        d ? t.visible.polyhedron[i].push(h._id_) : (l.topColor = undefined,
                                        l.sideColor = undefined,
                                        l.texture = ""),
                                        r ? n.add(h._id_, 1e3, h.a1, 0, 22, l.texture, l.topColor, l.sideColor) : 0 < (d = t.A_.tz(h.path, h.height, h.LQ)) && (h.a1 = d,
                                        n.add(h._id_, 1e3, d, 0, 22, l.texture, l.topColor, l.sideColor))
                                    }
                    }
                }
                ,
                t.prototype.SX = function(t, e, r) {
                    if (void 0 === r && (r = !1),
                    !t || !t.dX || r) {
                        var n = t.IX
                          , n = new VectorTileSegements
                          , i = (t.IX = n,
                        t.dX = new CircleBucket,
                        e.point.sourceLayer)
                          , a = t.points;
                        if (a)
                            for (var o in t.visible.point[i] = [],
                            a)
                                if (!i || i === o)
                                    for (var u = a[o], f = 0, c = u.length; f < c; f++) {
                                        var h = u[f]
                                          , l = this.Mn(e.point, h.properties);
                                        t.visible.point[i] || (t.visible.point[i] = []),
                                        t.visible.point[i].push(h._id_),
                                        0 < (h = t.dX.wb(h.path[0], l)) && n.add("point", 0, h, 0, 22)
                                    }
                    }
                }
                ,
                t.prototype.i1 = function(t, e, r) {
                    if (void 0 === r && (r = !1),
                    !t || !t.labels || r) {
                        t.labels = [];
                        var n = e.label.sourceLayer
                          , i = (t.visible.label[n] = [],
                        t.points[n]);
                        if (i)
                            for (var a = 0, o = i.length; a < o; a++) {
                                var s = i[a]
                                  , f = (u = this.g8t(s)).height
                                  , u = u.w8t
                                  , c = this.Mn(e.label, s.properties);
                                t.visible.label[n].push(s._id_),
                                t.labels.push(exports.Ln(exports.Ln({}, c), {
                                    position: u ? __spreadArrays(s.lnglat, [f + 1]) : s.lnglat
                                }))
                            }
                    }
                }
                ,
                t.prototype.Mn = function(t, e) {
                    var r, n = {
                        visible: !0,
                        filter: !0
                    };
                    for (r in t) {
                        var i = t[r];
                        n[r] = "style" === r || "icon" === r || "text" === r ? this.Mn(i, e) : "function" == typeof i ? i()(e, t.injection) : i,
                        -1 < r.toLowerCase().indexOf("color") && (n[r] = Util.color2RgbaArray(n[r])),
                        "filter" === r && (n.filter = this.$X(e, i))
                    }
                    return n
                }
                ,
                t.prototype.AX = function(t) {
                    var e, r = {};
                    for (e in t) {
                        var n = t[e];
                        n.indexOf && -1 < n.indexOf("function") ? (n = n.replace("function", "return function"),
                        r[e] = new Function(n)) : r[e] = "style" === e || "icon" === e || "text" === e ? this.AX(n) : n
                    }
                    return r
                }
                ,
                t.prototype.$X = function(t, e) {
                    if (e) {
                        var r = e[0]
                          , n = e[2]
                          , i = t[r];
                        switch (e[1]) {
                        case "in":
                            return -1 < n.indexOf(i);
                        case "out":
                            return n.indexOf(i) < 0
                        }
                    }
                    return !0
                }
                ,
                t.prototype.d8t = function(t, e) {
                    var r = t.projectionId
                      , n = t.zS
                      , t = t.Ro
                      , i = ProjectionManager.getProjection(r)
                      , r = t[0]
                      , a = t[1]
                      , o = t[2]
                      , t = t[3]
                      , r = __spreadArrays(i.unproject(r, a), i.unproject(o, t))
                      , s = null == (a = bboxClip(polygon([e]), r).geometry) ? void 0 : a.coordinates[0];
                    if (!s)
                        return s;
                    for (var u = [], f = 0; f < s.length; f++) {
                        var c = s[f]
                          , c = i.project(c[0], c[1]);
                        u.push([c[0] - n.center[0], c[1] - n.center[1]])
                    }
                    return u
                }
                ,
                t.prototype.g8t = function(t) {
                    var e = "Y" === (t = t.properties || {})._AS_CUBE && t._HEIGHT_PROP
                      , t = e ? +t[t._HEIGHT_PROP] : 0;
                    return {
                        w8t: e,
                        height: t = Number.isNaN(t) || t < 0 ? 0 : t
                    }
                }
                ,
                t
            }()
              , read = function(t, e, r, n, i) {
                var a, o, s = 8 * i - n - 1, u = (1 << s) - 1, f = u >> 1, c = -7, h = r ? i - 1 : 0, l = r ? -1 : 1, i = t[e + h];
                for (h += l,
                a = i & (1 << -c) - 1,
                i >>= -c,
                c += s; 0 < c; a = 256 * a + t[e + h],
                h += l,
                c -= 8)
                    ;
                for (o = a & (1 << -c) - 1,
                a >>= -c,
                c += n; 0 < c; o = 256 * o + t[e + h],
                h += l,
                c -= 8)
                    ;
                if (0 === a)
                    a = 1 - f;
                else {
                    if (a === u)
                        return o ? NaN : (i ? -1 : 1) * Infinity;
                    o += Math.pow(2, n),
                    a -= f
                }
                return (i ? -1 : 1) * o * Math.pow(2, a - n)
            }
              , write = function(t, e, r, n, i, a) {
                var o, s, u = 8 * a - i - 1, f = (1 << u) - 1, c = f >> 1, h = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0, l = n ? 0 : a - 1, d = n ? 1 : -1, a = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
                for (e = Math.abs(e),
                isNaN(e) || e === Infinity ? (s = isNaN(e) ? 1 : 0,
                o = f) : (o = Math.floor(Math.log(e) / Math.LN2),
                e * (n = Math.pow(2, -o)) < 1 && (o--,
                n *= 2),
                2 <= (e += 1 <= o + c ? h / n : h * Math.pow(2, 1 - c)) * n && (o++,
                n /= 2),
                f <= o + c ? (s = 0,
                o = f) : 1 <= o + c ? (s = (e * n - 1) * Math.pow(2, i),
                o += c) : (s = e * Math.pow(2, c - 1) * Math.pow(2, i),
                o = 0)); 8 <= i; t[r + l] = 255 & s,
                l += d,
                s /= 256,
                i -= 8)
                    ;
                for (o = o << i | s,
                u += i; 0 < u; t[r + l] = 255 & o,
                l += d,
                o /= 256,
                u -= 8)
                    ;
                t[r + l - d] |= 128 * a
            }
              , ieee754 = {
                read: read,
                write: write
            }
              , pbf = Pbf$1;
            function Pbf$1(t) {
                this.gA = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0),
                this.pos = 0,
                this.type = 0,
                this.length = this.gA.length
            }
            Pbf$1.LA = 0,
            Pbf$1.PA = 1,
            Pbf$1.DA = 2,
            Pbf$1.RA = 5;
            var SHIFT_LEFT_32$1 = 4294967296
              , SHIFT_RIGHT_32$1 = 1 / SHIFT_LEFT_32$1
              , TEXT_DECODER_MIN_LENGTH = 12
              , utf8TextDecoder = "undefined" == typeof TextDecoder ? null : new TextDecoder("utf-8");
            function readVarintRemainder$1(t, e, r) {
                var n = r.gA
                  , i = n[r.pos++]
                  , a = (112 & i) >> 4;
                if (i < 128)
                    return toNum$1(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 3,
                i < 128)
                    return toNum$1(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 10,
                i < 128)
                    return toNum$1(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 17,
                i < 128)
                    return toNum$1(t, a, e);
                if (a |= (127 & (i = n[r.pos++])) << 24,
                i < 128)
                    return toNum$1(t, a, e);
                if (a |= (1 & (i = n[r.pos++])) << 31,
                i < 128)
                    return toNum$1(t, a, e);
                throw new Error("Expected varint not more than 10 bytes")
            }
            function readPackedEnd$1(t) {
                return t.type === Pbf$1.DA ? t.ow() + t.pos : t.pos + 1
            }
            function toNum$1(t, e, r) {
                return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0)
            }
            function writeBigVarint$1(t, e) {
                var r, n;
                if (0 <= t ? (r = t % 4294967296 | 0,
                n = t / 4294967296 | 0) : (n = ~(-t / 4294967296),
                4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : n = n + 1 | (r = 0)),
                0x10000000000000000 <= t || t < -0x10000000000000000)
                    throw new Error("Given varint doesn't fit into 10 bytes");
                e.zA(10),
                writeBigVarintLow$1(r, n, e),
                writeBigVarintHigh$1(n, e)
            }
            function writeBigVarintLow$1(t, e, r) {
                r.gA[r.pos++] = 127 & t | 128,
                t >>>= 7,
                r.gA[r.pos++] = 127 & t | 128,
                t >>>= 7,
                r.gA[r.pos++] = 127 & t | 128,
                t >>>= 7,
                r.gA[r.pos++] = 127 & t | 128,
                r.gA[r.pos] = 127 & (t >>>= 7)
            }
            function writeBigVarintHigh$1(t, e) {
                var r = (7 & t) << 4;
                e.gA[e.pos++] |= r | ((t >>>= 3) ? 128 : 0),
                t && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0),
                t) && (e.gA[e.pos++] = 127 & t)
            }
            function makeRoomForExtraLength$1(t, e, r) {
                var n = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.floor(Math.log(e) / (7 * Math.LN2));
                r.zA(n);
                for (var i = r.pos - 1; t <= i; i--)
                    r.gA[i + n] = r.gA[i]
            }
            function writePackedVarint$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.BA(t[r])
            }
            function writePackedSVarint$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.VA(t[r])
            }
            function writePackedFloat$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.KA(t[r])
            }
            function writePackedDouble$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.JA(t[r])
            }
            function writePackedBoolean$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.$A(t[r])
            }
            function writePackedFixed32$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.qA(t[r])
            }
            function writePackedSFixed32$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.WA(t[r])
            }
            function writePackedFixed64$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.GA(t[r])
            }
            function writePackedSFixed64$1(t, e) {
                for (var r = 0; r < t.length; r++)
                    e.HA(t[r])
            }
            function readUInt32$1(t, e) {
                return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3]
            }
            function writeInt32$1(t, e, r) {
                t[r] = e,
                t[r + 1] = e >>> 8,
                t[r + 2] = e >>> 16,
                t[r + 3] = e >>> 24
            }
            function readInt32$1(t, e) {
                return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24)
            }
            function readUtf8$1(t, e, r) {
                for (var n = "", i = e; i < r; ) {
                    var a, o, s, u = t[i], f = null, c = 239 < u ? 4 : 223 < u ? 3 : 191 < u ? 2 : 1;
                    if (r < i + c)
                        break;
                    1 === c ? u < 128 && (f = u) : 2 === c ? 128 == (192 & (a = t[i + 1])) && (f = (31 & u) << 6 | 63 & a) <= 127 && (f = null) : 3 === c ? (a = t[i + 1],
                    o = t[i + 2],
                    128 == (192 & a) && 128 == (192 & o) && ((f = (15 & u) << 12 | (63 & a) << 6 | 63 & o) <= 2047 || 55296 <= f && f <= 57343) && (f = null)) : 4 === c && (a = t[i + 1],
                    o = t[i + 2],
                    s = t[i + 3],
                    128 == (192 & a)) && 128 == (192 & o) && 128 == (192 & s) && ((f = (15 & u) << 18 | (63 & a) << 12 | (63 & o) << 6 | 63 & s) <= 65535 || 1114112 <= f) && (f = null),
                    null === f ? (f = 65533,
                    c = 1) : 65535 < f && (f -= 65536,
                    n += String.fromCharCode(f >>> 10 & 1023 | 55296),
                    f = 56320 | 1023 & f),
                    n += String.fromCharCode(f),
                    i += c
                }
                return n
            }
            function readUtf8TextDecoder(t, e, r) {
                return utf8TextDecoder.decode(t.subarray(e, r))
            }
            function writeUtf8$1(t, e, r) {
                for (var n, i, a = 0; a < e.length; a++) {
                    if (55295 < (n = e.charCodeAt(a)) && n < 57344) {
                        if (!i) {
                            56319 < n || a + 1 === e.length ? (t[r++] = 239,
                            t[r++] = 191,
                            t[r++] = 189) : i = n;
                            continue
                        }
                        if (n < 56320) {
                            t[r++] = 239,
                            t[r++] = 191,
                            t[r++] = 189,
                            i = n;
                            continue
                        }
                        n = i - 55296 << 10 | n - 56320 | 65536,
                        i = null
                    } else
                        i && (t[r++] = 239,
                        t[r++] = 191,
                        t[r++] = 189,
                        i = null);
                    n < 128 ? t[r++] = n : (n < 2048 ? t[r++] = n >> 6 | 192 : (n < 65536 ? t[r++] = n >> 12 | 224 : (t[r++] = n >> 18 | 240,
                    t[r++] = n >> 12 & 63 | 128),
                    t[r++] = n >> 6 & 63 | 128),
                    t[r++] = 63 & n | 128)
                }
                return r
            }
            Pbf$1.prototype = {
                destroy: function() {
                    this.gA = null
                },
                nw: function(t, e, r) {
                    for (r = r || this.length; this.pos < r; ) {
                        var n = this.ow()
                          , i = n >> 3
                          , a = this.pos;
                        this.type = 7 & n,
                        t(i, e, this),
                        this.pos === a && this.wA(n)
                    }
                    return e
                },
                MA: function(t, e) {
                    return this.nw(t, e, this.ow() + this.pos)
                },
                jA: function() {
                    var t = readUInt32$1(this.gA, this.pos);
                    return this.pos += 4,
                    t
                },
                AA: function() {
                    var t = readInt32$1(this.gA, this.pos);
                    return this.pos += 4,
                    t
                },
                kA: function() {
                    var t = readUInt32$1(this.gA, this.pos) + readUInt32$1(this.gA, this.pos + 4) * SHIFT_LEFT_32$1;
                    return this.pos += 8,
                    t
                },
                OA: function() {
                    var t = readUInt32$1(this.gA, this.pos) + readInt32$1(this.gA, this.pos + 4) * SHIFT_LEFT_32$1;
                    return this.pos += 8,
                    t
                },
                pA: function() {
                    var t = ieee754.read(this.gA, this.pos, !0, 23, 4);
                    return this.pos += 4,
                    t
                },
                yA: function() {
                    var t = ieee754.read(this.gA, this.pos, !0, 52, 8);
                    return this.pos += 8,
                    t
                },
                ow: function(t) {
                    var e = this.gA
                      , r = e[this.pos++]
                      , n = 127 & r;
                    return r < 128 || (n |= (127 & (r = e[this.pos++])) << 7,
                    r < 128) || (n |= (127 & (r = e[this.pos++])) << 14,
                    r < 128) || (n |= (127 & (r = e[this.pos++])) << 21,
                    r < 128) ? n : readVarintRemainder$1(n |= (15 & e[this.pos]) << 28, t, this)
                },
                mA: function() {
                    return this.ow(!0)
                },
                lA: function() {
                    var t = this.ow();
                    return t % 2 == 1 ? (t + 1) / -2 : t / 2
                },
                vw: function() {
                    return Boolean(this.ow())
                },
                aw: function() {
                    var t = this.ow() + this.pos
                      , e = this.pos;
                    return this.pos = t,
                    (TEXT_DECODER_MIN_LENGTH <= t - e && utf8TextDecoder ? readUtf8TextDecoder : readUtf8$1)(this.gA, e, t)
                },
                mw: function() {
                    var t = this.ow() + this.pos
                      , e = this.gA.subarray(this.pos, t);
                    return this.pos = t,
                    e
                },
                tw: function(t, e) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.ow(e));
                    var r = readPackedEnd$1(this);
                    for (t = t || []; this.pos < r; )
                        t.push(this.ow(e));
                    return t
                },
                IA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.lA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.lA());
                    return t
                },
                TA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.vw());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.vw());
                    return t
                },
                FA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.pA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.pA());
                    return t
                },
                _A: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.yA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.yA());
                    return t
                },
                SA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.jA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.jA());
                    return t
                },
                CA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.AA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.AA());
                    return t
                },
                EA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.kA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.kA());
                    return t
                },
                NA: function(t) {
                    if (this.type !== Pbf$1.DA)
                        return t.push(this.OA());
                    var e = readPackedEnd$1(this);
                    for (t = t || []; this.pos < e; )
                        t.push(this.OA());
                    return t
                },
                wA: function(t) {
                    if ((t &= 7) === Pbf$1.LA)
                        for (; 127 < this.gA[this.pos++]; )
                            ;
                    else if (t === Pbf$1.DA)
                        this.pos = this.ow() + this.pos;
                    else if (t === Pbf$1.RA)
                        this.pos += 4;
                    else {
                        if (t !== Pbf$1.PA)
                            throw new Error("Unimplemented type: " + t);
                        this.pos += 8
                    }
                },
                UA: function(t, e) {
                    this.BA(t << 3 | e)
                },
                zA: function(t) {
                    for (var e, r = this.length || 16; r < this.pos + t; )
                        r *= 2;
                    r !== this.length && ((e = new Uint8Array(r)).set(this.gA),
                    this.gA = e,
                    this.length = r)
                },
                finish: function() {
                    return this.length = this.pos,
                    this.pos = 0,
                    this.gA.subarray(0, this.length)
                },
                qA: function(t) {
                    this.zA(4),
                    writeInt32$1(this.gA, t, this.pos),
                    this.pos += 4
                },
                WA: function(t) {
                    this.zA(4),
                    writeInt32$1(this.gA, t, this.pos),
                    this.pos += 4
                },
                GA: function(t) {
                    this.zA(8),
                    writeInt32$1(this.gA, -1 & t, this.pos),
                    writeInt32$1(this.gA, Math.floor(t * SHIFT_RIGHT_32$1), this.pos + 4),
                    this.pos += 8
                },
                HA: function(t) {
                    this.zA(8),
                    writeInt32$1(this.gA, -1 & t, this.pos),
                    writeInt32$1(this.gA, Math.floor(t * SHIFT_RIGHT_32$1), this.pos + 4),
                    this.pos += 8
                },
                BA: function(t) {
                    268435455 < (t = +t || 0) || t < 0 ? writeBigVarint$1(t, this) : (this.zA(4),
                    this.gA[this.pos++] = 127 & t | (127 < t ? 128 : 0),
                    t <= 127 || (this.gA[this.pos++] = 127 & (t >>>= 7) | (127 < t ? 128 : 0),
                    t <= 127) || (this.gA[this.pos++] = 127 & (t >>>= 7) | (127 < t ? 128 : 0),
                    t <= 127) || (this.gA[this.pos++] = t >>> 7 & 127))
                },
                VA: function(t) {
                    this.BA(t < 0 ? 2 * -t - 1 : 2 * t)
                },
                $A: function(t) {
                    this.BA(Boolean(t))
                },
                YA: function(t) {
                    t = String(t),
                    this.zA(4 * t.length),
                    this.pos++;
                    var e = this.pos;
                    this.pos = writeUtf8$1(this.gA, t, this.pos),
                    128 <= (t = this.pos - e) && makeRoomForExtraLength$1(e, t, this),
                    this.pos = e - 1,
                    this.BA(t),
                    this.pos += t
                },
                KA: function(t) {
                    this.zA(4),
                    ieee754.write(this.gA, t, this.pos, !0, 23, 4),
                    this.pos += 4
                },
                JA: function(t) {
                    this.zA(8),
                    ieee754.write(this.gA, t, this.pos, !0, 52, 8),
                    this.pos += 8
                },
                ZA: function(t) {
                    var e = t.length;
                    this.BA(e),
                    this.zA(e);
                    for (var r = 0; r < e; r++)
                        this.gA[this.pos++] = t[r]
                },
                QA: function(t, e) {
                    this.pos++;
                    var r = this.pos;
                    t(e, this),
                    128 <= (e = this.pos - r) && makeRoomForExtraLength$1(r, e, this),
                    this.pos = r - 1,
                    this.BA(e),
                    this.pos += e
                },
                fw: function(t, e, r) {
                    this.UA(t, Pbf$1.DA),
                    this.QA(e, r)
                },
                tk: function(t, e) {
                    e.length && this.fw(t, writePackedVarint$1, e)
                },
                rk: function(t, e) {
                    e.length && this.fw(t, writePackedSVarint$1, e)
                },
                nk: function(t, e) {
                    e.length && this.fw(t, writePackedBoolean$1, e)
                },
                ik: function(t, e) {
                    e.length && this.fw(t, writePackedFloat$1, e)
                },
                ek: function(t, e) {
                    e.length && this.fw(t, writePackedDouble$1, e)
                },
                ak: function(t, e) {
                    e.length && this.fw(t, writePackedFixed32$1, e)
                },
                uk: function(t, e) {
                    e.length && this.fw(t, writePackedSFixed32$1, e)
                },
                sk: function(t, e) {
                    e.length && this.fw(t, writePackedFixed64$1, e)
                },
                fk: function(t, e) {
                    e.length && this.fw(t, writePackedSFixed64$1, e)
                },
                ww: function(t, e) {
                    this.UA(t, Pbf$1.DA),
                    this.ZA(e)
                },
                hk: function(t, e) {
                    this.UA(t, Pbf$1.RA),
                    this.qA(e)
                },
                ck: function(t, e) {
                    this.UA(t, Pbf$1.RA),
                    this.WA(e)
                },
                vk: function(t, e) {
                    this.UA(t, Pbf$1.PA),
                    this.GA(e)
                },
                lk: function(t, e) {
                    this.UA(t, Pbf$1.PA),
                    this.HA(e)
                },
                rw: function(t, e) {
                    this.UA(t, Pbf$1.LA),
                    this.BA(e)
                },
                dk: function(t, e) {
                    this.UA(t, Pbf$1.LA),
                    this.VA(e)
                },
                uw: function(t, e) {
                    this.UA(t, Pbf$1.DA),
                    this.YA(e)
                },
                bk: function(t, e) {
                    this.UA(t, Pbf$1.RA),
                    this.KA(e)
                },
                pk: function(t, e) {
                    this.UA(t, Pbf$1.PA),
                    this.JA(e)
                },
                hw: function(t, e) {
                    this.rw(t, Boolean(e))
                }
            };
            var BuildingSameStyle = {
                read: function(t, e) {
                    return t.nw(BuildingSameStyle.IQ, {
                        mainKey: 55001,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(ShapeFeatureMulti.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 55001 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, ShapeFeatureMulti.write, t.items[r])
                }
            }, BuildingLayer = {
                read: function(t, e) {
                    return t.nw(BuildingLayer.IQ, {
                        buildings: [],
                        Pii: "",
                        tile_region: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.buildings.push(BuildingSameStyle.read(r, r.ow() + r.pos)) : 2 === t ? e.Pii = r.aw() : 3 === t && (e.tile_region = r.aw())
                },
                write: function(t, e) {
                    if (t.buildings)
                        for (var r = 0; r < t.buildings.length; r++)
                            e.fw(1, BuildingSameStyle.write, t.buildings[r]);
                    t.Pii && e.uw(2, t.Pii),
                    t.tile_region && e.uw(3, t.tile_region)
                }
            }, Language = {
                read: function(t, e) {
                    return t.nw(Language.IQ, {
                        name: "",
                        lang: "",
                        $ii: [],
                        Mii: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.name = r.aw() : 2 === t ? e.lang = r.aw() : 3 === t ? r.tw(e.$ii) : 4 === t && r.tw(e.Mii)
                },
                write: function(t, e) {
                    if (t.name && e.uw(1, t.name),
                    t.lang && e.uw(2, t.lang),
                    t.$ii)
                        for (var r = 0; r < t.$ii.length; r++)
                            e.rw(3, t.$ii[r]);
                    if (t.Mii)
                        for (r = 0; r < t.Mii.length; r++)
                            e.rw(4, t.Mii[r])
                }
            }, ShapeFeature = {
                read: function(t, e) {
                    return t.nw(ShapeFeature.IQ, {
                        nameLoc: [],
                        rank: 0,
                        polygon: [],
                        uid: 1,
                        mainBuildingHeight: 6,
                        bz: "",
                        nameEng: [],
                        nameMulti: [],
                        nameZh: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.nameLoc.push(Language.read(r, r.ow() + r.pos)) : 2 === t ? e.rank = r.ow() : 3 === t ? r.IA(e.polygon) : 4 === t ? e.uid = r.ow() : 5 === t ? e.mainBuildingHeight = r.ow(!0) : 6 === t ? e.bz = r.aw() : 7 === t ? e.nameEng.push(Language.read(r, r.ow() + r.pos)) : 8 === t ? e.nameMulti.push(Language.read(r, r.ow() + r.pos)) : 9 === t && e.nameZh.push(Language.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.nameLoc)
                        for (var r = 0; r < t.nameLoc.length; r++)
                            e.fw(1, Language.write, t.nameLoc[r]);
                    if (t.rank && e.rw(2, t.rank),
                    t.polygon && e.rk(3, t.polygon),
                    t.uid !== undefined && 1 !== t.uid && e.rw(4, t.uid),
                    t.mainBuildingHeight !== undefined && 6 !== t.mainBuildingHeight && e.rw(5, t.mainBuildingHeight),
                    t.bz && e.uw(6, t.bz),
                    t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(7, Language.write, t.nameEng[r]);
                    if (t.nameMulti)
                        for (r = 0; r < t.nameMulti.length; r++)
                            e.fw(8, Language.write, t.nameMulti[r]);
                    if (t.nameZh)
                        for (r = 0; r < t.nameZh.length; r++)
                            e.fw(9, Language.write, t.nameZh[r])
                }
            }, ShapeFeatureMulti = {
                read: function(t, e) {
                    return t.nw(ShapeFeatureMulti.IQ, {
                        minZoom: 15,
                        maxZoom: 30,
                        drawOrder: 0,
                        shapeFeatures: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.drawOrder = r.ow() : 4 === t && e.shapeFeatures.push(ShapeFeature.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 15 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.drawOrder && e.rw(3, t.drawOrder),
                    t.shapeFeatures)
                        for (var r = 0; r < t.shapeFeatures.length; r++)
                            e.fw(4, ShapeFeature.write, t.shapeFeatures[r])
                }
            }, PoiLayer = {
                read: function(t, e) {
                    return t.nw(PoiLayer.IQ, {
                        points: [],
                        Pii: "",
                        tile_region: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.points.push(PointFeatureSameStyle.read(r, r.ow() + r.pos)) : 2 === t ? e.Pii = r.aw() : 3 === t && (e.tile_region = r.aw())
                },
                write: function(t, e) {
                    if (t.points)
                        for (var r = 0; r < t.points.length; r++)
                            e.fw(1, PointFeatureSameStyle.write, t.points[r]);
                    t.Pii && e.uw(2, t.Pii),
                    t.tile_region && e.uw(3, t.tile_region)
                }
            }, Language$1 = {
                read: function(t, e) {
                    return t.nw(Language$1.IQ, {
                        name: "",
                        lang: "",
                        $ii: [],
                        Mii: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.name = r.aw() : 2 === t ? e.lang = r.aw() : 3 === t ? r.tw(e.$ii) : 4 === t && r.tw(e.Mii)
                },
                write: function(t, e) {
                    if (t.name && e.uw(1, t.name),
                    t.lang && e.uw(2, t.lang),
                    t.$ii)
                        for (var r = 0; r < t.$ii.length; r++)
                            e.rw(3, t.$ii[r]);
                    if (t.Mii)
                        for (r = 0; r < t.Mii.length; r++)
                            e.rw(4, t.Mii[r])
                }
            }, PointFeature = {
                read: function(t, e) {
                    return t.nw(PointFeature.IQ, {
                        nameLoc: [],
                        drawOrder: 0,
                        rti: "",
                        pos: [],
                        nameEng: [],
                        uid: 1,
                        nameMulti: [],
                        nameZh: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.nameLoc.push(Language$1.read(r, r.ow() + r.pos)) : 2 === t ? e.drawOrder = r.ow() : 3 === t ? e.rti = r.aw() : 4 === t ? r.tw(e.pos) : 5 === t ? e.nameEng.push(Language$1.read(r, r.ow() + r.pos)) : 6 === t ? e.uid = r.ow() : 7 === t ? e.nameMulti.push(Language$1.read(r, r.ow() + r.pos)) : 8 === t && e.nameZh.push(Language$1.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.nameLoc)
                        for (var r = 0; r < t.nameLoc.length; r++)
                            e.fw(1, Language$1.write, t.nameLoc[r]);
                    if (t.drawOrder && e.rw(2, t.drawOrder),
                    t.rti && e.uw(3, t.rti),
                    t.pos && e.tk(4, t.pos),
                    t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(5, Language$1.write, t.nameEng[r]);
                    if (t.uid !== undefined && 1 !== t.uid && e.rw(6, t.uid),
                    t.nameMulti)
                        for (r = 0; r < t.nameMulti.length; r++)
                            e.fw(7, Language$1.write, t.nameMulti[r]);
                    if (t.nameZh)
                        for (r = 0; r < t.nameZh.length; r++)
                            e.fw(8, Language$1.write, t.nameZh[r])
                }
            }, PointFeatureMulti = {
                read: function(t, e) {
                    return t.nw(PointFeatureMulti.IQ, {
                        minZoom: 18,
                        maxZoom: 30,
                        rank: 0,
                        E9t: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.rank = r.ow() : 4 === t && e.E9t.push(PointFeature.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 18 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.rank && e.rw(3, t.rank),
                    t.E9t)
                        for (var r = 0; r < t.E9t.length; r++)
                            e.fw(4, PointFeature.write, t.E9t[r])
                }
            }, PointFeatureSameStyle = {
                read: function(t, e) {
                    return t.nw(PointFeatureSameStyle.IQ, {
                        mainKey: 12024,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(PointFeatureMulti.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 12024 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, PointFeatureMulti.write, t.items[r])
                }
            }, RegionLayer = {
                read: function(t, e) {
                    return t.nw(RegionLayer.IQ, {
                        polygons: [],
                        lines: [],
                        Pii: "",
                        tile_region: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.polygons.push(PolygonFeatureSameStyle.read(r, r.ow() + r.pos)) : 2 === t ? e.lines.push(LineFeatureSameStyle.read(r, r.ow() + r.pos)) : 3 === t ? e.Pii = r.aw() : 4 === t && (e.tile_region = r.aw())
                },
                write: function(t, e) {
                    if (t.polygons)
                        for (var r = 0; r < t.polygons.length; r++)
                            e.fw(1, PolygonFeatureSameStyle.write, t.polygons[r]);
                    if (t.lines)
                        for (r = 0; r < t.lines.length; r++)
                            e.fw(2, LineFeatureSameStyle.write, t.lines[r]);
                    t.Pii && e.uw(3, t.Pii),
                    t.tile_region && e.uw(4, t.tile_region)
                }
            }, Language$2 = {
                read: function(t, e) {
                    return t.nw(Language$2.IQ, {
                        name: "",
                        lang: "",
                        $ii: [],
                        Mii: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.name = r.aw() : 2 === t ? e.lang = r.aw() : 3 === t ? r.tw(e.$ii) : 4 === t && r.tw(e.Mii)
                },
                write: function(t, e) {
                    if (t.name && e.uw(1, t.name),
                    t.lang && e.uw(2, t.lang),
                    t.$ii)
                        for (var r = 0; r < t.$ii.length; r++)
                            e.rw(3, t.$ii[r]);
                    if (t.Mii)
                        for (r = 0; r < t.Mii.length; r++)
                            e.rw(4, t.Mii[r])
                }
            }, LineFeature = {
                read: function(t, e) {
                    return t.nw(LineFeature.IQ, {
                        nameLoc: [],
                        rank: 0,
                        line: [],
                        nameEng: [],
                        uid: 1,
                        nameMulti: [],
                        nameZh: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.nameLoc.push(Language$2.read(r, r.ow() + r.pos)) : 2 === t ? e.rank = r.ow() : 3 === t ? r.IA(e.line) : 4 === t ? e.nameEng.push(Language$2.read(r, r.ow() + r.pos)) : 5 === t ? e.uid = r.ow() : 6 === t ? e.nameMulti.push(Language$2.read(r, r.ow() + r.pos)) : 7 === t && e.nameZh.push(Language$2.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.nameLoc)
                        for (var r = 0; r < t.nameLoc.length; r++)
                            e.fw(1, Language$2.write, t.nameLoc[r]);
                    if (t.rank && e.rw(2, t.rank),
                    t.line && e.rk(3, t.line),
                    t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(4, Language$2.write, t.nameEng[r]);
                    if (t.uid != undefined && 1 !== t.uid && e.rw(5, t.uid),
                    t.nameMulti)
                        for (r = 0; r < t.nameMulti.length; r++)
                            e.fw(6, Language$2.write, t.nameMulti[r]);
                    if (t.nameZh)
                        for (r = 0; r < t.nameZh.length; r++)
                            e.fw(7, Language$2.write, t.nameZh[r])
                }
            }, LineFeatureMulti = {
                read: function(t, e) {
                    return t.nw(LineFeatureMulti.IQ, {
                        minZoom: 2,
                        maxZoom: 30,
                        drawOrder: 0,
                        lineFeatures: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.drawOrder = r.ow() : 4 === t && e.lineFeatures.push(LineFeature.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 2 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.drawOrder && e.rw(3, t.drawOrder),
                    t.lineFeatures)
                        for (var r = 0; r < t.lineFeatures.length; r++)
                            e.fw(4, LineFeature.write, t.lineFeatures[r])
                }
            }, GeometryPolygon = {
                read: function(t, e) {
                    return t.nw(GeometryPolygon.IQ, {
                        polygon: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t && r.IA(e.polygon)
                },
                write: function(t, e) {
                    t.polygon && e.rk(1, t.polygon)
                }
            }, PolygonFeature = {
                read: function(t, e) {
                    return t.nw(PolygonFeature.IQ, {
                        minZoom: 2,
                        maxZoom: 30,
                        f6t: [],
                        drawOrder: 0,
                        rank: 0,
                        polygons: [],
                        nameEng: [],
                        uid: 1
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.f6t.push(Language$2.read(r, r.ow() + r.pos)) : 4 === t ? e.drawOrder = r.ow() : 5 === t ? e.rank = r.ow() : 6 === t ? e.polygons.push(GeometryPolygon.read(r, r.ow() + r.pos)) : 7 === t ? e.nameEng.push(Language$2.read(r, r.ow() + r.pos)) : 8 === t && (e.uid = r.ow())
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 2 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.f6t)
                        for (var r = 0; r < t.f6t.length; r++)
                            e.fw(3, Language$2.write, t.f6t[r]);
                    if (t.drawOrder && e.rw(4, t.drawOrder),
                    t.rank && e.rw(5, t.rank),
                    t.polygons)
                        for (r = 0; r < t.polygons.length; r++)
                            e.fw(6, GeometryPolygon.write, t.polygons[r]);
                    if (t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(7, Language$2.write, t.nameEng[r]);
                    t.uid !== undefined && 1 !== t.uid && e.rw(8, t.uid)
                }
            }, PolygonFeatureSameStyle = {
                read: function(t, e) {
                    return t.nw(PolygonFeatureSameStyle.IQ, {
                        mainKey: 30001,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(PolygonFeature.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 30001 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, PolygonFeature.write, t.items[r])
                }
            }, LineFeatureSameStyle = {
                read: function(t, e) {
                    return t.nw(LineFeatureSameStyle.IQ, {
                        mainKey: 20016,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(LineFeatureMulti.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 20016 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, LineFeatureMulti.write, t.items[r])
                }
            }, RoadLine = {
                read: function(t, e) {
                    return t.nw(RoadLine.IQ, {
                        nameLoc: [],
                        rank: 0,
                        shield: "",
                        shieldType: 0,
                        line: [],
                        nameEng: [],
                        uid: 1,
                        nameMulti: [],
                        nameZh: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.nameLoc.push(Language$3.read(r, r.ow() + r.pos)) : 2 === t ? e.rank = r.ow() : 3 === t ? e.shield = r.aw() : 4 === t ? e.shieldType = r.ow() : 5 === t ? r.IA(e.line) : 6 === t ? e.nameEng.push(Language$3.read(r, r.ow() + r.pos)) : 7 === t ? e.uid = r.ow() : 8 === t ? e.nameMulti.push(Language$3.read(r, r.ow() + r.pos)) : 9 === t && e.nameZh.push(Language$3.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.nameLoc)
                        for (var r = 0; r < t.nameLoc.length; r++)
                            e.fw(1, Language$3.write, t.nameLoc[r]);
                    if (t.rank && e.rw(2, t.rank),
                    t.shield && e.uw(3, t.shield),
                    t.shieldType && e.rw(4, t.shieldType),
                    t.line && e.rk(5, t.line),
                    t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(6, Language$3.write, t.nameEng[r]);
                    if (t.uid != undefined && 1 !== t.uid && e.rw(7, t.uid),
                    t.nameMulti)
                        for (r = 0; r < t.nameMulti.length; r++)
                            e.fw(8, Language$3.write, t.nameMulti[r]);
                    if (t.nameZh)
                        for (r = 0; r < t.nameZh.length; r++)
                            e.fw(9, Language$3.write, t.nameZh[r])
                }
            }, RoadLineMulti = {
                read: function(t, e) {
                    return t.nw(RoadLineMulti.IQ, {
                        minZoom: 2,
                        maxZoom: 30,
                        drawOrder: 0,
                        roadLines: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.drawOrder = r.ow() : 4 === t && e.roadLines.push(RoadLine.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 2 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.drawOrder && e.rw(3, t.drawOrder),
                    t.roadLines)
                        for (var r = 0; r < t.roadLines.length; r++)
                            e.fw(4, RoadLine.write, t.roadLines[r])
                }
            }, RoadLineSameStyle = {
                read: function(t, e) {
                    return t.nw(RoadLineSameStyle.IQ, {
                        mainKey: 20004,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(RoadLineMulti.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 20004 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, RoadLineMulti.write, t.items[r])
                }
            }, RoadLayer = {
                read: function(t, e) {
                    return t.nw(RoadLayer.IQ, {
                        roadLines: [],
                        Pii: "",
                        tile_region: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.roadLines.push(RoadLineSameStyle.read(r, r.ow() + r.pos)) : 2 === t ? e.Pii = r.aw() : 3 === t && (e.tile_region = r.aw())
                },
                write: function(t, e) {
                    if (t.roadLines)
                        for (var r = 0; r < t.roadLines.length; r++)
                            e.fw(1, RoadLineSameStyle.write, t.roadLines[r]);
                    t.Pii && e.uw(2, t.Pii),
                    t.tile_region && e.uw(3, t.tile_region)
                }
            }, Language$3 = {
                read: function(t, e) {
                    return t.nw(Language$3.IQ, {
                        name: "",
                        lang: "",
                        $ii: [],
                        Mii: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.name = r.aw() : 2 === t ? e.lang = r.aw() : 3 === t ? r.tw(e.$ii) : 4 === t && r.tw(e.Mii)
                },
                write: function(t, e) {
                    if (t.name && e.uw(1, t.name),
                    t.lang && e.uw(2, t.lang),
                    t.$ii)
                        for (var r = 0; r < t.$ii.length; r++)
                            e.rw(3, t.$ii[r]);
                    if (t.Mii)
                        for (r = 0; r < t.Mii.length; r++)
                            e.rw(4, t.Mii[r])
                }
            }, TransitLayer = {
                read: function(t, e) {
                    return t.nw(TransitLayer.IQ, {
                        lines: [],
                        points: [],
                        polygons: [],
                        Pii: "",
                        tile_region: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.lines.push(LineFeatureSameStyle$1.read(r, r.ow() + r.pos)) : 2 === t ? e.points.push(PointFeatureSameStyle$1.read(r, r.ow() + r.pos)) : 3 === t ? e.polygons.push(PolygonFeatureSameStyle$1.read(r, r.ow() + r.pos)) : 4 === t ? e.Pii = r.aw() : 5 === t && (e.tile_region = r.aw())
                },
                write: function(t, e) {
                    if (t.lines)
                        for (var r = 0; r < t.lines.length; r++)
                            e.fw(1, LineFeatureSameStyle$1.write, t.lines[r]);
                    if (t.points)
                        for (r = 0; r < t.points.length; r++)
                            e.fw(2, PointFeatureSameStyle$1.write, t.points[r]);
                    if (t.polygons)
                        for (r = 0; r < t.polygons.length; r++)
                            e.fw(3, PolygonFeatureSameStyle$1.write, t.polygons[r]);
                    t.Pii && e.uw(4, t.Pii),
                    t.tile_region && e.uw(5, t.tile_region)
                }
            }, Language$4 = {
                read: function(t, e) {
                    return t.nw(Language$4.IQ, {
                        name: "",
                        lang: "",
                        $ii: [],
                        Mii: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.name = r.aw() : 2 === t ? e.lang = r.aw() : 3 === t ? r.tw(e.$ii) : 4 === t && r.tw(e.Mii)
                },
                write: function(t, e) {
                    if (t.name && e.uw(1, t.name),
                    t.lang && e.uw(2, t.lang),
                    t.$ii)
                        for (var r = 0; r < t.$ii.length; r++)
                            e.rw(3, t.$ii[r]);
                    if (t.Mii)
                        for (r = 0; r < t.Mii.length; r++)
                            e.rw(4, t.Mii[r])
                }
            }, PointFeature$1 = {
                read: function(t, e) {
                    return t.nw(PointFeature$1.IQ, {
                        nameLoc: [],
                        drawOrder: 0,
                        rti: "",
                        pos: [],
                        nameEng: [],
                        uid: 1,
                        nameMulti: [],
                        nameZh: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.nameLoc.push(Language$4.read(r, r.ow() + r.pos)) : 2 === t ? e.drawOrder = r.ow() : 3 === t ? e.rti = r.aw() : 4 === t ? r.tw(e.pos) : 5 === t ? e.nameEng.push(Language$4.read(r, r.ow() + r.pos)) : 6 === t ? e.uid = r.ow() : 7 === t ? e.nameMulti.push(Language$4.read(r, r.ow() + r.pos)) : 8 === t && e.nameZh.push(Language$4.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.nameLoc)
                        for (var r = 0; r < t.nameLoc.length; r++)
                            e.fw(1, Language$4.write, t.nameLoc[r]);
                    if (t.drawOrder && e.rw(2, t.drawOrder),
                    t.rti && e.uw(3, t.rti),
                    t.pos && e.tk(4, t.pos),
                    t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(5, Language$4.write, t.nameEng[r]);
                    if (t.uid != undefined && 1 !== t.uid && e.rw(6, t.uid),
                    t.nameMulti)
                        for (r = 0; r < t.nameMulti.length; r++)
                            e.fw(7, Language$4.write, t.nameMulti[r]);
                    if (t.nameZh)
                        for (r = 0; r < t.nameZh.length; r++)
                            e.fw(8, Language$4.write, t.nameZh[r])
                }
            }, PointFeatureMulti$1 = {
                read: function(t, e) {
                    return t.nw(PointFeatureMulti$1.IQ, {
                        minZoom: 18,
                        maxZoom: 30,
                        rank: 0,
                        E9t: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.rank = r.ow() : 4 === t && e.E9t.push(PointFeature$1.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 18 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.rank && e.rw(3, t.rank),
                    t.E9t)
                        for (var r = 0; r < t.E9t.length; r++)
                            e.fw(4, PointFeature$1.write, t.E9t[r])
                }
            }, LineFeature$1 = {
                read: function(t, e) {
                    return t.nw(LineFeature$1.IQ, {
                        nameLoc: [],
                        rank: 0,
                        line: [],
                        nameEng: [],
                        uid: 1,
                        nameMulti: [],
                        nameZh: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.nameLoc.push(Language$4.read(r, r.ow() + r.pos)) : 2 === t ? e.rank = r.ow() : 3 === t ? r.IA(e.line) : 4 === t ? e.nameEng.push(Language$4.read(r, r.ow() + r.pos)) : 5 === t ? e.uid = r.ow() : 6 === t ? e.nameMulti.push(Language$4.read(r, r.ow() + r.pos)) : 7 === t && e.nameZh.push(Language$4.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.nameLoc)
                        for (var r = 0; r < t.nameLoc.length; r++)
                            e.fw(1, Language$4.write, t.nameLoc[r]);
                    if (t.rank && e.rw(2, t.rank),
                    t.line && e.rk(3, t.line),
                    t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(4, Language$4.write, t.nameEng[r]);
                    if (t.uid != undefined && 1 !== t.uid && e.rw(5, t.uid),
                    t.nameMulti)
                        for (r = 0; r < t.nameMulti.length; r++)
                            e.fw(6, Language$4.write, t.nameMulti[r]);
                    if (t.nameZh)
                        for (r = 0; r < t.nameZh.length; r++)
                            e.fw(7, Language$4.write, t.nameZh[r])
                }
            }, LineFeatureMulti$1 = {
                read: function(t, e) {
                    return t.nw(LineFeatureMulti$1.IQ, {
                        minZoom: 2,
                        maxZoom: 30,
                        drawOrder: 0,
                        lineFeatures: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.drawOrder = r.ow() : 4 === t && e.lineFeatures.push(LineFeature$1.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 2 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.drawOrder && e.rw(3, t.drawOrder),
                    t.lineFeatures)
                        for (var r = 0; r < t.lineFeatures.length; r++)
                            e.fw(4, LineFeature$1.write, t.lineFeatures[r])
                }
            }, GeometryPolygon$1 = {
                read: function(t, e) {
                    return t.nw(GeometryPolygon$1.IQ, {
                        polygon: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t && r.IA(e.polygon)
                },
                write: function(t, e) {
                    if (t.polygon)
                        for (var r = 0; r < t.polygon.length; r++)
                            e.dk(1, t.polygon[r])
                }
            }, PolygonFeature$1 = {
                read: function(t, e) {
                    return t.nw(PolygonFeature$1.IQ, {
                        minZoom: 2,
                        maxZoom: 30,
                        f6t: [],
                        drawOrder: 0,
                        rank: 0,
                        polygons: [],
                        nameEng: [],
                        uid: 1
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.minZoom = r.ow() : 2 === t ? e.maxZoom = r.ow() : 3 === t ? e.f6t.push(Language$4.read(r, r.ow() + r.pos)) : 4 === t ? e.drawOrder = r.ow() : 5 === t ? e.rank = r.ow() : 6 === t ? e.polygons.push(GeometryPolygon$1.read(r, r.ow() + r.pos)) : 7 === t ? e.nameEng.push(Language$4.read(r, r.ow() + r.pos)) : 8 === t && (e.uid = r.ow())
                },
                write: function(t, e) {
                    if (t.minZoom !== undefined && 2 !== t.minZoom && e.rw(1, t.minZoom),
                    t.maxZoom !== undefined && 30 !== t.maxZoom && e.rw(2, t.maxZoom),
                    t.f6t)
                        for (var r = 0; r < t.f6t.length; r++)
                            e.fw(3, Language$4.write, t.f6t[r]);
                    if (t.drawOrder && e.rw(4, t.drawOrder),
                    t.rank && e.rw(5, t.rank),
                    t.polygons)
                        for (r = 0; r < t.polygons.length; r++)
                            e.fw(6, GeometryPolygon$1.write, t.polygons[r]);
                    if (t.nameEng)
                        for (r = 0; r < t.nameEng.length; r++)
                            e.fw(7, Language$4.write, t.nameEng[r]);
                    t.uid !== undefined && 1 !== t.uid && e.rw(8, t.uid)
                }
            }, PolygonFeatureSameStyle$1 = {
                read: function(t, e) {
                    return t.nw(PolygonFeatureSameStyle$1.IQ, {
                        mainKey: 30001,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(PolygonFeature$1.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 30001 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, PolygonFeature$1.write, t.items[r])
                }
            }, LineFeatureSameStyle$1 = {
                read: function(t, e) {
                    return t.nw(LineFeatureSameStyle$1.IQ, {
                        mainKey: 20016,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(LineFeatureMulti$1.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 20016 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, LineFeatureMulti$1.write, t.items[r])
                }
            }, PointFeatureSameStyle$1 = {
                read: function(t, e) {
                    return t.nw(PointFeatureSameStyle$1.IQ, {
                        mainKey: 12024,
                        subKey: 1,
                        resolution: 12,
                        items: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow() : 2 === t ? e.subKey = r.ow() : 3 === t ? e.resolution = r.ow() : 4 === t && e.items.push(PointFeatureMulti$1.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.mainKey !== undefined && 12024 !== t.mainKey && e.rw(1, t.mainKey),
                    t.subKey !== undefined && 1 !== t.subKey && e.rw(2, t.subKey),
                    t.resolution !== undefined && 12 !== t.resolution && e.rw(3, t.resolution),
                    t.items)
                        for (var r = 0; r < t.items.length; r++)
                            e.fw(4, PointFeatureMulti$1.write, t.items[r])
                }
            }, Layer = {
                read: function(t, e) {
                    return t.nw(Layer.IQ, {
                        z: 0,
                        x: 0,
                        y: 0,
                        type: 0,
                        d: null,
                        Rti: "",
                        Sti: "",
                        kti: 0
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.z = r.ow() : 2 === t ? e.x = r.ow() : 3 === t ? e.y = r.ow() : 4 === t ? e.type = r.ow() : 5 === t ? e.d = r.mw() : 6 === t ? e.Rti = r.aw() : 7 === t ? e.Sti = r.aw() : 8 === t && (e.kti = r.lA())
                },
                write: function(t, e) {
                    t.z && e.rw(1, t.z),
                    t.x && e.rw(2, t.x),
                    t.y && e.rw(3, t.y),
                    t.type && e.rw(4, t.type),
                    t.d && e.ww(5, t.d),
                    t.Rti && e.uw(6, t.Rti),
                    t.Sti && e.uw(7, t.Sti),
                    t.kti && e.dk(8, t.kti)
                }
            }, Tile$1 = {
                read: function(t, e) {
                    return t.nw(Tile$1.IQ, {
                        z: 0,
                        x: 0,
                        y: 0,
                        layers: []
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.z = r.ow() : 2 === t ? e.x = r.ow() : 3 === t ? e.y = r.ow() : 4 === t && e.layers.push(Layer.read(r, r.ow() + r.pos))
                },
                write: function(t, e) {
                    if (t.z && e.rw(1, t.z),
                    t.x && e.rw(2, t.x),
                    t.y && e.rw(3, t.y),
                    t.layers)
                        for (var r = 0; r < t.layers.length; r++)
                            e.fw(4, Layer.write, t.layers[r])
                }
            }, Result = {
                read: function(t, e) {
                    return t.nw(Result.IQ, {
                        tiles: [],
                        version: "",
                        status: !1
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.tiles.push(Tile$1.read(r, r.ow() + r.pos)) : 2 === t ? e.version = r.aw() : 3 === t && (e.status = r.vw())
                },
                write: function(t, e) {
                    if (t.tiles)
                        for (var r = 0; r < t.tiles.length; r++)
                            e.fw(1, Tile$1.write, t.tiles[r]);
                    t.version && e.uw(2, t.version),
                    t.status && e.hw(3, t.status)
                }
            }, Poi = {
                read: function(t, e) {
                    return t.nw(Poi.IQ, {
                        f7t: 0,
                        styleColor: 0,
                        styleTextStrokeColor: 0,
                        W9t: 0,
                        iconIndex: 0,
                        d7t: 0,
                        g7t: 0,
                        v7t: 0,
                        styleHeight: 0,
                        styleWidth: 0,
                        q9t: 0,
                        y7t: 0,
                        m7t: 0,
                        p7t: 0,
                        b7t: 0,
                        w7t: 0,
                        flags: 0
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.f7t = r.ow(!0) : 2 === t ? e.styleColor = r.ow(!0) : 3 === t ? e.styleTextStrokeColor = r.ow(!0) : 4 === t ? e.W9t = r.ow(!0) : 5 === t ? e.iconIndex = r.ow(!0) : 6 === t ? e.d7t = r.ow(!0) : 7 === t ? e.g7t = r.ow(!0) : 8 === t ? e.v7t = r.ow(!0) : 9 === t ? e.styleHeight = r.ow(!0) : 10 === t ? e.styleWidth = r.ow(!0) : 11 === t ? e.q9t = r.ow(!0) : 12 === t ? e.y7t = r.ow(!0) : 13 === t ? e.m7t = r.ow(!0) : 14 === t ? e.p7t = r.ow(!0) : 15 === t ? e.b7t = r.ow(!0) : 16 === t ? e.w7t = r.ow(!0) : 17 === t && (e.flags = r.ow(!0))
                },
                write: function(t, e) {
                    t.f7t && e.rw(1, t.f7t),
                    t.styleColor && e.rw(2, t.styleColor),
                    t.styleTextStrokeColor && e.rw(3, t.styleTextStrokeColor),
                    t.W9t && e.rw(4, t.W9t),
                    t.iconIndex && e.rw(5, t.iconIndex),
                    t.d7t && e.rw(6, t.d7t),
                    t.g7t && e.rw(7, t.g7t),
                    t.v7t && e.rw(8, t.v7t),
                    t.styleHeight && e.rw(9, t.styleHeight),
                    t.styleWidth && e.rw(10, t.styleWidth),
                    t.q9t && e.rw(11, t.q9t),
                    t.y7t && e.rw(12, t.y7t),
                    t.m7t && e.rw(13, t.m7t),
                    t.p7t && e.rw(14, t.p7t),
                    t.b7t && e.rw(15, t.b7t),
                    t.w7t && e.rw(16, t.w7t),
                    t.flags && e.rw(17, t.flags)
                }
            }, Road = {
                read: function(t, e) {
                    return t.nw(Road.IQ, {
                        T7t: 0,
                        P7t: 0,
                        fillColor: 0,
                        strokeWidth: 0,
                        lineWidth: 0,
                        strokeColor: 0,
                        fontSize: 0,
                        Y9t: 0,
                        Z9t: 0
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.T7t = r.ow(!0) : 2 === t ? e.P7t = r.ow(!0) : 3 === t ? e.fillColor = r.ow(!0) : 4 === t ? e.strokeWidth = r.ow(!0) : 5 === t ? e.lineWidth = r.ow(!0) : 6 === t ? e.strokeColor = r.ow(!0) : 7 === t ? e.fontSize = r.ow(!0) : 8 === t ? e.Y9t = r.ow(!0) : 9 === t && (e.Z9t = r.ow(!0))
                },
                write: function(t, e) {
                    t.T7t && e.rw(1, t.T7t),
                    t.P7t && e.rw(2, t.P7t),
                    t.fillColor && e.rw(3, t.fillColor),
                    t.strokeWidth && e.rw(4, t.strokeWidth),
                    t.lineWidth && e.rw(5, t.lineWidth),
                    t.strokeColor && e.rw(6, t.strokeColor),
                    t.fontSize && e.rw(7, t.fontSize),
                    t.Y9t && e.rw(8, t.Y9t),
                    t.Z9t && e.rw(9, t.Z9t)
                }
            }, Region = {
                read: function(t, e) {
                    return t.nw(Region.IQ, {
                        fillColor: 0,
                        f5t: 0,
                        texture: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.fillColor = r.ow(!0) : 2 === t ? e.f5t = r.ow(!0) : 3 === t && (e.texture = r.aw())
                },
                write: function(t, e) {
                    t.fillColor && e.rw(1, t.fillColor),
                    t.f5t && e.rw(2, t.f5t),
                    t.texture && e.uw(3, t.texture)
                }
            }, Guide = {
                read: function(t, e) {
                    return t.nw(Guide.IQ, {
                        styleColor: 0,
                        f7t: 0,
                        q9t: 0,
                        y7t: 0,
                        m7t: 0,
                        p7t: 0,
                        b7t: 0
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.styleColor = r.ow(!0) : 2 === t ? e.f7t = r.ow(!0) : 3 === t ? e.q9t = r.ow(!0) : 4 === t ? e.y7t = r.ow(!0) : 5 === t ? e.m7t = r.ow(!0) : 6 === t ? e.p7t = r.ow(!0) : 7 === t && (e.b7t = r.ow(!0))
                },
                write: function(t, e) {
                    t.styleColor && e.rw(1, t.styleColor),
                    t.f7t && e.rw(2, t.f7t),
                    t.q9t && e.rw(3, t.q9t),
                    t.y7t && e.rw(4, t.y7t),
                    t.m7t && e.rw(5, t.m7t),
                    t.p7t && e.rw(6, t.p7t),
                    t.b7t && e.rw(7, t.b7t)
                }
            }, Building = {
                read: function(t, e) {
                    return t.nw(Building.IQ, {
                        roofColor: 0,
                        wallColor: 0,
                        f5t: 0,
                        texture: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.roofColor = r.ow(!0) : 2 === t ? e.wallColor = r.ow(!0) : 3 === t ? e.f5t = r.ow(!0) : 4 === t && (e.texture = r.aw())
                },
                write: function(t, e) {
                    t.roofColor && e.rw(1, t.roofColor),
                    t.wallColor && e.rw(2, t.wallColor),
                    t.f5t && e.rw(3, t.f5t),
                    t.texture && e.uw(4, t.texture)
                }
            }, Style = {
                read: function(t, e) {
                    return t.nw(Style.IQ, {
                        mainKey: 0,
                        subKey: 0,
                        minZoom: 0,
                        maxZoom: 0,
                        poi: null,
                        road: null,
                        region: null,
                        guide: null,
                        building: null,
                        fresh: !1,
                        kyt: !1
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.mainKey = r.ow(!0) : 2 === t ? e.subKey = r.ow(!0) : 3 === t ? e.minZoom = r.ow(!0) : 4 === t ? e.maxZoom = r.ow(!0) : 5 === t ? e.poi = Poi.read(r, r.ow() + r.pos) : 6 === t ? e.road = Road.read(r, r.ow() + r.pos) : 7 === t ? e.region = Region.read(r, r.ow() + r.pos) : 8 === t ? e.guide = Guide.read(r, r.ow() + r.pos) : 9 === t ? e.building = Building.read(r, r.ow() + r.pos) : 10 === t ? e.fresh = r.vw() : 11 === t && (e.kyt = r.vw())
                },
                write: function(t, e) {
                    t.mainKey && e.rw(1, t.mainKey),
                    t.subKey && e.rw(2, t.subKey),
                    t.minZoom && e.rw(3, t.minZoom),
                    t.maxZoom && e.rw(4, t.maxZoom),
                    t.poi && e.fw(5, Poi.write, t.poi),
                    t.road && e.fw(6, Road.write, t.road),
                    t.region && e.fw(7, Region.write, t.region),
                    t.guide && e.fw(8, Guide.write, t.guide),
                    t.building && e.fw(9, Building.write, t.building),
                    t.fresh && e.hw(10, t.fresh),
                    t.kyt && e.hw(11, t.kyt)
                }
            }, MapStyle = {
                read: function(t, e) {
                    return t.nw(MapStyle.IQ, {
                        styles: [],
                        version: "",
                        N9t: ""
                    }, e)
                },
                IQ: function(t, e, r) {
                    1 === t ? e.styles.push(Style.read(r, r.ow() + r.pos)) : 2 === t ? e.version = r.aw() : 3 === t && (e.N9t = r.aw())
                },
                write: function(t, e) {
                    if (t.styles)
                        for (var r = 0; r < t.styles.length; r++)
                            e.fw(1, Style.write, t.styles[r]);
                    t.version && e.uw(2, t.version),
                    t.N9t && e.uw(3, t.N9t)
                }
            }, pako_es5 = createCommonjsModule(function(t, e) {
                !function(t) {
                    function e(t) {
                        for (var e = t.length; 0 <= --e; )
                            t[e] = 0
                    }
                    var dt, vt, gt, W = 256, q = 286, Z = 30, y = 15, nt = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), it = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), at = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), ot = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), s = new Array(576), ut = (e(s),
                    new Array(60)), ft = (e(ut),
                    new Array(512)), ct = (e(ft),
                    new Array(256)), ht = (e(ct),
                    new Array(29)), lt = (e(ht),
                    new Array(Z));
                    function yt(t, e, r, n, i) {
                        this._ti = t,
                        this.Eti = e,
                        this.Tti = r,
                        this.Ati = n,
                        this.c1 = i,
                        this.Iti = t && t.length
                    }
                    function pt(t, e) {
                        this.Dti = t,
                        this.Oti = 0,
                        this.Mti = e
                    }
                    e(lt);
                    var ze, mt = function mt(t) {
                        return t < 256 ? ft[t] : ft[256 + (t >>> 7)]
                    }, bt = function bt(t, e) {
                        t.Nti[t.pending++] = 255 & e,
                        t.Nti[t.pending++] = e >>> 8 & 255
                    }, c = function c(t, e, r) {
                        t.Cti > 16 - r ? (t.Lti |= e << t.Cti & 65535,
                        bt(t, t.Lti),
                        t.Lti = e >> 16 - t.Cti,
                        t.Cti += r - 16) : (t.Lti |= e << t.Cti & 65535,
                        t.Cti += r)
                    }, h = function h(t, e, r) {
                        c(t, r[2 * e], r[2 * e + 1])
                    }, wt = function wt(t, e) {
                        for (var r = 0; r |= 1 & t,
                        t >>>= 1,
                        r <<= 1,
                        0 < --e; )
                            ;
                        return r >>> 1
                    }, At = function At(t) {
                        16 === t.Cti ? (bt(t, t.Lti),
                        t.Lti = 0,
                        t.Cti = 0) : 8 <= t.Cti && (t.Nti[t.pending++] = 255 & t.Lti,
                        t.Lti >>= 8,
                        t.Cti -= 8)
                    }, Tt = function Tt(t, e) {
                        for (var f, c, h, d, v, r = e.Dti, n = e.Oti, i = e.Mti._ti, a = e.Mti.Iti, o = e.Mti.Eti, s = e.Mti.Tti, u = e.Mti.c1, g = 0, l = 0; l <= y; l++)
                            t.$ti[l] = 0;
                        for (r[2 * t.Zti[t.Bti] + 1] = 0,
                        f = t.Bti + 1; f < 573; f++)
                            u < (l = r[2 * r[2 * (c = t.Zti[f]) + 1] + 1] + 1) && (l = u,
                            g++),
                            r[2 * c + 1] = l,
                            n < c || (t.$ti[l]++,
                            d = 0,
                            s <= c && (d = o[c - s]),
                            v = r[2 * c],
                            t.Hti += v * (l + d),
                            a && (t.Fti += v * (i[2 * c + 1] + d)));
                        if (0 !== g) {
                            do {
                                for (l = u - 1; 0 === t.$ti[l]; )
                                    l--
                            } while (t.$ti[l]--,
                            t.$ti[l + 1] += 2,
                            t.$ti[u]--,
                            0 < (g -= 2));
                            for (l = u; 0 !== l; l--)
                                for (c = t.$ti[l]; 0 !== c; )
                                    n < (h = t.Zti[--f]) || (r[2 * h + 1] !== l && (t.Hti += (l - r[2 * h + 1]) * r[2 * h],
                                    r[2 * h + 1] = l),
                                    c--)
                        }
                    }, St = function St(t, e, r) {
                        for (var o, n = new Array(16), i = 0, a = 1; a <= y; a++)
                            i = i + r[a - 1] << 1,
                            n[a] = i;
                        for (o = 0; o <= e; o++) {
                            var s = t[2 * o + 1];
                            0 !== s && (t[2 * o] = wt(n[s]++, s))
                        }
                    }, xt = function xt() {
                        for (var t, e, i, a = new Array(16), r = 0, n = 0; n < 28; n++)
                            for (ht[n] = r,
                            t = 0; t < 1 << nt[n]; t++)
                                ct[r++] = n;
                        for (ct[r - 1] = n,
                        n = i = 0; n < 16; n++)
                            for (lt[n] = i,
                            t = 0; t < 1 << it[n]; t++)
                                ft[i++] = n;
                        for (i >>= 7; n < Z; n++)
                            for (lt[n] = i << 7,
                            t = 0; t < 1 << it[n] - 7; t++)
                                ft[256 + i++] = n;
                        for (e = 0; e <= y; e++)
                            a[e] = 0;
                        for (t = 0; t <= 143; )
                            s[2 * t + 1] = 8,
                            t++,
                            a[8]++;
                        for (; t <= 255; )
                            s[2 * t + 1] = 9,
                            t++,
                            a[9]++;
                        for (; t <= 279; )
                            s[2 * t + 1] = 7,
                            t++,
                            a[7]++;
                        for (; t <= 287; )
                            s[2 * t + 1] = 8,
                            t++,
                            a[8]++;
                        for (St(s, 287, a),
                        t = 0; t < Z; t++)
                            ut[2 * t + 1] = 5,
                            ut[2 * t] = wt(t, 5);
                        dt = new yt(s,nt,257,q,y),
                        vt = new yt(ut,it,0,Z,y),
                        gt = new yt(new Array(0),at,0,19,7)
                    }, Mt = function Mt(t) {
                        for (var e = 0; e < q; e++)
                            t.Uti[2 * e] = 0;
                        for (e = 0; e < Z; e++)
                            t.Pti[2 * e] = 0;
                        for (e = 0; e < 19; e++)
                            t.zti[2 * e] = 0;
                        t.Uti[512] = 1,
                        t.Hti = t.Fti = 0,
                        t.Kti = t.matches = 0
                    }, Pt = function Pt(t) {
                        8 < t.Cti ? bt(t, t.Lti) : 0 < t.Cti && (t.Nti[t.pending++] = t.Lti),
                        t.Lti = 0,
                        t.Cti = 0
                    }, It = function It(t, e, r, n) {
                        var i = 2 * e
                          , a = 2 * r;
                        return t[i] < t[a] || t[i] === t[a] && n[e] <= n[r]
                    }, $t = function $t(t, e, r) {
                        for (var n = t.Zti[r], i = r << 1; i <= t.Wti && (i < t.Wti && It(e, t.Zti[i + 1], t.Zti[i], t.depth) && i++,
                        !It(e, n, t.Zti[i], t.depth)); )
                            t.Zti[r] = t.Zti[i],
                            r = i,
                            i <<= 1;
                        t.Zti[r] = n
                    }, kt = function kt(t, e, r) {
                        var n, i, o, s, a = 0;
                        if (0 !== t.Kti)
                            for (; n = 255 & t.Nti[t.Xti + a++],
                            n += (255 & t.Nti[t.Xti + a++]) << 8,
                            i = t.Nti[t.Xti + a++],
                            0 == n ? h(t, i, e) : (o = ct[i],
                            h(t, o + W + 1, e),
                            0 !== (s = nt[o]) && (i -= ht[o],
                            c(t, i, s)),
                            o = mt(--n),
                            h(t, o, r),
                            0 !== (s = it[o]) && (n -= lt[o],
                            c(t, n, s))),
                            a < t.Kti; )
                                ;
                        h(t, 256, e)
                    }, Lt = function Lt(t, e) {
                        var o, s, f, r = e.Dti, n = e.Mti._ti, i = e.Mti.Iti, a = e.Mti.Ati, u = -1;
                        for (t.Wti = 0,
                        t.Bti = 573,
                        o = 0; o < a; o++)
                            0 !== r[2 * o] ? (t.Zti[++t.Wti] = u = o,
                            t.depth[o] = 0) : r[2 * o + 1] = 0;
                        for (; t.Wti < 2; )
                            r[2 * (f = t.Zti[++t.Wti] = u < 2 ? ++u : 0)] = 1,
                            t.depth[f] = 0,
                            t.Hti--,
                            i && (t.Fti -= n[2 * f + 1]);
                        for (e.Oti = u,
                        o = t.Wti >> 1; 1 <= o; o--)
                            $t(t, r, o);
                        for (f = a; o = t.Zti[1],
                        t.Zti[1] = t.Zti[t.Wti--],
                        $t(t, r, 1),
                        s = t.Zti[1],
                        t.Zti[--t.Bti] = o,
                        t.Zti[--t.Bti] = s,
                        r[2 * f] = r[2 * o] + r[2 * s],
                        t.depth[f] = (t.depth[o] >= t.depth[s] ? t.depth[o] : t.depth[s]) + 1,
                        r[2 * o + 1] = r[2 * s + 1] = f,
                        t.Zti[1] = f++,
                        $t(t, r, 1),
                        2 <= t.Wti; )
                            ;
                        t.Zti[--t.Bti] = t.Zti[1],
                        Tt(t, e),
                        St(r, u, t.$ti)
                    }, Ct = function Ct(t, e, r) {
                        var n, a, i = -1, o = e[1], s = 0, u = 7, f = 4;
                        for (0 === o && (u = 138,
                        f = 3),
                        e[2 * (r + 1) + 1] = 65535,
                        n = 0; n <= r; n++)
                            a = o,
                            o = e[2 * (n + 1) + 1],
                            ++s < u && a === o || (s < f ? t.zti[2 * a] += s : 0 !== a ? (a !== i && t.zti[2 * a]++,
                            t.zti[32]++) : s <= 10 ? t.zti[34]++ : t.zti[36]++,
                            i = a,
                            f = (s = 0) === o ? (u = 138,
                            3) : a === o ? (u = 6,
                            3) : (u = 7,
                            4))
                    }, Nt = function Nt(t, e, r) {
                        var n, a, i = -1, o = e[1], s = 0, u = 7, f = 4;
                        for (0 === o && (u = 138,
                        f = 3),
                        n = 0; n <= r; n++)
                            if (a = o,
                            o = e[2 * (n + 1) + 1],
                            !(++s < u && a === o)) {
                                if (s < f)
                                    for (; h(t, a, t.zti),
                                    0 != --s; )
                                        ;
                                else
                                    0 !== a ? (a !== i && (h(t, a, t.zti),
                                    s--),
                                    h(t, 16, t.zti),
                                    c(t, s - 3, 2)) : s <= 10 ? (h(t, 17, t.zti),
                                    c(t, s - 3, 3)) : (h(t, 18, t.zti),
                                    c(t, s - 11, 7));
                                i = a,
                                f = (s = 0) === o ? (u = 138,
                                3) : a === o ? (u = 6,
                                3) : (u = 7,
                                4)
                            }
                    }, _t = function _t(t) {
                        var e;
                        for (Ct(t, t.Uti, t.Yti.Oti),
                        Ct(t, t.Pti, t.Gti.Oti),
                        Lt(t, t.jti),
                        e = 18; 3 <= e && 0 === t.zti[2 * ot[e] + 1]; e--)
                            ;
                        return t.Hti += 3 * (e + 1) + 5 + 5 + 4,
                        e
                    }, Ft = function Ft(t, e, r, n) {
                        var i;
                        for (c(t, e - 257, 5),
                        c(t, r - 1, 5),
                        c(t, n - 4, 4),
                        i = 0; i < n; i++)
                            c(t, t.zti[2 * ot[i] + 1], 3);
                        Nt(t, t.Uti, e - 1),
                        Nt(t, t.Pti, r - 1)
                    }, Ot = function Ot(t) {
                        for (var e = 4093624447, r = 0; r <= 31; r++,
                        e >>>= 1)
                            if (1 & e && 0 !== t.Uti[2 * r])
                                return 0;
                        if (0 !== t.Uti[18] || 0 !== t.Uti[20] || 0 !== t.Uti[26])
                            return 1;
                        for (r = 32; r < W; r++)
                            if (0 !== t.Uti[2 * r])
                                return 1;
                        return 0
                    }, Et = !1, jt = function te(t, e, r, n) {
                        c(t, 0 + (n ? 1 : 0), 3),
                        Pt(t),
                        bt(t, r),
                        bt(t, ~r),
                        r && t.Nti.set(t.window.subarray(e, e + r), t.pending),
                        t.pending += r
                    }, qt_iei = function Qt(t) {
                        Et || (xt(),
                        Et = !0),
                        t.Yti = new pt(t.Uti,dt),
                        t.Gti = new pt(t.Pti,vt),
                        t.jti = new pt(t.zti,gt),
                        t.Lti = 0,
                        t.Cti = 0,
                        Mt(t)
                    }, qt_tei = jt, qt_eei = function ee(t, e, r, n) {
                        var i, a, o = 0;
                        0 < t.level ? (2 === t.Jti.Vti && (t.Jti.Vti = Ot(t)),
                        Lt(t, t.Yti),
                        Lt(t, t.Gti),
                        o = _t(t),
                        i = t.Hti + 3 + 7 >>> 3,
                        (a = t.Fti + 3 + 7 >>> 3) <= i && (i = a)) : i = a = r + 5,
                        r + 4 <= i && -1 !== e ? jt(t, e, r, n) : 4 === t.qti || a === i ? (c(t, 2 + (n ? 1 : 0), 3),
                        kt(t, s, ut)) : (c(t, 4 + (n ? 1 : 0), 3),
                        Ft(t, t.Yti.Oti + 1, t.Gti.Oti + 1, o + 1),
                        kt(t, t.Uti, t.Pti)),
                        Mt(t),
                        n && Pt(t)
                    }, qt_rei = function u(t, e, r) {
                        return t.Nti[t.Xti + t.Kti++] = e,
                        t.Nti[t.Xti + t.Kti++] = e >> 8,
                        t.Nti[t.Xti + t.Kti++] = r,
                        0 === e ? t.Uti[2 * r]++ : (t.matches++,
                        e--,
                        t.Uti[2 * (ct[r] + W + 1)]++,
                        t.Pti[2 * mt(e)]++),
                        t.Kti === t.Qti
                    }, qt_nei = function re(t) {
                        c(t, 2, 3),
                        h(t, 256, s),
                        At(t)
                    }, Kt = function(t, e, r, n) {
                        for (var i = 65535 & t | 0, a = t >>> 16 & 65535 | 0, o = 0; 0 !== r; ) {
                            for (r -= o = 2e3 < r ? 2e3 : r; a = a + (i = i + e[n++] | 0) | 0,
                            --o; )
                                ;
                            i %= 65521,
                            a %= 65521
                        }
                        return i | a << 16 | 0
                    }, Xt = new Uint32Array(function() {
                        for (var e = [], r = 0; r < 256; r++) {
                            for (var t = r, n = 0; n < 8; n++)
                                t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1;
                            e[r] = t
                        }
                        return e
                    }()), k = function(t, e, r, n) {
                        var i = Xt
                          , a = n + r;
                        t ^= -1;
                        for (var o = n; o < a; o++)
                            t = t >>> 8 ^ i[255 & (t ^ e[o])];
                        return -1 ^ t
                    }, i = {
                        2: "need dictionary",
                        1: "stream end",
                        0: "",
                        "-1": "file error",
                        "-2": "stream error",
                        "-3": "data error",
                        "-4": "insufficient memory",
                        "-5": "buffer error",
                        "-6": "incompatible version"
                    }, r = {
                        lei: 0,
                        oei: 1,
                        aei: 2,
                        hei: 3,
                        sei: 4,
                        fei: 5,
                        dei: 6,
                        uei: 0,
                        cei: 1,
                        _ei: 2,
                        pei: -1,
                        yei: -2,
                        xei: -3,
                        vei: -4,
                        bei: -5,
                        gei: 0,
                        wei: 1,
                        Rei: 9,
                        Eei: -1,
                        Sei: 1,
                        mei: 2,
                        Tei: 3,
                        Aei: 4,
                        Iei: 0,
                        Dei: 0,
                        Oei: 1,
                        Mei: 2,
                        Nei: 8
                    }, Qt = qt_iei, te = qt_tei, ee = qt_eei, u = qt_rei, re = qt_nei, g = r.lei, ne = r.oei, ie = r.hei, p = r.sei, ae = r.fei, m = r.uei, oe = r.cei, b = r.yei, se = r.xei, ue = r.bei, fe = r.Eei, ce = r.Sei, he = r.mei, le = r.Tei, de = r.Aei, ve = r.Iei, ge = r.Mei, ye = r.Nei, Te = 286, Se = 30, xe = 19, Me = 2 * Te + 1, Pe = 15, w = 258, A = 262, T = 113, M = function M(t, e) {
                        return t.Aj = i[e],
                        e
                    }, je = function je(t) {
                        return 2 * t - (4 < t ? 9 : 0)
                    }, P = function P(t) {
                        for (var e = t.length; 0 <= --e; )
                            t[e] = 0
                    }, Re = function Re(t) {
                        for (var r, i = t.kei, e = t.Cei, n = e; r = t.head[--n],
                        t.head[n] = i <= r ? r - i : 0,
                        --e; )
                            ;
                        for (n = e = i; r = t.NM[--n],
                        t.NM[n] = i <= r ? r - i : 0,
                        --e; )
                            ;
                    }, d = function(t, e, r) {
                        return (e << t.Lei ^ r) & t.$ei
                    }, I = function I(t) {
                        var e = t.state
                          , r = e.pending;
                        0 !== (r = t.Zei < r ? t.Zei : r) && (t.output.set(e.Nti.subarray(e.Bei, e.Bei + r), t.Hei),
                        t.Hei += r,
                        e.Bei += r,
                        t.Fei += r,
                        t.Zei -= r,
                        e.pending -= r,
                        0 === e.pending) && (e.Bei = 0)
                    }, f = function f(t, e) {
                        ee(t, 0 <= t.Uei ? t.Uei : -1, t.Pei - t.Uei, e),
                        t.Uei = t.Pei,
                        I(t.Jti)
                    }, $ = function $(t, e) {
                        t.Nti[t.pending++] = e
                    }, Be = function Be(t, e) {
                        t.Nti[t.pending++] = e >>> 8 & 255,
                        t.Nti[t.pending++] = 255 & e
                    }, Ge = function Ge(t, e, r, n) {
                        var i = t.zei;
                        return 0 === (i = n < i ? n : i) ? 0 : (t.zei -= i,
                        e.set(t.input.subarray(t.Kei, t.Kei + i), r),
                        1 === t.state.wrap ? t.Wei = Kt(t.Wei, e, i, r) : 2 === t.state.wrap && (t.Wei = k(t.Wei, e, i, r)),
                        t.Kei += i,
                        t.Xei += i,
                        i)
                    }, Ve = function Ve(t, e) {
                        var i, a, r = t.Yei, n = t.Pei, o = t.Gei, s = t.jei, u = t.kei - A < t.Pei ? t.Pei - (t.kei - A) : 0, f = t.window, c = t.Vei, h = t.NM, l = t.Pei + w, d = f[n + o - 1], v = f[n + o];
                        t.Jei <= t.Gei && (r >>= 2),
                        t.qei < s && (s = t.qei);
                        do {
                            if (f[(i = e) + o] === v && f[i + o - 1] === d && f[i] === f[n] && f[++i] === f[n + 1]) {
                                for (n += 2,
                                i++; f[++n] === f[++i] && f[++n] === f[++i] && f[++n] === f[++i] && f[++n] === f[++i] && f[++n] === f[++i] && f[++n] === f[++i] && f[++n] === f[++i] && f[++n] === f[++i] && n < l; )
                                    ;
                                if (a = w - (l - n),
                                n = l - w,
                                o < a) {
                                    if (t.Qei = e,
                                    s <= (o = a))
                                        break;
                                    d = f[n + o - 1],
                                    v = f[n + o]
                                }
                            }
                        } while ((e = h[e & c]) > u && 0 != --r);
                        return o <= t.qei ? o : t.qei
                    }, v = function v(t) {
                        var n, i, e = t.kei;
                        do {
                            if (n = t.iri - t.qei - t.Pei,
                            e + (e - A) <= t.Pei && (t.window.set(t.window.subarray(e, e + e - n), 0),
                            t.Qei -= e,
                            t.Pei -= e,
                            t.Uei -= e,
                            t.Pei < t.Xc && (t.Xc = t.Pei),
                            Re(t),
                            n += e),
                            0 === t.Jti.zei)
                                break;
                            if (n = Ge(t.Jti, t.window, t.Pei + t.qei, n),
                            t.qei += n,
                            3 <= t.qei + t.Xc)
                                for (i = t.Pei - t.Xc,
                                t.tri = t.window[i],
                                t.tri = d(t, t.tri, t.window[i + 1]); t.Xc && (t.tri = d(t, t.tri, t.window[i + 3 - 1]),
                                t.NM[i & t.Vei] = t.head[t.tri],
                                t.head[t.tri] = i,
                                i++,
                                t.Xc--,
                                !(t.qei + t.Xc < 3)); )
                                    ;
                        } while (t.qei < A && 0 !== t.Jti.zei)
                    }, He = function He(t, e) {
                        for (var r, n; ; ) {
                            if (t.qei < A) {
                                if (v(t),
                                t.qei < A && e === g)
                                    return 1;
                                if (0 === t.qei)
                                    break
                            }
                            if (r = 0,
                            3 <= t.qei && (t.tri = d(t, t.tri, t.window[t.Pei + 3 - 1]),
                            r = t.NM[t.Pei & t.Vei] = t.head[t.tri],
                            t.head[t.tri] = t.Pei),
                            0 !== r && t.Pei - r <= t.kei - A && (t.nri = Ve(t, r)),
                            3 <= t.nri)
                                if (n = u(t, t.Pei - t.Qei, t.nri - 3),
                                t.qei -= t.nri,
                                t.nri <= t.lri && 3 <= t.qei) {
                                    for (t.nri--; t.Pei++,
                                    t.tri = d(t, t.tri, t.window[t.Pei + 3 - 1]),
                                    r = t.NM[t.Pei & t.Vei] = t.head[t.tri],
                                    t.head[t.tri] = t.Pei,
                                    0 != --t.nri; )
                                        ;
                                    t.Pei++
                                } else
                                    t.Pei += t.nri,
                                    t.nri = 0,
                                    t.tri = t.window[t.Pei],
                                    t.tri = d(t, t.tri, t.window[t.Pei + 1]);
                            else
                                n = u(t, 0, t.window[t.Pei]),
                                t.qei--,
                                t.Pei++;
                            if (n && (f(t, !1),
                            0 === t.Jti.Zei))
                                return 1
                        }
                        return t.Xc = t.Pei < 2 ? t.Pei : 2,
                        e === p ? (f(t, !0),
                        0 === t.Jti.Zei ? 3 : 4) : t.Kti && (f(t, !1),
                        0 === t.Jti.Zei) ? 1 : 2
                    }, a = function a(t, e) {
                        for (var r, n, i; ; ) {
                            if (t.qei < A) {
                                if (v(t),
                                t.qei < A && e === g)
                                    return 1;
                                if (0 === t.qei)
                                    break
                            }
                            if (r = 0,
                            3 <= t.qei && (t.tri = d(t, t.tri, t.window[t.Pei + 3 - 1]),
                            r = t.NM[t.Pei & t.Vei] = t.head[t.tri],
                            t.head[t.tri] = t.Pei),
                            t.Gei = t.nri,
                            t.ori = t.Qei,
                            t.nri = 2,
                            0 !== r && t.Gei < t.lri && t.Pei - r <= t.kei - A && (t.nri = Ve(t, r),
                            t.nri <= 5) && (t.qti === ce || 3 === t.nri && 4096 < t.Pei - t.Qei) && (t.nri = 2),
                            3 <= t.Gei && t.nri <= t.Gei) {
                                for (i = t.Pei + t.qei - 3,
                                n = u(t, t.Pei - 1 - t.ori, t.Gei - 3),
                                t.qei -= t.Gei - 1,
                                t.Gei -= 2; ++t.Pei <= i && (t.tri = d(t, t.tri, t.window[t.Pei + 3 - 1]),
                                r = t.NM[t.Pei & t.Vei] = t.head[t.tri],
                                t.head[t.tri] = t.Pei),
                                0 != --t.Gei; )
                                    ;
                                if (t.ari = 0,
                                t.nri = 2,
                                t.Pei++,
                                n && (f(t, !1),
                                0 === t.Jti.Zei))
                                    return 1
                            } else if (t.ari) {
                                if ((n = u(t, 0, t.window[t.Pei - 1])) && f(t, !1),
                                t.Pei++,
                                t.qei--,
                                0 === t.Jti.Zei)
                                    return 1
                            } else
                                t.ari = 1,
                                t.Pei++,
                                t.qei--
                        }
                        return t.ari && (n = u(t, 0, t.window[t.Pei - 1]),
                        t.ari = 0),
                        t.Xc = t.Pei < 2 ? t.Pei : 2,
                        e === p ? (f(t, !0),
                        0 === t.Jti.Zei ? 3 : 4) : t.Kti && (f(t, !1),
                        0 === t.Jti.Zei) ? 1 : 2
                    }, We = function We(t, e) {
                        for (var r, n, i, a, o = t.window; ; ) {
                            if (t.qei <= w) {
                                if (v(t),
                                t.qei <= w && e === g)
                                    return 1;
                                if (0 === t.qei)
                                    break
                            }
                            if (t.nri = 0,
                            3 <= t.qei && 0 < t.Pei && (n = o[i = t.Pei - 1]) === o[++i] && n === o[++i] && n === o[++i]) {
                                for (a = t.Pei + w; n === o[++i] && n === o[++i] && n === o[++i] && n === o[++i] && n === o[++i] && n === o[++i] && n === o[++i] && n === o[++i] && i < a; )
                                    ;
                                t.nri = w - (a - i),
                                t.qei < t.nri && (t.nri = t.qei)
                            }
                            if (3 <= t.nri ? (r = u(t, 1, t.nri - 3),
                            t.qei -= t.nri,
                            t.Pei += t.nri,
                            t.nri = 0) : (r = u(t, 0, t.window[t.Pei]),
                            t.qei--,
                            t.Pei++),
                            r && (f(t, !1),
                            0 === t.Jti.Zei))
                                return 1
                        }
                        return t.Xc = 0,
                        e === p ? (f(t, !0),
                        0 === t.Jti.Zei ? 3 : 4) : t.Kti && (f(t, !1),
                        0 === t.Jti.Zei) ? 1 : 2
                    }, qe = function qe(t, e) {
                        for (var r; ; ) {
                            if (0 === t.qei && (v(t),
                            0 === t.qei)) {
                                if (e === g)
                                    return 1;
                                break
                            }
                            if (t.nri = 0,
                            r = u(t, 0, t.window[t.Pei]),
                            t.qei--,
                            t.Pei++,
                            r && (f(t, !1),
                            0 === t.Jti.Zei))
                                return 1
                        }
                        return t.Xc = 0,
                        e === p ? (f(t, !0),
                        0 === t.Jti.Zei ? 3 : 4) : t.Kti && (f(t, !1),
                        0 === t.Jti.Zei) ? 1 : 2
                    };
                    function n(t, e, r, n, i) {
                        this.hri = t,
                        this.sri = e,
                        this.fri = r,
                        this.dri = n,
                        this.cri = i
                    }
                    var Ze = [new n(0,0,0,0,ze = function ze(t, e) {
                        for (var n, i, a, r = t.eri - 5 > t.kei ? t.kei : t.eri - 5, o = 0, s = t.Jti.zei; n = 65535,
                        a = t.Cti + 42 >> 3,
                        !(t.Jti.Zei < a || (n = (a = t.Jti.Zei - a) < (n = n > (i = t.Pei - t.Uei) + t.Jti.zei ? i + t.Jti.zei : n) ? a : n) < r && (0 === n && e !== p || e === g || n !== i + t.Jti.zei) || (o = e === p && n === i + t.Jti.zei ? 1 : 0,
                        te(t, 0, 0, o),
                        t.Nti[t.pending - 4] = n,
                        t.Nti[t.pending - 3] = n >> 8,
                        t.Nti[t.pending - 2] = ~n,
                        t.Nti[t.pending - 1] = ~n >> 8,
                        I(t.Jti),
                        i && (n < i && (i = n),
                        t.Jti.output.set(t.window.subarray(t.Uei, t.Uei + i), t.Jti.Hei),
                        t.Jti.Hei += i,
                        t.Jti.Zei -= i,
                        t.Jti.Fei += i,
                        t.Uei += i,
                        n -= i),
                        n && (Ge(t.Jti, t.Jti.output, t.Jti.Hei, n),
                        t.Jti.Hei += n,
                        t.Jti.Zei -= n,
                        t.Jti.Fei += n),
                        0 !== o)); )
                            ;
                        return (s -= t.Jti.zei) && (s >= t.kei ? (t.matches = 2,
                        t.window.set(t.Jti.input.subarray(t.Jti.Kei - t.kei, t.Jti.Kei), 0),
                        t.Pei = t.kei,
                        t.Xc = t.Pei) : (t.iri - t.Pei <= s && (t.Pei -= t.kei,
                        t.window.set(t.window.subarray(t.kei, t.kei + t.Pei), 0),
                        t.matches < 2 && t.matches++,
                        t.Pei < t.Xc) && (t.Xc = t.Pei),
                        t.window.set(t.Jti.input.subarray(t.Jti.Kei - s, t.Jti.Kei), t.Pei),
                        t.Pei += s,
                        t.Xc += t.kei - t.Xc < s ? t.kei - t.Xc : s),
                        t.Uei = t.Pei),
                        t.rri < t.Pei && (t.rri = t.Pei),
                        o ? 4 : e !== g && e !== p && 0 === t.Jti.zei && t.Pei === t.Uei ? 2 : (t.Jti.zei > (a = t.iri - t.Pei) && t.Uei >= t.kei && (t.Uei -= t.kei,
                        t.Pei -= t.kei,
                        t.window.set(t.window.subarray(t.kei, t.kei + t.Pei), 0),
                        t.matches < 2 && t.matches++,
                        a += t.kei,
                        t.Pei < t.Xc) && (t.Xc = t.Pei),
                        (a = a > t.Jti.zei ? t.Jti.zei : a) && (Ge(t.Jti, t.window, t.Pei, a),
                        t.Pei += a,
                        t.Xc += t.kei - t.Xc < a ? t.kei - t.Xc : a),
                        t.rri < t.Pei && (t.rri = t.Pei),
                        a = 65535 < t.eri - (a = t.Cti + 42 >> 3) ? 65535 : t.eri - a,
                        ((r = t.kei < a ? t.kei : a) <= (i = t.Pei - t.Uei) || (i || e === p) && e !== g && 0 === t.Jti.zei && i <= a) && (n = a < i ? a : i,
                        o = e === p && 0 === t.Jti.zei && n === i ? 1 : 0,
                        te(t, t.Uei, n, o),
                        t.Uei += n,
                        I(t.Jti)),
                        o ? 3 : 1)
                    }
                    ), new n(4,4,8,4,He), new n(4,5,16,8,He), new n(4,6,32,32,He), new n(4,4,16,16,a), new n(8,16,32,32,a), new n(8,16,128,128,a), new n(8,32,128,256,a), new n(32,128,258,1024,a), new n(32,258,258,4096,a)]
                      , Ke = function Ke(t) {
                        t.iri = 2 * t.kei,
                        P(t.head),
                        t.lri = Ze[t.level].sri,
                        t.Jei = Ze[t.level].hri,
                        t.jei = Ze[t.level].fri,
                        t.Yei = Ze[t.level].dri,
                        t.Pei = 0,
                        t.Uei = 0,
                        t.qei = 0,
                        t.Xc = 0,
                        t.nri = t.Gei = 2,
                        t.ari = 0,
                        t.tri = 0
                    };
                    function Ye() {
                        this.Jti = null,
                        this.status = 0,
                        this.Nti = null,
                        this.eri = 0,
                        this.Bei = 0,
                        this.pending = 0,
                        this.wrap = 0,
                        this._ri = null,
                        this.pri = 0,
                        this.method = ye,
                        this.yri = -1,
                        this.kei = 0,
                        this.xri = 0,
                        this.Vei = 0,
                        this.window = null,
                        this.iri = 0,
                        this.NM = null,
                        this.head = null,
                        this.tri = 0,
                        this.Cei = 0,
                        this.vri = 0,
                        this.$ei = 0,
                        this.Lei = 0,
                        this.Uei = 0,
                        this.nri = 0,
                        this.ori = 0,
                        this.ari = 0,
                        this.Pei = 0,
                        this.Qei = 0,
                        this.qei = 0,
                        this.Gei = 0,
                        this.Yei = 0,
                        this.lri = 0,
                        this.level = 0,
                        this.qti = 0,
                        this.Jei = 0,
                        this.jei = 0,
                        this.Uti = new Uint16Array(2 * Me),
                        this.Pti = new Uint16Array(2 * (2 * Se + 1)),
                        this.zti = new Uint16Array(2 * (2 * xe + 1)),
                        P(this.Uti),
                        P(this.Pti),
                        P(this.zti),
                        this.Yti = null,
                        this.Gti = null,
                        this.jti = null,
                        this.$ti = new Uint16Array(Pe + 1),
                        this.Zti = new Uint16Array(2 * Te + 1),
                        P(this.Zti),
                        this.Wti = 0,
                        this.Bti = 0,
                        this.depth = new Uint16Array(2 * Te + 1),
                        P(this.depth),
                        this.Xti = 0,
                        this.bri = 0,
                        this.Kti = 0,
                        this.Qti = 0,
                        this.Hti = 0,
                        this.Fti = 0,
                        this.matches = 0,
                        this.Xc = 0,
                        this.Lti = 0,
                        this.Cti = 0
                    }
                    var Je, Qe, er, Xe = function Xe(t) {
                        var e;
                        return !t || !(e = t.state) || e.Jti !== t || 42 !== e.status && 57 !== e.status && 69 !== e.status && 73 !== e.status && 91 !== e.status && 103 !== e.status && e.status !== T && 666 !== e.status ? 1 : 0
                    }, gr = {
                        Eri: function(t, e) {
                            return er(t, e, ye, 15, 8, ve)
                        },
                        Sri: er = function er(t, e, r, n, i, a) {
                            if (!t)
                                return b;
                            var o = 1;
                            if (e === fe && (e = 6),
                            n < 0 ? (o = 0,
                            n = -n) : 15 < n && (o = 2,
                            n -= 16),
                            i < 1 || 9 < i || r !== ye || n < 8 || 15 < n || e < 0 || 9 < e || a < 0 || de < a || 8 === n && 1 !== o)
                                return M(t, b);
                            8 === n && (n = 9);
                            var s = new Ye;
                            return (t.state = s).Jti = t,
                            s.status = 42,
                            s.wrap = o,
                            s._ri = null,
                            s.xri = n,
                            s.kei = 1 << s.xri,
                            s.Vei = s.kei - 1,
                            s.vri = i + 7,
                            s.Cei = 1 << s.vri,
                            s.$ei = s.Cei - 1,
                            s.Lei = ~~((s.vri + 3 - 1) / 3),
                            s.window = new Uint8Array(2 * s.kei),
                            s.head = new Uint16Array(s.Cei),
                            s.NM = new Uint16Array(s.kei),
                            s.bri = 1 << i + 6,
                            s.eri = 4 * s.bri,
                            s.Nti = new Uint8Array(s.eri),
                            s.Xti = s.bri,
                            s.Qti = 3 * (s.bri - 1),
                            s.level = e,
                            s.qti = a,
                            s.method = r,
                            Qe(t)
                        }
                        ,
                        mri: Qe = function Qe(t) {
                            var e = Je(t);
                            return e === m && Ke(t.state),
                            e
                        }
                        ,
                        Tri: Je = function Je(t) {
                            if (Xe(t))
                                return M(t, b);
                            t.Xei = t.Fei = 0,
                            t.Vti = ge;
                            var e = t.state;
                            return e.pending = 0,
                            e.Bei = 0,
                            e.wrap < 0 && (e.wrap = -e.wrap),
                            e.status = 2 === e.wrap ? 57 : e.wrap ? 42 : T,
                            t.Wei = 2 === e.wrap ? 0 : 1,
                            e.yri = -2,
                            Qt(e),
                            m
                        }
                        ,
                        Ari: function(t, e) {
                            return Xe(t) || 2 !== t.state.wrap ? b : (t.state._ri = e,
                            m)
                        },
                        Iri: function(t, e) {
                            if (Xe(t) || ae < e || e < 0)
                                return t ? M(t, b) : b;
                            var r = t.state;
                            if (!t.output || 0 !== t.zei && !t.input || 666 === r.status && e !== p)
                                return M(t, 0 === t.Zei ? ue : b);
                            var n = r.yri;
                            if (r.yri = e,
                            0 !== r.pending) {
                                if (I(t),
                                0 === t.Zei)
                                    return r.yri = -1,
                                    m
                            } else if (0 === t.zei && je(e) <= je(n) && e !== p)
                                return M(t, ue);
                            if (666 === r.status && 0 !== t.zei)
                                return M(t, ue);
                            if (42 === r.status && 0 === r.wrap && (r.status = T),
                            42 === r.status) {
                                n = ye + (r.xri - 8 << 4) << 8;
                                if (n |= (r.qti >= he || r.level < 2 ? 0 : r.level < 6 ? 1 : 6 === r.level ? 2 : 3) << 6,
                                0 !== r.Pei && (n |= 32),
                                Be(r, n += 31 - n % 31),
                                0 !== r.Pei && (Be(r, t.Wei >>> 16),
                                Be(r, 65535 & t.Wei)),
                                t.Wei = 1,
                                r.status = T,
                                I(t),
                                0 !== r.pending)
                                    return r.yri = -1,
                                    m
                            }
                            if (57 === r.status)
                                if (t.Wei = 0,
                                $(r, 31),
                                $(r, 139),
                                $(r, 8),
                                r._ri)
                                    $(r, (r._ri.text ? 1 : 0) + (r._ri.gri ? 2 : 0) + (r._ri.wri ? 4 : 0) + (r._ri.name ? 8 : 0) + (r._ri.Rri ? 16 : 0)),
                                    $(r, 255 & r._ri.time),
                                    $(r, r._ri.time >> 8 & 255),
                                    $(r, r._ri.time >> 16 & 255),
                                    $(r, r._ri.time >> 24 & 255),
                                    $(r, 9 === r.level ? 2 : r.qti >= he || r.level < 2 ? 4 : 0),
                                    $(r, 255 & r._ri.os),
                                    r._ri.wri && r._ri.wri.length && ($(r, 255 & r._ri.wri.length),
                                    $(r, r._ri.wri.length >> 8 & 255)),
                                    r._ri.gri && (t.Wei = k(t.Wei, r.Nti, r.pending, 0)),
                                    r.pri = 0,
                                    r.status = 69;
                                else if ($(r, 0),
                                $(r, 0),
                                $(r, 0),
                                $(r, 0),
                                $(r, 0),
                                $(r, 9 === r.level ? 2 : r.qti >= he || r.level < 2 ? 4 : 0),
                                $(r, 3),
                                r.status = T,
                                I(t),
                                0 !== r.pending)
                                    return r.yri = -1,
                                    m;
                            if (69 === r.status) {
                                if (r._ri.wri) {
                                    for (var o = r.pending, s = (65535 & r._ri.wri.length) - r.pri; r.pending + s > r.eri; ) {
                                        var u = r.eri - r.pending;
                                        if (r.Nti.set(r._ri.wri.subarray(r.pri, r.pri + u), r.pending),
                                        r.pending = r.eri,
                                        r._ri.gri && r.pending > o && (t.Wei = k(t.Wei, r.Nti, r.pending - o, o)),
                                        r.pri += u,
                                        I(t),
                                        0 !== r.pending)
                                            return r.yri = -1,
                                            m;
                                        o = 0,
                                        s -= u
                                    }
                                    n = new Uint8Array(r._ri.wri);
                                    r.Nti.set(n.subarray(r.pri, r.pri + s), r.pending),
                                    r.pending += s,
                                    r._ri.gri && r.pending > o && (t.Wei = k(t.Wei, r.Nti, r.pending - o, o)),
                                    r.pri = 0
                                }
                                r.status = 73
                            }
                            if (73 === r.status) {
                                if (r._ri.name) {
                                    var h, c = r.pending;
                                    do {
                                        if (r.pending === r.eri) {
                                            if (r._ri.gri && r.pending > c && (t.Wei = k(t.Wei, r.Nti, r.pending - c, c)),
                                            I(t),
                                            0 !== r.pending)
                                                return r.yri = -1,
                                                m;
                                            c = 0
                                        }
                                    } while (h = r.pri < r._ri.name.length ? 255 & r._ri.name.charCodeAt(r.pri++) : 0,
                                    $(r, h),
                                    0 !== h);
                                    r._ri.gri && r.pending > c && (t.Wei = k(t.Wei, r.Nti, r.pending - c, c)),
                                    r.pri = 0
                                }
                                r.status = 91
                            }
                            if (91 === r.status) {
                                if (r._ri.Rri) {
                                    var d, l = r.pending;
                                    do {
                                        if (r.pending === r.eri) {
                                            if (r._ri.gri && r.pending > l && (t.Wei = k(t.Wei, r.Nti, r.pending - l, l)),
                                            I(t),
                                            0 !== r.pending)
                                                return r.yri = -1,
                                                m;
                                            l = 0
                                        }
                                    } while (d = r.pri < r._ri.Rri.length ? 255 & r._ri.Rri.charCodeAt(r.pri++) : 0,
                                    $(r, d),
                                    0 !== d);
                                    r._ri.gri && r.pending > l && (t.Wei = k(t.Wei, r.Nti, r.pending - l, l))
                                }
                                r.status = 103
                            }
                            if (103 === r.status) {
                                if (r._ri.gri) {
                                    if (r.pending + 2 > r.eri && (I(t),
                                    0 !== r.pending))
                                        return r.yri = -1,
                                        m;
                                    $(r, 255 & t.Wei),
                                    $(r, t.Wei >> 8 & 255),
                                    t.Wei = 0
                                }
                                if (r.status = T,
                                I(t),
                                0 !== r.pending)
                                    return r.yri = -1,
                                    m
                            }
                            if (0 !== t.zei || 0 !== r.qei || e !== g && 666 !== r.status) {
                                n = 0 === r.level ? ze(r, e) : r.qti === he ? qe(r, e) : r.qti === le ? We(r, e) : Ze[r.level].cri(r, e);
                                if (3 !== n && 4 !== n || (r.status = 666),
                                1 === n || 3 === n)
                                    return 0 === t.Zei && (r.yri = -1),
                                    m;
                                if (2 === n && (e === ne ? re(r) : e !== ae && (te(r, 0, 0, !1),
                                e === ie) && (P(r.head),
                                0 === r.qei) && (r.Pei = 0,
                                r.Uei = 0,
                                r.Xc = 0),
                                I(t),
                                0 === t.Zei))
                                    return r.yri = -1,
                                    m
                            }
                            return e !== p || !(r.wrap <= 0) && (2 === r.wrap ? ($(r, 255 & t.Wei),
                            $(r, t.Wei >> 8 & 255),
                            $(r, t.Wei >> 16 & 255),
                            $(r, t.Wei >> 24 & 255),
                            $(r, 255 & t.Xei),
                            $(r, t.Xei >> 8 & 255),
                            $(r, t.Xei >> 16 & 255),
                            $(r, t.Xei >> 24 & 255)) : (Be(r, t.Wei >>> 16),
                            Be(r, 65535 & t.Wei)),
                            I(t),
                            0 < r.wrap && (r.wrap = -r.wrap),
                            0 !== r.pending) ? m : oe
                        },
                        Dri: function(t) {
                            var e;
                            return Xe(t) ? b : (e = t.state.status,
                            t.state = null,
                            e === T ? M(t, se) : m)
                        },
                        Ori: function(t, e) {
                            var r = e.length;
                            if (Xe(t))
                                return b;
                            var n = t.state
                              , i = n.wrap;
                            if (2 === i || 1 === i && 42 !== n.status || n.qei)
                                return b;
                            1 === i && (t.Wei = Kt(t.Wei, e, r, 0)),
                            n.wrap = 0,
                            n.kei <= r && (0 === i && (P(n.head),
                            n.Pei = 0,
                            n.Uei = 0,
                            n.Xc = 0),
                            (a = new Uint8Array(n.kei)).set(e.subarray(r - n.kei, r), 0),
                            e = a,
                            r = n.kei);
                            var a = t.zei
                              , s = t.Kei
                              , u = t.input;
                            for (t.zei = r,
                            t.Kei = 0,
                            t.input = e,
                            v(n); 3 <= n.qei; ) {
                                for (var f = n.Pei, c = n.qei - 2; n.tri = d(n, n.tri, n.window[f + 3 - 1]),
                                n.NM[f & n.Vei] = n.head[n.tri],
                                n.head[n.tri] = f,
                                f++,
                                --c; )
                                    ;
                                n.Pei = f,
                                n.qei = 2,
                                v(n)
                            }
                            return n.Pei += n.qei,
                            n.Uei = n.Pei,
                            n.Xc = n.qei,
                            n.qei = 0,
                            n.nri = n.Gei = 2,
                            n.ari = 0,
                            t.Kei = s,
                            t.input = u,
                            t.zei = a,
                            n.wrap = i,
                            m
                        },
                        Mri: "pako deflate (from Nodeca project)"
                    };
                    function yr(t) {
                        return (yr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                            return typeof t
                        }
                        : function(t) {
                            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                        }
                        )(t)
                    }
                    var pr = function pr(t, e) {
                        return Object.prototype.hasOwnProperty.call(t, e)
                    }
                      , wr_assign = function(t) {
                        for (var e = Array.prototype.slice.call(arguments, 1); e.length; ) {
                            var r = e.shift();
                            if (r) {
                                if ("object" !== yr(r))
                                    throw new TypeError(r + "must be non-object");
                                for (var n in r)
                                    pr(r, n) && (t[n] = r[n])
                            }
                        }
                        return t
                    }
                      , wr_Nri = function(t) {
                        for (var e = 0, r = 0, n = t.length; r < n; r++)
                            e += t[r].length;
                        for (var i = new Uint8Array(e), a = 0, o = 0, s = t.length; a < s; a++) {
                            var u = t[a];
                            i.set(u, o),
                            o += u.length
                        }
                        return i
                    }
                      , Ar = !0;
                    try {
                        String.fromCharCode.apply(null, new Uint8Array(1))
                    } catch (va) {
                        Ar = !1
                    }
                    for (var Tr = new Uint8Array(256), o = 0; o < 256; o++)
                        Tr[o] = 252 <= o ? 6 : 248 <= o ? 5 : 240 <= o ? 4 : 224 <= o ? 3 : 192 <= o ? 2 : 1;
                    Tr[254] = Tr[254] = 1;
                    var xr = function xr(t, e) {
                        if (e < 65534 && t.subarray && Ar)
                            return String.fromCharCode.apply(null, t.length === e ? t : t.subarray(0, e));
                        for (var r = "", n = 0; n < e; n++)
                            r += String.fromCharCode(t[n]);
                        return r
                    }
                      , Ir_kri = function(t) {
                        if ("function" == typeof TextEncoder && TextEncoder.prototype.encode)
                            return (new TextEncoder).encode(t);
                        for (var e, r, n, a, o = t.length, s = 0, i = 0; i < o; i++)
                            55296 == (64512 & (r = t.charCodeAt(i))) && i + 1 < o && 56320 == (64512 & (n = t.charCodeAt(i + 1))) && (r = 65536 + (r - 55296 << 10) + (n - 56320),
                            i++),
                            s += r < 128 ? 1 : r < 2048 ? 2 : r < 65536 ? 3 : 4;
                        for (e = new Uint8Array(s),
                        i = a = 0; a < s; i++)
                            55296 == (64512 & (r = t.charCodeAt(i))) && i + 1 < o && 56320 == (64512 & (n = t.charCodeAt(i + 1))) && (r = 65536 + (r - 55296 << 10) + (n - 56320),
                            i++),
                            r < 128 ? e[a++] = r : (r < 2048 ? e[a++] = 192 | r >>> 6 : (r < 65536 ? e[a++] = 224 | r >>> 12 : (e[a++] = 240 | r >>> 18,
                            e[a++] = 128 | r >>> 12 & 63),
                            e[a++] = 128 | r >>> 6 & 63),
                            e[a++] = 128 | 63 & r);
                        return e
                    }
                      , Ir_Cri = function(t, e) {
                        var r = e || t.length;
                        if ("function" == typeof TextDecoder && TextDecoder.prototype.decode)
                            return (new TextDecoder).decode(t.subarray(0, e));
                        for (var a = new Array(2 * r), i = 0, n = 0; n < r; ) {
                            var o = t[n++];
                            if (o < 128)
                                a[i++] = o;
                            else {
                                var s = Tr[o];
                                if (4 < s)
                                    a[i++] = 65533,
                                    n += s - 1;
                                else {
                                    for (o &= 2 === s ? 31 : 3 === s ? 15 : 7; 1 < s && n < r; )
                                        o = o << 6 | 63 & t[n++],
                                        s--;
                                    1 < s ? a[i++] = 65533 : o < 65536 ? a[i++] = o : (o -= 65536,
                                    a[i++] = 55296 | o >> 10 & 1023,
                                    a[i++] = 56320 | 1023 & o)
                                }
                            }
                        }
                        return xr(a, i)
                    }
                      , Ir_Lri = function(t, e) {
                        for (var r = (e = (e = e || t.length) > t.length ? t.length : e) - 1; 0 <= r && 128 == (192 & t[r]); )
                            r--;
                        return !(r < 0) && 0 !== r && r + Tr[t[r]] > e ? r : e
                    };
                    var kr = function() {
                        this.input = null,
                        this.Kei = 0,
                        this.zei = 0,
                        this.Xei = 0,
                        this.output = null,
                        this.Hei = 0,
                        this.Zei = 0,
                        this.Fei = 0,
                        this.Aj = "",
                        this.state = null,
                        this.Vti = 2,
                        this.Wei = 0
                    }
                      , Lr = Object.prototype.toString
                      , Cr = r.lei
                      , Nr = r.aei
                      , _r = r.hei
                      , Fr = r.sei
                      , Or = r.uei
                      , Er = r.cei
                      , Ur = r.Eei
                      , jr = r.Iei
                      , Rr = r.Nei;
                    function Dr(t) {
                        this.options = wr_assign({
                            level: Ur,
                            method: Rr,
                            $ri: 16384,
                            Zri: 15,
                            Bri: 8,
                            qti: jr
                        }, t || {});
                        t = this.options;
                        if (t.raw && 0 < t.Zri ? t.Zri = -t.Zri : t.Hri && 0 < t.Zri && t.Zri < 16 && (t.Zri += 16),
                        this.err = 0,
                        this.Aj = "",
                        this.ended = !1,
                        this.Fri = [],
                        this.Jti = new kr,
                        this.Jti.Zei = 0,
                        (r = gr.Sri(this.Jti, t.level, t.method, t.Zri, t.Bri, t.qti)) !== Or)
                            throw new Error(i[r]);
                        if (t.Uri && gr.Ari(this.Jti, t.Uri),
                        t.Pri) {
                            var r, t = "string" == typeof t.Pri ? Ir_kri(t.Pri) : "[object ArrayBuffer]" === Lr.call(t.Pri) ? new Uint8Array(t.Pri) : t.Pri;
                            if ((r = gr.Ori(this.Jti, t)) !== Or)
                                throw new Error(i[r]);
                            this.zri = !0
                        }
                    }
                    function Br(t, e) {
                        e = new Dr(e);
                        if (e.push(t, !0),
                        e.err)
                            throw e.Aj || i[e.err];
                        return e.result
                    }
                    Dr.prototype.push = function(t, e) {
                        var i, a, r = this.Jti, n = this.options.$ri;
                        if (this.ended)
                            return !1;
                        for (a = e === ~~e ? e : !0 === e ? Fr : Cr,
                        "string" == typeof t ? r.input = Ir_kri(t) : "[object ArrayBuffer]" === Lr.call(t) ? r.input = new Uint8Array(t) : r.input = t,
                        r.Kei = 0,
                        r.zei = r.input.length; ; )
                            if (0 === r.Zei && (r.output = new Uint8Array(n),
                            r.Hei = 0,
                            r.Zei = n),
                            (a === Nr || a === _r) && r.Zei <= 6)
                                this.Kri(r.output.subarray(0, r.Hei)),
                                r.Zei = 0;
                            else {
                                if (gr.Iri(r, a) === Er)
                                    return 0 < r.Hei && this.Kri(r.output.subarray(0, r.Hei)),
                                    i = gr.Dri(this.Jti),
                                    this.Wri(i),
                                    this.ended = !0,
                                    i === Or;
                                if (0 === r.Zei)
                                    this.Kri(r.output);
                                else if (0 < a && 0 < r.Hei)
                                    this.Kri(r.output.subarray(0, r.Hei)),
                                    r.Zei = 0;
                                else if (0 === r.zei)
                                    break
                            }
                        return !0
                    }
                    ,
                    Dr.prototype.Kri = function(t) {
                        this.Fri.push(t)
                    }
                    ,
                    Dr.prototype.Wri = function(t) {
                        t === Or && (this.result = wr_Nri(this.Fri)),
                        this.Fri = [],
                        this.err = t,
                        this.Aj = this.Jti.Aj
                    }
                    ;
                    var qt_iei = Dr
                      , qt_tei = Br
                      , qt_eei = function(t, e) {
                        return (e = e || {}).raw = !0,
                        Br(t, e)
                    }
                      , qt_rei = function(t, e) {
                        return (e = e || {}).Hri = !0,
                        Br(t, e)
                    }
                      , Yr = 16209
                      , Qr = 15
                      , tn = 852
                      , en = 592
                      , rn = 0
                      , nn = 1
                      , an = 2
                      , on = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0])
                      , sn = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78])
                      , un = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0])
                      , fn = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64])
                      , hn = function(t, e, r, n, i, a, o, s) {
                        for (var b, w, A, T, S, M, k, L, C, u = s.ini, f = 0, c = 0, h = 0, l = 0, d = 0, v = 0, g = 0, y = 0, p = 0, m = 0, x = null, P = new Uint16Array(Qr + 1), I = new Uint16Array(Qr + 1), $ = null, f = 0; f <= Qr; f++)
                            P[f] = 0;
                        for (c = 0; c < n; c++)
                            P[e[r + c]]++;
                        for (d = u,
                        l = Qr; 1 <= l && 0 === P[l]; l--)
                            ;
                        if (l < d && (d = l),
                        0 === l)
                            i[a++] = 20971520,
                            i[a++] = 20971520,
                            s.ini = 1;
                        else {
                            for (h = 1; h < l && 0 === P[h]; h++)
                                ;
                            for (d < h && (d = h),
                            f = y = 1; f <= Qr; f++)
                                if ((y = (y <<= 1) - P[f]) < 0)
                                    return -1;
                            if (0 < y && (t === rn || 1 !== l))
                                return -1;
                            for (I[1] = 0,
                            f = 1; f < Qr; f++)
                                I[f + 1] = I[f] + P[f];
                            for (c = 0; c < n; c++)
                                0 !== e[r + c] && (o[I[e[r + c]]++] = c);
                            if (M = t === rn ? (x = $ = o,
                            20) : t === nn ? (x = on,
                            $ = sn,
                            257) : (x = un,
                            $ = fn,
                            0),
                            f = h,
                            S = a,
                            g = c = m = 0,
                            A = -1,
                            T = (p = 1 << (v = d)) - 1,
                            t === nn && tn < p || t === an && en < p)
                                return 1;
                            for (; ; ) {
                                for (C = o[c] + 1 < M ? (L = 0,
                                o[c]) : o[c] >= M ? (L = $[o[c] - M],
                                x[o[c] - M]) : (L = 96,
                                0),
                                b = 1 << (k = f - g),
                                h = w = 1 << v; i[S + (m >> g) + (w -= b)] = k << 24 | L << 16 | C | 0,
                                0 !== w; )
                                    ;
                                for (b = 1 << f - 1; m & b; )
                                    b >>= 1;
                                if (m = 0 !== b ? (m & b - 1) + b : 0,
                                c++,
                                0 == --P[f]) {
                                    if (f === l)
                                        break;
                                    f = e[r + o[c]]
                                }
                                if (d < f && (m & T) !== A) {
                                    for (S += h,
                                    y = 1 << (v = f - (g = 0 === g ? d : g)); v + g < l && !((y -= P[v + g]) <= 0); )
                                        v++,
                                        y <<= 1;
                                    if (p += 1 << v,
                                    t === nn && tn < p || t === an && en < p)
                                        return 1;
                                    i[A = m & T] = d << 24 | v << 16 | S - a | 0
                                }
                            }
                            0 !== m && (i[S + m] = f - g << 24 | 64 << 16 | 0),
                            s.ini = d
                        }
                        return 0
                    }
                      , gn = r.sei
                      , yn = r.fei
                      , pn = r.dei
                      , L = r.uei
                      , mn = r.cei
                      , bn = r._ei
                      , C = r.yei
                      , wn = r.xei
                      , An = r.vei
                      , Tn = r.bei
                      , Sn = r.Nei
                      , xn = 16180
                      , Fn = 16190
                      , N = 16191
                      , Gn = 16199
                      , Vn = 16200
                      , _ = 16209
                      , ii = function ii(t) {
                        return (t >>> 24 & 255) + (t >>> 8 & 65280) + ((65280 & t) << 8) + ((255 & t) << 24)
                    };
                    function ai() {
                        this.Jti = null,
                        this.mode = 0,
                        this.oni = !1,
                        this.wrap = 0,
                        this.ani = !1,
                        this.flags = 0,
                        this.jri = 0,
                        this.check = 0,
                        this.total = 0,
                        this.head = null,
                        this.hni = 0,
                        this.Vri = 0,
                        this.Jri = 0,
                        this.qri = 0,
                        this.window = null,
                        this.Qri = 0,
                        this.ini = 0,
                        this.length = 0,
                        this.offset = 0,
                        this.wri = 0,
                        this.tni = null,
                        this.eni = null,
                        this.rni = 0,
                        this.nni = 0,
                        this.sni = 0,
                        this.fni = 0,
                        this.dni = 0,
                        this.uni = 0,
                        this.next = null,
                        this.cni = new Uint16Array(320),
                        this._ni = new Uint16Array(288),
                        this.pni = null,
                        this.yni = null,
                        this.lni = 0,
                        this.back = 0,
                        this.xni = 0
                    }
                    var oi, si, ui, fi, li, di, F = function F(t) {
                        var e;
                        return !t || !(e = t.state) || e.Jti !== t || e.mode < xn || 16211 < e.mode ? 1 : 0
                    }, hi = !0, vi = function vi(t) {
                        if (hi) {
                            li = new Int32Array(512),
                            di = new Int32Array(32);
                            for (var e = 0; e < 144; )
                                t.cni[e++] = 8;
                            for (; e < 256; )
                                t.cni[e++] = 9;
                            for (; e < 280; )
                                t.cni[e++] = 7;
                            for (; e < 288; )
                                t.cni[e++] = 8;
                            for (hn(1, t.cni, 0, 288, li, 0, t._ni, {
                                ini: 9
                            }),
                            e = 0; e < 32; )
                                t.cni[e++] = 5;
                            hn(2, t.cni, 0, 32, di, 0, t._ni, {
                                ini: 5
                            }),
                            hi = !1
                        }
                        t.tni = li,
                        t.rni = 9,
                        t.eni = di,
                        t.nni = 5
                    }, gi = function gi(t, e, r, n) {
                        var i, t = t.state;
                        return null === t.window && (t.Vri = 1 << t.hni,
                        t.qri = 0,
                        t.Jri = 0,
                        t.window = new Uint8Array(t.Vri)),
                        t.Vri <= n ? (t.window.set(e.subarray(r - t.Vri, r), 0),
                        t.qri = 0,
                        t.Jri = t.Vri) : (n < (i = t.Vri - t.qri) && (i = n),
                        t.window.set(e.subarray(r - n, r - n + i), t.qri),
                        (n -= i) ? (t.window.set(e.subarray(r - n, r), 0),
                        t.qri = n,
                        t.Jri = t.Vri) : (t.qri += i,
                        t.qri === t.Vri && (t.qri = 0),
                        t.Jri < t.Vri && (t.Jri += i))),
                        0
                    }, O = {
                        gni: si = function si(t) {
                            var e;
                            return F(t) ? C : ((e = t.state).Vri = 0,
                            e.Jri = 0,
                            e.qri = 0,
                            oi(t))
                        }
                        ,
                        wni: ui = function ui(t, e) {
                            var r, n;
                            return F(t) || (n = t.state,
                            e < 0 ? (r = 0,
                            e = -e) : (r = 5 + (e >> 4),
                            e < 48 && (e &= 15)),
                            e && (e < 8 || 15 < e)) ? C : (null !== n.window && n.hni !== e && (n.window = null),
                            n.wrap = r,
                            n.hni = e,
                            si(t))
                        }
                        ,
                        Rni: oi = function oi(t) {
                            var e;
                            return F(t) ? C : (e = t.state,
                            t.Xei = t.Fei = e.total = 0,
                            t.Aj = "",
                            e.wrap && (t.Wei = 1 & e.wrap),
                            e.mode = xn,
                            e.oni = 0,
                            e.ani = 0,
                            e.flags = -1,
                            e.jri = 32768,
                            e.head = null,
                            e.Qri = 0,
                            e.ini = 0,
                            e.tni = e.pni = new Int32Array(852),
                            e.eni = e.yni = new Int32Array(592),
                            e.lni = 1,
                            e.back = -1,
                            L)
                        }
                        ,
                        Eni: function(t) {
                            return fi(t, 15)
                        },
                        Sni: fi = function fi(t, e) {
                            var r;
                            return t ? (r = new ai,
                            (t.state = r).Jti = t,
                            r.window = null,
                            r.mode = xn,
                            (r = ui(t, e)) !== L && (t.state = null),
                            r) : C
                        }
                        ,
                        mni: function(t, e) {
                            var r, n, i, a, o, s, u, f, c, h, l, d, v, g, p, m, b, w, A, T, S, x, P, I, y = 0, M = new Uint8Array(4), $ = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
                            if (F(t) || !t.output || !t.input && 0 !== t.zei)
                                return C;
                            (r = t.state).mode === N && (r.mode = 16192),
                            o = t.Hei,
                            i = t.output,
                            a = t.Kei,
                            n = t.input,
                            f = r.Qri,
                            c = r.ini,
                            h = s = t.zei,
                            l = u = t.Zei,
                            x = L;
                            t: for (; ; )
                                switch (r.mode) {
                                case xn:
                                    if (0 === r.wrap)
                                        r.mode = 16192;
                                    else {
                                        for (; c < 16; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        2 & r.wrap && 35615 === f ? (0 === r.hni && (r.hni = 15),
                                        M[r.check = 0] = 255 & f,
                                        M[1] = f >>> 8 & 255,
                                        r.check = k(r.check, M, 2, 0),
                                        c = f = 0,
                                        r.mode = 16181) : (r.head && (r.head.done = !1),
                                        !(1 & r.wrap) || (((255 & f) << 8) + (f >> 8)) % 31 ? (t.Aj = "incorrect header check",
                                        r.mode = _) : (15 & f) !== Sn ? (t.Aj = "unknown compression method",
                                        r.mode = _) : (c -= 4,
                                        S = 8 + (15 & (f >>>= 4)),
                                        0 === r.hni && (r.hni = S),
                                        15 < S || S > r.hni ? (t.Aj = "invalid window size",
                                        r.mode = _) : (r.jri = 1 << r.hni,
                                        r.flags = 0,
                                        t.Wei = r.check = 1,
                                        r.mode = 512 & f ? 16189 : N,
                                        c = f = 0)))
                                    }
                                    break;
                                case 16181:
                                    for (; c < 16; ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    if (r.flags = f,
                                    (255 & r.flags) !== Sn) {
                                        t.Aj = "unknown compression method",
                                        r.mode = _;
                                        break
                                    }
                                    if (57344 & r.flags) {
                                        t.Aj = "unknown header flags set",
                                        r.mode = _;
                                        break
                                    }
                                    r.head && (r.head.text = f >> 8 & 1),
                                    512 & r.flags && 4 & r.wrap && (M[0] = 255 & f,
                                    M[1] = f >>> 8 & 255,
                                    r.check = k(r.check, M, 2, 0)),
                                    c = f = 0,
                                    r.mode = 16182;
                                case 16182:
                                    for (; c < 32; ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    r.head && (r.head.time = f),
                                    512 & r.flags && 4 & r.wrap && (M[0] = 255 & f,
                                    M[1] = f >>> 8 & 255,
                                    M[2] = f >>> 16 & 255,
                                    M[3] = f >>> 24 & 255,
                                    r.check = k(r.check, M, 4, 0)),
                                    c = f = 0,
                                    r.mode = 16183;
                                case 16183:
                                    for (; c < 16; ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    r.head && (r.head.vni = 255 & f,
                                    r.head.os = f >> 8),
                                    512 & r.flags && 4 & r.wrap && (M[0] = 255 & f,
                                    M[1] = f >>> 8 & 255,
                                    r.check = k(r.check, M, 2, 0)),
                                    c = f = 0,
                                    r.mode = 16184;
                                case 16184:
                                    if (1024 & r.flags) {
                                        for (; c < 16; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        r.length = f,
                                        r.head && (r.head.bni = f),
                                        512 & r.flags && 4 & r.wrap && (M[0] = 255 & f,
                                        M[1] = f >>> 8 & 255,
                                        r.check = k(r.check, M, 2, 0)),
                                        c = f = 0
                                    } else
                                        r.head && (r.head.wri = null);
                                    r.mode = 16185;
                                case 16185:
                                    if (1024 & r.flags && ((d = s < (d = r.length) ? s : d) && (r.head && (S = r.head.bni - r.length,
                                    r.head.wri || (r.head.wri = new Uint8Array(r.head.bni)),
                                    r.head.wri.set(n.subarray(a, a + d), S)),
                                    512 & r.flags && 4 & r.wrap && (r.check = k(r.check, n, d, a)),
                                    s -= d,
                                    a += d,
                                    r.length -= d),
                                    r.length))
                                        break t;
                                    r.length = 0,
                                    r.mode = 16186;
                                case 16186:
                                    if (2048 & r.flags) {
                                        if (0 === s)
                                            break t;
                                        for (d = 0; S = n[a + d++],
                                        r.head && S && r.length < 65536 && (r.head.name += String.fromCharCode(S)),
                                        S && d < s; )
                                            ;
                                        if (512 & r.flags && 4 & r.wrap && (r.check = k(r.check, n, d, a)),
                                        s -= d,
                                        a += d,
                                        S)
                                            break t
                                    } else
                                        r.head && (r.head.name = null);
                                    r.length = 0,
                                    r.mode = 16187;
                                case 16187:
                                    if (4096 & r.flags) {
                                        if (0 === s)
                                            break t;
                                        for (d = 0; S = n[a + d++],
                                        r.head && S && r.length < 65536 && (r.head.Rri += String.fromCharCode(S)),
                                        S && d < s; )
                                            ;
                                        if (512 & r.flags && 4 & r.wrap && (r.check = k(r.check, n, d, a)),
                                        s -= d,
                                        a += d,
                                        S)
                                            break t
                                    } else
                                        r.head && (r.head.Rri = null);
                                    r.mode = 16188;
                                case 16188:
                                    if (512 & r.flags) {
                                        for (; c < 16; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        if (4 & r.wrap && f !== (65535 & r.check)) {
                                            t.Aj = "header crc mismatch",
                                            r.mode = _;
                                            break
                                        }
                                        c = f = 0
                                    }
                                    r.head && (r.head.gri = r.flags >> 9 & 1,
                                    r.head.done = !0),
                                    t.Wei = r.check = 0,
                                    r.mode = N;
                                    break;
                                case 16189:
                                    for (; c < 32; ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    t.Wei = r.check = ii(f),
                                    c = f = 0,
                                    r.mode = Fn;
                                case Fn:
                                    if (0 === r.ani)
                                        return t.Hei = o,
                                        t.Zei = u,
                                        t.Kei = a,
                                        t.zei = s,
                                        r.Qri = f,
                                        r.ini = c,
                                        bn;
                                    t.Wei = r.check = 1,
                                    r.mode = N;
                                case N:
                                    if (e === yn || e === pn)
                                        break t;
                                case 16192:
                                    if (r.oni)
                                        f >>>= 7 & c,
                                        c -= 7 & c,
                                        r.mode = 16206;
                                    else {
                                        for (; c < 3; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        switch (r.oni = 1 & f,
                                        --c,
                                        3 & (f >>>= 1)) {
                                        case 0:
                                            r.mode = 16193;
                                            break;
                                        case 1:
                                            if (vi(r),
                                            r.mode = Gn,
                                            e !== pn)
                                                break;
                                            f >>>= 2,
                                            c -= 2;
                                            break t;
                                        case 2:
                                            r.mode = 16196;
                                            break;
                                        case 3:
                                            t.Aj = "invalid block type",
                                            r.mode = _
                                        }
                                        f >>>= 2,
                                        c -= 2
                                    }
                                    break;
                                case 16193:
                                    for (f >>>= 7 & c,
                                    c -= 7 & c; c < 32; ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    if ((65535 & f) != (f >>> 16 ^ 65535)) {
                                        t.Aj = "invalid stored block lengths",
                                        r.mode = _;
                                        break
                                    }
                                    if (r.length = 65535 & f,
                                    c = f = 0,
                                    r.mode = 16194,
                                    e === pn)
                                        break t;
                                case 16194:
                                    r.mode = 16195;
                                case 16195:
                                    if (d = r.length) {
                                        if (0 === (d = u < (d = s < d ? s : d) ? u : d))
                                            break t;
                                        i.set(n.subarray(a, a + d), o),
                                        s -= d,
                                        a += d,
                                        u -= d,
                                        o += d,
                                        r.length -= d
                                    } else
                                        r.mode = N;
                                    break;
                                case 16196:
                                    for (; c < 14; ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    if (r.fni = 257 + (31 & f),
                                    f >>>= 5,
                                    c -= 5,
                                    r.dni = 1 + (31 & f),
                                    f >>>= 5,
                                    c -= 5,
                                    r.sni = 4 + (15 & f),
                                    f >>>= 4,
                                    c -= 4,
                                    286 < r.fni || 30 < r.dni) {
                                        t.Aj = "too many length or distance symbols",
                                        r.mode = _;
                                        break
                                    }
                                    r.uni = 0,
                                    r.mode = 16197;
                                case 16197:
                                    for (; r.uni < r.sni; ) {
                                        for (; c < 3; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        r.cni[$[r.uni++]] = 7 & f,
                                        f >>>= 3,
                                        c -= 3
                                    }
                                    for (; r.uni < 19; )
                                        r.cni[$[r.uni++]] = 0;
                                    if (r.tni = r.pni,
                                    r.rni = 7,
                                    P = {
                                        ini: r.rni
                                    },
                                    x = hn(0, r.cni, 0, 19, r.tni, 0, r._ni, P),
                                    r.rni = P.ini,
                                    x) {
                                        t.Aj = "invalid code lengths set",
                                        r.mode = _;
                                        break
                                    }
                                    r.uni = 0,
                                    r.mode = 16198;
                                case 16198:
                                    for (; r.uni < r.fni + r.dni; ) {
                                        for (; m = (y = r.tni[f & (1 << r.rni) - 1]) >>> 16 & 255,
                                        b = 65535 & y,
                                        !((p = y >>> 24) <= c); ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        if (b < 16)
                                            f >>>= p,
                                            c -= p,
                                            r.cni[r.uni++] = b;
                                        else {
                                            if (16 === b) {
                                                for (I = p + 2; c < I; ) {
                                                    if (0 === s)
                                                        break t;
                                                    s--,
                                                    f += n[a++] << c,
                                                    c += 8
                                                }
                                                if (f >>>= p,
                                                c -= p,
                                                0 === r.uni) {
                                                    t.Aj = "invalid bit length repeat",
                                                    r.mode = _;
                                                    break
                                                }
                                                S = r.cni[r.uni - 1],
                                                d = 3 + (3 & f),
                                                f >>>= 2,
                                                c -= 2
                                            } else if (17 === b) {
                                                for (I = p + 3; c < I; ) {
                                                    if (0 === s)
                                                        break t;
                                                    s--,
                                                    f += n[a++] << c,
                                                    c += 8
                                                }
                                                S = 0,
                                                d = 3 + (7 & (f >>>= p)),
                                                f >>>= 3,
                                                c = c - p - 3
                                            } else {
                                                for (I = p + 7; c < I; ) {
                                                    if (0 === s)
                                                        break t;
                                                    s--,
                                                    f += n[a++] << c,
                                                    c += 8
                                                }
                                                S = 0,
                                                d = 11 + (127 & (f >>>= p)),
                                                f >>>= 7,
                                                c = c - p - 7
                                            }
                                            if (r.uni + d > r.fni + r.dni) {
                                                t.Aj = "invalid bit length repeat",
                                                r.mode = _;
                                                break
                                            }
                                            for (; d--; )
                                                r.cni[r.uni++] = S
                                        }
                                    }
                                    if (r.mode === _)
                                        break;
                                    if (0 === r.cni[256]) {
                                        t.Aj = "invalid code -- missing end-of-block",
                                        r.mode = _;
                                        break
                                    }
                                    if (r.rni = 9,
                                    P = {
                                        ini: r.rni
                                    },
                                    x = hn(1, r.cni, 0, r.fni, r.tni, 0, r._ni, P),
                                    r.rni = P.ini,
                                    x) {
                                        t.Aj = "invalid literal/lengths set",
                                        r.mode = _;
                                        break
                                    }
                                    if (r.nni = 6,
                                    r.eni = r.yni,
                                    P = {
                                        ini: r.nni
                                    },
                                    x = hn(2, r.cni, r.fni, r.dni, r.eni, 0, r._ni, P),
                                    r.nni = P.ini,
                                    x) {
                                        t.Aj = "invalid distances set",
                                        r.mode = _;
                                        break
                                    }
                                    if (r.mode = Gn,
                                    e === pn)
                                        break t;
                                case Gn:
                                    r.mode = Vn;
                                case Vn:
                                    if (6 <= s && 258 <= u) {
                                        t.Hei = o,
                                        t.Zei = u,
                                        t.Kei = a,
                                        t.zei = s,
                                        r.Qri = f,
                                        r.ini = c,
                                        !function(t, e) {
                                            var m, b, w, A, T, S, P = t.state, r = t.Kei, x = t.input, n = r + (t.zei - 5), i = t.Hei, M = t.output, a = i - (e - t.Zei), o = i + (t.Zei - 257), s = P.jri, u = P.Vri, f = P.Jri, c = P.qri, h = P.window, l = P.Qri, d = P.ini, v = P.tni, g = P.eni, y = (1 << P.rni) - 1, p = (1 << P.nni) - 1;
                                            t: do {
                                                for (d < 15 && (l += x[r++] << d,
                                                d += 8,
                                                l += x[r++] << d,
                                                d += 8),
                                                m = v[l & y]; ; ) {
                                                    if (l >>>= b = m >>> 24,
                                                    d -= b,
                                                    0 === (b = m >>> 16 & 255))
                                                        M[i++] = 65535 & m;
                                                    else {
                                                        if (!(16 & b)) {
                                                            if (0 == (64 & b)) {
                                                                m = v[(65535 & m) + (l & (1 << b) - 1)];
                                                                continue
                                                            }
                                                            if (32 & b) {
                                                                P.mode = 16191;
                                                                break t
                                                            }
                                                            t.Aj = "invalid literal/length code",
                                                            P.mode = Yr;
                                                            break t
                                                        }
                                                        for (w = 65535 & m,
                                                        (b &= 15) && (d < b && (l += x[r++] << d,
                                                        d += 8),
                                                        w += l & (1 << b) - 1,
                                                        l >>>= b,
                                                        d -= b),
                                                        d < 15 && (l += x[r++] << d,
                                                        d += 8,
                                                        l += x[r++] << d,
                                                        d += 8),
                                                        m = g[l & p]; ; ) {
                                                            if (l >>>= b = m >>> 24,
                                                            d -= b,
                                                            !(16 & (b = m >>> 16 & 255))) {
                                                                if (0 == (64 & b)) {
                                                                    m = g[(65535 & m) + (l & (1 << b) - 1)];
                                                                    continue
                                                                }
                                                                t.Aj = "invalid distance code",
                                                                P.mode = Yr;
                                                                break t
                                                            }
                                                            if (A = 65535 & m,
                                                            d < (b &= 15) && (l += x[r++] << d,
                                                            (d += 8) < b) && (l += x[r++] << d,
                                                            d += 8),
                                                            s < (A += l & (1 << b) - 1)) {
                                                                t.Aj = "invalid distance too far back",
                                                                P.mode = Yr;
                                                                break t
                                                            }
                                                            if (l >>>= b,
                                                            d -= b,
                                                            (b = i - a) < A) {
                                                                if (f < (b = A - b) && P.lni) {
                                                                    t.Aj = "invalid distance too far back",
                                                                    P.mode = Yr;
                                                                    break t
                                                                }
                                                                if (S = h,
                                                                (T = 0) === c) {
                                                                    if (T += u - b,
                                                                    b < w) {
                                                                        for (w -= b; M[i++] = h[T++],
                                                                        --b; )
                                                                            ;
                                                                        T = i - A,
                                                                        S = M
                                                                    }
                                                                } else if (c < b) {
                                                                    if (T += u + c - b,
                                                                    (b -= c) < w) {
                                                                        for (w -= b; M[i++] = h[T++],
                                                                        --b; )
                                                                            ;
                                                                        if (T = 0,
                                                                        c < w) {
                                                                            for (w -= b = c; M[i++] = h[T++],
                                                                            --b; )
                                                                                ;
                                                                            T = i - A,
                                                                            S = M
                                                                        }
                                                                    }
                                                                } else if (T += c - b,
                                                                b < w) {
                                                                    for (w -= b; M[i++] = h[T++],
                                                                    --b; )
                                                                        ;
                                                                    T = i - A,
                                                                    S = M
                                                                }
                                                                for (; 2 < w; )
                                                                    M[i++] = S[T++],
                                                                    M[i++] = S[T++],
                                                                    M[i++] = S[T++],
                                                                    w -= 3;
                                                                w && (M[i++] = S[T++],
                                                                1 < w) && (M[i++] = S[T++])
                                                            } else {
                                                                for (T = i - A; M[i++] = M[T++],
                                                                M[i++] = M[T++],
                                                                M[i++] = M[T++],
                                                                2 < (w -= 3); )
                                                                    ;
                                                                w && (M[i++] = M[T++],
                                                                1 < w) && (M[i++] = M[T++])
                                                            }
                                                            break
                                                        }
                                                    }
                                                    break
                                                }
                                            } while (r < n && i < o);
                                            l &= (1 << (d -= (w = d >> 3) << 3)) - 1,
                                            t.Kei = r -= w,
                                            t.Hei = i,
                                            t.zei = r < n ? n - r + 5 : 5 - (r - n),
                                            t.Zei = i < o ? o - i + 257 : 257 - (i - o),
                                            P.Qri = l,
                                            P.ini = d
                                        }(t, l),
                                        o = t.Hei,
                                        i = t.output,
                                        u = t.Zei,
                                        a = t.Kei,
                                        n = t.input,
                                        s = t.zei,
                                        f = r.Qri,
                                        c = r.ini,
                                        r.mode === N && (r.back = -1);
                                        break
                                    }
                                    for (r.back = 0; m = (y = r.tni[f & (1 << r.rni) - 1]) >>> 16 & 255,
                                    b = 65535 & y,
                                    !((p = y >>> 24) <= c); ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    if (m && 0 == (240 & m)) {
                                        for (w = p,
                                        A = m,
                                        T = b; m = (y = r.tni[T + ((f & (1 << w + A) - 1) >> w)]) >>> 16 & 255,
                                        b = 65535 & y,
                                        !(w + (p = y >>> 24) <= c); ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        f >>>= w,
                                        c -= w,
                                        r.back += w
                                    }
                                    if (f >>>= p,
                                    c -= p,
                                    r.back += p,
                                    r.length = b,
                                    0 === m) {
                                        r.mode = 16205;
                                        break
                                    }
                                    if (32 & m) {
                                        r.back = -1,
                                        r.mode = N;
                                        break
                                    }
                                    if (64 & m) {
                                        t.Aj = "invalid literal/length code",
                                        r.mode = _;
                                        break
                                    }
                                    r.wri = 15 & m,
                                    r.mode = 16201;
                                case 16201:
                                    if (r.wri) {
                                        for (I = r.wri; c < I; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        r.length += f & (1 << r.wri) - 1,
                                        f >>>= r.wri,
                                        c -= r.wri,
                                        r.back += r.wri
                                    }
                                    r.xni = r.length,
                                    r.mode = 16202;
                                case 16202:
                                    for (; m = (y = r.eni[f & (1 << r.nni) - 1]) >>> 16 & 255,
                                    b = 65535 & y,
                                    !((p = y >>> 24) <= c); ) {
                                        if (0 === s)
                                            break t;
                                        s--,
                                        f += n[a++] << c,
                                        c += 8
                                    }
                                    if (0 == (240 & m)) {
                                        for (w = p,
                                        A = m,
                                        T = b; m = (y = r.eni[T + ((f & (1 << w + A) - 1) >> w)]) >>> 16 & 255,
                                        b = 65535 & y,
                                        !(w + (p = y >>> 24) <= c); ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        f >>>= w,
                                        c -= w,
                                        r.back += w
                                    }
                                    if (f >>>= p,
                                    c -= p,
                                    r.back += p,
                                    64 & m) {
                                        t.Aj = "invalid distance code",
                                        r.mode = _;
                                        break
                                    }
                                    r.offset = b,
                                    r.wri = 15 & m,
                                    r.mode = 16203;
                                case 16203:
                                    if (r.wri) {
                                        for (I = r.wri; c < I; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        r.offset += f & (1 << r.wri) - 1,
                                        f >>>= r.wri,
                                        c -= r.wri,
                                        r.back += r.wri
                                    }
                                    if (r.offset > r.jri) {
                                        t.Aj = "invalid distance too far back",
                                        r.mode = _;
                                        break
                                    }
                                    r.mode = 16204;
                                case 16204:
                                    if (0 === u)
                                        break t;
                                    if (r.offset > (d = l - u)) {
                                        if ((d = r.offset - d) > r.Jri && r.lni) {
                                            t.Aj = "invalid distance too far back",
                                            r.mode = _;
                                            break
                                        }
                                        v = d > r.qri ? (d -= r.qri,
                                        r.Vri - d) : r.qri - d,
                                        d > r.length && (d = r.length),
                                        g = r.window
                                    } else
                                        g = i,
                                        v = o - r.offset,
                                        d = r.length;
                                    for (u -= d = u < d ? u : d,
                                    r.length -= d; i[o++] = g[v++],
                                    --d; )
                                        ;
                                    0 === r.length && (r.mode = Vn);
                                    break;
                                case 16205:
                                    if (0 === u)
                                        break t;
                                    i[o++] = r.length,
                                    u--,
                                    r.mode = Vn;
                                    break;
                                case 16206:
                                    if (r.wrap) {
                                        for (; c < 32; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f |= n[a++] << c,
                                            c += 8
                                        }
                                        if (l -= u,
                                        t.Fei += l,
                                        r.total += l,
                                        4 & r.wrap && l && (t.Wei = r.check = (r.flags ? k : Kt)(r.check, i, l, o - l)),
                                        l = u,
                                        4 & r.wrap && (r.flags ? f : ii(f)) !== r.check) {
                                            t.Aj = "incorrect data check",
                                            r.mode = _;
                                            break
                                        }
                                        c = f = 0
                                    }
                                    r.mode = 16207;
                                case 16207:
                                    if (r.wrap && r.flags) {
                                        for (; c < 32; ) {
                                            if (0 === s)
                                                break t;
                                            s--,
                                            f += n[a++] << c,
                                            c += 8
                                        }
                                        if (4 & r.wrap && f !== (4294967295 & r.total)) {
                                            t.Aj = "incorrect length check",
                                            r.mode = _;
                                            break
                                        }
                                        c = f = 0
                                    }
                                    r.mode = 16208;
                                case 16208:
                                    x = mn;
                                    break t;
                                case _:
                                    x = wn;
                                    break t;
                                case 16210:
                                    return An;
                                default:
                                    return C
                                }
                            return t.Hei = o,
                            t.Zei = u,
                            t.Kei = a,
                            t.zei = s,
                            r.Qri = f,
                            r.ini = c,
                            (r.Vri || l !== t.Zei && r.mode < _ && (r.mode < 16206 || e !== gn)) && gi(t, t.output, t.Hei, l - t.Zei),
                            l -= t.Zei,
                            t.Xei += h -= t.zei,
                            t.Fei += l,
                            r.total += l,
                            4 & r.wrap && l && (t.Wei = r.check = (r.flags ? k : Kt)(r.check, i, l, t.Hei - l)),
                            t.Vti = r.ini + (r.oni ? 64 : 0) + (r.mode === N ? 128 : 0) + (r.mode === Gn || 16194 === r.mode ? 256 : 0),
                            x = (0 == h && 0 === l || e === gn) && x === L ? Tn : x
                        },
                        Tni: function(t) {
                            var e;
                            return F(t) ? C : ((e = t.state).window && (e.window = null),
                            t.state = null,
                            L)
                        },
                        Ani: function(t, e) {
                            return F(t) || 0 == (2 & (t = t.state).wrap) ? C : ((t.head = e).done = !1,
                            L)
                        },
                        Ini: function(t, e) {
                            var n, r = e.length;
                            return F(t) || 0 !== (n = t.state).wrap && n.mode !== Fn ? C : n.mode === Fn && Kt(1, e, r, 0) !== n.check ? wn : gi(t, e, r, r) ? (n.mode = 16210,
                            An) : (n.ani = 1,
                            L)
                        },
                        Dni: "pako inflate (from Nodeca project)"
                    };
                    var Ci = function() {
                        this.text = 0,
                        this.time = 0,
                        this.vni = 0,
                        this.os = 0,
                        this.wri = null,
                        this.bni = 0,
                        this.name = "",
                        this.Rri = "",
                        this.gri = 0,
                        this.done = !1
                    }
                      , Ni = Object.prototype.toString
                      , _i = r.lei
                      , Fi = r.sei
                      , Oi = r.uei
                      , Ei = r.cei
                      , Ui = r._ei
                      , ji = r.yei
                      , Ri = r.xei
                      , Di = r.vei;
                    function Bi(t) {
                        this.options = wr_assign({
                            $ri: 65536,
                            Zri: 15,
                            to: ""
                        }, t || {});
                        var e = this.options
                          , t = (e.raw && 0 <= e.Zri && e.Zri < 16 && (e.Zri = -e.Zri,
                        0 === e.Zri) && (e.Zri = -15),
                        !(0 <= e.Zri && e.Zri < 16) || t && t.Zri || (e.Zri += 32),
                        15 < e.Zri && e.Zri < 48 && 0 == (15 & e.Zri) && (e.Zri |= 15),
                        this.err = 0,
                        this.Aj = "",
                        this.ended = !1,
                        this.Fri = [],
                        this.Jti = new kr,
                        this.Jti.Zei = 0,
                        O.Sni(this.Jti, e.Zri));
                        if (t !== Oi)
                            throw new Error(i[t]);
                        if (this.Uri = new Ci,
                        O.Ani(this.Jti, this.Uri),
                        e.Pri && ("string" == typeof e.Pri ? e.Pri = Ir_kri(e.Pri) : "[object ArrayBuffer]" === Ni.call(e.Pri) && (e.Pri = new Uint8Array(e.Pri)),
                        e.raw) && (t = O.Ini(this.Jti, e.Pri)) !== Oi)
                            throw new Error(i[t])
                    }
                    function Gi(t, e) {
                        e = new Bi(e);
                        if (e.push(t),
                        e.err)
                            throw e.Aj || i[e.err];
                        return e.result
                    }
                    Bi.prototype.push = function(t, e) {
                        var a, o, r = this.Jti, n = this.options.$ri, i = this.options.Pri;
                        if (this.ended)
                            return !1;
                        for (o = e === ~~e ? e : !0 === e ? Fi : _i,
                        "[object ArrayBuffer]" === Ni.call(t) ? r.input = new Uint8Array(t) : r.input = t,
                        r.Kei = 0,
                        r.zei = r.input.length; ; ) {
                            for (0 === r.Zei && (r.output = new Uint8Array(n),
                            r.Hei = 0,
                            r.Zei = n),
                            (a = O.mni(r, o)) === Ui && i && ((a = O.Ini(r, i)) === Oi ? a = O.mni(r, o) : a === Ri && (a = Ui)); 0 < r.zei && a === Ei && 0 < r.state.wrap && 0 !== t[r.Kei]; )
                                O.gni(r),
                                a = O.mni(r, o);
                            switch (a) {
                            case ji:
                            case Ri:
                            case Ui:
                            case Di:
                                return this.Wri(a),
                                !(this.ended = !0)
                            }
                            var u, f, c, s = r.Zei;
                            if (!r.Hei || 0 !== r.Zei && a !== Ei || ("string" === this.options.to ? (u = Ir_Lri(r.output, r.Hei),
                            f = r.Hei - u,
                            c = Ir_Cri(r.output, u),
                            r.Hei = f,
                            r.Zei = n - f,
                            f && r.output.set(r.output.subarray(u, u + f), 0),
                            this.Kri(c)) : this.Kri(r.output.length === r.Hei ? r.output : r.output.subarray(0, r.Hei))),
                            a !== Oi || 0 !== s) {
                                if (a === Ei)
                                    return a = O.Tni(this.Jti),
                                    this.Wri(a),
                                    this.ended = !0;
                                if (0 === r.zei)
                                    break
                            }
                        }
                        return !0
                    }
                    ,
                    Bi.prototype.Kri = function(t) {
                        this.Fri.push(t)
                    }
                    ,
                    Bi.prototype.Wri = function(t) {
                        t === Oi && ("string" === this.options.to ? this.result = this.Fri.join("") : this.result = wr_Nri(this.Fri)),
                        this.Fri = [],
                        this.err = t,
                        this.Aj = this.Jti.Aj
                    }
                    ;
                    var qt_nei = qt_iei
                      , qt_iei = qt_tei
                      , qt_tei = qt_eei
                      , qt_eei = qt_rei
                      , qt_rei = Bi
                      , fa = Gi
                      , ca = function(t, e) {
                        return (e = e || {}).raw = !0,
                        Gi(t, e)
                    }
                      , ha = Gi
                      , da = {
                        Xri: qt_nei,
                        Iri: qt_iei,
                        Yri: qt_tei,
                        Hri: qt_eei,
                        Oni: qt_rei,
                        mni: fa,
                        Mni: ca,
                        Nni: ha,
                        Gri: r
                    };
                    t.Xri = qt_nei,
                    t.Oni = qt_rei,
                    t.Gri = r,
                    t["default"] = da,
                    t.Iri = qt_iei,
                    t.Yri = qt_tei,
                    t.Hri = qt_eei,
                    t.mni = fa,
                    t.Mni = ca,
                    t.Nni = ha,
                    Object.defineProperty(t, "gP", {
                        value: !0
                    })
                }(e)
            }), pako = unwrapExports(pako_es5), decodeStyle = function(t) {
                return t = new pbf(t),
                MapStyle.read(t)
            }, decodePois = function(t) {
                return t = new pbf(t),
                PoiLayer.read(t)
            }, decodeRoads = function(t) {
                return t = new pbf(t),
                RoadLayer.read(t)
            }, decodeTransit = function(t) {
                return t = new pbf(t),
                TransitLayer.read(t)
            }, decodeRegions = function(t) {
                return t = new pbf(t),
                RegionLayer.read(t)
            }, decodeBuildings = function(t) {
                return t = new pbf(t),
                BuildingLayer.read(t)
            }, decodeTiles = function(t) {
                for (var t = new pbf(t), e = (t = Result.read(t)).tiles, r = 0, n = e.length; r < n; r += 1)
                    for (var i = e[r].layers, a = 0, o = i.length; a < o; a += 1)
                        switch (i[a].type) {
                        case 0:
                            i[a].d = decodePois(i[a].d);
                            break;
                        case 1:
                            i[a].d = decodeRoads(i[a].d);
                            break;
                        case 2:
                            i[a].d = decodeRegions(i[a].d);
                            break;
                        case 3:
                            i[a].d = decodeBuildings(i[a].d);
                            break;
                        case 4:
                            i[a].d = decodeTransit(i[a].d)
                        }
                return t
            }, UnzipAndDecodeTiles = function(t) {
                for (var e, r, n = new DataView(t), i = 0; i < t.byteLength; )
                    try {
                        var a = n.getUint32(i, !1);
                        if (i += 4,
                        a <= 0 || a > t.byteLength - i) {
                            console.log("Invalid packet length:", a);
                            var o = new TextDecoder("utf-8").decode(t);
                            console.log(o);
                            break
                        }
                        var s = void 0;
                        try {
                            s = new Uint8Array(t.slice(i, i + a))
                        } catch (c) {
                            console.log("Failed to create Uint8Array:", c);
                            break
                        }
                        i += a;
                        var u = pako.Nni(s)
                          , f = decodeTiles(new Uint8Array(u));
                        r ? r.tiles && 0 < r.tiles.length && (e = r.tiles).push.apply(e, f.tiles) : r = f
                    } catch (h) {
                        console.error("Error processing data chunk:", h);
                        break
                    }
                return r
            }, CONSTS$2 = {
                _U: ["th", "my"]
            }, SDFManagerBase = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.CLASS_NAME = "SDFManagerBase",
                    t
                }
                return __extends(t, e),
                t.jU = function(t) {
                    return t = LangManager.gG(t + ""),
                    -1 !== CONSTS$2._U.indexOf(t)
                }
                ,
                t.prototype.FU = function(t) {
                    for (var e = [], r = 0, n = t; r < n.length; r++) {
                        var i = n[r];
                        LangManager.gG(i + ""),
                        e.push(i)
                    }
                    return {
                        UU: e,
                        DU: []
                    }
                }
                ,
                t.prototype.measureText = function(t, e, r) {
                    if (r) {
                        r.font = (e || 12) + "px";
                        for (var n = "", i = 0, a = t; i < a.length; i++) {
                            var o = a[i];
                            n += String.fromCharCode(o)
                        }
                        return r.measureText(n).width
                    }
                    return 0
                }
                ,
                t.prototype.lineBreak = function(t, e) {
                    void 0 === t && (t = "");
                    var n = void 0 === (r = (e = void 0 === e ? {} : e).fontSize) ? 12 : r
                      , i = e.CO
                      , r = void 0 === (r = e.fj) ? 6 : r
                      , a = e.YQ
                      , o = e.u6t
                      , s = [];
                    if (o)
                        for (var u = 0; u < o.length - 1; u++) {
                            var f = o[u]
                              , c = o[u + 1];
                            s.push(t.slice(f, c))
                        }
                    else
                        s = t.split("\n");
                    var h = []
                      , l = []
                      , d = [0];
                    if ("labelsLayer" === e.from) {
                        for (var v = t.length, g = Math.ceil(v / r), y = Math.ceil(v / g), p = void 0, m = 0, u = 0; u < g; u++) {
                            h[u] || (h[u] = [m]),
                            0 === u ? p = i.slice(0, m = v % y || y) : (p = i.slice(m, m + y),
                            m += y);
                            var b = this.measureText(p, n, a);
                            l.push(b),
                            h[u].push(m)
                        }
                        for (u = 0; u < h.length; u++) {
                            var w = h[u];
                            d.push(w[w.length - 1])
                        }
                    } else
                        for (u = m = 0; u < s.length; u++) {
                            for (var w = s[u], p = [], A = 0; A < w.length; A++)
                                p.push(w.charCodeAt(A));
                            b = this.measureText(p, n, a),
                            l.push(b),
                            h.push([m, m + w.length]),
                            m += w.length,
                            d.push(m)
                        }
                    return {
                        lines: h,
                        oQ: d,
                        width: l,
                        maxWidth: Math.max.apply(Math, l)
                    }
                }
                ,
                t.prototype.GU = function(t, e) {
                    for (var r = [], n = 0, i = 0, a = [], o = 0, s = t.length, u = 0; u < s; u++) {
                        var f = t[u];
                        i += f,
                        r[n] || (r[n] = []),
                        e < i && (r[++n] = [],
                        a.push(o),
                        o = i = 0),
                        r[n].push(u),
                        o += f,
                        u === s - 1 && a.push(o)
                    }
                    return {
                        lines: r,
                        BU: a
                    }
                }
                ,
                t.prototype.destroy = function() {}
                ,
                t
            }(Event), LoadFlag, SDFManagerWorker = (function(t) {
                t.TEXTUREFINISH = "TEXTUREFINISH",
                t.UNLOAD = "unload",
                t.LOADING = "loading",
                t.LOADED = "loaded",
                t.FAIL = "fail"
            }(LoadFlag = LoadFlag || {}),
            function(t) {
                t.AllLoaded = "AllLoaded",
                t.AllUnLoaded = "AllUnLoaded",
                t.SomeLoading = "SomeLoading",
                t.AllLoading = "AllLoading"
            }(exports.qu || (exports.qu = {})),
            function(r) {
                function t(t) {
                    var e = r.call(this) || this;
                    return e.CLASS_NAME = "SDFManagerWorker",
                    e.protocol = "https",
                    e.range = [],
                    e.info = {},
                    e.dc = 0,
                    e._c = {},
                    e._size = 24,
                    e.nc = new AdaptorMap,
                    e.xc = [],
                    e.bc = {},
                    e.Xu = {},
                    e.yc = 1,
                    e.fN = {},
                    e.ac = t.z_,
                    e._parent = t.parent,
                    e
                }
                return __extends(t, r),
                t.prototype.vW = function(t, e) {
                    var n = void 0 === (r = e.tiles) ? [] : r
                      , i = e.cb
                      , a = e.optimalZoom
                      , r = void 0 === (r = e.tags) ? [] : r
                      , o = e.stamp;
                    this.cN = a,
                    this.fN[o] || (this.fN[o] = r);
                    for (var s = 0; s < n.length; s++) {
                        var u = n[s]
                          , f = this.Zu(t);
                        e.result = f,
                        this.loadData(t, {
                            tile: u,
                            result: f,
                            cb: i,
                            optimalZoom: a,
                            stamp: o,
                            i: s
                        })
                    }
                }
                ,
                t.prototype.loadData = function(t, e) {
                    var r = this
                      , n = e.cb
                      , i = e.tile
                      , o = e.stamp
                      , s = e.i
                      , u = e.result || this.Zu(t);
                    switch (u.status) {
                    case exports.qu.AllLoaded:
                        n([]);
                        break;
                    case exports.qu.AllUnLoaded:
                        var f = this.Yu(n, {
                            tile: i,
                            stamp: o,
                            index: s
                        });
                        this.MI(u.Vu, function(t) {
                            r.Xu[f] = t = void 0 === t ? {} : t,
                            r.Hu()
                        });
                        break;
                    case exports.qu.SomeLoading:
                        var c = this.Yu(n, {
                            tile: i,
                            stamp: o,
                            index: s
                        });
                        this.MI(u.Vu, function(t) {
                            r.Xu[c] = t = void 0 === t ? {} : t,
                            r.Hu()
                        });
                        break;
                    case exports.qu.AllLoading:
                        var h = this.Yu(n, {
                            tile: i,
                            stamp: o,
                            index: s
                        });
                        this.Xu[h] = [],
                        this.Hu()
                    }
                }
                ,
                t.prototype.mz = function(t) {
                    var e = this.info || {};
                    return e[t] && (e = e[t]).pos && e.info[t] ? {
                        key: t,
                        index: exports.cY.dynamic,
                        "char": e.info[t],
                        pos: e.pos
                    } : null
                }
                ,
                t.prototype.measureText = function(t, e) {
                    for (var r = CONSTS.ic, n = 0, i = this.info, a = e / this._size, o = this.nc, s = 0, u = t; s < u.length; s++) {
                        var f, c, h = u[s], l = void 0, d = h;
                        if ((l = o.get(d)) || i.hasOwnProperty(d) && (c = i[d].info[d]) && this.nc.set(h, l = c[4]),
                        !l)
                            for (var v in i)
                                (v.includes(d + "|") || v.includes("|" + d)) && (f = v.split("|").length,
                                c = i[v].info[v]) && (v = Math.floor(c[4] / f),
                                this.nc.set(h, l = v));
                        n += (l + r) * a
                    }
                    return n
                }
                ,
                t.prototype.Ju = function(t) {
                    for (var e = {}, r = 0, n = t; r < n.length; r++) {
                        var i = n[r]
                          , a = i.range
                          , o = i.pos
                          , s = this.info;
                        s[a],
                        s[a] = {
                            info: ((s = {})[a] = i.info,
                            s),
                            pos: o
                        },
                        this.range.push(a),
                        e[a] = 1
                    }
                    return e
                }
                ,
                t.prototype.AI = function(t, e) {
                    this.info[t] && (this.info[t].pos = e)
                }
                ,
                t.prototype.MI = function(e, r) {
                    for (var n = this, t = (void 0 === e && (e = []),
                    CONSTS.Mj), i = 0, a = e; i < a.length; i++) {
                        var o = a[i];
                        this._c[o] = !0
                    }
                    for (var s = [], u = 0, f = this.FU(e), c = f.UU, h = f.DU, l = h.length, d = Math.ceil(l / CONSTS.Mj); u < d; ) {
                        var v = h.slice(v = t * u, l < v + t ? l : v + t)
                          , v = this.xI(v);
                        s.push(v),
                        u++
                    }
                    s.push(this.pG(c)),
                    Promise.all(s).then(function(t) {
                        n.II(e),
                        t = n.zU(t),
                        n.Ju(t),
                        r(t)
                    })
                }
                ,
                t.prototype.pG = function(t) {
                    var r = this;
                    return new Promise(function(e) {
                        r._parent.loadWordsByFront({
                            Es: t,
                            cb: function(t) {
                                e(t)
                            }
                        })
                    }
                    )
                }
                ,
                t.prototype.xI = function(t) {
                    var a = this
                      , e = this.fc() + ("/getsdfdata?chars=" + t.join(",").split(",").join("|"));
                    return new Promise(function(n, i) {
                        XHR.send(e, {
                            Me: "json",
                            method: "get",
                            qw: function(t) {
                                var e, r;
                                t && t.info ? (e = a.vc(t.info),
                                r = new ImageDataWraper(e,t.url),
                                t.url = r,
                                n({
                                    range: e,
                                    info: t
                                })) : i(null)
                            },
                            error: function() {
                                i(null)
                            }
                        })
                    }
                    )
                }
                ,
                t.prototype.fc = function() {
                    var t = CONSTS.pc
                      , e = this.protocol + t[this.dc];
                    return this.dc = (this.dc + 1) % t.length,
                    e
                }
                ,
                t.prototype.vc = function(t) {
                    void 0 === t && (t = {});
                    (t = map(Object.keys(t), function(t) {
                        return parseInt(t, 10)
                    })).sort(function(t, e) {
                        return t - e
                    });
                    var e = t.length;
                    return 2 <= e ? t[0] + "-" + t[e - 1] : 1 === e ? "" + t[0] : ""
                }
                ,
                t.prototype.gc = function(t) {
                    var e = this.range || []
                      , r = this.info || {};
                    if (-1 !== e.indexOf(t))
                        return !0;
                    for (var n = parseInt(t, 10), i = 0, a = e; i < a.length; i++) {
                        var o = a[i];
                        if (o.indexOf("-") < 0) {
                            if (n === +o && (r[o] && r[o].info || {})[t])
                                return !0
                        } else {
                            var s = o.split("-")
                              , u = parseInt(s[0] || "", 10)
                              , s = parseInt(s[1] || "", 10);
                            if (u <= n && n <= s && (r[o] && r[o].info || {})[t])
                                return !0
                        }
                    }
                    return !1
                }
                ,
                t.prototype.wc = function(t) {
                    return this._c[t]
                }
                ,
                t.prototype.Zu = function(t) {
                    for (var e = [], r = 0, n = 0, i = 0, a = t; i < a.length; i++) {
                        var o = a[i];
                        this.gc(o) || (this.wc(o) ? n += 1 : (r += 1,
                        e.push(o)))
                    }
                    return 0 === n && 0 === r ? {
                        status: exports.qu.AllLoaded,
                        Vu: e
                    } : 0 < r && 0 === n ? {
                        status: exports.qu.AllUnLoaded,
                        Vu: e
                    } : 0 === r && 0 < n ? {
                        status: exports.qu.AllLoading,
                        Vu: e
                    } : {
                        status: exports.qu.SomeLoading,
                        Vu: e
                    }
                }
                ,
                t.prototype.Yu = function(t, e) {
                    void 0 === e && (e = {});
                    var r = this.yc += 1;
                    return this.xc.push(r),
                    this.bc[r] = t,
                    this.bc[r] = {
                        cb: t,
                        params: e
                    },
                    r
                }
                ,
                t.prototype.Hu = function() {
                    var t, e, r = this.xc[0];
                    r && (t = this.Xu[r]) && (this.xc.shift(),
                    (e = this.bc[r]) ? e.cb(t) : console.error("sdf task error"),
                    delete this.Xu[r],
                    delete this.bc[r],
                    this.Hu())
                }
                ,
                t.prototype.II = function(t) {
                    for (var e = 0, r = t; e < r.length; e++) {
                        var n = r[e];
                        delete this._c[n]
                    }
                }
                ,
                t.prototype.zU = function(t) {
                    for (var e = [], r = 0, n = t = void 0 === t ? [] : t; r < n.length; r++) {
                        var i = n[r];
                        if (Array.isArray(i))
                            for (var a = 0, o = i; a < o.length; a++) {
                                var s = o[a];
                                e.push(s)
                            }
                        else
                            e.push(i)
                    }
                    return e
                }
                ,
                t
            }(SDFManagerBase)), TaskManager = (function(t) {
                t[t.stop = 0] = "stop",
                t[t.finish = 1] = "finish",
                t[t.pause = 2] = "pause"
            }(exports.vY || (exports.vY = {})),
            function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t.id = 0,
                    t.LV = [],
                    t._V = {},
                    t.CV = {},
                    t
                }
                return __extends(t, e),
                t.prototype.register = function(t, e, r) {
                    if (this.CV[t])
                        throw Error("TaskManager: Exist Task Creator");
                    this.CV[t] = {
                        PV: e,
                        OV: r
                    }
                }
                ,
                t.prototype.add = function(t, e) {
                    var r;
                    if (this.CV[t])
                        return t = this.CV[t],
                        r = this.id++,
                        e = t.PV(e),
                        this.LV.push({
                            UQ: e,
                            OV: {
                                id: r,
                                kY: t.OV.kY
                            }
                        }),
                        r;
                    throw Error("TaskManager: Not Exist Task Type")
                }
                ,
                t.prototype.XQ = function(t, e, r) {
                    void 0 === e && (e = {
                        kY: Infinity
                    }),
                    void 0 === r && (r = !1);
                    var n = this.id++;
                    return r ? this.LV.unshift({
                        UQ: t,
                        OV: {
                            id: this.id++,
                            kY: e.kY
                        }
                    }) : this.LV.push({
                        UQ: t,
                        OV: {
                            id: this.id++,
                            kY: e.kY
                        }
                    }),
                    n
                }
                ,
                t.prototype.exec = function(t) {
                    this.jV();
                    for (var e = t, r = Date.now(); 0 < e; ) {
                        var n = this.LV.shift();
                        if (!n)
                            break;
                        var i = n.UQ.play(e);
                        n.UQ.status === exports.vY.finish ? this.emit("task:" + n.OV.id, {
                            data: i
                        }) : this.LV.unshift(n),
                        e = t - (Date.now() - r),
                        0 === this.LV.length && this.emit("taskclear", !0)
                    }
                }
                ,
                t.prototype.xY = function() {
                    return 0 < this.LV.length
                }
                ,
                t.prototype.destroy = function() {
                    this.LV = []
                }
                ,
                t.prototype.clear = function(e) {
                    this.LV = e ? this.LV.filter(function(t) {
                        return t.UQ.type === e
                    }) : []
                }
                ,
                t.prototype.jV = function() {
                    this.LV.sort(function(t, e) {
                        return t.OV.kY - e.OV.kY
                    })
                }
                ,
                t
            }(Event)), Actor = function() {
                function t(t, e, r) {
                    this.UD = !1,
                    this.gI = this.gI.bind(this),
                    this.target = t,
                    this.parent = e,
                    this.dI = r,
                    this.pI = {},
                    this.bI = Browser.DW ? 1 : 0,
                    this.target.addEventListener("message", this.gI, !1)
                }
                return t.prototype.send = function(t, e, r, n) {
                    var i = this
                      , a = r ? this.dI + ":" + this.bI : null
                      , o = (this.bI += 2,
                    r && a && (this.pI[a] = r),
                    [])
                      , s = serialize(e, o);
                    if (this.target.postMessage({
                        yI: n,
                        mI: this.dI,
                        type: t,
                        id: String(a),
                        data: s
                    }, o),
                    r)
                        return {
                            cancel: function() {
                                i.target.postMessage({
                                    yI: n,
                                    mI: i.dI,
                                    type: "<cancel>",
                                    id: String(a),
                                    key: e.ya
                                }),
                                a && delete i.pI[a]
                            }
                        }
                }
                ,
                t.prototype.gI = function(t) {
                    var n, e, i = this;
                    Browser.DW && "destroy" === t.data.type && self.close();
                    var a = (t = t.data).id;
                    t.yI && this.dI !== t.yI || ("<cancel>" === t.type ? (e = this.pI[t.id],
                    delete this.pI[t.id],
                    e && e("<cancel>")) : "<response>" === t.type ? (e = this.pI[t.id],
                    delete this.pI[t.id],
                    e && t.error ? e(deserialize(t.error)) : e && e(null, deserialize(t.data))) : "undefined" != typeof t.id && this.parent[t.type] && (n = function(t, e) {
                        delete i.pI[a];
                        var r = []
                          , e = serialize(e, r);
                        i.target.postMessage({
                            mI: i.dI,
                            type: "<response>",
                            id: String(a),
                            error: t ? serialize(t) : null,
                            data: e
                        }, r),
                        n = undefined
                    }
                    ,
                    this.pI[t.id] = null,
                    e = this.parent[t.type](t.mI, deserialize(t.data), n)) && null === this.pI[t.id] && (this.pI[t.id] = e.cancel))
                }
                ,
                t.prototype.remove = function() {
                    this.target.removeEventListener("message", this.gI, !1)
                }
                ,
                t
            }(), TaskPool = function() {
                function t() {
                    this.listener = {},
                    this.SN = {}
                }
                return t.prototype.nS = function(r, t) {
                    var n = this;
                    return this.SN[r] = !0,
                    this.listener[r] || (this.listener[r] = []),
                    t(function(t, e) {
                        n.$N(r, t, e)
                    })
                }
                ,
                t.prototype.cancel = function(t) {
                    delete this.SN[t]
                }
                ,
                t.prototype.has = function(t) {
                    return Boolean(this.SN[t])
                }
                ,
                t.prototype.GN = function(t) {
                    return this.listener[t] && 0 < this.listener[t].length
                }
                ,
                t.prototype.SH = function(t, e) {
                    this.listener[t] || (this.listener[t] = []),
                    this.listener[t].push(e)
                }
                ,
                t.prototype.kN = function(t, e) {
                    this.listener[t] && -1 < (e = this.listener[t].indexOf(e)) && this.listener[t].splice(e, 1)
                }
                ,
                t.prototype.$N = function(t, e, r) {
                    delete this.SN[t];
                    var n = this.listener[t];
                    if (delete this.listener[t],
                    n)
                        for (var i = 0, a = n; i < a.length; i++)
                            (0,
                            a[i])(e, r)
                }
                ,
                t
            }(), StaticSDFManagerWorker = function() {
                function t(t, e) {
                    this.parent = t,
                    this.CN = e,
                    this.jN = [],
                    this.EN = 0,
                    this._N = {},
                    this.NN = {},
                    this.LN = new TaskPool,
                    this.zW(this.parent.GW.db),
                    this.parent.Uh.send("updateDataVersion", this.parent.GW.nebulaVersion)
                }
                return t.prototype.loadData = function(t, o, r) {
                    var s, u, f, n, e, c, h = this, l = staticSDFTileKeyToKey(t);
                    return l ? (s = this.fc(),
                    u = s + l + ".json",
                    f = s + l + (o.mH ? ".webp" : ".png"),
                    n = this.parent.protocol,
                    "undefined" != typeof this._N[l] && "undefined" != typeof this.NN[l] ? (r(null, [this._N[l], this.NN[l]]),
                    {
                        cancel: noop$1
                    }) : (e = this.LN.has(l),
                    this.LN.SH(l, c = function(t, e) {
                        e && (e.protocol = n),
                        r(t, e)
                    }
                    ),
                    e ? {
                        cancel: function() {
                            h.NW(t)
                        }
                    } : this.LN.nS(l, function(r) {
                        var n = 0
                          , i = []
                          , a = function(t, e) {
                            r(null, e)
                        }
                          , t = h.ON(u, function(t, e) {
                            t ? "404" !== t ? (console.log(t),
                            a(0, null)) : (i[0] = e ? {} : null,
                            h._N[l] = i[0],
                            2 == ++n && a(0, i)) : (i[0] = e,
                            h._N[l] = e,
                            2 == ++n && a(0, i))
                        })
                          , e = h.IN(f, function(t, e) {
                            t || !e ? "404" !== t ? (console.log(t),
                            a(0, e)) : (i[1] = null,
                            h.NN[l] = i[1],
                            2 == ++n && a(0, i)) : !e || e.byteLength < 128 ? (i[1] = null,
                            h.NN[l] = i[1],
                            2 == ++n && a(0, i)) : o.imageBitmap ? ImageDataWraper.AV(e).then(function(t) {
                                "success" !== (t = new ImageDataWraper(f,t,{
                                    imageBitmap: !0
                                })).status ? (console.log("createObjectURL fail"),
                                r("createObjectURL fail", null)) : (i[1] = t,
                                h.NN[l] = t,
                                2 == ++n && a(0, i))
                            }) : "success" !== (t = new ImageDataWraper(s,e)).status ? (console.log("createObjectURL fail"),
                            a(0, null)) : (i[1] = t,
                            h.NN[l] = t,
                            2 == ++n && a(0, i))
                        });
                        return "lesszoom10" !== l ? {
                            cancel: function() {
                                h.LN.kN(l, c),
                                h.LN.GN(l) || (t.abort(),
                                e.abort(),
                                h.LN.cancel(l)),
                                c("cancel", null)
                            }
                        } : {
                            cancel: function() {
                                h.LN.kN(l, c),
                                c("cancel", null)
                            }
                        }
                    }))) : (console.log("!key"),
                    r(null, [undefined, null]),
                    {
                        cancel: noop$1
                    })
                }
                ,
                t.prototype.NW = function(t) {
                    var e = this.NN[t];
                    e && e.destroy(),
                    delete this.NN[t],
                    delete this._N[t]
                }
                ,
                t.prototype.zW = function(t) {
                    this._N = {},
                    this.NN = {},
                    this.jN = ["://glyph.amap.com/sdf" + t + "/", "://glyph01.amap.com/sdf" + t + "/", "://glyph02.amap.com/sdf" + t + "/", "://glyph03.amap.com/sdf" + t + "/", "://glyph04.amap.com/sdf" + t + "/"]
                }
                ,
                t.prototype.ON = function(t, e) {
                    return this.CN.send(t, {
                        Me: "json",
                        method: "get",
                        qw: function(t) {
                            e(null, t || null)
                        },
                        Aw: function(t) {
                            e(t && t.message || "unknown error")
                        }
                    })
                }
                ,
                t.prototype.IN = function(t, e) {
                    return this.CN.send(t, {
                        Me: "arraybuffer",
                        method: "get",
                        qw: function(t) {
                            t ? e(null, t) : e("empty data", null)
                        },
                        Aw: function(t) {
                            e(t && t.message || "unknown error")
                        }
                    })
                }
                ,
                t.prototype.fc = function() {
                    this.EN = this.EN % this.jN.length;
                    var t = this.parent.protocol + this.jN[this.EN];
                    return this.EN++,
                    t
                }
                ,
                t
            }(), emptyObj = {}, SDFStaticTextureCache = function() {
                function t(t, e, r) {
                    this.parent = t,
                    this.DN = e,
                    this.UN = r,
                    this.RN = {},
                    this.XN = {}
                }
                return t.prototype.xH = function(t, e) {
                    void 0 === e && (e = !1);
                    var r = staticSDFTileKeyToKey(t)
                      , n = this.RN[r];
                    if (e) {
                        if (!n)
                            return;
                        n.indexOf(t) < 0 && n.push(t)
                    }
                    return this.DN.getImage(r)
                }
                ,
                t.prototype.LB = function(t) {
                    return t = staticSDFTileKeyToKey(t),
                    this.XN[t] || emptyObj
                }
                ,
                t.prototype.bH = function(n, i, a, o) {
                    var t, s = this, u = staticSDFTileKeyToKey(n);
                    i.type === ImageDataWraperType.bitmap ? i.IV ? (t = this.DN.getImage(i.hash),
                    o(null, t)) : this.DN.addImageBitmap(i.data, {
                        url: u,
                        cb: function(t, e) {
                            var r;
                            t || (i.destroy(),
                            s.RN[u] || (s.RN[u] = [],
                            s.XN[u] = a),
                            (r = s.RN[u]).indexOf(n) < 0 && r.push(n)),
                            o(t, e)
                        }
                    }) : this.DN.addImage(u, {
                        url: i.data,
                        cb: function(t, e) {
                            var r;
                            t || (s.RN[u] || (s.RN[u] = [],
                            s.XN[u] = a),
                            (r = s.RN[u]).indexOf(n) < 0 && r.push(n)),
                            o(t, e)
                        }
                    })
                }
                ,
                t.prototype.kH = function(t) {
                    var e = staticSDFTileKeyToKey(t)
                      , r = this.RN[e];
                    r ? (0 <= (t = r.indexOf(t)) && r.splice(t, 1),
                    0 === r.length && (this.DN.RH(e),
                    this.UN.deleteTileStaticSDF(e),
                    delete this.RN[e],
                    delete this.XN[e])) : delete this.XN[e]
                }
                ,
                t
            }(), RenderThread = function() {
                function t(t) {
                    this.Jv = 5,
                    this.Qv = 0,
                    this.Yv = !1,
                    this.render = t.render,
                    this.check = t.check
                }
                return t.prototype.Yf = function() {
                    this.Yv || (0 < this.Jv && this.Kv ? (this.render(),
                    this.Qv = Util.requestAnimFrame(this.Yf.bind(this))) : (this.Jv <= 0 || !this.Kv) && (this.Kv = !1,
                    Util.cancelAnimFrame(this.Qv),
                    this.Qv = 0,
                    this.Qv || this.check() && (this.render(),
                    this.setNeedUpdate(!0))),
                    this.Jv--)
                }
                ,
                t.prototype.setNeedUpdate = function(t) {
                    this.Jv = 5,
                    t && !this.Kv && (this.Kv = t,
                    Util.cancelAnimFrame(this.Qv),
                    this.Qv = 0,
                    this.to()),
                    this.Kv = t
                }
                ,
                t.prototype.to = function() {
                    this.Qv || (this.Qv = Util.requestAnimFrame(this.Yf.bind(this)))
                }
                ,
                t.prototype.destroy = function() {
                    this.Yv = !0
                }
                ,
                t
            }();
            Uint8Array.prototype.fill || (Uint8Array.prototype.fill = Array.prototype.fill),
            Float32Array.prototype.slice || Object.defineProperty(Float32Array.prototype, "slice", {
                value: function(t, e) {
                    return new Float32Array(Array.prototype.slice.call(this, t, e))
                }
            }),
            Float64Array.prototype.slice || Object.defineProperty(Float64Array.prototype, "slice", {
                value: function(t, e) {
                    return new Float64Array(Array.prototype.slice.call(this, t, e))
                }
            }),
            exports.Bh = Actor,
            exports.OZ = AdaptorMap,
            exports.G8t = BaseConfig,
            exports.bb = BezierUtil,
            exports.tc = CONSTS,
            exports._n = Color,
            exports.ZQ = ComputeTileRange,
            exports.hL = Coordinate,
            exports.PY = DangerousFontSize,
            exports.La = DynamicVertice,
            exports.Event = Event,
            exports.iz = FillExtrusionBucket,
            exports.GeometryUtil = GeometryUtil,
            exports.rW = GeometryUtilCls,
            exports.x_ = HALF_WORLD_SIZE,
            exports.WQ = ImageDataWraper,
            exports.pZ = InnerClass,
            exports.eG = Labels,
            exports.LabelsRenderUtil = LabelsRenderUtil,
            exports.bG = LangManager,
            exports.LngLat = LngLat$2,
            exports.ZY = LngLat2TileInnerCoord,
            exports.za = LocalTileZoom,
            exports.Ra = LocalZoom,
            exports.MapboxLabelFormat = MapboxLabelFormat,
            exports.fQ = MapboxSegements,
            exports.bX = MapboxVTSourceWorker,
            exports.Module = Module,
            exports.NebulaLabelFormat = NebulaLabelFormat,
            exports._w = NebulaSegements,
            exports.pa = NebulaTile,
            exports.wa = NebulaTileCoord,
            exports.pw = Pbf,
            exports.Pixel = Pixel,
            exports.PlaneGeometryUtil = PlaneGeometryUtil,
            exports.kS = PlaneGeometryUtilInstance,
            exports.K_ = PolygonBucket,
            exports.oE = PolygonSegements,
            exports.J_ = PolylineBucket,
            exports.ProjectionManager = ProjectionManager,
            exports.tS = Queue,
            exports.Vs = RasterTile,
            exports.wY = RenderThread,
            exports.vG = SDFManagerBase,
            exports.jb = SDFManagerWorker,
            exports.LH = SDFStaticTextureCache,
            exports.e0 = SimpleCircleBucket,
            exports.Size = Size,
            exports.yp = SmartArrayBuffer,
            exports.xW = StaticSDFManagerWorker,
            exports.StyleParser = StyleParser,
            exports.Support = Browser,
            exports.vH = Task,
            exports.MY = TaskManager,
            exports.IH = TaskPool,
            exports.Gh = Tile,
            exports.ca = TileCoord,
            exports.V = transform,
            exports.UnzipAndDecodeTiles = UnzipAndDecodeTiles,
            exports.Util = Util,
            exports.Sw = VectorTile,
            exports.tW = VectorTile$1,
            exports.LW = VectorTileSegements,
            exports.Yw = XHR,
            exports.T8t = __awaiter,
            exports.dZ = __decorate,
            exports.Ei = __extends,
            exports.x8t = __generator,
            exports.Pt = __spreadArrays,
            exports.assign = assign,
            exports.jw = calcTileMectorBounds,
            exports.clone = clone,
            exports.Ex = clone$1,
            exports.yn = cloneDeep,
            exports.eff = commonjsGlobal,
            exports.tff = commonjsRequire,
            exports.create = create$3,
            exports.Il = create,
            exports.Dl = create$1,
            exports.Zl = create$2,
            exports.M8t = createCommonjsModule,
            exports.CZ = decodeStyle,
            exports.equals = equals$1,
            exports.Ru = equals,
            exports.every = every,
            exports.extend = extend,
            exports.find = find,
            exports.findIndex = findIndex,
            exports.forEach = forEach,
            exports.vx = forIn,
            exports.Bu = fromValues$2,
            exports.xd = fromValues$3,
            exports.$Q = getMVTTileBbox,
            exports.Ol = getTranslation,
            exports.Ul = invert,
            exports.VB = isBezierCurve,
            exports.xs = isBounds,
            exports.sB = isCircleMarker,
            exports.isEmpty = isEmpty,
            exports.isEqual = isEqual,
            exports.isFunction = isFunction,
            exports.qG = isInnerLabelsLayer,
            exports.px = isLayer,
            exports.Bs = isLngLat,
            exports.iL = isLnglatLikeArray,
            exports.eL = isLnglatLikeArrayArray,
            exports.yL = isLnglatLikeArrayArrayArray,
            exports.vB = isNumber,
            exports.ys = isNumberArrayArray,
            exports.Ox = isNumberArrayArrayArray,
            exports.tL = isNumberArrayArrayArrayArray,
            exports.er = isOverlay,
            exports.RF = isOverlayGroup,
            exports.oy = isPixel,
            exports.GB = isPolyline,
            exports.ay = isSize,
            exports.FF = isVectorLayer,
            exports.jsonLngLatData = jsonLngLatData,
            exports.keys = keys,
            exports.labelsUtil = labelsUtil,
            exports.lcs = lcs,
            exports.lookAt = lookAt,
            exports.map = map,
            exports.multiply = multiply,
            exports.ou = ortho,
            exports.parseLngLatData = parseLngLatData,
            exports.perspective = perspective,
            exports.rbush = rbush_1,
            exports.scale = scale$1,
            exports.set = set$1,
            exports.Pl = set,
            exports.some = some,
            exports.XY = tileInnerCoord2LngLat,
            exports.Gu = transformMat4,
            exports.vector = vector,
            exports.zoomRange = zoomRange
        }),
        define(["./shared"], function(polyfill) {
            var _a, geoUtil = new polyfill.rW({}), LabelFormatMap = (_a = {},
            _a[polyfill.NebulaLabelFormat.id] = polyfill.NebulaLabelFormat,
            _a.nebula = polyfill.NebulaLabelFormat,
            _a[polyfill.MapboxLabelFormat.id] = polyfill.MapboxLabelFormat,
            _a), NebulaSourceWorker = function(e) {
                function i(i) {
                    var t = e.call(this) || this;
                    return t.parent = i,
                    t.id = "nebula",
                    t.sQ = {},
                    t.aW = null,
                    t.WW = 20,
                    t.mii = null,
                    t.xQ = [],
                    t.bQ = [],
                    t.iii = [26, 16, 8, 4, 12, 20, 9, 3, 6, 23, 14, 17, 1, 5, 19, 2],
                    t.bind(),
                    t
                }
                return polyfill.Ei(i, e),
                i.prototype.bind = function() {
                    var s = this;
                    this.on("styleReady", function() {
                        var i = s.xQ.length;
                        if (0 < i) {
                            for (var t = 0; t < i; t++) {
                                var e = (r = s.xQ[t]).data
                                  , o = r.projectionId
                                  , l = r.ZL
                                  , n = r.cb;
                                s.pQ(e, o, r.zoom, r.viewMode, r.showBuildingBlock, r.mS, r.optimalZoom, l, n, r.url)
                            }
                            s.xQ = []
                        }
                        var h = s.bQ.length;
                        if (0 < h) {
                            for (t = 0; t < h; t++) {
                                var r, a = (r = s.bQ[t]).CD, e = r.data, o = r.projectionId, n = r.cb, l = r.ZL;
                                s.mQ(a, r.cQ, e, o, n, r.UQ, r.mH, l)
                            }
                            s.bQ = []
                        }
                    })
                }
                ,
                i.prototype.dii = function(i) {
                    if ("string" != typeof i || !i.startsWith("{")) {
                        if ("object" == typeof i)
                            return i;
                        throw new Error("Invalid data type")
                    }
                    try {
                        return JSON.parse(i)
                    } catch (t) {
                        throw console.error("Failed to parse JSON:", t),
                        t
                    }
                }
                ,
                i.prototype.bw = function(i, e, o, l, t, n, h, r, a, s, f, u, d) {
                    var p = this
                      , s = {
                        key: this.parent.key,
                        flds: s,
                        t: i.join(";"),
                        oversea: f ? 1 : 0,
                        tileVersion: this.parent.params.tileVersion,
                        tileCombo: this.parent.params.tileCombo,
                        languageCode: this.parent.params.languageCode
                    }
                      , x = polyfill.G8t.getTileUrl(s);
                    return makeFetchRequest(this.parent.Uh, x, s, function(i, t) {
                        i ? u(i) : setTimeout(function() {
                            p.pQ(t, l, e, h, r, n, o, a, u, x)
                        }, 10)
                    })
                }
                ,
                i.prototype.pQ = function(i, e, o, l, n, h, r, t, a, s) {
                    var f = this;
                    if (this.parent.vn && this.parent.vn._Q()) {
                        polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["data-decode-begin"] && (polyfill.Support.amapRunTime["data-decode-begin"] = (new Date).getTime());
                        var u = polyfill.UnzipAndDecodeTiles(i);
                        if (u) {
                            polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["data-decode-unzip"] && (polyfill.Support.amapRunTime["data-decode-unzip"] = (new Date).getTime());
                            for (var d = [], p = (polyfill.forEach(u.tiles, function(i) {
                                var t = new polyfill.Gh(new polyfill.ca(i.z,i.x,i.y))
                                  , i = (t.data = f.kw(i, e, t),
                                f.xw(t, o),
                                f.zw(t, o, l, n),
                                f.nz(t, h, r),
                                (null == t ? void 0 : t.data) !== undefined ? i.t = t.data.kti : i.t = undefined,
                                polyfill.Util.pW(i.t));
                                d.push({
                                    zo: t.zo,
                                    ba: t.data,
                                    tag: i,
                                    version: u.version || ""
                                })
                            }),
                            []), x = this.parent.vn, y = 0, c = d; y < c.length; y++) {
                                var v = c[y];
                                if (v && v.ba) {
                                    if (v.ba.road) {
                                        for (var g = [], w = 0, b = v.ba.road; w < b.length; w++) {
                                            var m = b[w]
                                              , R = (R = x.dn(m.Fp, m.Ep, t)) ? R[1] : null;
                                            m.id && R && R.fontSize && R.faceColor && (delete m.gw,
                                            g.push({
                                                path: m.path,
                                                id: m.id
                                            }))
                                        }
                                        v.ba.road = g
                                    }
                                    var k = v.ba.roadName;
                                    k && (this.mii = k),
                                    delete v.ba.poilabel,
                                    delete v.ba.region,
                                    delete v.ba.building,
                                    delete v.ba.Mw
                                }
                                p.push(v)
                            }
                            polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["data-decode-end"] && (polyfill.Support.amapRunTime["data-decode-end"] = (new Date).getTime()),
                            a(null, {
                                nebulaDatas: p,
                                amapRunTime: polyfill.Support.amapRunTime
                            })
                        } else
                            console.log("数据出错")
                    } else
                        this.xQ.push({
                            data: i,
                            projectionId: e,
                            zoom: o,
                            viewMode: l,
                            showBuildingBlock: n,
                            mS: h,
                            optimalZoom: r,
                            ZL: t,
                            cb: a,
                            url: s
                        })
                }
                ,
                i.prototype.mQ = function(i, t, e, o, l, n, h, r) {
                    this.parent.vn && this.parent.vn._Q() ? this.HQ(e, t, o, i, n, h, r, l) : this.bQ.push({
                        CD: i,
                        cQ: t,
                        data: e,
                        projectionId: o,
                        cb: l,
                        UQ: n,
                        mH: h,
                        ZL: r
                    })
                }
                ,
                i.prototype.bW = function(e, o, l, n, i, h) {
                    var r = this
                      , i = {
                        key: this.parent.key,
                        flds: "transit,road,region,poi",
                        t: e.join(";"),
                        oversea: i ? 1 : 0,
                        tileVersion: this.parent.params.tileVersion,
                        tileCombo: this.parent.params.tileCombo,
                        languageCode: this.parent.params.languageCode
                    }
                      , t = polyfill.G8t.getTileUrl(i)
                      , a = (this.WW = l,
                    -1 !== t.indexOf("/oversea"))
                      , s = new polyfill.vH;
                    return s._H(makeFetchRequest(this.parent.Uh, t, i, function(i, t) {
                        i ? h(i) : setTimeout(function() {
                            r.mQ(e, a, t, o, h, s, n, l)
                        }, 10)
                    })),
                    {
                        cancel: s.cancel
                    }
                }
                ,
                i.prototype.HQ = function(i, t, e, o, l, n, h, r) {
                    var a = this;
                    if (this.parent.vn && this.parent.vn._Q()) {
                        for (var s = polyfill.UnzipAndDecodeTiles(i), f = (this.WW = h,
                        !t && s.version && this.parent.GW.nebulaVersion !== s.version && (this.parent.GW.nebulaVersion = s.version,
                        this.parent.GW.db = s.db,
                        this.parent.IW.zW(this.parent.GW.db),
                        this.parent.Uh.send("updateDataVersion", this.parent.GW.nebulaVersion)),
                        []), u = (polyfill.forEach(s.tiles, function(i) {
                            var t = new polyfill.Gh(new polyfill.ca(i.z,i.x,i.y))
                              , i = (t.data = a.kw(i, e, t),
                            (null == t ? void 0 : t.data) !== undefined ? i.t = t.data.kti : i.t = undefined,
                            polyfill.Util.pW(i.t));
                            f.push({
                                zo: t.zo,
                                ba: t.data,
                                tag: i
                            })
                        }),
                        []), d = 0, p = f; d < p.length; d++) {
                            var x, y, c = p[d];
                            c && c.ba && (x = c.ba.roadName,
                            y = c.ba.poilabel,
                            delete c.ba.poilabel,
                            delete c.ba.Mw,
                            u.push({
                                zo: c.zo,
                                ba: {
                                    roadName: x,
                                    poilabel: y
                                },
                                tag: c.tag,
                                version: s.version || ""
                            }))
                        }
                        if (u.length) {
                            for (var v = {}, g = 0, w = u; g < w.length; g++) {
                                var R = new polyfill.Gh((b = w[g]).zo)
                                  , m = polyfill.wa.ga(R.zo.x, R.zo.y, R.zo.z, "EPSG:3857")
                                  , m = (R.type = "nebula",
                                t && (R.cQ = !0),
                                polyfill.lcs.getLocalByCoord([m[0], m[1]]));
                                R.localCoord = m,
                                R.data = b.ba;
                                (m = this.parent.params).showLabel;
                                var b = b.tag;
                                this.sQ[R.zo.key + "," + b] = {
                                    tile: R,
                                    params: {
                                        scale: m.scale,
                                        tag: b
                                    }
                                },
                                v[R.zo.key + "," + polyfill.Util.SD(b)] = !0
                            }
                            r(null, v)
                        }
                    } else
                        this.bQ.push({
                            CD: o,
                            cQ: t,
                            data: i,
                            projectionId: e,
                            cb: r,
                            UQ: l,
                            mH: n,
                            ZL: h
                        })
                }
                ,
                i.prototype.OW = function(i) {
                    this.parent.Zw ? this.on("once", i) : i()
                }
                ,
                i.prototype.YE = function(i, t) {
                    polyfill.map(polyfill.ZQ.ha(t.bounds, polyfill.ZQ.ra(t.zoom)), function(i) {
                        return i.join(",")
                    });
                    var e = this.sQ
                      , t = polyfill.Util.getOptimalZoom(t.zoom);
                    i(e, {
                        ZL: this.WW,
                        optimalZoom: t,
                        cb: function() {}
                    }),
                    this.sQ = {}
                }
                ,
                i.prototype.kw = function(i, t, e, o) {
                    var l, r = this, a = {}, t = polyfill.ProjectionManager.getProjection(t), n = polyfill.wa.ga(i.x, i.y, i.z, "EPSG:3857"), h = polyfill.lcs.getLocalByCoord([n[0], n[1]]), s = h.center, f = (e.Mw = s,
                    e.Ro = n,
                    {
                        projection: t,
                        zS: h,
                        zoom: e.zo.z
                    });
                    return polyfill.forEach(i.layers, function(h) {
                        l = h.kti;
                        var i = Object.keys(h.d)
                          , t = h.x
                          , e = h.type;
                        f.tileCoord = {
                            x: t,
                            y: h.y,
                            z: h.z
                        },
                        f.type = e,
                        polyfill.forEach(i, function(i) {
                            switch (i) {
                            case "polygons":
                                h.d[i] && 0 < h.d[i].length && (e = r.pii(h.d[i], f),
                                a.region ? (t = a.region).push.apply(t, e) : a.region = e);
                                break;
                            case "buildings":
                                var t = r.cii(h.d[i], f);
                                a.building ? (e = a.building).push.apply(e, t) : a.building = t;
                                break;
                            case "roadLines":
                            case "lines":
                                var e = r.yii(h.d[i], f, h.d.tile_region);
                                e && (a.road || (a.road = []),
                                (t = a.road).push.apply(t, e.Rii),
                                a.roadName || (a.roadName = []),
                                (t = a.roadName).push.apply(t, e.Sii));
                                break;
                            case "points":
                                var o, l = r.vii(h.d[i], f);
                                if (a.poilabel || (a.poilabel = []),
                                Array.isArray(l))
                                    for (var n in l)
                                        l.hasOwnProperty(n) && 0 < (o = l[n]).length && (a.poilabel[n] || (a.poilabel[n] = []),
                                        (n = a.poilabel[n]).push.apply(n, o));
                                else
                                    a.poilabel.push(l)
                            }
                        })
                    }),
                    Object.keys(a).forEach(function(i) {
                        r.Tw(a[i])
                    }),
                    a.Mw = s,
                    a.kti = l,
                    a
                }
                ,
                i.prototype.cii = function(i, t) {
                    var e = [];
                    if (i && 0 < i.length)
                        for (var o = 0, l = i; o < l.length; o++) {
                            var n = l[o]
                              , h = n.mainKey
                              , r = n.subKey;
                            if (0 !== h && 0 !== r)
                                for (var a = n.resolution, s = ((n = n.items).length,
                                t.zoom,
                                t.zS.center,
                                0), f = n; s < f.length; s++)
                                    for (var u = f[s], d = u.shapeFeatures, p = u.maxZoom, x = u.minZoom, y = 0, c = d; y < c.length; y++) {
                                        for (var v = c[y], g = {
                                            path: [],
                                            oW: [],
                                            resolution: a,
                                            Fp: h,
                                            Ep: r,
                                            gw: t.tileCoord,
                                            height: 0,
                                            minzoom: x,
                                            maxzoom: p,
                                            ew: ""
                                        }, w = v.polygon, b = v.mainBuildingHeight, v = v.bz, R = w[0], m = w[1], k = [], S = [], I = 0; I < w.length / 2; I++) {
                                            var _ = w[2 * I]
                                              , C = w[2 * I + 1]
                                              , M = (0 !== I && (_ += R,
                                            C += m),
                                            R = _,
                                            m = C,
                                            this.gii({
                                                x: _,
                                                y: C
                                            }, t, a))
                                              , _ = polyfill.XY(t.tileCoord, a, _, C);
                                            k.push(M[0], M[1]),
                                            S.push(_[0], _[1])
                                        }
                                        g.path.push(k),
                                        g.height = b,
                                        g.ew = v,
                                        g.oW.push(S),
                                        e.push(g)
                                    }
                        }
                    return e
                }
                ,
                i.prototype.pii = function(i, s) {
                    var f = this
                      , e = [];
                    return polyfill.forEach(i, function(t) {
                        polyfill.forEach(t.items, function(i) {
                            var a = {
                                minzoom: i.minZoom,
                                maxzoom: i.maxZoom,
                                path: [],
                                du: t.resolution,
                                Fp: t.mainKey,
                                Ep: t.subKey,
                                zIndex: i.drawOrder,
                                lineCap: "butt",
                                RQ: "butt"
                            };
                            s.resolution = t.resolution,
                            polyfill.forEach(i.polygons, function(i) {
                                var t = [];
                                if (i.polygon)
                                    for (var e = i.polygon, o = e[0], l = e[1], n = 0; n < e.length / 2; n++) {
                                        var h = e[2 * n]
                                          , r = e[2 * n + 1]
                                          , h = (0 !== n && (h += o,
                                        r += l),
                                        o = h,
                                        l = r,
                                        f.gii({
                                            x: h,
                                            y: r
                                        }, s));
                                        t.push(h[0], h[1])
                                    }
                                a.path.push(t)
                            }),
                            e.push(a)
                        })
                    }),
                    e
                }
                ,
                i.prototype.yii = function(i, t, e) {
                    var o = {
                        Rii: [],
                        Sii: [],
                        kii: []
                    };
                    if (i && 0 < i.length) {
                        for (var l = [], n = [], h = 0, r = i; h < r.length; h++) {
                            var a = r[h]
                              , s = a.mainKey
                              , f = a.subKey;
                            if (0 !== s && 0 !== f)
                                for (var u = a.resolution, d = (a = a.items).length, p = t.zoom, x = this.parent.vn.mW(s, f, p), y = t.zS.center, c = 0, v = a; c < v.length; c++)
                                    for (var g = v[c], w = g.roadLines || g.lineFeatures, b = g.drawOrder, R = g.maxZoom, m = g.minZoom, k = 0, S = w; k < S.length; k++) {
                                        var I = S[k]
                                          , _ = I.line;
                                        if (_) {
                                            var M = this.parent.params.languageCode
                                              , C = M && "default" !== M ? polyfill.tc.getLanguageData(I, M) : I.nameLoc;
                                            I.path = [];
                                            for (var D = _[0], A = _[1], T = 0; T < _.length / 2; T++) {
                                                var F = _[2 * T]
                                                  , W = _[2 * T + 1]
                                                  , F = (0 !== T && (F += D,
                                                W += A),
                                                D = F,
                                                A = W,
                                                polyfill.XY(t.tileCoord, u, F, W))
                                                  , F = t.projection.project(F[0], F[1]);
                                                p >= polyfill.Ra && (F[0] -= y[0],
                                                F[1] -= y[1]),
                                                I.path[2 * T] = F[0],
                                                I.path[2 * T + 1] = F[1]
                                            }
                                            M && C[0] && "zh-Hans" !== C[0].lang && (I.lang = "global"),
                                            I.du = u,
                                            I.Fp = s,
                                            I.Ep = f,
                                            I.zIndex = b,
                                            I.lineCap = x[0],
                                            I.RQ = x[1],
                                            I.id = 0 < I.uid ? I.uid : I.uid + d,
                                            I.maxZoom = R,
                                            I.minZoom = m,
                                            I.gw = {
                                                z: t.tileCoord.z,
                                                y: t.tileCoord.y,
                                                x: t.tileCoord.x
                                            },
                                            l.push(I),
                                            C && 0 < C.length && (I.name = C[0].name,
                                            I.name_en = "",
                                            I.BQ = "",
                                            I.QQ = "",
                                            I.CQ = "",
                                            I.$G = [],
                                            I.iQ = [],
                                            I.rank = I.rank,
                                            n.push(I)),
                                            (M = I.shield) && (I.shield = M,
                                            I.rank = I.rank,
                                            n.push(I))
                                        }
                                    }
                        }
                        return i ? (o.Rii.push.apply(o.Rii, l),
                        o.Sii.push.apply(o.Sii, n),
                        o.kii.push.apply(o.kii, [])) : i = l,
                        o
                    }
                }
                ,
                i.prototype.vii = function(i, t) {
                    var e = [];
                    if (i && 0 < i.length) {
                        for (var o = [], l = 0, n = i; l < n.length; l++) {
                            var h = n[l]
                              , r = h.mainKey
                              , a = h.subKey;
                            if (0 !== r && 0 !== a)
                                for (var s = h.resolution, f = ((h = h.items).length,
                                t.zoom,
                                t.zS.center,
                                0), u = h; f < u.length; f++)
                                    for (var d = u[f], p = d.E9t, x = d.maxZoom, y = d.minZoom, c = d.rank, v = 0, g = p; v < g.length; v++) {
                                        var w, b = g[v], R = b.pos;
                                        b.path = [],
                                        R && 0 < R.length && (w = R[0],
                                        R = R[1],
                                        w = polyfill.XY(t.tileCoord, s, w, R),
                                        w = t.projection.project(w[0], w[1]),
                                        b.path[0] = w[0],
                                        b.path[1] = w[1],
                                        b.pos[0] = w[0],
                                        b.pos[1] = w[1]),
                                        b.du = s,
                                        b.Fp = r,
                                        b.Ep = a,
                                        b.zIndex = b.drawOrder,
                                        b.rank = c,
                                        b.id = b.uid,
                                        b.maxZoom = x,
                                        b.minZoom = y,
                                        b.gw = {
                                            z: t.tileCoord.z,
                                            y: t.tileCoord.y,
                                            x: t.tileCoord.x
                                        },
                                        o.push(b)
                                    }
                        }
                        var i = t.tileCoord.z + "-" + t.tileCoord.x + "-" + t.tileCoord.y
                          , m = t.type;
                        return this.Na(o),
                        e ? 4 === m ? e.subwayLabel ? e.subwayLabel.push.apply(e.subwayLabel, o) : e.subwayLabel = o : e[i] ? e[i].push.apply(e[i], o) : e[i] = o : (e = {})[i] = o,
                        e
                    }
                }
                ,
                i.prototype.gii = function(i, t, e) {
                    var o = t.tileCoord
                      , l = t.projection
                      , n = t.zoom
                      , h = t.zS
                      , t = t.resolution
                      , o = polyfill.XY(o, t = e || t, i.x, i.y)
                      , e = l.project(o[0], o[1]);
                    return n >= polyfill.Ra && (e[0] -= h.center[0],
                    e[1] -= h.center[1]),
                    e
                }
                ,
                i.prototype.A0 = function(i, t) {
                    return i.minzoom - t.minzoom || i.maxzoom - t.maxzoom
                }
                ,
                i.prototype.Tw = function(i) {
                    return i.sort(function(i, t) {
                        return i.zIndex - t.zIndex
                    }),
                    i
                }
                ,
                i.prototype.Na = function(i) {
                    return i.sort(function(i, t) {
                        return i.rank - t.rank
                    }),
                    i
                }
                ,
                i.prototype.xw = function(i, t) {
                    var e = i.data
                      , o = new polyfill._w;
                    if (e.Uc = o,
                    !e.$c) {
                        e.$c = new polyfill.J_,
                        e.road = e.road || [];
                        var l = i.Mw.slice(0);
                        if (i.zo.z <= polyfill.za && (l[0] = 0,
                        l[1] = 0),
                        e.road.push({
                            name: "",
                            rank: 1,
                            maxzoom: polyfill.zoomRange[1],
                            minzoom: polyfill.zoomRange[0],
                            path: [i.Ro[0] - l[0], i.Ro[1] - l[1], i.Ro[2] - l[0], i.Ro[1] - l[1], i.Ro[2] - l[0], i.Ro[3] - l[1], i.Ro[0] - l[0], i.Ro[3] - l[1], i.Ro[0] - l[0], i.Ro[1] - l[1]],
                            Fp: -2,
                            Ep: -2,
                            shield: "",
                            shieldType: 0,
                            du: 13,
                            lineCap: "butt",
                            RQ: "butt"
                        }),
                        e.road)
                            for (var n = 0, h = e.road; n < h.length; n++) {
                                var r = h[n]
                                  , a = r.path
                                  , s = (a = e.$c.hb(a, {
                                    X_: "butt" === r.lineCap ? 0 : .9,
                                    lineCap: r.lineCap,
                                    lineJoin: "auto"
                                })).Iw
                                  , a = a.distance;
                                0 < s && (o.add(r.Fp, r.Ep, s, r.minZoom, r.maxZoom),
                                r.distance = a)
                            }
                    }
                }
                ,
                i.prototype.zw = function(i, O, E, P) {
                    var t, e;
                    try {
                        var o = i.data
                          , l = new polyfill._w;
                        if (o.Oc = l,
                        o.Fc = new polyfill._w,
                        !o.Dc) {
                            o.Dc = new polyfill.K_,
                            o.region = o.region || [];
                            var n = null != (e = null == (t = i.Mw) ? void 0 : t.slice()) ? e : [0, 0];
                            if (i.zo.z <= polyfill.za && (n[0] = 0,
                            n[1] = 0),
                            o.region.unshift({
                                maxzoom: polyfill.zoomRange[1],
                                minzoom: polyfill.zoomRange[0],
                                path: [[i.Ro[0] - n[0], i.Ro[1] - n[1], i.Ro[2] - n[0], i.Ro[1] - n[1], i.Ro[2] - n[0], i.Ro[3] - n[1], i.Ro[0] - n[0], i.Ro[3] - n[1], i.Ro[0] - n[0], i.Ro[1] - n[1]]],
                                Fp: 30001,
                                Ep: 1
                            }),
                            o.region)
                                for (var h = 0, r = o.region; h < r.length; h++)
                                    for (var a = r[h], s = 0, f = a.path; s < f.length; s++)
                                        (R = f[s]).push(R[0], R[1]),
                                        0 < (M = o.Dc.Nx(R)) && l.add(a.Fp, a.Ep, M, a.minzoom, a.maxzoom);
                            if (!P && o.building) {
                                if (o.FD)
                                    return;
                                o.FD = new polyfill.K_,
                                o.BD = new polyfill._w;
                                for (var l = o.BD, u = 0, d = o.building; u < d.length; u++) {
                                    for (var p = d[u], x = polyfill.jw(p.gw.z, p.gw.x, p.gw.y), y = x[0], c = x[1], v = x[2], g = x[3], B = (i.Mw && (y -= i.Mw[0],
                                    v -= i.Mw[0],
                                    c -= i.Mw[1],
                                    g -= i.Mw[1]),
                                    Math.floor(y)), j = Math.floor(v), U = Math.floor(c), V = Math.floor(g), w = 0, b = p.path; w < b.length; w++) {
                                        var R = b[w];
                                        0 < (M = o.FD.Nx(R)) && l.add(p.Fp, p.Ep, M, p.minzoom, p.maxzoom, p.ew || "indoor_out_building")
                                    }
                                    for (var m = 0, k = p.path; m < k.length; m++) {
                                        for (var S = k[m], R = (S.push(S[0], S[1]),
                                        []), I = 0, _ = S.length; I < _ - 2; I += 2)
                                            R.push(polyfill.xd(S[I], S[I + 1])),
                                            R.push(polyfill.xd(S[I + 2], S[I + 3]));
                                        for (var C = [], I = 0, _ = R.length; I < _; I += 2) {
                                            var M, D = R[I][0], A = R[I][1], N = R[I + 1][0], J = R[I + 1][1], T = Math.floor(D), F = Math.floor(A);
                                            D === N && (T === B || T === j) || A === J && (F === U || F === V) ? (0 < (M = o.Dc.Ew(C)) && o.Fc.add(p.Fp, p.Ep, M, p.minzoom, p.maxzoom, p.ew || "indoor_out_building"),
                                            C = []) : C.push(R[I], R[I + 1])
                                        }
                                        0 < C.length && 0 < (M = o.Dc.Ew(C)) && o.Fc.add(p.Fp, p.Ep, M, p.minzoom, p.maxzoom, p.ew)
                                    }
                                }
                            }
                            if (o.building) {
                                for (var W = [], z = 0, K = o.building; z < K.length; z++)
                                    (p = K[z]).ew && (p.ew.includes("|") ? W.push.apply(W, p.ew.split("|")) : W.push(p.ew));
                                o.indoorInfo || (o.indoorInfo = []),
                                o.indoorInfo = W
                            }
                        }
                    } catch (L) {
                        console.log("Error in _createFillBucket: " + L)
                    }
                }
                ,
                i.prototype.nz = function(i, t, e) {
                    void 0 === t && (t = {});
                    var o = i.data;
                    if (o.C_ = new polyfill._w,
                    !o.A_) {
                        o.A_ = new polyfill.iz;
                        var l = t.hideWithoutStyle
                          , n = t.areas;
                        if (o.building)
                            for (var h = 0, r = o.building; h < r.length; h++)
                                for (var a = r[h], s = 0; s < a.path.length; s++) {
                                    for (var f = a.path[s], u = a.oW[s], d = (f.push(f[0], f[1]),
                                    u.push(u[0], u[1]),
                                    []), p = 0; p < u.length; p += 2)
                                        d.push([u[p], u[p + 1]]);
                                    if (n) {
                                        for (var x, y = !1, c = !1, v = {}, g = 0; g < n.length; g++) {
                                            var w = n[g]
                                              , b = w.path;
                                            geoUtil.isRingInRing(d, b) && (y = !0,
                                            !w.visible && w.visible !== undefined || (c = !0,
                                            v = {
                                                roofColor: polyfill.Util.color2RgbaArray(w.color1),
                                                wallColor: polyfill.Util.color2RgbaArray(w.color2)
                                            }))
                                        }
                                        !y && l || y && !c || 0 < (x = o.A_.tz(f, a.height)) && o.C_.add(a.Fp, a.Ep, x, a.minzoom, a.maxzoom, a.ew, v.roofColor, v.wallColor)
                                    } else
                                        0 < (x = o.A_.tz(f, a.height)) && o.C_.add(a.Fp, a.Ep, x, a.minzoom, a.maxzoom, a.ew)
                                }
                    }
                }
                ,
                i.prototype.uii = function(i) {
                    var o = ["en", "zh-Hans"]
                      , l = "";
                    if (i.other) {
                        var n = i.other.nii;
                        if (0 < (e = n.length)) {
                            for (var t = 0; t < e; t++)
                                !function(t) {
                                    var e = n[t].language_code;
                                    polyfill.forEach(o, function(i) {
                                        i === e && n[t].name && (l = n[t].name)
                                    })
                                }(t);
                            if (l)
                                return l
                        }
                    }
                    if (i.rii) {
                        var e, h = i.rii.nii;
                        if (0 < (e = h.length)) {
                            for (t = 0; t < e; t++)
                                !function(t) {
                                    var e = h[t].language_code;
                                    polyfill.forEach(o, function(i) {
                                        i === e && h[t].name && (l = h[t].name)
                                    })
                                }(t);
                            if (l)
                                return l
                        }
                    }
                    return ""
                }
                ,
                i.Pw = [1, 0, 1, 0],
                i
            }(polyfill.Event), hasWarning = !1;
            function makeFetchRequest(i, t, e, o) {
                var l, n, h, r;
                return !polyfill.Support.safari && !polyfill.Support.AQ && !polyfill.Support.gQ && self.fetch && self.Request && self.AbortController && self.Request.prototype.hasOwnProperty("signal") ? (h = (l = new AbortController).signal,
                polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["data-request"] && (polyfill.Support.amapRunTime["data-request"] = (new Date).getTime()),
                n = e.tileCombo ? new self.Request(t,{
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    referrer: "null" === self.location.origin ? undefined : self.location.origin,
                    signal: h,
                    body: "key=" + e.key + "&oversea=" + e.oversea
                }) : new self.Request(t,{
                    method: "GET",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    referrer: "null" === self.location.origin ? undefined : self.location.origin,
                    signal: h
                }),
                fetch(n).then(function(i) {
                    return polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["data-loaded"] && (polyfill.Support.amapRunTime["data-loaded"] = (new Date).getTime()),
                    i = "application/x-protobuf" === i.headers.get("content-type") ? i.arrayBuffer() : i.json()
                }).then(function(i) {
                    i.info ? hasWarning || (hasWarning = !0,
                    console.log(t),
                    console.log("<AMap JSAPI> KEY异常，错误信息：" + i.info)) : o(null, i)
                })["catch"](function(i) {
                    "AbortError" !== i.name && o(i.message || "unknown error")
                }),
                {
                    cancel: function() {
                        l.abort()
                    }
                }) : (h = {
                    url: t,
                    method: e.tileCombo ? "POST" : "GET",
                    body: "key=" + e.key + "&oversea=" + e.oversea,
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    }
                },
                r = i.send("requestPost", h, function(i, t) {
                    i ? ("<cancel>" === i && r && r.cancel && r.cancel(),
                    r = undefined,
                    o(i)) : (r = undefined,
                    o(null, t))
                }))
            }
            var DistrictSourceWorker = function() {
                function DistrictSourceWorker(i) {
                    this.parent = i,
                    this.fW = {}
                }
                return DistrictSourceWorker.prototype.bw = function(i, t, e, o, l) {
                    var n = this
                      , h = new XMLHttpRequest;
                    return h.onreadystatechange = function() {
                        var i;
                        4 !== h.readyState || 200 !== h.status && 204 !== h.status || (i = new polyfill.tW(new polyfill.pw(new Uint8Array(h.response))),
                        i = n.Ow(i, {
                            x: t.x,
                            y: t.y,
                            z: t.z,
                            projectionId: e,
                            tileSize: o
                        }),
                        l(null, polyfill.Ln({
                            zo: t
                        }, i)))
                    }
                    ,
                    h.open("GET", i, !0),
                    h.responseType = "arraybuffer",
                    h.send(),
                    {
                        cancel: function() {
                            h.abort()
                        }
                    }
                }
                ,
                DistrictSourceWorker.prototype.Ow = function(s, i) {
                    var e = i.x
                      , o = i.y
                      , l = i.z
                      , n = i.tileSize
                      , h = i.projectionId
                      , i = (s.z = l,
                    s.x = e,
                    s.y = o,
                    polyfill.ProjectionManager.getProjection(h).getResolution(l))
                      , r = (s.Ro = polyfill.$Q(e, o, l, i, n),
                    s.zS = polyfill.lcs.getLocalByCoord([s.Ro[0], s.Ro[1]]),
                    polyfill.ProjectionManager.getProjection(h).getResolution(l));
                    return polyfill.vx(s.layers, function(a) {
                        var i = a.Cw
                          , t = (a.Ah = [],
                        a.scale = r * n / a.extent,
                        polyfill.V[h].Xs(n * e, n * o, l));
                        a.ox = t[0],
                        a.oy = t[1],
                        polyfill.forEach(i, function(i, t) {
                            if ((i = a.Gw(t)).Dw(),
                            a.Ah.push(i),
                            i.lines && 0 < i.lines.length) {
                                i.Rw = [];
                                for (var e = 0, o = i.lines.length; e < o; e++) {
                                    for (var l = [], n = 0, h = i.lines[e].length; n < h; n++) {
                                        var r = [a.ox + a.scale * i.lines[e][n][0] - s.zS.center[0], a.oy - a.scale * i.lines[e][n][1] - s.zS.center[1]];
                                        l.push(r)
                                    }
                                    i.Rw.push(l)
                                }
                            }
                        })
                    }),
                    this.uW(s),
                    this.xw(s),
                    this.zw(s),
                    s
                }
                ,
                DistrictSourceWorker.prototype.uW = function(i) {
                    var t, e = [], o = [];
                    for (t in i.layers)
                        if (i.layers.hasOwnProperty(t))
                            for (var l = i.layers[t], n = 0; n < l.Ah.length; n += 1) {
                                var h = l.Ah[n];
                                if (3 == +h.type && h.Rw) {
                                    for (var r = h.Rw, a = [], s = 0; s < r.length; s++)
                                        polyfill.kS.isClockwise(r[s]) && a.push([s]);
                                    for (var f = 0; f < a.length; f++) {
                                        var u = a[f];
                                        if (1 < u.length) {
                                            for (var d = [], p = [], x = 0; x < u.length; x++) {
                                                var y = r[u[x]];
                                                0 < x && d.push(p.length / 2);
                                                for (var c = 0; c < y.length; c++) {
                                                    var v = y[c];
                                                    p.push(v[0], v[1])
                                                }
                                            }
                                            e.push({
                                                properties: h.properties,
                                                path: p,
                                                LQ: d
                                            })
                                        } else {
                                            for (p = [],
                                            y = r[u[0]],
                                            c = 0; c < y.length; c++) {
                                                var g = y[c];
                                                p.push(g[0], g[1])
                                            }
                                            e.push({
                                                properties: h.properties,
                                                path: p
                                            })
                                        }
                                    }
                                } else if (3 !== h.type && h.Rw)
                                    for (var w = 0; w < h.Rw.length; w++)
                                        o.push({
                                            properties: h.properties,
                                            path: h.Rw[w]
                                        });
                                this.cW(h)
                            }
                    i.polygons = e,
                    i.Dh = o,
                    delete i.layers
                }
                ,
                DistrictSourceWorker.prototype.xw = function(i) {
                    if (!i || !i.$c) {
                        var t = new polyfill.LW;
                        if (!i.$c && (i.Uc = t,
                        i.$c = new polyfill.J_,
                        i.Dh))
                            for (var e = 0, o = i.Dh; e < o.length; e++) {
                                var l = o[e]
                                  , n = JSON.stringify(l.properties)
                                  , r = (h = i.$c.g0(l.path, {
                                    X_: 0,
                                    lineJoin: "round",
                                    lineCap: "butt"
                                })).Iw
                                  , h = h.distance;
                                0 < r && (t.add(n, 0, r, 0, 22),
                                l.distance = h)
                            }
                    }
                }
                ,
                DistrictSourceWorker.prototype.zw = function(i) {
                    if (!i || !i.Dc) {
                        var t = new polyfill.LW;
                        i.Oc = t,
                        i.Dc = new polyfill.K_;
                        for (var e = 0, o = i.polygons; e < o.length; e++) {
                            var l = o[e]
                              , n = JSON.stringify(l.properties);
                            0 < (l = i.Dc.Nx(l.path, l.LQ)) && t.add(n, 0, l, 0, 22)
                        }
                    }
                }
                ,
                DistrictSourceWorker.prototype.dW = function(i) {
                    switch (i) {
                    case 0:
                    case 1:
                        return "Nation_Border_China";
                    case 2:
                        return "Coastline_China";
                    case 3:
                    case 4:
                        return "Province_Border_China";
                    case 5:
                        return "City_Border_China";
                    case 6:
                        return "County_Border_China";
                    case 7:
                    case 8:
                        return "Nation_Border_Foreign";
                    case 9:
                        return "Coastline_Foreign";
                    case 10:
                    case 11:
                        return "Nation_Border_Foreign";
                    case 12:
                        return "Province_Border_Foreign";
                    default:
                        return ""
                    }
                }
                ,
                DistrictSourceWorker.prototype.sW = function(code) {
                    return this.fW[code] || (this.fW[code] = eval("'" + code.replace(/\//g, "\\u") + "'")),
                    this.fW[code]
                }
                ,
                DistrictSourceWorker.prototype.cW = function(i) {
                    i.properties.NAME_CHN && (i.properties.NAME_CHN = this.sW(i.properties.NAME_CHN.trim())),
                    i.properties.NAME_ENG && (i.properties.NAME_ENG = i.properties.NAME_ENG.trim()),
                    i.properties.level && (i.properties.level = i.properties.level.trim()),
                    i.properties.citycode && i.properties.citycode.length && (i.properties.citycode = i.properties.citycode.trim()),
                    i.properties.type_ = +i.properties.type,
                    i.properties.feature_type_ = +i.type,
                    i.properties.type = this.dW(+i.properties.type)
                }
                ,
                DistrictSourceWorker
            }(), mbStyle = {
                Hr: undefined,
                _r: {},
                kr: {
                    "pedestrian-polygon": {
                        width: 128,
                        height: 128,
                        x: 0,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "turning-circle-outline": {
                        width: 92,
                        height: 92,
                        x: 128,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "turning-circle": {
                        width: 84,
                        height: 84,
                        x: 0,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-truck-2": {
                        width: 40,
                        height: 80,
                        x: 84,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-truck-3": {
                        width: 52,
                        height: 80,
                        x: 124,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-business-2": {
                        width: 40,
                        height: 76,
                        x: 176,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-business-3": {
                        width: 52,
                        height: 76,
                        x: 216,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-bypass-2": {
                        width: 40,
                        height: 76,
                        x: 268,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-bypass-3": {
                        width: 52,
                        height: 76,
                        x: 308,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-truck-2": {
                        width: 40,
                        height: 76,
                        x: 360,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-truck-3": {
                        width: 52,
                        height: 76,
                        x: 400,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ae-f-route-3": {
                        width: 48,
                        height: 54,
                        x: 452,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ae-s-route-4": {
                        width: 76,
                        height: 52,
                        x: 220,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pe-national-2": {
                        width: 36,
                        height: 52,
                        x: 296,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pe-national-3": {
                        width: 44,
                        height: 52,
                        x: 332,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ae-national-3": {
                        width: 52,
                        height: 50,
                        x: 376,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ae-national-4": {
                        width: 64,
                        height: 50,
                        x: 428,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ae-d-route-3": {
                        width: 48,
                        height: 48,
                        x: 0,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ae-d-route-4": {
                        width: 60,
                        height: 48,
                        x: 48,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-provincial-2": {
                        width: 44,
                        height: 48,
                        x: 108,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-provincial-3": {
                        width: 56,
                        height: 48,
                        x: 152,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-provincial-expy-2": {
                        width: 44,
                        height: 48,
                        x: 208,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-provincial-expy-3": {
                        width: 56,
                        height: 48,
                        x: 252,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "za-provincial-2": {
                        width: 48,
                        height: 48,
                        x: 308,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-nths-expy-2": {
                        width: 40,
                        height: 46,
                        x: 356,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-nths-expy-3": {
                        width: 52,
                        height: 46,
                        x: 396,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-nths-expy-4": {
                        width: 64,
                        height: 46,
                        x: 448,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-nths-expy-5": {
                        width: 76,
                        height: 46,
                        x: 0,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-provincial-expy-2": {
                        width: 40,
                        height: 46,
                        x: 76,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-provincial-expy-3": {
                        width: 52,
                        height: 46,
                        x: 116,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-provincial-expy-4": {
                        width: 64,
                        height: 46,
                        x: 168,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cn-provincial-expy-5": {
                        width: 76,
                        height: 46,
                        x: 232,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "br-federal-3": {
                        width: 52,
                        height: 44,
                        x: 308,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hk-strategic-route-2": {
                        width: 36,
                        height: 44,
                        x: 360,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "in-national-2": {
                        width: 32,
                        height: 44,
                        x: 396,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "in-national-3": {
                        width: 40,
                        height: 44,
                        x: 428,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "in-national-4": {
                        width: 48,
                        height: 44,
                        x: 0,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "in-state-2": {
                        width: 32,
                        height: 44,
                        x: 48,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "in-state-3": {
                        width: 40,
                        height: 44,
                        x: 80,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-natl-expy-2": {
                        width: 40,
                        height: 44,
                        x: 120,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-natl-expy-3": {
                        width: 52,
                        height: 44,
                        x: 160,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mx-federal-2": {
                        width: 36,
                        height: 44,
                        x: 212,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mx-federal-3": {
                        width: 46,
                        height: 44,
                        x: 248,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mx-federal-4": {
                        width: 56,
                        height: 44,
                        x: 294,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mx-state-2": {
                        width: 36,
                        height: 44,
                        x: 350,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mx-state-3": {
                        width: 46,
                        height: 44,
                        x: 386,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mx-state-4": {
                        width: 56,
                        height: 44,
                        x: 432,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pe-regional-3": {
                        width: 46,
                        height: 44,
                        x: 0,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pe-regional-4": {
                        width: 56,
                        height: 44,
                        x: 46,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-national-2": {
                        width: 42,
                        height: 44,
                        x: 102,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-2": {
                        width: 40,
                        height: 44,
                        x: 144,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-3": {
                        width: 52,
                        height: 44,
                        x: 184,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-4": {
                        width: 64,
                        height: 44,
                        x: 236,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-business-2": {
                        width: 40,
                        height: 44,
                        x: 300,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-business-3": {
                        width: 52,
                        height: 44,
                        x: 340,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-duplex-4": {
                        width: 64,
                        height: 44,
                        x: 392,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-interstate-duplex-5": {
                        width: 76,
                        height: 44,
                        x: 0,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "airfield-15": {
                        width: 42,
                        height: 42,
                        x: 456,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "airport-15": {
                        width: 42,
                        height: 42,
                        x: 76,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "alcohol-shop-15": {
                        width: 42,
                        height: 42,
                        x: 118,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "american-football-15": {
                        width: 42,
                        height: 42,
                        x: 160,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "amusement-park-15": {
                        width: 42,
                        height: 42,
                        x: 202,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "aquarium-15": {
                        width: 42,
                        height: 42,
                        x: 244,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "art-gallery-15": {
                        width: 42,
                        height: 42,
                        x: 286,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "attraction-15": {
                        width: 42,
                        height: 42,
                        x: 328,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-tourist-2": {
                        width: 40,
                        height: 42,
                        x: 370,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-tourist-3": {
                        width: 56,
                        height: 42,
                        x: 410,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bakery-15": {
                        width: 42,
                        height: 42,
                        x: 466,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bank-15": {
                        width: 42,
                        height: 42,
                        x: 468,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bar-15": {
                        width: 42,
                        height: 42,
                        x: 0,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "basketball-15": {
                        width: 42,
                        height: 42,
                        x: 42,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "beach-15": {
                        width: 42,
                        height: 42,
                        x: 84,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "beer-15": {
                        width: 42,
                        height: 42,
                        x: 126,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bicycle-15": {
                        width: 42,
                        height: 42,
                        x: 168,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bowling-alley-15": {
                        width: 42,
                        height: 42,
                        x: 210,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bridge-15": {
                        width: 42,
                        height: 42,
                        x: 252,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cafe-15": {
                        width: 42,
                        height: 42,
                        x: 294,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "campsite-15": {
                        width: 42,
                        height: 42,
                        x: 336,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "car-15": {
                        width: 42,
                        height: 42,
                        x: 378,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "car-rental-15": {
                        width: 42,
                        height: 42,
                        x: 420,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "car-repair-15": {
                        width: 42,
                        height: 42,
                        x: 462,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "casino-15": {
                        width: 42,
                        height: 42,
                        x: 504,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "castle-15": {
                        width: 42,
                        height: 42,
                        x: 546,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cemetery-15": {
                        width: 42,
                        height: 42,
                        x: 588,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "charging-station-15": {
                        width: 42,
                        height: 42,
                        x: 630,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cinema-15": {
                        width: 42,
                        height: 42,
                        x: 672,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "clothing-store-15": {
                        width: 42,
                        height: 42,
                        x: 714,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "college-15": {
                        width: 42,
                        height: 42,
                        x: 756,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "communications-tower-15": {
                        width: 42,
                        height: 42,
                        x: 798,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "confectionery-15": {
                        width: 42,
                        height: 42,
                        x: 840,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "convenience-15": {
                        width: 42,
                        height: 42,
                        x: 882,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dentist-15": {
                        width: 42,
                        height: 42,
                        x: 924,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "doctor-15": {
                        width: 42,
                        height: 42,
                        x: 966,
                        y: 438,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dog-park-15": {
                        width: 42,
                        height: 42,
                        x: 488,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "drinking-water-15": {
                        width: 42,
                        height: 42,
                        x: 530,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "embassy-15": {
                        width: 42,
                        height: 42,
                        x: 572,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "farm-15": {
                        width: 42,
                        height: 42,
                        x: 614,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fast-food-15": {
                        width: 42,
                        height: 42,
                        x: 656,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fire-station-15": {
                        width: 42,
                        height: 42,
                        x: 698,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fitness-centre-15": {
                        width: 42,
                        height: 42,
                        x: 740,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fuel-15": {
                        width: 42,
                        height: 42,
                        x: 782,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "furniture-15": {
                        width: 42,
                        height: 42,
                        x: 824,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "garden-15": {
                        width: 42,
                        height: 42,
                        x: 866,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "globe-15": {
                        width: 42,
                        height: 42,
                        x: 908,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "golf-15": {
                        width: 42,
                        height: 42,
                        x: 950,
                        y: 306,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "grocery-15": {
                        width: 42,
                        height: 42,
                        x: 498,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "harbor-15": {
                        width: 42,
                        height: 42,
                        x: 540,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hardware-15": {
                        width: 42,
                        height: 42,
                        x: 582,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "heliport-15": {
                        width: 42,
                        height: 42,
                        x: 624,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "horse-riding-15": {
                        width: 42,
                        height: 42,
                        x: 666,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hospital-15": {
                        width: 42,
                        height: 42,
                        x: 708,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ice-cream-15": {
                        width: 42,
                        height: 42,
                        x: 750,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "information-15": {
                        width: 42,
                        height: 42,
                        x: 792,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "jewelry-store-15": {
                        width: 42,
                        height: 42,
                        x: 834,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "laundry-15": {
                        width: 42,
                        height: 42,
                        x: 876,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "library-15": {
                        width: 42,
                        height: 42,
                        x: 918,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "lodging-15": {
                        width: 42,
                        height: 42,
                        x: 960,
                        y: 350,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mobile-phone-15": {
                        width: 42,
                        height: 42,
                        x: 508,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "monument-15": {
                        width: 42,
                        height: 42,
                        x: 550,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mountain-15": {
                        width: 42,
                        height: 42,
                        x: 592,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "museum-15": {
                        width: 42,
                        height: 42,
                        x: 634,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "music-15": {
                        width: 42,
                        height: 42,
                        x: 676,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "optician-15": {
                        width: 42,
                        height: 42,
                        x: 718,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "park-15": {
                        width: 42,
                        height: 42,
                        x: 760,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "parking-15": {
                        width: 42,
                        height: 42,
                        x: 802,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "parking-garage-15": {
                        width: 42,
                        height: 42,
                        x: 844,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pharmacy-15": {
                        width: 42,
                        height: 42,
                        x: 886,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "picnic-site-15": {
                        width: 42,
                        height: 42,
                        x: 928,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pitch-15": {
                        width: 42,
                        height: 42,
                        x: 970,
                        y: 394,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "place-of-worship-15": {
                        width: 42,
                        height: 42,
                        x: 510,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "playground-15": {
                        width: 42,
                        height: 42,
                        x: 552,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "police-15": {
                        width: 42,
                        height: 42,
                        x: 594,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "post-15": {
                        width: 42,
                        height: 42,
                        x: 636,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "prison-15": {
                        width: 42,
                        height: 42,
                        x: 678,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ranger-station-15": {
                        width: 42,
                        height: 42,
                        x: 720,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-buddhist-15": {
                        width: 42,
                        height: 42,
                        x: 762,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-christian-15": {
                        width: 42,
                        height: 42,
                        x: 804,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-jewish-15": {
                        width: 42,
                        height: 42,
                        x: 846,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-muslim-15": {
                        width: 42,
                        height: 42,
                        x: 888,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-15": {
                        width: 42,
                        height: 42,
                        x: 930,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-noodle-15": {
                        width: 42,
                        height: 42,
                        x: 972,
                        y: 260,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-pizza-15": {
                        width: 42,
                        height: 42,
                        x: 512,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-seafood-15": {
                        width: 42,
                        height: 42,
                        x: 554,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rocket-15": {
                        width: 42,
                        height: 42,
                        x: 596,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "school-15": {
                        width: 42,
                        height: 42,
                        x: 638,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "shoe-15": {
                        width: 42,
                        height: 42,
                        x: 680,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "shop-15": {
                        width: 42,
                        height: 42,
                        x: 722,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "skateboard-15": {
                        width: 42,
                        height: 42,
                        x: 764,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "slipway-15": {
                        width: 42,
                        height: 42,
                        x: 806,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "stadium-15": {
                        width: 42,
                        height: 42,
                        x: 848,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "suitcase-15": {
                        width: 42,
                        height: 42,
                        x: 890,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "swimming-15": {
                        width: 42,
                        height: 42,
                        x: 932,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "table-tennis-15": {
                        width: 42,
                        height: 42,
                        x: 974,
                        y: 212,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tennis-15": {
                        width: 42,
                        height: 42,
                        x: 500,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "theatre-15": {
                        width: 42,
                        height: 42,
                        x: 542,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "toilet-15": {
                        width: 42,
                        height: 42,
                        x: 584,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "town-hall-15": {
                        width: 42,
                        height: 42,
                        x: 626,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "veterinary-15": {
                        width: 42,
                        height: 42,
                        x: 668,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "viewpoint-15": {
                        width: 42,
                        height: 42,
                        x: 710,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "volcano-15": {
                        width: 42,
                        height: 42,
                        x: 752,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "volleyball-15": {
                        width: 42,
                        height: 42,
                        x: 794,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "watch-15": {
                        width: 42,
                        height: 42,
                        x: 836,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "waterfall-15": {
                        width: 42,
                        height: 42,
                        x: 878,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "watermill-15": {
                        width: 42,
                        height: 42,
                        x: 920,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "windmill-15": {
                        width: 42,
                        height: 42,
                        x: 962,
                        y: 128,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "zoo-15": {
                        width: 42,
                        height: 42,
                        x: 492,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-highway-2": {
                        width: 40,
                        height: 40,
                        x: 534,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-highway-3": {
                        width: 52,
                        height: 40,
                        x: 574,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-route-2": {
                        width: 40,
                        height: 40,
                        x: 626,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-route-3": {
                        width: 52,
                        height: 40,
                        x: 666,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-route-4": {
                        width: 64,
                        height: 40,
                        x: 718,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-route-5": {
                        width: 76,
                        height: 40,
                        x: 782,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-national-route-6": {
                        width: 86,
                        height: 40,
                        x: 858,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-state-2": {
                        width: 36,
                        height: 40,
                        x: 944,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-state-3": {
                        width: 46,
                        height: 40,
                        x: 0,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-state-4": {
                        width: 58,
                        height: 40,
                        x: 46,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-state-5": {
                        width: 68,
                        height: 40,
                        x: 104,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "au-state-6": {
                        width: 78,
                        height: 40,
                        x: 172,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "br-state-2": {
                        width: 40,
                        height: 40,
                        x: 250,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "br-state-3": {
                        width: 56,
                        height: 40,
                        x: 290,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "circle-white-2": {
                        width: 40,
                        height: 40,
                        x: 346,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "circle-white-3": {
                        width: 52,
                        height: 40,
                        x: 386,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "circle-white-4": {
                        width: 64,
                        height: 40,
                        x: 438,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hu-main-2": {
                        width: 40,
                        height: 40,
                        x: 502,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hu-main-3": {
                        width: 52,
                        height: 40,
                        x: 542,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hu-main-4": {
                        width: 64,
                        height: 40,
                        x: 594,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hu-main-5": {
                        width: 76,
                        height: 40,
                        x: 658,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hu-motorway-2": {
                        width: 40,
                        height: 40,
                        x: 734,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hu-motorway-3": {
                        width: 52,
                        height: 40,
                        x: 774,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "marker-15": {
                        width: 24,
                        height: 40,
                        x: 826,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "nz-state-2": {
                        width: 36,
                        height: 40,
                        x: 850,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "nz-state-3": {
                        width: 46,
                        height: 40,
                        x: 886,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-communal-2": {
                        width: 40,
                        height: 40,
                        x: 932,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-communal-3": {
                        width: 52,
                        height: 40,
                        x: 972,
                        y: 480,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-communal-4": {
                        width: 64,
                        height: 40,
                        x: 0,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-county-3": {
                        width: 52,
                        height: 40,
                        x: 64,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-county-4": {
                        width: 64,
                        height: 40,
                        x: 116,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-national-2": {
                        width: 40,
                        height: 40,
                        x: 180,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ro-national-3": {
                        width: 52,
                        height: 40,
                        x: 220,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-county-township-2": {
                        width: 40,
                        height: 40,
                        x: 272,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-county-township-3": {
                        width: 52,
                        height: 40,
                        x: 312,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-county-township-4": {
                        width: 64,
                        height: 40,
                        x: 364,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-county-township-5": {
                        width: 76,
                        height: 40,
                        x: 428,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tw-county-township-6": {
                        width: 88,
                        height: 40,
                        x: 504,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-bia-2": {
                        width: 40,
                        height: 40,
                        x: 592,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-bia-3": {
                        width: 52,
                        height: 40,
                        x: 632,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-bia-4": {
                        width: 60,
                        height: 40,
                        x: 684,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-2": {
                        width: 40,
                        height: 40,
                        x: 744,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-3": {
                        width: 52,
                        height: 40,
                        x: 784,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-4": {
                        width: 64,
                        height: 40,
                        x: 836,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-alternate-2": {
                        width: 40,
                        height: 40,
                        x: 900,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-alternate-3": {
                        width: 52,
                        height: 40,
                        x: 940,
                        y: 520,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-duplex-3": {
                        width: 52,
                        height: 40,
                        x: 0,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-duplex-4": {
                        width: 64,
                        height: 40,
                        x: 52,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "us-highway-duplex-5": {
                        width: 76,
                        height: 40,
                        x: 116,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "za-national-2": {
                        width: 40,
                        height: 40,
                        x: 192,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "za-national-3": {
                        width: 56,
                        height: 40,
                        x: 232,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "barcelona-metro": {
                        width: 38,
                        height: 38,
                        x: 288,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "boston-t": {
                        width: 38,
                        height: 38,
                        x: 326,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "de-s-bahn": {
                        width: 38,
                        height: 38,
                        x: 364,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "de-s-bahn.de-u-bahn": {
                        width: 70,
                        height: 38,
                        x: 402,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "delhi-metro": {
                        width: 38,
                        height: 38,
                        x: 472,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kiev-metro": {
                        width: 38,
                        height: 38,
                        x: 510,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metro-expy-2": {
                        width: 40,
                        height: 38,
                        x: 548,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metro-expy-3": {
                        width: 52,
                        height: 38,
                        x: 588,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metro-expy-4": {
                        width: 64,
                        height: 38,
                        x: 640,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "madrid-metro": {
                        width: 38,
                        height: 38,
                        x: 704,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "new-york-subway": {
                        width: 38,
                        height: 38,
                        x: 742,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "oslo-metro": {
                        width: 38,
                        height: 38,
                        x: 780,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "paris-metro": {
                        width: 38,
                        height: 38,
                        x: 818,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "paris-metro.paris-rer": {
                        width: 74,
                        height: 38,
                        x: 856,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "paris-rer": {
                        width: 38,
                        height: 38,
                        x: 930,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "paris-rer.paris-transilien": {
                        width: 70,
                        height: 38,
                        x: 0,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "road-closure": {
                        width: 38,
                        height: 38,
                        x: 70,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "stockholm-metro": {
                        width: 38,
                        height: 38,
                        x: 108,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "taipei-metro": {
                        width: 38,
                        height: 38,
                        x: 146,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "vienna-u-bahn": {
                        width: 38,
                        height: 38,
                        x: 184,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-natl-hwy-2": {
                        width: 44,
                        height: 36,
                        x: 222,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "airfield-11": {
                        width: 34,
                        height: 34,
                        x: 266,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "airport-11": {
                        width: 34,
                        height: 34,
                        x: 300,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "alcohol-shop-11": {
                        width: 34,
                        height: 34,
                        x: 334,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "american-football-11": {
                        width: 34,
                        height: 34,
                        x: 368,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "amusement-park-11": {
                        width: 34,
                        height: 34,
                        x: 402,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "aquarium-11": {
                        width: 34,
                        height: 34,
                        x: 436,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "art-gallery-11": {
                        width: 34,
                        height: 34,
                        x: 470,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "attraction-11": {
                        width: 34,
                        height: 34,
                        x: 504,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bakery-11": {
                        width: 34,
                        height: 34,
                        x: 538,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bank-11": {
                        width: 34,
                        height: 34,
                        x: 572,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bar-11": {
                        width: 34,
                        height: 34,
                        x: 606,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "basketball-11": {
                        width: 34,
                        height: 34,
                        x: 640,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "beach-11": {
                        width: 34,
                        height: 34,
                        x: 674,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "beer-11": {
                        width: 34,
                        height: 34,
                        x: 708,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bicycle-11": {
                        width: 34,
                        height: 34,
                        x: 742,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bicycle-share": {
                        width: 34,
                        height: 34,
                        x: 776,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bowling-alley-11": {
                        width: 34,
                        height: 34,
                        x: 810,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "bridge-11": {
                        width: 34,
                        height: 34,
                        x: 844,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    bus: {
                        width: 34,
                        height: 34,
                        x: 878,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cafe-11": {
                        width: 34,
                        height: 34,
                        x: 912,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "campsite-11": {
                        width: 34,
                        height: 34,
                        x: 946,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "car-11": {
                        width: 34,
                        height: 34,
                        x: 980,
                        y: 600,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "car-rental-11": {
                        width: 34,
                        height: 34,
                        x: 968,
                        y: 560,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "car-repair-11": {
                        width: 34,
                        height: 34,
                        x: 980,
                        y: 0,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "casino-11": {
                        width: 34,
                        height: 34,
                        x: 0,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "castle-11": {
                        width: 34,
                        height: 34,
                        x: 34,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cemetery-11": {
                        width: 34,
                        height: 34,
                        x: 68,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "charging-station-11": {
                        width: 34,
                        height: 34,
                        x: 102,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "chongqing-rail-transit": {
                        width: 50,
                        height: 34,
                        x: 136,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "cinema-11": {
                        width: 34,
                        height: 34,
                        x: 186,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "clothing-store-11": {
                        width: 34,
                        height: 34,
                        x: 220,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "college-11": {
                        width: 34,
                        height: 34,
                        x: 254,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "communications-tower-11": {
                        width: 34,
                        height: 34,
                        x: 288,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "confectionery-11": {
                        width: 34,
                        height: 34,
                        x: 322,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "convenience-11": {
                        width: 34,
                        height: 34,
                        x: 356,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "de-u-bahn": {
                        width: 34,
                        height: 34,
                        x: 390,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dentist-11": {
                        width: 34,
                        height: 34,
                        x: 424,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "doctor-11": {
                        width: 34,
                        height: 34,
                        x: 458,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dog-park-11": {
                        width: 34,
                        height: 34,
                        x: 492,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "drinking-water-11": {
                        width: 34,
                        height: 34,
                        x: 526,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "embassy-11": {
                        width: 34,
                        height: 34,
                        x: 560,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    entrance: {
                        width: 34,
                        height: 34,
                        x: 594,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "farm-11": {
                        width: 34,
                        height: 34,
                        x: 628,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fast-food-11": {
                        width: 34,
                        height: 34,
                        x: 662,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    ferry: {
                        width: 34,
                        height: 34,
                        x: 696,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fire-station-11": {
                        width: 34,
                        height: 34,
                        x: 730,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fitness-centre-11": {
                        width: 34,
                        height: 34,
                        x: 764,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "fuel-11": {
                        width: 34,
                        height: 34,
                        x: 798,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "furniture-11": {
                        width: 34,
                        height: 34,
                        x: 832,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "garden-11": {
                        width: 34,
                        height: 34,
                        x: 866,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "globe-11": {
                        width: 34,
                        height: 34,
                        x: 900,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "golf-11": {
                        width: 34,
                        height: 34,
                        x: 934,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "grocery-11": {
                        width: 34,
                        height: 34,
                        x: 968,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "harbor-11": {
                        width: 34,
                        height: 34,
                        x: 0,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hardware-11": {
                        width: 34,
                        height: 34,
                        x: 34,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "heliport-11": {
                        width: 34,
                        height: 34,
                        x: 68,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hong-kong-mtr": {
                        width: 38,
                        height: 34,
                        x: 102,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "horse-riding-11": {
                        width: 34,
                        height: 34,
                        x: 140,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hospital-11": {
                        width: 34,
                        height: 34,
                        x: 174,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ice-cream-11": {
                        width: 34,
                        height: 34,
                        x: 208,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "information-11": {
                        width: 34,
                        height: 34,
                        x: 242,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "jewelry-store-11": {
                        width: 34,
                        height: 34,
                        x: 276,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "laundry-11": {
                        width: 34,
                        height: 34,
                        x: 310,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "library-11": {
                        width: 34,
                        height: 34,
                        x: 344,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "lodging-11": {
                        width: 34,
                        height: 34,
                        x: 378,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "marker-11": {
                        width: 24,
                        height: 34,
                        x: 412,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mexico-city-metro": {
                        width: 34,
                        height: 34,
                        x: 436,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "milan-metro": {
                        width: 34,
                        height: 34,
                        x: 470,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mobile-phone-11": {
                        width: 34,
                        height: 34,
                        x: 504,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "monument-11": {
                        width: 34,
                        height: 34,
                        x: 538,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "moscow-metro": {
                        width: 34,
                        height: 34,
                        x: 572,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "mountain-11": {
                        width: 34,
                        height: 34,
                        x: 606,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "museum-11": {
                        width: 34,
                        height: 34,
                        x: 640,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "music-11": {
                        width: 34,
                        height: 34,
                        x: 674,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "optician-11": {
                        width: 34,
                        height: 34,
                        x: 708,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "osaka-subway": {
                        width: 40,
                        height: 34,
                        x: 742,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "paris-transilien": {
                        width: 34,
                        height: 34,
                        x: 782,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "park-11": {
                        width: 34,
                        height: 34,
                        x: 816,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "parking-11": {
                        width: 34,
                        height: 34,
                        x: 850,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "parking-garage-11": {
                        width: 34,
                        height: 34,
                        x: 884,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pharmacy-11": {
                        width: 34,
                        height: 34,
                        x: 918,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "philadelphia-septa": {
                        width: 38,
                        height: 34,
                        x: 952,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "picnic-site-11": {
                        width: 34,
                        height: 34,
                        x: 990,
                        y: 672,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "pitch-11": {
                        width: 34,
                        height: 34,
                        x: 0,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "place-of-worship-11": {
                        width: 34,
                        height: 34,
                        x: 34,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "playground-11": {
                        width: 34,
                        height: 34,
                        x: 68,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "police-11": {
                        width: 34,
                        height: 34,
                        x: 102,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "post-11": {
                        width: 34,
                        height: 34,
                        x: 136,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "prison-11": {
                        width: 34,
                        height: 34,
                        x: 170,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    rail: {
                        width: 34,
                        height: 34,
                        x: 204,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rail-light": {
                        width: 34,
                        height: 34,
                        x: 238,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rail-metro": {
                        width: 34,
                        height: 34,
                        x: 272,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ranger-station-11": {
                        width: 34,
                        height: 34,
                        x: 306,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-buddhist-11": {
                        width: 34,
                        height: 34,
                        x: 340,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-christian-11": {
                        width: 34,
                        height: 34,
                        x: 374,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-jewish-11": {
                        width: 34,
                        height: 34,
                        x: 408,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "religious-muslim-11": {
                        width: 34,
                        height: 34,
                        x: 442,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-11": {
                        width: 34,
                        height: 34,
                        x: 476,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-noodle-11": {
                        width: 34,
                        height: 34,
                        x: 510,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-pizza-11": {
                        width: 34,
                        height: 34,
                        x: 544,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "restaurant-seafood-11": {
                        width: 34,
                        height: 34,
                        x: 578,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rocket-11": {
                        width: 34,
                        height: 34,
                        x: 612,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "san-francisco-bart": {
                        width: 34,
                        height: 34,
                        x: 646,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "school-11": {
                        width: 34,
                        height: 34,
                        x: 680,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "shoe-11": {
                        width: 34,
                        height: 34,
                        x: 714,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "shop-11": {
                        width: 34,
                        height: 34,
                        x: 748,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "singapore-mrt": {
                        width: 34,
                        height: 34,
                        x: 782,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "skateboard-11": {
                        width: 34,
                        height: 34,
                        x: 816,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "slipway-11": {
                        width: 34,
                        height: 34,
                        x: 850,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "stadium-11": {
                        width: 34,
                        height: 34,
                        x: 884,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "suitcase-11": {
                        width: 34,
                        height: 34,
                        x: 918,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "swimming-11": {
                        width: 34,
                        height: 34,
                        x: 952,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "table-tennis-11": {
                        width: 34,
                        height: 34,
                        x: 986,
                        y: 706,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tennis-11": {
                        width: 34,
                        height: 34,
                        x: 0,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "theatre-11": {
                        width: 34,
                        height: 34,
                        x: 34,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "toilet-11": {
                        width: 34,
                        height: 34,
                        x: 68,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "tokyo-metro": {
                        width: 34,
                        height: 34,
                        x: 102,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "town-hall-11": {
                        width: 34,
                        height: 34,
                        x: 136,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "traffic-signal": {
                        width: 16,
                        height: 34,
                        x: 1002,
                        y: 638,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "veterinary-11": {
                        width: 34,
                        height: 34,
                        x: 170,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "viewpoint-11": {
                        width: 34,
                        height: 34,
                        x: 204,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "volcano-11": {
                        width: 34,
                        height: 34,
                        x: 238,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "volleyball-11": {
                        width: 34,
                        height: 34,
                        x: 272,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "washington-metro": {
                        width: 34,
                        height: 34,
                        x: 306,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "watch-11": {
                        width: 34,
                        height: 34,
                        x: 340,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "waterfall-11": {
                        width: 34,
                        height: 34,
                        x: 374,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "watermill-11": {
                        width: 34,
                        height: 34,
                        x: 408,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "windmill-11": {
                        width: 34,
                        height: 34,
                        x: 442,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "zoo-11": {
                        width: 34,
                        height: 34,
                        x: 476,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ch-motorway-2": {
                        width: 44,
                        height: 32,
                        x: 510,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "ch-motorway-3": {
                        width: 56,
                        height: 32,
                        x: 554,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "de-motorway-2": {
                        width: 44,
                        height: 32,
                        x: 610,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "de-motorway-3": {
                        width: 56,
                        height: 32,
                        x: 654,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-dlr": {
                        width: 72,
                        height: 32,
                        x: 710,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-dlr.london-overground.london-tfl-rail.london-underground": {
                        width: 186,
                        height: 32,
                        x: 782,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-dlr.london-overground.london-underground": {
                        width: 148,
                        height: 32,
                        x: 0,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-dlr.london-underground": {
                        width: 110,
                        height: 32,
                        x: 148,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-overground": {
                        width: 72,
                        height: 32,
                        x: 258,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-overground.london-tfl-rail.london-underground": {
                        width: 148,
                        height: 32,
                        x: 330,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-overground.london-underground": {
                        width: 110,
                        height: 32,
                        x: 478,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-tfl-rail": {
                        width: 72,
                        height: 32,
                        x: 588,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-tfl-rail.london-overground": {
                        width: 110,
                        height: 32,
                        x: 660,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-tfl-rail.london-underground": {
                        width: 110,
                        height: 32,
                        x: 770,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail.london-underground": {
                        width: 72,
                        height: 32,
                        x: 880,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gr-motorway-2": {
                        width: 44,
                        height: 32,
                        x: 952,
                        y: 774,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gr-motorway-3": {
                        width: 56,
                        height: 32,
                        x: 968,
                        y: 740,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gr-motorway-4": {
                        width: 68,
                        height: 32,
                        x: 0,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hr-motorway-3": {
                        width: 56,
                        height: 32,
                        x: 68,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "hr-motorway-4": {
                        width: 68,
                        height: 32,
                        x: 124,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metropolitan-2": {
                        width: 40,
                        height: 32,
                        x: 192,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metropolitan-3": {
                        width: 52,
                        height: 32,
                        x: 232,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metropolitan-4": {
                        width: 64,
                        height: 32,
                        x: 284,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metropolitan-5": {
                        width: 76,
                        height: 32,
                        x: 348,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "kr-metropolitan-6": {
                        width: 88,
                        height: 32,
                        x: 424,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-dlr": {
                        width: 40,
                        height: 32,
                        x: 512,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-dlr.london-tfl-rail": {
                        width: 78,
                        height: 32,
                        x: 552,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-dlr.london-tfl-rail.london-underground": {
                        width: 116,
                        height: 32,
                        x: 630,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-dlr.london-underground": {
                        width: 78,
                        height: 32,
                        x: 746,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-overground": {
                        width: 40,
                        height: 32,
                        x: 824,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-overground.london-tfl-rail": {
                        width: 78,
                        height: 32,
                        x: 864,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-overground.london-tfl-rail.london-underground": {
                        width: 116,
                        height: 32,
                        x: 0,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-overground.london-underground": {
                        width: 78,
                        height: 32,
                        x: 942,
                        y: 806,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-tfl-rail": {
                        width: 40,
                        height: 32,
                        x: 116,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-tfl-rail.london-underground": {
                        width: 78,
                        height: 32,
                        x: 156,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "london-underground": {
                        width: 40,
                        height: 32,
                        x: 234,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "si-motorway-2": {
                        width: 44,
                        height: 32,
                        x: 274,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    wetland: {
                        width: 32,
                        height: 32,
                        x: 318,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "level-crossing": {
                        width: 30,
                        height: 30,
                        x: 350,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "default-2": {
                        width: 40,
                        height: 28,
                        x: 380,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "default-3": {
                        width: 52,
                        height: 28,
                        x: 420,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "default-4": {
                        width: 64,
                        height: 28,
                        x: 472,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "default-5": {
                        width: 76,
                        height: 28,
                        x: 536,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "default-6": {
                        width: 88,
                        height: 28,
                        x: 612,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "gb-national-rail": {
                        width: 34,
                        height: 28,
                        x: 700,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-1": {
                        width: 40,
                        height: 28,
                        x: 734,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-2": {
                        width: 40,
                        height: 28,
                        x: 774,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-3": {
                        width: 52,
                        height: 28,
                        x: 814,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-4": {
                        width: 64,
                        height: 28,
                        x: 866,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-5": {
                        width: 76,
                        height: 28,
                        x: 930,
                        y: 838,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-6": {
                        width: 88,
                        height: 28,
                        x: 0,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-7": {
                        width: 100,
                        height: 28,
                        x: 88,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-8": {
                        width: 112,
                        height: 28,
                        x: 188,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "motorway-exit-9": {
                        width: 124,
                        height: 28,
                        x: 300,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-blue-2": {
                        width: 40,
                        height: 28,
                        x: 424,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-blue-3": {
                        width: 52,
                        height: 28,
                        x: 464,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-blue-4": {
                        width: 64,
                        height: 28,
                        x: 516,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-green-2": {
                        width: 40,
                        height: 28,
                        x: 580,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-green-3": {
                        width: 52,
                        height: 28,
                        x: 620,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-green-4": {
                        width: 64,
                        height: 28,
                        x: 672,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-green-5": {
                        width: 76,
                        height: 28,
                        x: 736,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-green-6": {
                        width: 88,
                        height: 28,
                        x: 812,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-red-2": {
                        width: 40,
                        height: 28,
                        x: 900,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-red-3": {
                        width: 52,
                        height: 28,
                        x: 940,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-red-4": {
                        width: 64,
                        height: 28,
                        x: 0,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-white-2": {
                        width: 40,
                        height: 28,
                        x: 64,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-white-3": {
                        width: 52,
                        height: 28,
                        x: 104,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-white-4": {
                        width: 64,
                        height: 28,
                        x: 156,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-white-5": {
                        width: 76,
                        height: 28,
                        x: 220,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-white-6": {
                        width: 88,
                        height: 28,
                        x: 296,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-yellow-2": {
                        width: 40,
                        height: 28,
                        x: 384,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-yellow-3": {
                        width: 52,
                        height: 28,
                        x: 424,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-yellow-4": {
                        width: 64,
                        height: 28,
                        x: 476,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-yellow-5": {
                        width: 76,
                        height: 28,
                        x: 540,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "rectangle-yellow-6": {
                        width: 88,
                        height: 28,
                        x: 616,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "border-dot-13": {
                        width: 26,
                        height: 26,
                        x: 992,
                        y: 870,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dot-10": {
                        width: 22,
                        height: 22,
                        x: 704,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dot-11": {
                        width: 22,
                        height: 22,
                        x: 726,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "dot-9": {
                        width: 22,
                        height: 22,
                        x: 748,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    cliff: {
                        width: 16,
                        height: 14,
                        x: 770,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "oneway-large": {
                        width: 28,
                        height: 12,
                        x: 786,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "oneway-white-large": {
                        width: 28,
                        height: 12,
                        x: 814,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "oneway-small": {
                        width: 22,
                        height: 10,
                        x: 842,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    },
                    "oneway-white-small": {
                        width: 22,
                        height: 10,
                        x: 864,
                        y: 898,
                        pixelRatio: 2,
                        visible: !0
                    }
                },
                VU: {
                    "Latin-1 Supplement": function(i) {
                        return 128 <= i && i <= 255
                    },
                    Arabic: function(i) {
                        return 1536 <= i && i <= 1791
                    },
                    "Arabic Supplement": function(i) {
                        return 1872 <= i && i <= 1919
                    },
                    "Arabic Extended-A": function(i) {
                        return 2208 <= i && i <= 2303
                    },
                    "Hangul Jamo": function(i) {
                        return 4352 <= i && i <= 4607
                    },
                    "Unified Canadian Aboriginal Syllabics": function(i) {
                        return 5120 <= i && i <= 5759
                    },
                    Khmer: function(i) {
                        return 6016 <= i && i <= 6143
                    },
                    "Unified Canadian Aboriginal Syllabics Extended": function(i) {
                        return 6320 <= i && i <= 6399
                    },
                    "General Punctuation": function(i) {
                        return 8192 <= i && i <= 8303
                    },
                    "Letterlike Symbols": function(i) {
                        return 8448 <= i && i <= 8527
                    },
                    "Number Forms": function(i) {
                        return 8528 <= i && i <= 8591
                    },
                    "Miscellaneous Technical": function(i) {
                        return 8960 <= i && i <= 9215
                    },
                    "Control Pictures": function(i) {
                        return 9216 <= i && i <= 9279
                    },
                    "Optical Character Recognition": function(i) {
                        return 9280 <= i && i <= 9311
                    },
                    "Enclosed Alphanumerics": function(i) {
                        return 9312 <= i && i <= 9471
                    },
                    "Geometric Shapes": function(i) {
                        return 9632 <= i && i <= 9727
                    },
                    "Miscellaneous Symbols": function(i) {
                        return 9728 <= i && i <= 9983
                    },
                    "Miscellaneous Symbols and Arrows": function(i) {
                        return 11008 <= i && i <= 11263
                    },
                    "CJK Radicals Supplement": function(i) {
                        return 11904 <= i && i <= 12031
                    },
                    "Kangxi Radicals": function(i) {
                        return 12032 <= i && i <= 12255
                    },
                    "Ideographic Description Characters": function(i) {
                        return 12272 <= i && i <= 12287
                    },
                    "CJK Symbols and Punctuation": function(i) {
                        return 12288 <= i && i <= 12351
                    },
                    Hiragana: function(i) {
                        return 12352 <= i && i <= 12447
                    },
                    Katakana: function(i) {
                        return 12448 <= i && i <= 12543
                    },
                    Bopomofo: function(i) {
                        return 12544 <= i && i <= 12591
                    },
                    "Hangul Compatibility Jamo": function(i) {
                        return 12592 <= i && i <= 12687
                    },
                    Kanbun: function(i) {
                        return 12688 <= i && i <= 12703
                    },
                    "Bopomofo Extended": function(i) {
                        return 12704 <= i && i <= 12735
                    },
                    "CJK Strokes": function(i) {
                        return 12736 <= i && i <= 12783
                    },
                    "Katakana Phonetic Extensions": function(i) {
                        return 12784 <= i && i <= 12799
                    },
                    "Enclosed CJK Letters and Months": function(i) {
                        return 12800 <= i && i <= 13055
                    },
                    "CJK Compatibility": function(i) {
                        return 13056 <= i && i <= 13311
                    },
                    "CJK Unified Ideographs Extension A": function(i) {
                        return 13312 <= i && i <= 19903
                    },
                    "Yijing Hexagram Symbols": function(i) {
                        return 19904 <= i && i <= 19967
                    },
                    "CJK Unified Ideographs": function(i) {
                        return 19968 <= i && i <= 40959
                    },
                    "Yi Syllables": function(i) {
                        return 40960 <= i && i <= 42127
                    },
                    "Yi Radicals": function(i) {
                        return 42128 <= i && i <= 42191
                    },
                    "Hangul Jamo Extended-A": function(i) {
                        return 43360 <= i && i <= 43391
                    },
                    "Hangul Syllables": function(i) {
                        return 44032 <= i && i <= 55215
                    },
                    "Hangul Jamo Extended-B": function(i) {
                        return 55216 <= i && i <= 55295
                    },
                    "Private Use Area": function(i) {
                        return 57344 <= i && i <= 63743
                    },
                    "CJK Compatibility Ideographs": function(i) {
                        return 63744 <= i && i <= 64255
                    },
                    "Arabic Presentation Forms-A": function(i) {
                        return 64336 <= i && i <= 65023
                    },
                    "Vertical Forms": function(i) {
                        return 65040 <= i && i <= 65055
                    },
                    "CJK Compatibility Forms": function(i) {
                        return 65072 <= i && i <= 65103
                    },
                    "Small Form Variants": function(i) {
                        return 65104 <= i && i <= 65135
                    },
                    "Arabic Presentation Forms-B": function(i) {
                        return 65136 <= i && i <= 65279
                    },
                    "Halfwidth and Fullwidth Forms": function(i) {
                        return 65280 <= i && i <= 65519
                    }
                },
                layers: [],
                styles: {},
                Mr: !0,
                Rr: function(i, t) {
                    var r, h = this;
                    if (!i)
                        return !1;
                    r = i,
                    this.styles.zr = [];
                    for (var a = this, e = 0, o = r.length; e < o; e += 1)
                        !function(i) {
                            var o, l, e, n = r[i], t = (n.zIndex = i,
                            "line" === n.type && (n.paint["line-width"] = n.paint["line-width"] === undefined ? 1 : n.paint["line-width"]),
                            n.paint["line-width"] && (i = n.paint["line-width"],
                            t = 0,
                            n.paint["line-gap-width"] && (t = n.paint["line-gap-width"]),
                            o = i,
                            l = t,
                            a.styles.zr.push(i = function(i, t) {
                                var e = 0;
                                return l && (e = h.HU(t, l, i)),
                                t = h.HU(t, o, i),
                                e ? 2 * t + e : t
                            }
                            ),
                            n.paint["line-width"] = i,
                            n.paint["line-width"].Cr = a.styles.zr.length - 1,
                            delete n.paint["line-gap-width"]),
                            n["source-layer"]);
                            t ? (a.styles[t] || (a.styles[t] = []),
                            (i = n.filter) && (n.filters = [],
                            (e = function(i) {
                                if ("all" !== i[0])
                                    "in" === i[0] || "!in" === i[0] ? n.filters.push([i[0], i[1], i.slice(2)]) : n.filters.push(i);
                                else
                                    for (var t = 1; t < i.length; t += 1)
                                        e(i[t])
                            }
                            )(i)),
                            a.styles[t].push(n)) : a.styles[n.id] = n
                        }(e);
                    this.backgroundColor = this.HU({}, this.styles.land.paint["background-color"], 12)
                },
                Ar: function(i, t, e, o) {
                    return i -= e,
                    0 == (o -= e) ? 0 : 1 === t ? i / o : (Math.pow(t, i) - 1) / (Math.pow(t, o) - 1)
                },
                Sr: function(i, t, e) {
                    var o = t.base || 1
                      , l = t.stops;
                    if (e <= l[0][0])
                        return this.HU(i, l[0][1], e);
                    if (e >= l[l.length - 1][0])
                        return this.HU(i, l[l.length - 1][1], e);
                    for (var n = 1, h = l.length; n < h; n += 1)
                        if (e > l[n - 1][0] && e <= l[n][0]) {
                            var r = this.HU(i, l[n - 1][1], e)
                              , a = this.HU(i, l[n][1], e);
                            if (r instanceof Array) {
                                for (var s = new Array(r.length), f = 0; f < r.length; f += 1) {
                                    var u = a[f] - r[f];
                                    s[f] = r[f] + this.Ar(e, o, l[n - 1][0]) * u
                                }
                                return s
                            }
                            return "number" == typeof r ? (u = a - r,
                            r + this.Ar(e, o, l[n - 1][0], l[n][0]) * u) : r
                        }
                },
                Lr: function(i, t) {
                    if (i) {
                        var e = void 0;
                        if ("string" == typeof i)
                            e = i;
                        else if (i.stops)
                            for (var o = 0, l = i.stops.length; o < l; o += 1) {
                                if (i.stops[o][0] > t) {
                                    e = i.stops[o][1];
                                    break
                                }
                                e = i.stops[l - 1][1]
                            }
                        else if ("interpolate" === i[0]) {
                            for (var n = i.slice(3), h = [], r = 0; r < n.length; r += 2)
                                h.push([n[r], n[r + 1]]);
                            for (o = 0,
                            l = h.length; o < l; o += 1) {
                                if (h[o][0] > t) {
                                    e = h[o][1];
                                    break
                                }
                                e = h[l - 1][1]
                            }
                        }
                        return e
                    }
                },
                Tr: function(i, t) {
                    if (i) {
                        var e = void 0;
                        if (i.stops)
                            for (var o = 0, l = i.stops.length; o < l; o += 1) {
                                if (i.stops[o][0] > t) {
                                    e = i.stops[o][1];
                                    break
                                }
                                e = i.stops[l - 1][1]
                            }
                        else
                            e = i;
                        return e
                    }
                },
                Ir: function(i, t) {
                    var e;
                    if (i === undefined)
                        return 0;
                    if ("function" == typeof i)
                        return i(t);
                    if ("number" != typeof i) {
                        if (i.stops)
                            e = this.Sr(i.base || 1, i.stops, t);
                        else if ("interpolate" === i[0]) {
                            for (var o = i.slice(3), l = [], n = 0; n < o.length; n += 2)
                                l.push([o[n], o[n + 1]]);
                            e = this.Sr(1, l, t)
                        }
                    } else
                        e = i;
                    return e
                },
                Dr: function(i, t, e, o) {
                    var l;
                    if (t === undefined)
                        return t;
                    t instanceof Array ? l = t : t.stops && (l = this.Sr(i, t, e));
                    var n = new Array(l.length);
                    return l.forEach(function(i, t) {
                        n[t] = i * o
                    }),
                    n
                },
                Pr: function(i, t, e) {
                    for (var o, l, n, h, r, a, s, f, u, d, p, x, y, c = "butt", v = "butt", g = "solid", w = "solid", b = 0, R = 0, m = 0; m < i.length; m += 1)
                        "line" !== i[m].type || (o = i[m]).minzoom !== undefined && o.minzoom > t || o.maxzoom !== undefined && o.maxzoom < t || (l = o.layout,
                        (n = (o = o.paint)["line-opacity"]) === undefined && (n = 1),
                        (n = this.HU(e, n, t)) && (this.WU(i[m].id, "-low") ? (h = n,
                        i[m].id,
                        y = o["line-color"],
                        r = this.HU(e, y, t),
                        c = this.HU(e, l["line-cap"] || c, t),
                        a = this.HU(e, o["line-width"], t),
                        s = o["line-width"].Cr,
                        this.Dr(e, o["line-dasharray"], t, a) && (g = "dashed"),
                        R = Math.max(R, i[m].zIndex)) : this.WU(i[m].id, "-case") || this.WU(i[m].id, "-tracks") ? (f = !0,
                        i[m].id,
                        u = n,
                        y = o["line-color"],
                        d = this.HU(e, y, t),
                        p = this.HU(e, o["line-width"], t),
                        x = o["line-width"].Cr,
                        v = this.HU(e, l["line-cap"] || v, t),
                        this.Dr(e, o["line-dasharray"], t, p) && (w = "dashed"),
                        b = Math.max(b, i[m].zIndex)) : this.WU(i[m].id, "-bg") ? (f = !0,
                        i[m].id,
                        u = n,
                        y = o["line-color"],
                        d = this.HU(e, y, t),
                        v = this.HU(e, l["line-cap"] || v, t),
                        p = this.HU(e, o["line-width"], t),
                        x = o["line-width"].Cr,
                        this.Dr(e, o["line-dasharray"], t, p) && (w = "dashed"),
                        b = Math.max(b, i[m].zIndex)) : (h = n,
                        i[m].id,
                        y = o["line-color"],
                        r = this.HU(e, y, t),
                        c = this.HU(e, l["line-cap"] || c, t),
                        a = this.HU(e, o["line-width"], t),
                        s = o["line-width"].Cr,
                        this.Dr(e, o["line-dasharray"], t, a) && (g = "dashed"),
                        R = Math.max(R, i[m].zIndex))));
                    if (a)
                        return {
                            facezIndex: R,
                            borderzIndex: b,
                            faceStrokeStyle: g,
                            faceOpacity: h,
                            faceDashArray: void 0,
                            faceWidth: a,
                            faceColor: r,
                            faceLineCap: c,
                            borderLineCap: v,
                            isOutline: f,
                            borderOpacity: u,
                            borderStrokeStyle: w,
                            borderDashArray: void 0,
                            borderColor: d,
                            borderWidth: p,
                            faceWidthFunIndex: s,
                            borderWidthFunIndex: x
                        }
                },
                QU: function(i) {
                    return i instanceof Array && -1 < this.KU(["geometry-type", "to-number", "case", "step", "is-supported-script", "concat", "get", "literal", "match", "interpolate", "to-string", "string", "coalesce", "has", "+", "==", "!=", ">", "<", ">=", "<=", "in", "!in"], i[0]) || "object" == typeof i && i.stops
                },
                KU: function(i, t) {
                    if (i && i.length) {
                        if (i.indexOf)
                            return i.indexOf(t);
                        for (var e = 0; e < i.length; e += 1)
                            if (i[e] === t)
                                return e
                    }
                    return -1
                },
                WU: function(i, t) {
                    return i.endsWith ? i.endsWith(t) : !(i.length < t.length) && i.substr(i.length - t.length) === t
                },
                Vr: function(i, t, e) {
                    for (var o = 0, l = 0; l < i.length; l += 1) {
                        var n, h, r, a, s, f, u = i[l];
                        "line" === i[l].type ? u.minzoom && u.minzoom > t || (o = Math.max(o, u.zIndex),
                        s = (a = u.paint)["line-color"],
                        n = this.HU(e, s, t),
                        h = this.HU(e, a["line-width"], t),
                        s = a["line-opacity"] === undefined ? 1 : a["line-opacity"],
                        r = this.HU(e, s, t)) : "fill" !== i[l].type || u.minzoom && u.minzoom > t || (o = Math.max(o, u.zIndex),
                        s = (a = u.paint)["fill-color"],
                        f = this.HU(e, s, t))
                    }
                    return {
                        zIndex: o,
                        fillColor: f,
                        fillOpacity: 1,
                        strokeWeight: h,
                        strokeColor: n,
                        strokeOpacity: r
                    }
                },
                Xr: function(i, t, e) {
                    var o, l, n, h, r, a, s, f, u, d, p, x, y = (i = i[0]).paint, c = i.layout;
                    if ("symbol" === i.type)
                        return o = this.HU(e, y["text-color"], t),
                        l = this.HU(e, y["text-halo-color"], t),
                        a = this.HU(e, y["text-halo-width"], t),
                        n = y["icon-opacity"] === undefined ? 1 : y["icon-opacity"],
                        n = this.HU(e, n, t),
                        y = y["text-opacity"] === undefined ? 1 : y["text-opacity"],
                        y = this.HU(e, y, t),
                        h = r = void 0,
                        0 === a && (l = ""),
                        c["icon-image"] && (r = this.HU(e, c["icon-image"], t),
                        a = this.kr[r]) && n && (a.height,
                        h = [-a.width / 2, -a.height / 2, a.width, a.height, a.x, a.y, a.width, a.height]),
                        a = this.HU(e, c["icon-rotation-alignment"], t),
                        s = c["text-max-width"],
                        f = this.HU(e, c["text-anchor"] || "center", t),
                        (u = this.HU(e, c["text-font"], t) || "Microsoft YaHei")instanceof Array && (u = u.join(" ")),
                        d = c["text-offset"] ? this.HU(e, c["text-offset"], t) : [0, 0],
                        p = this.HU(e, c["text-size"], t),
                        x = "",
                        y && c["text-field"] && (x = this.HU(e, c["text-field"] || "{name}", t)),
                        {
                            zIndex: i.zIndex,
                            Jr: a,
                            Kr: o || "black",
                            Qr: l,
                            th: (i.minzoom || 1) + .5,
                            ih: (i.maxzoom || 20) + .5,
                            eh: n,
                            nh: r,
                            qU: h,
                            oh: s,
                            textAnchor: f,
                            ah: u,
                            sh: d,
                            rh: p,
                            name: x
                        }
                },
                lh: function(i, t, e) {
                    var o = []
                      , l = this.Pr(i, t, e);
                    return l && (l.type = "line",
                    o.push(l)),
                    (l = this.uh(i, t, e)).length && o.push.apply(o, l),
                    o
                },
                uh: function(i, t, e) {
                    for (var o = [], l = 0; l < i.length; l += 1) {
                        var n = this.Xr([i[l]], t, e);
                        n && o.push(n)
                    }
                    return o
                },
                YU: function(i, t, e) {
                    for (var o = 1, l = t.length - 1; o < l; o += 2)
                        if (this.HU(i, t[o], e))
                            return this.HU(i, t[o + 1], e);
                    return this.HU(i, t[t.length - 1], e)
                },
                JU: function(i, t, e) {
                    var o = this.HU(i, t[1], e)
                      , l = this.HU(i, t[2], e);
                    return [o, this.HU(i, t[3], e)].join(l)
                },
                ZU: function(i, t, e) {
                    for (var o = t[1], l = 1, n = ("exponential" === o[0] ? l = o[1] : "linear" === o[0] && (l = 1),
                    t.slice(3)), h = [], r = 0; r < n.length; r += 2)
                        h.push([n[r], n[r + 1]]);
                    return o = this.Sr(i, {
                        base: l,
                        stops: h
                    }, e),
                    this.HU(i, o, e)
                },
                XU: function(i, t, e) {
                    "zoom" !== t[1][0] && "get" === t[1][0] && (e = i.properties[t[1][1]]);
                    for (var o = [], l = 2, n = t.length; l < n; l += 2)
                        o.push([parseFloat(t[l - 1]) || 0, this.HU(i, t[l], e)]);
                    if (e < o[0][0])
                        return this.HU(i, o[0][1], e);
                    if (e >= o[o.length - 1][0])
                        return this.HU(i, o[o.length - 1][1], e);
                    for (l = 1,
                    n = o.length; l < n; l += 1)
                        if (e <= o[l][0])
                            return this.HU(i, o[l - 1][1], e)
                },
                tV: function(i, t, e) {
                    var o = this.HU(i, t[1], e);
                    if (o) {
                        for (var l = 2, n = t.length - 1; l < n; l += 2)
                            if (t[l]instanceof Array ? -1 !== this.KU(t[l], o) : t[l] === o)
                                return this.HU(i, t[l + 1], e);
                        return this.HU(i, t[t.length - 1], e)
                    }
                },
                HU: function(i, t, e) {
                    if (t === undefined || null === t)
                        return null;
                    var o = typeof t;
                    if ("number" == o || "boolean" == o)
                        return t;
                    if ("function" == o)
                        return t(e, i);
                    if (!this.QU(t)) {
                        if ("string" == typeof t && -1 !== this.KU(t, "{")) {
                            for (var l, n = [], h = 0, r = 0, a = t.length; r < a; r += 1)
                                "{" === t[r] && (h = r),
                                "}" === t[r] && (l = r,
                                n.push(t.substring(h, l + 1)));
                            for (var s, r = 0, a = n.length; r < a; r += 1) {
                                if ((s = i.properties[n[r].substring(1, n[r].length - 1)]) === undefined)
                                    return "";
                                t = t.replace(n[r], s)
                            }
                        }
                        return t
                    }
                    if ("literal" === t[0])
                        return t[1];
                    if (t.stops)
                        return this.Sr(i, t, e);
                    if ("get" === t[0])
                        return this.Hr && "name" === t[1].substr(0, 4) && (i.properties["name_zh-Hant"] || i.properties["name_zh-Hans"]) || i.properties[t[1]];
                    if ("to-number" === t[0])
                        return parseFloat(this.HU(i, t[1], e));
                    if ("to-string" === t[0])
                        return (s = this.HU(i, t[1], e)) ? s + "" : "";
                    if ("string" === t[0])
                        return (s = this.HU(i, t[1], e)) ? s + "" : "";
                    if ("match" === t[0])
                        return this.tV(i, t, e);
                    if ("case" === t[0])
                        return this.YU(i, t, e);
                    if ("interpolate" === t[0])
                        return this.ZU(i, t, e);
                    if ("concat" === t[0])
                        return this.JU(i, t, e);
                    if ("step" === t[0])
                        return this.XU(i, t, e);
                    if ("coalesce" !== t[0])
                        return "+" === t[0] ? this.HU(i, t[1], e) + this.HU(i, t[2], e) : "has" === t[0] ? i.properties[t[1]] !== undefined : "is-supported-script" === t[0] ? this.iV(this.HU(i, t[1], e)) : "==" === t[0] ? this.HU(i, t[1], e) === this.HU(i, t[2], e) : "!=" === t[0] ? this.HU(i, t[1], e) !== this.HU(i, t[2], e) : ">" === t[0] ? this.HU(i, t[1], e) > this.HU(i, t[2], e) : "<" === t[0] ? this.HU(i, t[1], e) < this.HU(i, t[2], e) : ">=" === t[0] ? this.HU(i, t[1], e) >= this.HU(i, t[2], e) : "<=" === t[0] ? this.HU(i, t[1], e) <= this.HU(i, t[2], e) : "in" === t[0] ? -1 < this.KU(this.HU(i, t[2], e), this.HU(i, t[1], e)) : "!in" === t[0] ? -1 === this.KU(this.HU(i, t[2], e), this.HU(i, t[1], e)) : "geometry-type" === t[0] ? 3 === i.type ? "Polygon" : 2 === i.type ? "LineString" : "Point" : void 0;
                    for (r = 1; r < t.length; r += 1) {
                        var f = this.HU(i, t[r], e);
                        if (f)
                            return f
                    }
                },
                eV: function(i, t) {
                    return !(!t && (1424 <= i && i <= 2303 || this.VU["Arabic Presentation Forms-A"](i) || this.VU["Arabic Presentation Forms-B"](i)) || 2304 <= i && i <= 3583 || 3840 <= i && i <= 4255 || this.VU.Khmer(i))
                },
                iV: function(i) {
                    if (!i)
                        return !1;
                    for (var t = 0, e = i.length; t < e; t += 1) {
                        var o = i[t];
                        if (!this.eV(o.charCodeAt(0), !1))
                            return !1
                    }
                    return !0
                },
                getStyle: function(r, a, i, s) {
                    var t, e = r.type, f = (r.properties["class"],
                    r.properties.type,
                    this), u = this.styles[a];
                    if (u && (t = function() {
                        for (var i = [], t = 0, e = u.length; t < e; t += 1) {
                            var o = u[t];
                            if (o.filters) {
                                for (var l = !0, n = 0; n < o.filters.length; n += 1) {
                                    var h = o.filters[n];
                                    if (!f.HU(r, h, s)) {
                                        l = !1;
                                        break
                                    }
                                }
                                l && i.push(o)
                            } else
                                o.id === a && i.push(o)
                        }
                        return i
                    }()).length)
                        return 1 === e ? this.Xr(t, s, r) : 2 === e ? this.lh(t, s, r) : 3 === e ? this.Vr(t, s, r) : void 0
                },
                fh: function(i, t) {
                    for (var e = 1 << 20 - t.z, o = i.extent / 256, l = 0; l < i.style.length; l += 1) {
                        var n = i.style[l];
                        if ("line" !== n.type) {
                            for (var h = "", r = (n.hh && (h = i.properties[n.hh]),
                            this.Mr), a = r ? 1.8 * n.rh : n.rh, s = i.lines[0], f = 1; f < i.lines.length; f += 1)
                                s.length < i.lines[f].length && (s = i.lines[f]);
                            for (var u = [], d = 0; d < s.length; d += 1) {
                                var p = [t.x * e * 256 + s[d][0] / o * e, 256 * t.y * e + s[d][1] / o * e];
                                u.push(p)
                            }
                            var x = n.textAnchor
                              , y = (this._r.font = n.rh + "px " + n.ah,
                            this._r.measureText(h).width)
                              , c = 0
                              , v = 0
                              , g = n.nh && "viewport" === n.Jr;
                            if (n.nh) {
                                var c = (-i.properties.dh || 0) - 100
                                  , b = (w = polyfill.kS._S(u, polyfill.kS.distanceOfLine(u) / 2) || [])[2];
                                "viewport" !== n.Jr && 1 < u.length && (v = 360 - (new polyfill.Pixel(u[b + 1][0] - u[b][0],u[b + 1][1] - u[b][1]).direction() || 0)),
                                u = [w[0], w[1]]
                            } else {
                                if (this.vh(s))
                                    continue;
                                if (90 < (b = new polyfill.Pixel(s[1][0] - s[0][0],s[1][1] - s[0][1]).direction() || 0) && b < 270 && (u.reverse(),
                                s.reverse()),
                                c = -i.properties.dh - 1e6,
                                polyfill.kS.distanceOfLine(u) / e < 1.5 * y)
                                    continue
                            }
                            var R, w = {
                                margin: this.mh,
                                foreign: !0,
                                zIndex: n.zIndex,
                                yh: v,
                                rank: c,
                                font: n.ah,
                                Kr: n.Kr,
                                Qr: n.Qr,
                                rh: a,
                                id: i.id,
                                xh: u,
                                name: h,
                                textAlign: "center",
                                textBaseline: "center" === x ? "middle" : "top",
                                bh: [],
                                gh: new Array,
                                wh: g,
                                _h: !g,
                                kh: !n.nh,
                                th: n.th,
                                Mh: !0,
                                Rh: new Array,
                                zh: !1,
                                zoom: t.z
                            };
                            n.nh ? (v = 0,
                            c = n.nh.replace("{maki}", i.properties.maki).replace("{shield}", i.properties.shield).replace("{reflen}", i.properties.reflen).replace("{network}", i.properties.network),
                            (g = this.kr[c]) && n.eh && (v = g.height,
                            R = [-g.width / 2, -g.height / 2, g.width, g.height, g.x, g.y, g.width, g.height],
                            w.gh.push(R)),
                            h && (c = void 0,
                            g = "center" === x ? (c = 0,
                            -a / 2) : c = l * (a + 2) + v / 2,
                            w.Rh.push([h, n.ah, a, n.Kr, n.Qr, 0, 0, !1, [0, c, r ? 1.8 * y : y, a]]),
                            w.gh.push(R = [-y / 2, g, y, a])),
                            (v || h) && (h ? w.id = "mapbox_guideboard_" + polyfill.Util.stamp(w) : (w.id = "mapbox_singleway_" + polyfill.Util.stamp(w),
                            w.zh = !0),
                            t.labels.push(w))) : h && (w.id = "mapbox_roadname_" + polyfill.Util.stamp(w),
                            t.labels.push(w))
                        }
                    }
                },
                Sh: function(i, t) {
                    var e = 1 << 20 - t.z
                      , o = i.extent / 256
                      , l = i.Ch.xh[0][0]
                      , n = i.properties[i.style.hh];
                    if (n) {
                        var h = this.Mr ? 2 * i.style.rh : i.style.rh
                          , e = [t.x * e * 256 + l[0] / o * e, 256 * t.y * e + l[1] / o * e]
                          , r = i.style.textAnchor
                          , a = {
                            foreign: !0,
                            margin: this.mh,
                            zIndex: i.style.zIndex,
                            rank: -i.properties.dh || 0,
                            id: i.id,
                            xh: e,
                            name: n,
                            textAlign: "center",
                            textBaseline: "center" === r ? "middle" : "top",
                            bh: [],
                            gh: new Array,
                            yh: 0,
                            pos: [l[0] / o, l[1] / o],
                            wh: !0,
                            th: i.style.th,
                            Mh: !0,
                            Rh: new Array
                        }
                          , s = 0
                          , f = (i.style.nh && (e = i.style.nh.replace("{maki}", i.properties.maki).replace("{shield}", i.properties.shield).replace("{reflen}", i.properties.reflen).replace("{network}", i.properties.network),
                        l = this.kr[e]) && i.style.eh && (s = l.height,
                        y = [-l.width / 2, -l.height / 2, l.width, l.height, l.x, l.y, l.width, l.height],
                        a.gh = [y]),
                        0 < (o = n.indexOf("(")) ? [n.substr(0, o), n.substr(o)] : 20 < n.length && 1 < (e = n.split(" ")).length ? (l = Math.floor(e.length / 2),
                        [e.slice(0, l).join(" "), e.slice(l).join(" ")]) : [n]);
                        this._r.font = h + "px " + i.style.ah;
                        for (var u = 0; u < f.length; u += 1) {
                            var d = f[u]
                              , p = this._r.measureText(d).width
                              , y = (a.Rh.push([d, i.style.ah, h, i.style.Kr, i.style.Qr, 0, 0, !1, [0, d = "center" === r ? (-.5 * f.length + u) * (h + 2) : u * (h + 2) + s / 2, p, h]]),
                            [-p / 2, d, p, h]);
                            a.gh.push(y)
                        }
                        return t.labels.push(a),
                        a
                    }
                },
                Lh: function(i) {
                    var t, e = [], o = [];
                    for (t in i.layers)
                        if (i.layers.hasOwnProperty(t)) {
                            for (var l = i.layers[t], n = [], h = 0; h < l.Ah.length; h += 1)
                                3 == +(r = l.Ah[h]).type ? e.push(r) : 2 == +r.type && n.push(r);
                            for (h = 0; h < n.length; h += 1) {
                                var r, a = (r = n[h]).style;
                                a.isOutline && o.push([r, {
                                    zIndex: a.borderzIndex,
                                    Th: a.borderWidthFunIndex,
                                    strokeStyle: a.borderStrokeStyle,
                                    strokeOpacity: a.borderOpacity,
                                    strokeDasharray: a.borderDashArray,
                                    lineCap: a.borderLineCap,
                                    strokeWeight: a.borderWidth,
                                    strokeColor: a.borderColor
                                }]),
                                o.push([r, {
                                    zIndex: a.facezIndex,
                                    Th: a.faceWidthFunIndex,
                                    strokeStyle: a.faceStrokeStyle,
                                    strokeOpacity: a.faceOpacity,
                                    strokeDasharray: a.faceDashArray,
                                    lineCap: a.faceLineCap,
                                    strokeWeight: a.faceWidth,
                                    strokeColor: a.faceColor
                                }])
                            }
                        }
                    o.sort(function(i, t) {
                        return i[1].zIndex > t[1].zIndex ? 1 : -1
                    }),
                    i.polygons = e,
                    i.Dh = o,
                    delete i.layers
                },
                Ph: function(i) {
                    i.type
                },
                jh: function(i, t, e, o) {
                    this.mh = 3;
                    var l, n = t.vt, h = (n.labels = [],
                    []);
                    for (l in n.layers)
                        if (n.layers.hasOwnProperty(l)) {
                            var r = n.layers[l]
                              , a = r.Ah;
                            h.push(l);
                            for (var s = 0, f = a.length; s < f; s++) {
                                var u = a[s];
                                u.Fh = r.name,
                                u.style = this.getStyle(u, r.name, !0, n.z - 1),
                                u.style,
                                this.Ph(u),
                                u.style && 1 != +u.type && 2 == +u.type && u.style.length && (this.fh(u, n),
                                "line" === u.style[0].type) && (u.style = u.style[0])
                            }
                        }
                    this.Lh(n),
                    this.Eh || (this.Eh = !0),
                    e.features = n.labels,
                    n.labels = null,
                    h.length > this.layers.length && (this.layers = h),
                    o(null, {
                        vt: n
                    })
                }
            }, MapboxStyle = function() {
                function i(i) {
                    var t = null
                      , e = "";
                    i && ((i = i.KG) && i.styles && (t = JSON.parse(i.styles).layers),
                    i) && i.vectorMapForeign && (e = i.vectorMapForeign),
                    mbStyle.Rr(t, e)
                }
                return i.prototype.getMapboxStyle = function() {
                    return mbStyle
                }
                ,
                i
            }(), MapboxSourceWorker = function() {
                function i(i) {
                    this.parent = i,
                    this.id = "mapbox",
                    this.sQ = {},
                    this.yQ = {},
                    this.kQ = {}
                }
                return i.prototype.YE = function(i) {
                    var t = polyfill.Util.getOptimalZoom(this.WW);
                    i(this.sQ, {
                        ZL: this.WW,
                        optimalZoom: t,
                        cb: function() {}
                    }),
                    this.sQ = {}
                }
                ,
                i.prototype.bw = function(i, l, n, h, t, e, r) {
                    var a = this
                      , s = new XMLHttpRequest;
                    return s.onreadystatechange = function() {
                        var i, t, e, o;
                        4 === s.readyState && 200 === s.status && (o = new polyfill.pw(new Uint8Array(s.response)),
                        (o = new polyfill.tW(o)).nG("mapbox"),
                        i = l.z,
                        t = l.x,
                        e = l.y,
                        o.data = {},
                        o = a.Ow(o, {
                            x: l.x,
                            y: l.y,
                            z: l.z,
                            projectionId: n,
                            tileSize: h
                        }),
                        a.wQ(o),
                        o.zo = new polyfill.ca(i,t,e),
                        a.FQ(o),
                        delete o.road,
                        r(null, polyfill.Ln({
                            zo: l
                        }, o)))
                    }
                    ,
                    s.open("GET", i, !0),
                    s.responseType = "arraybuffer",
                    s.send(),
                    {
                        cancel: function() {
                            s.abort()
                        }
                    }
                }
                ,
                i.prototype.wQ = function(i) {
                    i.stencil = {};
                    var t = new polyfill.fQ
                      , i = (i.stencil.Oc = t,
                    i.stencil.Dc = new polyfill.K_,
                    i.stencil.Dc.Nx(i.MQ));
                    t.add({}, i)
                }
                ,
                i.prototype.Ow = function(e, i) {
                    var o = i.x
                      , l = i.y
                      , s = i.z
                      , n = i.tileSize
                      , f = i.projectionId;
                    e.z = s,
                    e.x = o,
                    e.y = l;
                    for (var i = polyfill.ProjectionManager.getProjection(f).getResolution(s), i = polyfill.$Q(o, l, s, i, n), h = (e.Ro = i,
                    e.MQ = [i[0], i[1], i[2], i[1], i[2], i[3], i[0], i[3]],
                    e.zS = polyfill.lcs.getLocalByCoord([e.Ro[0], e.Ro[1]]),
                    e.localCoord = e.zS,
                    Object.keys(e.layers)), t = 0; t < h.length; t++)
                        !function(i) {
                            var a = e.layers[h[i]]
                              , i = a.Cw
                              , t = a.extent;
                            a.Ah = [],
                            a.scale = n / t,
                            a.ox = n * o,
                            a.oy = n * l,
                            polyfill.forEach(i, function(i, t) {
                                if ((i = a.Gw(t)).Dw(),
                                a.Ah.push(i),
                                i.lines && i.lines.length && (2 === i.type || 3 === i.type || 1 === i.type)) {
                                    i.Rw = [];
                                    for (var e = 0, o = i.lines.length; e < o; e++) {
                                        for (var l = [], n = 0, h = i.lines[e].length; n < h; n++) {
                                            var r = [a.ox + a.scale * i.lines[e][n][0], a.oy + a.scale * i.lines[e][n][1]]
                                              , r = [(r = polyfill.V[f].Xs(r[0], r[1], s))[0], r[1]];
                                            l.push(r)
                                        }
                                        i.Rw.push(l)
                                    }
                                }
                            })
                        }(t);
                    return this.uW(e, s),
                    this.xw(e),
                    this.zw(e),
                    e
                }
                ,
                i.prototype.uW = function(i, t) {
                    var e, o = [], l = [], n = [], h = (this.kQ,
                    null);
                    for (e in this.parent && this.parent.QG && (h = this.parent.QG),
                    this.$h = new MapboxStyle({
                        KG: h
                    }).getMapboxStyle(),
                    i.bgColor = this.$h.backgroundColor,
                    i.layers)
                        if (i.layers.hasOwnProperty(e))
                            for (var r = i.layers[e], a = 0; a < r.Ah.length; a += 1) {
                                var s, f = r.Ah[a], u = this.$h.getStyle(f, r.name, !0, t);
                                u && (f.style = u,
                                3 === f.type ? o.push(f) : 2 === f.type ? l.push(f) : 1 === f.type && (s = u.name) && ((s = {
                                    name: s,
                                    position: f.Rw[0],
                                    id: f.id,
                                    minzoom: u.th,
                                    maxzoom: u.ih
                                }).style = u,
                                n.push(s)))
                            }
                    l.sort(function(i, t) {
                        return i.style && t.style && i.style.zIndex > t.style.zIndex ? 1 : -1
                    }),
                    o.sort(function(i, t) {
                        return i.style && t.style && i.style.zIndex > t.style.zIndex ? 1 : -1
                    }),
                    i.polygons = o,
                    i.Dh = l,
                    i.data.poilabel = ((h = {})[i.z + "," + i.x + "," + i.y] = n,
                    h),
                    delete i.layers
                }
                ,
                i.prototype.startsWith = function(i, t) {
                    return i.startsWith ? i.startsWith(t) : i.substr(0, t.length) === t
                }
                ,
                i.prototype.argbHex2Rgba = function(i) {
                    for (var t = [], e = 0, o = i.length; e < o; e += 2)
                        t.push(parseInt(i.substr(e, 2), 16) / 255);
                    return t.push(t.shift()),
                    t
                }
                ,
                i.prototype.uQ = function(i, t, e) {
                    return e < 0 && (e += 1),
                    1 < e && --e,
                    e < 1 / 6 ? i + 6 * (t - i) * e : e < .5 ? t : e < 2 / 3 ? i + (t - i) * (2 / 3 - e) * 6 : i
                }
                ,
                i.prototype.GQ = function(i, t, e, o) {
                    var l, n, h;
                    return 0 === t ? l = n = h = e : (l = this.uQ(t = 2 * e - (e = e < .5 ? e * (1 + t) : e + t - e * t), e, i + 1 / 3),
                    n = this.uQ(t, e, i),
                    h = this.uQ(t, e, i - 1 / 3)),
                    [l, n, h, o]
                }
                ,
                i.prototype.color2RgbaArray = function(i, t) {
                    var e, o, l, n, h, r, a;
                    return void 0 === t && (t = 1),
                    i ? (e = i.toString(),
                    this.yQ[e] || (i instanceof Array ? i : this.startsWith(i, "hsla") ? (r = i.substr(5).split(","),
                    o = parseInt(r[0], 10) / 360,
                    l = parseInt(r[1], 10) / 100,
                    n = parseInt(r[2], 10) / 100,
                    a = parseFloat(r[3]),
                    h = this.GQ(o, l, n, a),
                    this.yQ[e] = h) : this.startsWith(i, "hsl") ? (r = i.substr(4).split(","),
                    o = parseInt(r[0], 10) / 360,
                    l = parseInt(r[1], 10) / 100,
                    n = parseInt(r[2], 10) / 100,
                    h = this.GQ(o, l, n, t),
                    this.yQ[e] = h) : this.startsWith(i, "#") ? 7 === i.length ? (h = this.argbHex2Rgba("ff" + i.substr(1)),
                    this.yQ[e] = h) : 9 === i.length ? (h = this.argbHex2Rgba(i.substr(1)),
                    this.yQ[e] = h) : void 0 : this.startsWith(i, "rgba") ? (r = i.substr(5).split(","),
                    [parseInt(r[0], 10) / 255, parseInt(r[1], 10) / 255, parseInt(r[2], 10) / 255, a = parseFloat(r[3])]) : this.startsWith(i, "rgb") ? (r = i.substr(4).split(","),
                    [parseInt(r[0], 10) / 255, parseInt(r[1], 10) / 255, parseInt(r[2], 10) / 255, a = 1]) : void 0)) : null
                }
                ,
                i.prototype.zw = function(i) {
                    if (!i || !i.Dc) {
                        var t = new polyfill.fQ
                          , e = (i.Oc = t,
                        i.Dc = new polyfill.K_,
                        {
                            fillColor: this.color2RgbaArray(i.bgColor),
                            zIndex: 0
                        })
                          , o = i.Dc.Nx(i.MQ);
                        t.add(e, o);
                        for (var l = 0, n = i.polygons; l < n.length; l++) {
                            var h = n[l]
                              , r = h.style;
                            if (r && r.fillColor) {
                                r.fillColor = this.color2RgbaArray(r.fillColor);
                                var a = h.Rw;
                                if (1 < a.length) {
                                    for (var s = [], f = 0; f < a.length; f++)
                                        polyfill.kS.isClockwise(a[f]) ? s.push([f]) : s.length && s[s.length - 1].push(f);
                                    for (var u = 0; u < s.length; u++) {
                                        var d = s[u];
                                        if (1 < d.length) {
                                            for (var p = [], x = [], y = 0; y < d.length; y++) {
                                                var c = a[d[y]];
                                                0 < y && p.push(x.length / 2);
                                                for (var v = 0; v < c.length; v++) {
                                                    var g = c[v];
                                                    x.push(g[0], g[1])
                                                }
                                            }
                                            var w = i.Dc.Nx(x, p)
                                        } else {
                                            for (x = [],
                                            c = a[d[0]],
                                            v = 0; v < c.length; v++) {
                                                var b = c[v];
                                                x.push(b[0], b[1])
                                            }
                                            w = i.Dc.Nx(x)
                                        }
                                        t.add(r, w)
                                    }
                                } else {
                                    for (var R = a.length, x = [], m = 0; m < R; m++) {
                                        var k = a[m];
                                        if (0 < k.length)
                                            for (v = 0; v < k.length; v++)
                                                u = k[v],
                                                x.push(u[0], u[1])
                                    }
                                    h = i.Dc.Nx(x),
                                    t.add(r, h)
                                }
                            }
                        }
                        delete i.polygons
                    }
                }
                ,
                i.prototype.xw = function(i) {
                    if (!i || !i.$c) {
                        var t = []
                          , e = this.kQ
                          , o = (i.$c = new polyfill.J_,
                        new polyfill.fQ);
                        i.Uc = o;
                        for (var l = 0, n = i.Dh; l < n.length; l++) {
                            var h = n[l]
                              , r = h.Rw
                              , a = r.length
                              , s = 0
                              , f = 0;
                            h.style && h.style[0] && h.style[0].borderColor && (h.style[0].borderColor = this.color2RgbaArray(h.style[0].borderColor)),
                            h.style && h.style[0] && h.style[0].faceColor && (h.style[0].faceColor = this.color2RgbaArray(h.style[0].faceColor));
                            for (var d = (u = h.style || [])[0], u = u[1], p = 0; p < a; p++) {
                                var x = r[p];
                                if (0 < x.length) {
                                    for (var y = [], c = 0; c < x.length; c++) {
                                        var v = x[c];
                                        y.push(v[0], v[1])
                                    }
                                    var g = i.$c.hb(y, {
                                        X_: 0,
                                        lineJoin: "miter",
                                        lineCap: "round"
                                    });
                                    s += g.Iw,
                                    f += g.distance
                                }
                            }
                            if (0 < s && (o.add(h.style, s),
                            h.distance = f),
                            d && d.borderColor && (h.style[0].borderColor = this.color2RgbaArray(d.borderColor)),
                            d && d.faceColor && (h.style[0].faceColor = this.color2RgbaArray(d.faceColor)),
                            u && (h = u.name || "")) {
                                var d = u.Kr
                                  , w = u.Qr;
                                d && !e[d] && (e[d] = polyfill.Util.color2RgbaArray(d)),
                                w && !e[w] && (e[w] = polyfill.Util.color2RgbaArray(w)),
                                u.Kr = e[d],
                                u.Qr = e[w];
                                for (var b = (d = {
                                    style: u,
                                    path: [],
                                    name: h,
                                    distance: f
                                }).path, R = 0; R < a; R++)
                                    for (var m = r[R], c = 0; c < m.length; c++)
                                        v = m[c],
                                        b.push(v[0], v[1]);
                                t.push(d)
                            }
                        }
                        i.road = t,
                        delete i.Dh
                    }
                }
                ,
                i.prototype.FQ = function(i) {
                    var t, e = {};
                    for (t in i)
                        i.hasOwnProperty(t) && "fillBucket" !== t && "fillSegements" !== t && "lineBucket" !== t && "lineSegements" !== t && (e[t] = i[t]);
                    this.sQ[i.zo.key] = {
                        tile: e,
                        params: {
                            scale: this.parent.params.scale,
                            tag: "all"
                        }
                    }
                }
                ,
                i
            }(), _a$1, mapBoxSprite = "https://webapi.amap.com/style_icon/sprite_v8@2x.png", DefaultIconInfo = (_a$1 = {
                TW: {
                    img: polyfill.G8t.poiIcon[0],
                    width: 512,
                    height: 1024,
                    startX: 0,
                    startY: 0,
                    status: "loaded",
                    type: "icon",
                    ext: {
                        iconIndex: 0
                    }
                },
                RW: {
                    img: polyfill.G8t.poiIcon[1],
                    width: 512,
                    height: 1024,
                    startX: 0,
                    startY: 1024,
                    status: "loaded",
                    type: "icon",
                    ext: {
                        iconIndex: 1
                    }
                },
                bii: {
                    img: polyfill.G8t.poiIcon[2],
                    width: 512,
                    height: 1024,
                    startX: 0,
                    startY: 2048,
                    status: "loaded",
                    type: "icon",
                    ext: {
                        iconIndex: 2
                    }
                },
                ili: {
                    img: polyfill.G8t.poiIcon[3],
                    width: 512,
                    height: 1024,
                    startX: 0,
                    startY: 3072,
                    status: "loaded",
                    type: "icon",
                    ext: {
                        iconIndex: 3
                    }
                }
            },
            _a$1[mapBoxSprite] = {
                img: mapBoxSprite,
                width: 1024,
                height: 926,
                startX: 0,
                startY: 2048,
                status: "loaded",
                type: "icon",
                ext: {
                    iconIndex: 2
                }
            },
            _a$1), ImageManagerWorker = function(o) {
                function i(i) {
                    var t, e = o.call(this) || this;
                    return e.Fs = ((t = {})[DefaultIconInfo.TW.img] = DefaultIconInfo.TW,
                    t[DefaultIconInfo.RW.img] = DefaultIconInfo.RW,
                    t[DefaultIconInfo.bii.img] = DefaultIconInfo.bii,
                    t[DefaultIconInfo.ili.img] = DefaultIconInfo.ili,
                    t),
                    e.Cc = 16,
                    e.Uw = 3,
                    e.Hw = {},
                    e.Mc = {},
                    e
                }
                return polyfill.Ei(i, o),
                i.prototype.loadImage = function(i, t) {
                    var e = t.name
                      , o = t.type
                      , l = t.cb
                      , n = this.Fs[e = e || i];
                    n && n.status === polyfill.uc.LOADED ? l(n, t) : n && n.status === polyfill.uc.LOADING ? (this.Mc[e] || (this.Mc[e] = []),
                    this.Mc[e].push({
                        cb: l,
                        opts: t
                    })) : ("icon" === o && (DefaultIconInfo[i] ? t.iconIndex = DefaultIconInfo[i].ext.iconIndex : t.iconIndex = this.Uw,
                    this.Uw++),
                    this.Rc(i, t))
                }
                ,
                i.prototype.loadImages = function(i, t) {
                    var l = this
                      , e = t.cb
                      , n = t.type;
                    if (0 === Object.keys(i).filter(function(i) {
                        return !l.Fs[i]
                    }).length)
                        e();
                    else {
                        var h = []
                          , r = [];
                        if (i.length) {
                            for (var o = 0, a = i; o < a.length; o++)
                                !function(o) {
                                    var i = new Promise(function(e, i) {
                                        l.loadImage(o, {
                                            cb: function(i, t) {
                                                r.push(l.Fs[o]),
                                                e()
                                            },
                                            type: n
                                        })
                                    }
                                    );
                                    h.push(i)
                                }(a[o]);
                            Promise.all(h).then(function() {
                                e(r)
                            })["catch"](function() {
                                e(r)
                            })
                        } else
                            e(r)
                    }
                }
                ,
                i.prototype.Vw = function(i, t) {
                    var l = this
                      , n = t.cb
                      , h = i.filter(function(i) {
                        return !l.Fs[i]
                    });
                    if (0 === h.length)
                        n([]);
                    else {
                        var e = []
                          , r = [];
                        if (i.length) {
                            for (var o = 0, a = i; o < a.length; o++)
                                !function(o) {
                                    var i = new Promise(function(e, i) {
                                        l.loadImage(o, {
                                            cb: function(i, t) {
                                                r.push(l.Fs[o]),
                                                e()
                                            },
                                            type: "icon"
                                        })
                                    }
                                    );
                                    e.push(i)
                                }(a[o]);
                            Promise.all(e).then(function() {
                                var i = [];
                                if (0 < h.length) {
                                    for (var t = 0, e = h; t < e.length; t++) {
                                        var o = e[t];
                                        i.push({
                                            url: o,
                                            data: l.getImage(o)
                                        })
                                    }
                                    l.emit("iconImageLoaded", {
                                        data: i
                                    })
                                }
                                n(r)
                            })["catch"](function() {
                                n(r)
                            })
                        } else
                            n(r)
                    }
                }
                ,
                i.prototype.getImage = function(i) {
                    return this.Fs[i = void 0 === i ? "" : i]
                }
                ,
                i.prototype.destory = function() {
                    var i;
                    this.Fs = ((i = {})[DefaultIconInfo.TW.img] = DefaultIconInfo.TW,
                    i[DefaultIconInfo.RW.img] = DefaultIconInfo.RW,
                    i[DefaultIconInfo.bii.img] = DefaultIconInfo.bii,
                    i[DefaultIconInfo.ili.img] = DefaultIconInfo.ili,
                    i)
                }
                ,
                i.prototype.Rc = function(t, e) {
                    var o = this
                      , l = e.name
                      , i = e.ext
                      , n = void 0 === i ? {} : i
                      , h = void 0 === (i = e.type) ? "other" : i
                      , r = e.cb
                      , a = e.imageBitmap
                      , s = this.Fs;
                    s[l || t] = {
                        status: polyfill.uc.LOADING,
                        startX: 0,
                        startY: 1024 * (e.iconIndex || 0),
                        type: h,
                        height: 0,
                        width: 0
                    },
                    polyfill.Yw.send(t, {
                        Me: "arraybuffer",
                        qw: function(i) {
                            a ? (console.time("createImageBitmap"),
                            createImageBitmap(new Blob([new Uint8Array(i)])).then(function(i) {
                                console.timeEnd("createImageBitmap"),
                                i = new polyfill.WQ(t,i,{
                                    imageBitmap: !0
                                }),
                                o.qQ(l || t, i, r, e, h, n)
                            })) : (i = new polyfill.WQ(t,i),
                            o.qQ(l || t, i, r, e, h, n))
                        },
                        Aw: function(i) {
                            console.log(i),
                            s[i = l || t].status = polyfill.uc.ERROR,
                            r(s[i], e)
                        }
                    })
                }
                ,
                i.prototype.qQ = function(i, t, e, o, l, n) {
                    var h = this.Fs;
                    if ("success" !== t.status)
                        console.error("createObjectURL fail"),
                        h[i].status = polyfill.uc.ERROR,
                        e(h[i], o);
                    else if ("icon" === l ? (n.iconIndex = o.iconIndex,
                    h[i] = DefaultIconInfo[i] || {
                        ext: n,
                        type: l,
                        startX: 0,
                        startY: 1024 * (o.iconIndex || 0),
                        height: 1024,
                        width: 512,
                        status: polyfill.uc.LOADED
                    },
                    h[i].data = t) : h[i] = {
                        ext: n,
                        type: l,
                        startX: 0,
                        startY: 0,
                        height: 0,
                        width: 0,
                        data: t,
                        status: polyfill.uc.LOADED
                    },
                    e(h[i], o),
                    this.Mc[i]) {
                        for (var r = 0, a = this.Mc[i]; r < a.length; r++) {
                            var s = a[r];
                            s.cb(h[i], s.opts)
                        }
                        delete this.Mc[i]
                    }
                }
                ,
                i.prototype.Sc = function(i) {
                    var t, e = (e = (i = void 0 === i ? {} : i).img) && e.context ? (t = e.width || 0,
                    e.height || 0) : (t = i.width || 0,
                    i.height || 0);
                    return [t, e]
                }
                ,
                i
            }(polyfill.Event), Counter = function(e) {
                function i(i) {
                    var t = e.call(this) || this;
                    return t.OQ = i,
                    t.zQ = 0,
                    t
                }
                return polyfill.Ei(i, e),
                i.prototype.TQ = function() {
                    this.zQ += 1,
                    this.zQ === this.OQ && this.emit("count")
                }
                ,
                i.prototype.clear = function() {
                    this.zQ = 0
                }
                ,
                i
            }(polyfill.Event), _a$2, LabelFormatMap$1 = (_a$2 = {},
            _a$2[polyfill.NebulaLabelFormat.id] = polyfill.NebulaLabelFormat,
            _a$2[polyfill.MapboxLabelFormat.id] = polyfill.MapboxLabelFormat,
            _a$2.nebula = polyfill.NebulaLabelFormat,
            _a$2), LabelWorker = function(e) {
                function i(i) {
                    var t = e.call(this) || this;
                    return t.parent = i,
                    t.MW = {},
                    t.z_ = i.z_,
                    t.R_ = i.R_,
                    t
                }
                return polyfill.Ei(i, e),
                i.prototype.iW = function(l, a) {
                    var i, s = this, f = (void 0 === a && (a = {}),
                    this.MW.ZL = a.ZL || polyfill.zoomRange[1],
                    a.optimalZoom), u = [], d = (a.cb,
                    a.Cmt), p = a.Smt, x = a.key, y = this.parent.langForeign, c = this;
                    for (i in l)
                        !function(i) {
                            var n, t, e, o, h, r;
                            l.hasOwnProperty(i) && (o = (i = l[i]).tile,
                            t = (i = i.params).scale,
                            u.push(i = i.tag),
                            e = {
                                vn: c.parent.vn
                            },
                            t = (e = new LabelFormatMap$1[a.id](e)).Ns(o, {
                                ZL: c.MW.ZL,
                                zoom: o.zo.z,
                                scale: t,
                                lang: y,
                                VQ: c.parent.QZ,
                                Cmt: d,
                                Smt: p,
                                bmt: x,
                                languageCode: a.languageCode
                            }),
                            n = [[o, e, t, i]],
                            t = Object.keys(e.Fs),
                            i = Object.keys(e.Es),
                            e = [o],
                            o = Date.now(),
                            h = [],
                            (r = new Counter(2)).on("count", function() {
                                s.parent.jQ.XQ(new LoadDynamicsTask(s.parent.vn,f,s.R_,s.z_,h,a,function(i) {
                                    s.emit("dynamicTextVerticeLoadedByTile", {
                                        data: i.data,
                                        id: a.id
                                    })
                                }
                                ), undefined, !1),
                                s.parent.yY.setNeedUpdate(!0)
                            }, null, !0),
                            c.R_.vW(i, {
                                tiles: e,
                                optimalZoom: f,
                                tags: u,
                                stamp: o,
                                cb: function(i) {
                                    for (var t = 0, e = n; t < e.length; t++) {
                                        var o = e[t]
                                          , l = o[0];
                                        h.push({
                                            tile: l,
                                            gW: o[1],
                                            SW: o[2],
                                            tag: o[3]
                                        })
                                    }
                                    r.TQ()
                                }
                            }),
                            c.wW(t) ? r.TQ() : c.z_.Vw(t, {
                                type: "icon",
                                cb: function() {
                                    r.TQ()
                                }
                            }))
                        }(i)
                }
                ,
                i.prototype.hW = function(i, t, e) {
                    var o = this
                      , l = e.optimalZoom;
                    this.parent.jQ.XQ(new LoadDynamicsTask(this.parent.vn,l,this.R_,this.z_,i,e,function(i) {
                        o.emit("dynamicTextVerticeLoadedByTile", {
                            data: i.data,
                            id: e.id
                        })
                    }
                    ), undefined, !0),
                    this.parent.yY.setNeedUpdate(!0)
                }
                ,
                i.prototype.wW = function(i) {
                    void 0 === i && (i = []);
                    for (var t = polyfill.G8t.getIconUrls({
                        Cmt: this.parent.params.iconVersion,
                        Smt: this.parent.params.iconClass,
                        key: this.parent.key
                    }), e = 0, o = 0, l = i; o < l.length; o++) {
                        var n = l[o];
                        -1 !== t.indexOf(n) && e++
                    }
                    return e === i.length
                }
                ,
                i
            }(polyfill.Event), LoadDynamicsTask = function() {
                function i(i, t, e, o, l, n, h) {
                    this.vn = i,
                    this.ZL = t,
                    this.R_ = e,
                    this.z_ = o,
                    this.data = l,
                    this.params = n,
                    this.cb = h,
                    this.type = "LoadDynamicsTask",
                    this.offset = 0,
                    this.result = []
                }
                return i.prototype.play = function(i) {
                    for (var t = i, e = Date.now(); 0 < t && this.offset !== this.data.length; ) {
                        var o, l = [], n = this.data[this.offset], h = n.tile, r = n.SW, a = n.tag, s = Object.keys(r).length, f = {}, u = 0;
                        if (0 === s)
                            l.push({
                                data: h.zo
                            });
                        else {
                            for (var d in r)
                                r.hasOwnProperty(d) && (o = r[d],
                                o = new polyfill.eG({
                                    R_: this.R_,
                                    z_: this.z_
                                }).Ns(o, {
                                    ZL: this.ZL,
                                    zoom: h.zo.z,
                                    from: "inner",
                                    center: h.localCoord.center
                                }),
                                f[d] = new polyfill.La(h.zo,o),
                                ++u === s) && (d = this.hQ(h, this.ZL),
                                l.push({
                                    data: f,
                                    XE: d,
                                    tag: a
                                }));
                            this.offset++,
                            this.cb({
                                data: l
                            }),
                            t = i - (Date.now() - e)
                        }
                    }
                    return this.offset,
                    this.data.length,
                    this.result
                }
                ,
                Object.defineProperty(i.prototype, "status", {
                    get: function() {
                        return this.offset >= this.data.length ? polyfill.vY.finish : polyfill.vY.pause
                    },
                    eb: !1,
                    nb: !0
                }),
                i.prototype.hQ = function(i, t) {
                    if (i)
                        for (var e = this.SQ(i) || [], o = 0, l = e = new LabelFormatMap$1[i.type]({
                            vn: this.vn
                        }).DQ(e, {
                            zoom: t
                        }); o < l.length; o++) {
                            var n = l[o]
                              , h = n.CO;
                            n.EG || (n.EG = {});
                            for (var r = 0, a = h; r < a.length; r++) {
                                var s = a[r]
                                  , f = this.R_.mz(s);
                                n.EG[s] = f
                            }
                        }
                    return e
                }
                ,
                i.prototype.SQ = function(i) {
                    return i.data && i.data.roadName || i.road
                }
                ,
                i
            }(), InnerLabelsSourceWorker = function() {
                function i(i) {
                    this.parent = i,
                    this.Mf = i.R_,
                    this.ac = i.z_
                }
                return i.prototype.loadData = function(l, n) {
                    var h = this
                      , i = l.id === polyfill.n0.nebulaLabel ? polyfill.n0.nebula : l.id;
                    (i = this.parent.dQ(i)) && i.YE ? i.YE(function(i, t) {
                        t.GW;
                        var e = t.cb
                          , o = t.ZL
                          , t = t.optimalZoom;
                        polyfill.isEmpty(i) ? n && n({}) : h.parent.yw.iW(i, {
                            ZL: o,
                            optimalZoom: t,
                            map: polyfill.map,
                            id: l.id,
                            Cmt: h.parent.params.iconVersion,
                            Smt: h.parent.params.iconClass,
                            key: h.parent.key,
                            languageCode: h.parent.params.languageCode,
                            cb: function(i) {
                                n(i),
                                e && e()
                            }
                        })
                    }, l) : n && n({})
                }
                ,
                i
            }(), StaticSourceID, EnumTextureIndex, ImageStatus, noop = (function(i) {
                i.nebula = "nebula",
                i.nebulaLabel = "nebulaLabel"
            }(StaticSourceID = StaticSourceID || {}),
            function(i) {
                i[i.dynamic = 0] = "dynamic",
                i[i.icon = 1] = "icon"
            }(EnumTextureIndex = EnumTextureIndex || {}),
            function(i) {
                i.BLOB = "blob",
                i.TOLOAD = "toload",
                i.LOADING = "loading",
                i.LOADED = "loaded",
                i.UNLOADED = "unloaded",
                i.ERROR = "error",
                i.RELOADING = "reloading",
                i.UNCOMBINED = "uncombined",
                i.COMBINING = "combining",
                i.COMBINED = "combined"
            }(ImageStatus = ImageStatus || {}),
            function(i) {}
            ), XHR = {
                send: function(i, t) {
                    void 0 === t && (t = {});
                    var e = new XMLHttpRequest
                      , l = void 0 === (o = t.qw) ? noop : o
                      , n = void 0 === (o = t.Aw) ? noop : o
                      , o = t.Me
                      , h = t.method
                      , t = t.content;
                    return e.onreadystatechange = function() {
                        if (4 === e.readyState && 200 === e.status) {
                            var i = e.response;
                            try {
                                l(i)
                            } catch (t) {
                                n(t)
                            }
                        } else
                            404 === e.status && (e.abort(),
                            n(Error("404")))
                    }
                    ,
                    e.onerror = function(i) {
                        e.abort(),
                        n(i)
                    }
                    ,
                    e.open(h || "GET", i, !0),
                    e.responseType = o || "json",
                    e.send(t || undefined),
                    e
                }
            };
            function parserFunc(i) {
                var z = {
                    TS: function() {
                        this.PS = 0
                    }
                }
                  , Ui = (z.TS.prototype.create = function(i) {
                    this.OS && this.PS === i || (this.OS = []),
                    this.PS = i,
                    this.FS = 0,
                    this.BS = 0
                }
                ,
                z.TS.prototype.flush = function() {
                    var i = this.FS - this.BS;
                    if (0 !== i) {
                        for (; i--; )
                            this.ES.jS(this.OS[this.BS++]);
                        this.FS >= this.PS && (this.FS = 0),
                        this.BS = this.FS
                    }
                }
                ,
                z.TS.prototype.NS = function() {
                    this.flush(),
                    this.ES = null
                }
                ,
                z.TS.prototype.US = function(i) {
                    this.NS(),
                    this.ES = i
                }
                ,
                z.TS.prototype.init = function(i) {
                    i || (this.BS = 0,
                    this.FS = 0)
                }
                ,
                z.TS.prototype.WS = function(i, t) {
                    var e = this.FS - i - 1;
                    for (e < 0 && (e += this.PS); t--; )
                        e >= this.PS && (e = 0),
                        this.OS[this.FS++] = this.OS[e++],
                        this.FS >= this.PS && this.flush()
                }
                ,
                z.TS.prototype.GS = function(i) {
                    this.OS[this.FS++] = i,
                    this.FS >= this.PS && this.flush()
                }
                ,
                z.TS.prototype.HS = function(i) {
                    return (i = this.FS - i - 1) < 0 && (i += this.PS),
                    this.OS[i]
                }
                ,
                z.VS = function() {}
                ,
                z.VS.prototype.US = function(i) {
                    this.ES = i
                }
                ,
                z.VS.prototype.NS = function() {
                    this.ES = null
                }
                ,
                z.VS.prototype.init = function() {
                    var i = 5;
                    for (this.ZS = 0,
                    this.YS = -1; i--; )
                        this.ZS = this.ZS << 8 | this.ES.JS()
                }
                ,
                z.VS.prototype.XS = function(i) {
                    for (var t, e = 0, o = i; o--; )
                        this.YS >>>= 1,
                        t = this.ZS - this.YS >>> 31,
                        this.ZS -= this.YS & t - 1,
                        e = e << 1 | 1 - t,
                        0 == (4278190080 & this.YS) && (this.ZS = this.ZS << 8 | this.ES.JS(),
                        this.YS <<= 8);
                    return e
                }
                ,
                z.VS.prototype.qS = function(i, t) {
                    var e = i[t]
                      , o = (this.YS >>> 11) * e;
                    return (2147483648 ^ this.ZS) < (2147483648 ^ o) ? (this.YS = o,
                    i[t] += 2048 - e >>> 5,
                    0 == (4278190080 & this.YS) && (this.ZS = this.ZS << 8 | this.ES.JS(),
                    this.YS <<= 8),
                    0) : (this.YS -= o,
                    this.ZS -= o,
                    i[t] -= e >>> 5,
                    0 == (4278190080 & this.YS) && (this.ZS = this.ZS << 8 | this.ES.JS(),
                    this.YS <<= 8),
                    1)
                }
                ,
                z.QS = function(i, t) {
                    for (; t--; )
                        i[t] = 1024
                }
                ,
                z.KS = function(i) {
                    this.tR = [],
                    this.iR = i
                }
                ,
                z.KS.prototype.init = function() {
                    z.QS(this.tR, 1 << this.iR)
                }
                ,
                z.KS.prototype.decode = function(i) {
                    for (var t = 1, e = this.iR; e--; )
                        t = t << 1 | i.qS(this.tR, t);
                    return t - (1 << this.iR)
                }
                ,
                z.KS.prototype.eR = function(i) {
                    for (var t, e = 1, o = 0, l = 0; l < this.iR; ++l)
                        e = e << 1 | (t = i.qS(this.tR, e)),
                        o |= t << l;
                    return o
                }
                ,
                z.nR = function(i, t, e, o) {
                    for (var l, n = 1, h = 0, r = 0; r < o; ++r)
                        n = n << 1 | (l = e.qS(i, t + n)),
                        h |= l << r;
                    return h
                }
                ,
                z.oR = function() {
                    this.rR = [],
                    this.aR = [],
                    this.sR = [],
                    this.hR = new z.KS(8),
                    this.lR = 0
                }
                ,
                z.oR.prototype.create = function(i) {
                    for (; this.lR < i; ++this.lR)
                        this.aR[this.lR] = new z.KS(3),
                        this.sR[this.lR] = new z.KS(3)
                }
                ,
                z.oR.prototype.init = function() {
                    var i = this.lR;
                    for (z.QS(this.rR, 2); i--; )
                        this.aR[i].init(),
                        this.sR[i].init();
                    this.hR.init()
                }
                ,
                z.oR.prototype.decode = function(i, t) {
                    return 0 === i.qS(this.rR, 0) ? this.aR[t].decode(i) : 0 === i.qS(this.rR, 1) ? 8 + this.sR[t].decode(i) : 16 + this.hR.decode(i)
                }
                ,
                z.fR = function() {
                    this.uR = []
                }
                ,
                z.fR.prototype.init = function() {
                    z.QS(this.uR, 768)
                }
                ,
                z.fR.prototype.cR = function(i) {
                    for (var t = 1; (t = t << 1 | i.qS(this.uR, t)) < 256; )
                        ;
                    return 255 & t
                }
                ,
                z.fR.prototype.dR = function(i, t) {
                    var e, o, l = 1;
                    do {
                        if (e = t >> 7 & 1,
                        t <<= 1,
                        l = l << 1 | (o = i.qS(this.uR, (1 + e << 8) + l)),
                        e !== o) {
                            for (; l < 256; )
                                l = l << 1 | i.qS(this.uR, l);
                            break
                        }
                    } while (l < 256);
                    return 255 & l
                }
                ,
                z.pR = function() {}
                ,
                z.pR.prototype.create = function(i, t) {
                    var e;
                    if (!this.vR || this.mR !== t || this.yR !== i)
                        for (this.yR = i,
                        this.xR = (1 << i) - 1,
                        this.mR = t,
                        this.vR = [],
                        e = 1 << this.mR + this.yR; e--; )
                            this.vR[e] = new z.fR
                }
                ,
                z.pR.prototype.init = function() {
                    for (var i = 1 << this.mR + this.yR; i--; )
                        this.vR[i].init()
                }
                ,
                z.pR.prototype.bR = function(i, t) {
                    return this.vR[((i & this.xR) << this.mR) + ((255 & t) >>> 8 - this.mR)]
                }
                ,
                z.gR = function() {
                    this.wR = new z.TS,
                    this._R = new z.VS,
                    this.kR = [],
                    this.MR = [],
                    this.SR = [],
                    this.RR = [],
                    this.zR = [],
                    this.CR = [],
                    this.AR = [],
                    this.IR = [],
                    this.$R = new z.KS(4),
                    this.LR = new z.oR,
                    this.DR = new z.oR,
                    this.TR = new z.pR,
                    this.PR = -1,
                    this.OR = -1,
                    this.AR[0] = new z.KS(6),
                    this.AR[1] = new z.KS(6),
                    this.AR[2] = new z.KS(6),
                    this.AR[3] = new z.KS(6)
                }
                ,
                z.gR.prototype.FR = function(i) {
                    return !(i < 0 || (this.PR !== i && (this.PR = i,
                    this.OR = Math.max(this.PR, 1),
                    this.wR.create(Math.max(this.OR, 4096))),
                    0))
                }
                ,
                z.gR.prototype.BR = function(i, t, e) {
                    var o = 1 << e;
                    return !(8 < i || 4 < t || 4 < e || (this.TR.create(t, i),
                    this.LR.create(o),
                    this.DR.create(o),
                    this.jR = o - 1,
                    0))
                }
                ,
                z.gR.prototype.init = function() {
                    var i = 4;
                    for (this.wR.init(!1),
                    z.QS(this.kR, 192),
                    z.QS(this.CR, 192),
                    z.QS(this.MR, 12),
                    z.QS(this.SR, 12),
                    z.QS(this.RR, 12),
                    z.QS(this.zR, 12),
                    z.QS(this.IR, 114),
                    this.TR.init(); i--; )
                        this.AR[i].init();
                    this.LR.init(),
                    this.DR.init(),
                    this.$R.init(),
                    this._R.init()
                }
                ,
                z.gR.prototype.decode = function(i, t, e) {
                    var o, l, n, h, r = 0, a = 0, s = 0, f = 0, u = 0, d = 0, p = 0;
                    for (this._R.US(i),
                    this.wR.US(t),
                    this.init(); e < 0 || d < e; )
                        if (h = d & this.jR,
                        0 === this._R.qS(this.kR, (r << 4) + h))
                            n = this.TR.bR(d++, p),
                            p = 7 <= r ? n.dR(this._R, this.wR.HS(a)) : n.cR(this._R),
                            this.wR.GS(p),
                            r = r < 4 ? 0 : r - (r < 10 ? 3 : 6);
                        else {
                            if (1 === this._R.qS(this.MR, r))
                                (o = 0) === this._R.qS(this.SR, r) ? 0 === this._R.qS(this.CR, (r << 4) + h) && (r = r < 7 ? 9 : 11,
                                o = 1) : (0 === this._R.qS(this.RR, r) ? l = s : (0 === this._R.qS(this.zR, r) ? l = f : (l = u,
                                u = f),
                                f = s),
                                s = a,
                                a = l),
                                0 === o && (o = 2 + this.DR.decode(this._R, h),
                                r = r < 7 ? 8 : 11);
                            else if (u = f,
                            f = s,
                            s = a,
                            o = 2 + this.LR.decode(this._R, h),
                            r = r < 7 ? 7 : 10,
                            4 <= (n = this.AR[o <= 5 ? o - 2 : 3].decode(this._R))) {
                                if (a = (2 | 1 & n) << (h = (n >> 1) - 1),
                                n < 14)
                                    a += z.nR(this.IR, a - n - 1, this._R, h);
                                else if ((a = (a += this._R.XS(h - 4) << 4) + this.$R.eR(this._R)) < 0) {
                                    if (-1 === a)
                                        break;
                                    return !1
                                }
                            } else
                                a = n;
                            if (d <= a || a >= this.OR)
                                return !1;
                            this.wR.WS(a, o),
                            d += o,
                            p = this.wR.HS(0)
                        }
                    return this.wR.flush(),
                    this.wR.NS(),
                    this._R.NS(),
                    !0
                }
                ,
                z.gR.prototype.ER = function(i) {
                    var t;
                    return !(i.size < 5 || (t = i.JS(),
                    !this.BR(t % 9, (t = ~~(t / 9)) % 5, ~~(t / 5)))) && (t = i.JS(),
                    t = (t = (t |= i.JS() << 8) | i.JS() << 16) + 16777216 * i.JS(),
                    this.FR(t))
                }
                ,
                z.NR = function(i, t) {
                    var e, o = new z.gR;
                    if (!o.ER(i))
                        throw new Error("Incorrect stream properties");
                    if (e = i.JS(),
                    e = ((e |= i.JS() << 8) | i.JS() << 16) + 16777216 * i.JS(),
                    i.JS(),
                    i.JS(),
                    i.JS(),
                    i.JS(),
                    o.decode(i, t, e))
                        return !0;
                    throw new Error("Error in data stream")
                }
                ,
                1e-9);
                function Vi(i, t, e) {
                    for (var o, a, l = i.subarray(t, e), n = 0, h = "", r = 0, n = 0; n < l.length; )
                        (a = l[n]) >>> 7 == 0 ? ("0" !== (o = String.fromCharCode(l[n])).charCodeAt(0).toString(16) && (h += o),
                        n += 1) : 252 == (252 & a) ? (r = (r = (r = (r = (3 & l[n]) << 30) | (63 & l[n + 1]) << 24 | (63 & l[n + 2]) << 18) | (63 & l[n + 3]) << 12) | (63 & l[n + 4]) << 6 | 63 & l[n + 5],
                        h += String.fromCharCode(r),
                        n += 6) : 248 == (248 & a) ? (r = (7 & l[n]) << 24,
                        r = (r = (r |= (63 & l[n + 1]) << 18) | (63 & l[n + 2]) << 12) | (63 & l[n + 3]) << 6 | 63 & l[n + 4],
                        h += String.fromCharCode(r),
                        n += 5) : 240 == (240 & a) ? (r = (15 & l[n]) << 18,
                        r = (r |= (63 & l[n + 1]) << 12) | (63 & l[n + 2]) << 6 | 63 & l[n + 3],
                        h += String.fromCharCode(r),
                        n += 4) : 224 == (224 & a) ? (r = (r = (31 & l[n]) << 12) | (63 & l[n + 1]) << 6 | 63 & l[n + 2],
                        h += String.fromCharCode(r),
                        n += 3) : 192 == (192 & a) ? (r = (63 & l[n]) << 6,
                        r |= 63 & l[n + 1],
                        h += String.fromCharCode(r),
                        n += 2) : ("0" !== (o = String.fromCharCode(l[n])).charCodeAt(0).toString(16) && (h += o),
                        n += 1);
                    return h.trim()
                }
                var o = new RegExp("^[+\\-]?[0-1]*[.]?[0-1]*$","gi");
                function Ni(i, t) {
                    i = i.toString(),
                    t = t.toString(),
                    i = new Array(32 - i.length + 1).join("0") + i,
                    t = new Array(32 - t.length + 1).join("0") + t;
                    var e = o;
                    return e.lastIndex = 0,
                    (t = (t + i).toString().match(e)) ? (i = -1 === t[i = 0].indexOf(".") ? parseInt(t, 2) : i).toString(36).toUpperCase() : "error"
                }
                i.getUnifyJson = function(i) {
                    var t = [];
                    if (i instanceof ArrayBuffer) {
                        var e = new DataView(i)
                          , o = 0
                          , l = e.getInt16(o += 4, !1);
                        o += 2;
                        try {
                            for (; 0 < l; ) {
                                o += 4;
                                for (var n = e.getUint8(o), h = (o += 1,
                                new ArrayBuffer(n)), r = new Uint8Array(h), a = 0; a < n; a++)
                                    r[a] = e.getUint8(o),
                                    o += 1;
                                var s = Vi(r, 0, n)
                                  , f = (o += 2,
                                e.getInt8(o))
                                  , u = (o += 1,
                                0 !== f && ((M = {}).status = f,
                                M.building = {},
                                M.floor = {},
                                M.id = s,
                                t.push(M)),
                                e.getInt32(o, !1))
                                  , d = (o += 4,
                                e.getInt32(o, !0))
                                  , p = (o += 4,
                                u - d);
                                if (0 !== d) {
                                    for (var x = 2078870821, y = 8 * Math.ceil(d / 8), c = d % 8, v = new ArrayBuffer(y), g = new Int32Array(v), w = 0; 8 <= d; ) {
                                        var b = e.getInt32(o, !0)
                                          , R = e.getInt32(o + 4, !0)
                                          , m = b ^ x
                                          , k = 292664 ^ R;
                                        g[w] = m,
                                        g[w + 1] = k,
                                        w += 2,
                                        o += 8,
                                        d -= 8
                                    }
                                    0 !== d && (b = e.getInt32(o, !0),
                                    R = e.getInt32(o + 4, !0),
                                    m = b ^ x,
                                    k = 292664 ^ R,
                                    g[w] = m,
                                    g[w + 1] = k,
                                    o += d);
                                    for (var S = new Uint8Array(v), I = S.length, _ = I - 8 + c, C = new Uint8Array(_), a = 0; a < _; a++)
                                        C[a] = S[a];
                                    for (a = 0; a < c; a++)
                                        C[_ - c + a] = S[I - 1 - a];
                                    for (var M, D = {
                                        data: [],
                                        offset: 0,
                                        jS: function(i) {
                                            this.data[this.offset++] = i
                                        }
                                    }, A = (z.NR({
                                        data: C,
                                        offset: 0,
                                        JS: function() {
                                            return this.data[this.offset++]
                                        }
                                    }, D),
                                    D.data), _ = A.length, T = new ArrayBuffer(_), F = new Int8Array(T), a = 0; a < _; a++)
                                        F[a] = A[a];
                                    (M = function(i) {
                                        for (var t = {}, e = {}, o = new Uint8Array(i), l = new DataView(i), n = 0, O = l.getInt32(n = n + 4 + 4, !0), i = l.getInt32(n = n + 4 + 4, !0), i = Ni(i = l.getUint32(n = n + (4 + i) + 4, !0).toString(2), l.getUint32(n + 4, !0).toString(2)), h = Vi(o, n += 8, n + 64), r = Vi(o, n += 64, n + 64), a = l.getInt8(n += 64), E = Vi(o, n += 1, n + 8), P = l.getInt16(n += 8, !0), B = l.getInt16(n + 2, !0), s = l.getFloat32(n += 4, !0), f = l.getFloat32(n + 4, !0), j = l.getFloat32(n += 8, !0), U = l.getFloat32(n + 4, !0), V = l.getFloat32(n += 8, !0), N = l.getFloat32(n + 4, !0), u = l.getInt32(n += 8, !0), d = l.getInt32(n += 4, !0), p = l.getInt32(n += 4, !0), x = (n += 4,
                                        []), y = 0; y < u; y++)
                                            x.push(l.getInt32(n, !0)),
                                            n += 4;
                                        for (var c = [], y = 0; y < p; y++)
                                            c.push(l.getInt32(n, !0)),
                                            n += 4;
                                        for (var v = [], y = 0; y < u; y++) {
                                            var J = Vi(o, n, n + 48);
                                            v.push(J),
                                            n += 48
                                        }
                                        for (var g = [], y = 0; y < u; y++) {
                                            var K = Vi(o, n, n + 8);
                                            g.push(K),
                                            n += 8
                                        }
                                        for (var w = [], y = 0; y < d; y++) {
                                            var b = l.getInt32(n, !0) * Ui + f
                                              , R = l.getInt32(n + 4, !0) * Ui + s;
                                            w.push([b, R]),
                                            n += 8
                                        }
                                        i = {
                                            type: "Feature",
                                            geometry: {
                                                type: "Polygon",
                                                coordinates: [w]
                                            },
                                            properties: {
                                                pid: i,
                                                name_cn: h,
                                                name_en: r,
                                                default_floor: a,
                                                buildingtype: E,
                                                building_poi_style: [P, B],
                                                centerPoint: [f, s],
                                                left_bottom_Point: [j, U],
                                                width: V,
                                                height: N,
                                                numberofFloor: u,
                                                numberofGeoPoints: d,
                                                park_floor_count: p,
                                                floor_indexs: x,
                                                park_floors: c,
                                                floor_names: v,
                                                floor_nonas: g
                                            }
                                        };
                                        for (var m = 0; m < O; m++) {
                                            for (var H = Vi(o, n, n + 8), k = (n += 8,
                                            l.getInt8(n)), G = (n += 1,
                                            e[k] = {
                                                floor: {},
                                                shops: [],
                                                pubs: [],
                                                cons: []
                                            },
                                            l.getInt16(n, !0)), X = l.getInt16(n + 2, !0), $ = (n += 4,
                                            l.getInt16(n, !0)), Y = l.getInt16(n + 2, !0), Z = (n += 4,
                                            l.getInt16(n, !0)), q = l.getInt16(n + 2, !0), S = (n += 4,
                                            l.getInt32(n, !0)), I = (n += 4,
                                            l.getInt32(n, !0)), _ = (n += 4,
                                            l.getInt32(n, !0)), C = (n += 4,
                                            l.getInt32(n, !0)), M = (n += 4,
                                            []), D = 0; D < C; D++) {
                                                for (var Q = l.getInt32(n, !0), A = (n += 4,
                                                []), T = 0; T < Q; T++)
                                                    b = l.getInt32(n, !0) * Ui + f,
                                                    R = l.getInt32(n + 4, !0) * Ui + s,
                                                    A.push([b, R]),
                                                    n += 8;
                                                M.push(A)
                                            }
                                            for (var F = "Polygon", W = M[0], F = (1 < C && (F = "MultiPolygon",
                                            W = M),
                                            {
                                                type: "Feature",
                                                geometry: {
                                                    type: F,
                                                    coordinates: [W]
                                                },
                                                properties: {
                                                    namecode: H,
                                                    index: k,
                                                    floor_region_type: [G, X],
                                                    unhighlighted_floor_line_style: [$, Y],
                                                    highlighted_floor_line_style: [Z, q],
                                                    numberofShopCount: S,
                                                    numberofPubCount: I,
                                                    numberofConCount: _,
                                                    floor_area_count: C
                                                }
                                            }), ii = (e[k].floor = F,
                                            []), ti = 0; ti < S; ti++) {
                                                var ei = Vi(o, n, n + 128);
                                                n += 128;
                                                for (var oi = Ni(l.getUint32(n, !0).toString(2), l.getUint32(n + 4, !0).toString(2)), li = Vi(o, n += 8, n + 24), ni = Vi(o, n += 24, n + 12), hi = (n += 12,
                                                l.getInt32(n, !0)), ri = (n += 4,
                                                l.getFloat32(n, !0)), ai = (n += 4,
                                                l.getInt8(n)), si = (n += 1,
                                                l.getInt16(n, !0)), fi = l.getInt16(n + 2, !0), ui = (n += 4,
                                                l.getInt16(n, !0)), di = l.getInt16(n + 2, !0), pi = (n += 4,
                                                l.getInt32(n, !0) * Ui + f), xi = l.getInt32(n + 4, !0) * Ui + s, yi = (n += 8,
                                                l.getInt32(n, !0)), ci = (n += 4,
                                                []), D = 0; D < yi; D++)
                                                    b = l.getInt32(n, !0) * Ui + f,
                                                    R = l.getInt32(n + 4, !0) * Ui + s,
                                                    ci.push([b, R]),
                                                    n += 8;
                                                ii.push({
                                                    type: "Feature",
                                                    geometry: {
                                                        type: "Polygon",
                                                        coordinates: [ci]
                                                    },
                                                    properties: {
                                                        name: ei,
                                                        pid: oi,
                                                        cpid: li,
                                                        logo: ni,
                                                        area: hi,
                                                        rank: ri,
                                                        height: ai,
                                                        poitype: [si, fi],
                                                        regiontype: [ui, di],
                                                        font_anthor_point: [pi, xi],
                                                        shop_point_number: yi
                                                    }
                                                })
                                            }
                                            e[k].shops = ii;
                                            for (var vi = [], gi = 0; gi < I; gi++) {
                                                var wi = Vi(o, n, n + 24);
                                                n += 24;
                                                var bi = Ni(l.getUint32(n, !0).toString(2), l.getUint32(n + 4, !0).toString(2))
                                                  , Ri = Vi(o, n += 8, n + 48)
                                                  , mi = (n += 48,
                                                l.getFloat32(n, !0))
                                                  , ki = (n += 4,
                                                l.getInt16(n, !0))
                                                  , Si = l.getInt16(n + 2, !0)
                                                  , b = (n += 4,
                                                l.getInt32(n, !0) * Ui + f)
                                                  , R = l.getInt32(n + 4, !0) * Ui + s;
                                                n += 8,
                                                vi.push({
                                                    type: "Feature",
                                                    geometry: {
                                                        type: "Point",
                                                        coordinates: [b, R]
                                                    },
                                                    properties: {
                                                        cpid: wi,
                                                        pid: bi,
                                                        name: Ri,
                                                        rank: mi,
                                                        poitype: [ki, Si]
                                                    }
                                                })
                                            }
                                            e[k].pubs = vi;
                                            for (var Ii = [], _i = 0; _i < _; _i++) {
                                                var Ci = Vi(o, n, n + 24);
                                                n += 24;
                                                var Mi = Ni(l.getUint32(n, !0).toString(2), l.getUint32(n + 4, !0).toString(2))
                                                  , Di = Vi(o, n += 8, n + 48)
                                                  , Ai = (n += 48,
                                                l.getFloat32(n, !0))
                                                  , Ti = (n += 4,
                                                l.getInt16(n, !0))
                                                  , Fi = l.getInt16(n + 2, !0)
                                                  , b = (n += 4,
                                                l.getInt32(n, !0) * Ui + f)
                                                  , R = l.getInt32(n + 4, !0) * Ui + s;
                                                n += 8,
                                                Ii.push({
                                                    type: "Feature",
                                                    geometry: {
                                                        type: "Point",
                                                        coordinates: [b, R]
                                                    },
                                                    properties: {
                                                        cpid: Ci,
                                                        pid: Mi,
                                                        name: Di,
                                                        rank: Ai,
                                                        poitype: [Ti, Fi]
                                                    }
                                                })
                                            }
                                            e[k].cons = Ii
                                        }
                                        for (var h = l.getInt32(n += 4, !0), Wi = l.getInt32(n += 4 + h, !0), zi = (n += 4,
                                        []), y = 0; y < Wi; y++)
                                            b = l.getInt32(n, !0) * Ui + f,
                                            R = l.getInt32(n + 4, !0) * Ui + s,
                                            zi.push([b, R]),
                                            n += 8;
                                        i.properties.outside_outline = zi;
                                        var z, L = {};
                                        for (z in e)
                                            if (e.hasOwnProperty(z)) {
                                                for (L.floor = e[z].floor,
                                                T = 0; T < e[z].shops.length; T++) {
                                                    var Li = l.getInt16(n, !0)
                                                      , Oi = (n += 2,
                                                    l.getInt16(n, !0));
                                                    n += 2,
                                                    e[z].shops[T].properties.zoom_min = Li,
                                                    e[z].shops[T].properties.zoom_max = Oi
                                                }
                                                for (L.shops = e[z].shops,
                                                T = 0; T < e[z].pubs.length; T++) {
                                                    var Ei = l.getInt16(n, !0)
                                                      , Pi = (n += 2,
                                                    l.getInt16(n, !0));
                                                    n += 2,
                                                    e[z].pubs[T].properties.zoom_min = Ei,
                                                    e[z].pubs[T].properties.zoom_max = Pi
                                                }
                                                for (L.pubs = e[z].pubs,
                                                T = 0; T < e[z].cons.length; T++) {
                                                    var Bi = l.getInt16(n, !0)
                                                      , ji = (n += 2,
                                                    l.getInt16(n, !0));
                                                    n += 2,
                                                    e[z].cons[T].properties.zoom_min = Bi,
                                                    e[z].cons[T].properties.zoom_max = ji
                                                }
                                                L.cons = e[z].cons,
                                                t.floor = L
                                            }
                                        return r = l.getInt32(n += 4, !0),
                                        a = l.getInt8(n += 4 + r),
                                        n += 1,
                                        i.properties.UR = a,
                                        t.building = i,
                                        t
                                    }(T)).status = f,
                                    M.id = s,
                                    t.push(M)
                                }
                                o += p,
                                --l
                            }
                        } catch (W) {}
                    } else
                        t.push(M = {
                            status: 3,
                            building: {},
                            floor: {},
                            id: ""
                        });
                    return t
                }
            }
            var obj = {
                WR: parserFunc
            }, IndoorMapBinDataParser = (parserFunc(obj),
            obj), OverlayWorker = function() {
                function i(i) {
                    this.parent = i
                }
                return i.prototype.setPathWebgl = function(i, t) {
                    try {
                        for (var e = new polyfill.K_, o = new polyfill.J_, l = new polyfill.oE, n = new polyfill.oE, h = i.data, r = this.EW(h[0][0][0]), a = 0, s = h; a < s.length; a++) {
                            for (var f = s[a], u = r.center, d = [], p = [], x = f[0], y = [], c = [], v = [], g = 0, w = x; g < w.length; g++) {
                                var b = w[g]
                                  , R = polyfill.ProjectionManager.getProjection("EPSG:3857").project(b[0], b[1]);
                                d.push(R[0] - u[0], R[1] - u[1]),
                                p.push(b)
                            }
                            for (var m = 1, k = f.length; m < k; m++) {
                                for (var S = f[m], I = [], _ = [], C = 0, M = S; C < M.length; C++)
                                    b = M[C],
                                    polyfill.Bs(b) ? (I.push(b.pos[0] - u[0], b.pos[1] - u[1]),
                                    _.push(b.toJSON())) : (R = polyfill.ProjectionManager.getProjection("EPSG:3857").project(b[0], b[1]),
                                    I.push(R[0] - u[0], R[1] - u[1]),
                                    _.push(b));
                                y.push(I),
                                c.push(_)
                            }
                            for (var D = [], m = 0, k = d.length; m < k; m += 2)
                                D.push(polyfill.xd(d[m], d[m + 1]));
                            polyfill.equals(D[0], D[D.length - 1]) || D.push(polyfill.Ex(D[0]));
                            for (var A = d.length, m = 0; m < y.length; m++)
                                v.push(A / 2),
                                A += y[m].length,
                                polyfill.Util.Ig(d, y[m]);
                            for (var T = e.Nx(d, v), F = (l.add(T),
                            o.Nx(D, {
                                lineJoin: "miter"
                            }).Iw), m = 0; m < y.length; m++) {
                                for (var W = [], z = 0, k = (I = y[m]).length; z < k; z += 2)
                                    W.push(polyfill.xd(I[z], I[z + 1]));
                                W.push(polyfill.xd(I[0], I[1])),
                                F += o.Nx(W, {
                                    lineJoin: "miter"
                                }).Iw
                            }
                            n.add(F)
                        }
                        t(null, {
                            $c: o,
                            Dc: e,
                            Sx: r,
                            Oc: l,
                            Uc: n
                        })
                    } catch (L) {
                        t(L.message)
                    }
                }
                ,
                i.prototype.AW = function(i, t) {
                    try {
                        var e = {}
                          , o = IndoorMapBinDataParser.getUnifyJson(i);
                        if (!o)
                            return !1;
                        for (var l, n, h, r, a, s, f, u = 0; u < o.length; u++)
                            0 === o[u].status && (n = (l = o[u]).floor,
                            h = l.building,
                            r = l.status,
                            a = l.id,
                            s = n.floor.properties.index,
                            e[a] || (e[a] = {}),
                            e[a].building = h,
                            e[a].data || (e[a].data = {}),
                            f = {
                                floor: n,
                                status: r,
                                id: a,
                                building: h
                            },
                            e[a].data[s] = f);
                        t(null, e)
                    } catch (d) {
                        t(d.message, null)
                    }
                }
                ,
                i.prototype.EW = function(i) {
                    if (i)
                        return i = polyfill.Bs(i) ? polyfill.ProjectionManager.getProjection("EPSG:3857").project(i.KL, i.kT) : polyfill.ProjectionManager.getProjection("EPSG:3857").project(i[0], i[1]),
                        polyfill.lcs.getLocalByCoord(i)
                }
                ,
                i
            }(), wasm, heap = new Array(32).fill(undefined);
            function getObject(i) {
                return heap[i]
            }
            heap.push(undefined, null, !0, !1);
            var heap_next = heap.length;
            function dropObject(i) {
                i < 36 || (heap[i] = heap_next,
                heap_next = i)
            }
            function takeObject(i) {
                getObject(i),
                dropObject(i)
            }
            var cachedTextDecoder = self.TextDecoder ? new TextDecoder("utf-8",{
                ignoreBOM: !0,
                fatal: !0
            }) : {}
              , cachegetUint8Memory0 = (cachedTextDecoder.decode && cachedTextDecoder.decode(),
            null);
            function getUint8Memory0() {
                return cachegetUint8Memory0 = null !== cachegetUint8Memory0 && cachegetUint8Memory0.buffer === wasm.memory.buffer ? cachegetUint8Memory0 : new Uint8Array(wasm.memory.buffer)
            }
            function getStringFromWasm0(i, t) {
                return cachedTextDecoder.decode(getUint8Memory0().subarray(i, i + t))
            }
            var WASM_VECTOR_LEN = 0
              , cachedTextEncoder = self.TextEncoder ? new TextEncoder : {}
              , encodeString = "function" == typeof cachedTextEncoder.encodeInto ? function(i, t) {
                return cachedTextEncoder.encodeInto(i, t)
            }
            : function(i, t) {
                var e = cachedTextEncoder.encode(i);
                return t.set(e),
                {
                    read: i.length,
                    jW: e.length
                }
            }
            ;
            function passStringToWasm0(i, t, e) {
                var o;
                if (e === undefined)
                    return o = t((l = cachedTextEncoder.encode(i)).length),
                    getUint8Memory0().subarray(o, o + l.length).set(l),
                    WASM_VECTOR_LEN = l.length,
                    o;
                for (var l, n = i.length, h = t(n), r = getUint8Memory0(), a = 0; a < n; a++) {
                    var s = i.charCodeAt(a);
                    if (127 < s)
                        break;
                    r[h + a] = s
                }
                return a !== n && (h = e(h, n, n = a + 3 * (i = 0 !== a ? i.slice(a) : i).length),
                l = getUint8Memory0().subarray(h + a, h + n),
                a += encodeString(i, l).jW),
                WASM_VECTOR_LEN = a,
                h
            }
            var cachegetInt32Memory0 = null;
            function getInt32Memory0() {
                return cachegetInt32Memory0 = null !== cachegetInt32Memory0 && cachegetInt32Memory0.buffer === wasm.memory.buffer ? cachegetInt32Memory0 : new Int32Array(wasm.memory.buffer)
            }
            function addHeapObject(i) {
                heap_next === heap.length && heap.push(heap.length + 1);
                var t = heap_next;
                return heap_next = heap[t],
                heap[t] = i,
                t
            }
            var RSAPublicKeyPair = function() {
                function e() {
                    var i = wasm.rsapublickeypair_new();
                    return e.XW(i)
                }
                return e.XW = function(i) {
                    var t = Object.create(e.prototype);
                    return t.UW = i,
                    t
                }
                ,
                e.prototype.VW = function() {
                    var i = this.UW;
                    this.UW = 0,
                    wasm.__wbg_rsapublickeypair_free(i)
                }
                ,
                e.prototype.init = function() {
                    wasm.rsapublickeypair_init(this.UW)
                }
                ,
                e.prototype.encode = function(i) {
                    try {
                        var t = passStringToWasm0(i, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc)
                          , e = WASM_VECTOR_LEN;
                        return wasm.rsapublickeypair_encode(8, this.UW, t, e),
                        getStringFromWasm0(o = getInt32Memory0()[2], l = getInt32Memory0()[3])
                    } finally {
                        var o = getInt32Memory0()[2]
                          , l = getInt32Memory0()[3];
                        wasm.__wbindgen_free(o, l)
                    }
                }
                ,
                e
            }();
            function loadSync(i, t) {
                var e = new WebAssembly.Module(i);
                return {
                    module: i,
                    instance: new WebAssembly.Instance(e,t)
                }
            }
            function initSync(i) {
                var t = {
                    wbg: {}
                };
                t.wbg.__wbg_new_59cb74e423758ede = function() {
                    return addHeapObject(new Error)
                }
                ,
                t.wbg.__wbg_stack_558ba5917b466edd = function(i, t) {
                    var t = passStringToWasm0(getObject(t).stack, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc)
                      , e = WASM_VECTOR_LEN;
                    getInt32Memory0()[i / 4 + 1] = e,
                    getInt32Memory0()[i / 4 + 0] = t
                }
                ,
                t.wbg.__wbg_error_4bb6c2a97407129a = function(i, t) {
                    try {
                        console.error(getStringFromWasm0(i, t))
                    } finally {
                        wasm.__wbindgen_free(i, t)
                    }
                }
                ,
                t.wbg.__wbindgen_object_drop_ref = function(i) {
                    takeObject(i)
                }
                ,
                t.wbg.__wbindgen_throw = function(i, t) {
                    throw new Error(getStringFromWasm0(i, t))
                }
                ,
                i = loadSync(i, t).instance,
                wasm = i.exports
            }
            var RSAWorker = function() {
                function i(i, t) {
                    this.parent = i
                }
                return i.prototype.transform = function(i) {
                    if (this.instance)
                        return this.instance.encode(i)
                }
                ,
                i.prototype.dE = function(i) {
                    initSync(base64ToBuffer(data)),
                    this.instance = new RSAPublicKeyPair,
                    this.instance.init(),
                    i && i(null)
                }
                ,
                i
            }(), env;
            function base64ToBuffer(i) {
                for (var t = atob(i), e = new Uint8Array(t.length), o = 0, l = t.length; o < l; o++)
                    e[o] = t.charCodeAt(o);
                return e.buffer
            }
            var env = polyfill.Support.DW ? {
                movingDraw: sharedChunk.movingDraw,
                db: sharedChunk.db,
                nebulaVersion: sharedChunk.nebulaVersion,
                host: sharedChunk.host
            } : {
                movingDraw: window.movingDraw
            }
              , AMapWorker = function(o) {
                function i(i, t, e) {
                    var r = o.call(this) || this
                      , a = (r.key = t,
                    r.GW = e,
                    r.lQ = {},
                    r.Zw = !1,
                    r._id = "-1",
                    r.protocol = "https",
                    r.Yw = XHR,
                    r.jQ = new polyfill.MY,
                    r.QZ = "",
                    r.$w = [],
                    r.Uh = new polyfill.Bh(i,r),
                    r.self = i,
                    r.z_ = new ImageManagerWorker);
                    return i.onmessage = function(i) {
                        var t = i.data;
                        if (t && t.iconClass && a.Fs)
                            for (var e = 0, o = Object.keys(a.Fs); e < o.length; e++) {
                                var l = o[e]
                                  , n = a.Fs[l]
                                  , h = polyfill.G8t.getIconUrls(n.img, {
                                    Cmt: t.iconVersion,
                                    Smt: t.iconClass,
                                    key: r.key
                                });
                                a.Fs[h] = polyfill.Ln(polyfill.Ln({}, n), {
                                    img: n.img
                                }),
                                delete a.Fs[l]
                            }
                    }
                    ,
                    r.R_ = new polyfill.jb({
                        parent: r,
                        z_: a
                    }),
                    r.IW = new polyfill.xW(r,XHR),
                    r.Ww = new NebulaSourceWorker(r),
                    r.NQ = new InnerLabelsSourceWorker(r),
                    r.lQ[r.Ww.id] = r.Ww,
                    r.yw = new LabelWorker(r),
                    r.BW = new OverlayWorker(r),
                    polyfill.Support.wasm && (r.PW = new RSAWorker(r)),
                    r.Fb(),
                    r.yY = new polyfill.wY({
                        render: function() {
                            r.jQ.exec(10)
                        },
                        check: function() {
                            return r.jQ.xY()
                        }
                    }),
                    r
                }
                return polyfill.Ei(i, o),
                i.prototype.initCryptWorker = function(i, t, e) {
                    e()
                }
                ,
                i.prototype.setId = function(i, t, e) {
                    this._id = t,
                    e()
                }
                ,
                i.prototype.loadNebulaSourceTile = function(i, t, e) {
                    var o = this;
                    return t.url,
                    this.Ww.bw(t.ya, t.zoom, t.optimalZoom, t.projectionId, t.Ca, t.mS, t.viewMode, t.showBuildingBlock, t.ZL, t.hH, t.showOversea, function(i, t) {
                        o.Zw ? o.$w.push({
                            done: e,
                            type: "NebulaSourceTile",
                            data: t
                        }) : e(i, t)
                    }, t.kZ)
                }
                ,
                i.prototype.decodeNebulaSourceTile = function(i, t, e) {
                    var o = t.url;
                    return this.Ww.pQ(t.buffer, t.projectionId, t.zoom, t.viewMode, t.showBuildingBlock, t.mS, t.optimalZoom, t.ZL, e, o)
                }
                ,
                i.prototype.loadNebulaSourceTileSdf = function(i, t, e) {
                    var o = this;
                    return t.url,
                    this.Ww.bW(t.ya, t.projectionId, t.ZL, t.mH, t.showOversea, function(i, t) {
                        o.Zw ? o.$w.push({
                            done: e,
                            type: "NebulaSourceTileSdf",
                            data: t
                        }) : e(i, t)
                    })
                }
                ,
                i.prototype.decodeNebulaSourceTileSdf = function(i, t, e) {
                    var o = this
                      , l = t.url
                      , n = t.ya
                      , h = t.projectionId
                      , r = t.mH
                      , a = t.ZL
                      , t = t.buffer
                      , l = -1 !== l.indexOf("/oversea")
                      , s = new polyfill.vH;
                    return this.Ww.HQ(t, l, h, n, s, r, a, function(i, t) {
                        o.Zw ? o.$w.push({
                            done: e,
                            type: "NebulaSourceTileSdf",
                            data: t
                        }) : e(i, t)
                    }),
                    {
                        cancel: s.cancel
                    }
                }
                ,
                i.prototype.loadDistrictSourceTile = function(i, t, e) {
                    var o = t.url
                      , l = t.tileCoord
                      , n = t.projectionId
                      , t = t.tileSize;
                    return this._getDistrictSourceWorker(),
                    this.kW.bw(o, l, n, t, e)
                }
                ,
                i.prototype.loadMapboxVTSourceTile = function(i, t, e) {
                    var o = this
                      , l = t.url
                      , n = t.tileCoord
                      , h = t.projectionId
                      , r = t.tileSize
                      , t = t.styles;
                    return this._getMapboxVTSourceWorker(),
                    this.QJ.bw(l, n, h, r, t, function(i, t) {
                        o.Zw ? o.$w.push({
                            done: e,
                            type: "loadMapboxVTSourceTile",
                            data: t
                        }) : e(i, t)
                    })
                }
                ,
                i.prototype.reBufferMapboxVTSource = function(i, t, e) {
                    var o = t.MX
                      , t = t.styles;
                    return this._getMapboxVTSourceWorker(),
                    this.QJ.mX(o, t, e)
                }
                ,
                i.prototype.loadMapboxSourceTile = function(i, t, e) {
                    var o = t.url
                      , l = t.tileCoord
                      , n = t.projectionId
                      , h = t.tileSize
                      , r = t.styles
                      , t = t.adcode;
                    return this._getMapboxSourceWorker(),
                    this.vQ.bw(o, l, n, h, r, t, e)
                }
                ,
                i.prototype.updateMapStyle = function(i, t, e) {
                    polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["style-parse-begin"] && (polyfill.Support.amapRunTime["style-parse-begin"] = Date.now());
                    var o = "string" == typeof t.value ? JSON.parse(t.value) : t.value;
                    polyfill.Support.amapRunTime && !polyfill.Support.amapRunTime["style-parse-end"] && (polyfill.Support.amapRunTime["style-parse-end"] = Date.now()),
                    this.vn = new polyfill.StyleParser(t.TY),
                    this.vn.jY(o),
                    this.Ww.emit("styleReady")
                }
                ,
                i.prototype.updateUserStyle = function(i, t, e) {
                    this.vn && this.vn.setStyle(t.Kd),
                    e && e()
                }
                ,
                i.prototype.sendHttp = function(i, t) {
                    this.R_.protocol = t.protocol,
                    this.protocol = t.protocol
                }
                ,
                i.prototype.updateParams = function(i, t) {
                    this.params = polyfill.assign(this.params, t),
                    t.langForeign && (this.langForeign = t.langForeign),
                    t.QG && (this.QG = t.QG)
                }
                ,
                i.prototype.getSDFData = function(i, t, e) {
                    this.R_.loadData(t, {
                        cb: function(i) {
                            e(null, i)
                        }
                    })
                }
                ,
                i.prototype.getImages = function(i, t) {
                    var n = this
                      , h = t.data
                      , r = t.cb
                      , a = this.z_;
                    a.loadImages(h, {
                        cb: function(i) {
                            for (var t = [], e = 0, o = h; e < o.length; e++) {
                                var l = o[e];
                                t.push({
                                    url: l,
                                    data: a.getImage(l)
                                })
                            }
                            n.Uh.send("imageLoaded", {
                                data: t,
                                cb: r
                            })
                        },
                        type: "icon"
                    })
                }
                ,
                i.prototype.setPathWebgl = function(i, t, e) {
                    this.BW.setPathWebgl(t, e)
                }
                ,
                i.prototype.sendIndoorRequest = function(i, t, e) {
                    var o = this;
                    this.BW.AW(t, function(i, t) {
                        o.Zw ? o.$w.push({
                            done: e,
                            type: "sendIndoorRequest",
                            data: t
                        }) : e(i, t)
                    })
                }
                ,
                i.prototype.Qw = function(i) {
                    this.Uh.send("NebulaTileSdfLoaded", polyfill.ca)
                }
                ,
                i.prototype.setMainThreadBusy = function(i, t) {
                    if (env.movingDraw)
                        this.Zw = !1;
                    else {
                        if (this.Zw = t,
                        !this.Zw)
                            for (var e = 0, o = this.$w; e < o.length; e++) {
                                var l = o[e];
                                l.done ? l.done(null, l.data) : this.Uh.send(l.type, l.data)
                            }
                        this.$w = []
                    }
                }
                ,
                i.prototype.loadWordsByFront = function(i) {
                    this.Uh.send("loadWordsByFront", i.Es, i.cb)
                }
                ,
                i.prototype.innerLabelsLoadData = function(i, t, e) {
                    this.NQ.loadData(t, e)
                }
                ,
                i.prototype.dQ = function(i) {
                    return this.lQ[i]
                }
                ,
                i.prototype.deleteTileStaticSDF = function(i, t) {
                    this.IW.NW(t)
                }
                ,
                i.prototype.PQ = function(i, t) {
                    this.QZ = t
                }
                ,
                i.prototype._getNebulaSourceWorker = function() {
                    return this.Ww || (this.Ww = new NebulaSourceWorker(this)),
                    this.Ww
                }
                ,
                i.prototype._getDistrictSourceWorker = function() {
                    return this.kW || (this.kW = new DistrictSourceWorker(this)),
                    this.kW
                }
                ,
                i.prototype._getMapboxVTSourceWorker = function() {
                    return this.QJ || (this.QJ = new polyfill.bX),
                    this.QJ
                }
                ,
                i.prototype._getMapboxSourceWorker = function() {
                    var i;
                    return this.vQ || (i = this.vQ = new MapboxSourceWorker(this),
                    this.lQ[i.id] = i),
                    this.vQ
                }
                ,
                i.prototype.Fb = function() {
                    var o = this;
                    this.z_.on("iconImageLoaded", function(i) {
                        delete i.type,
                        o.Uh.send("iconImageLoaded", i)
                    }),
                    this.R_.on("dynamicTextSDFInfoLoaded", function(i) {
                        delete i.type,
                        o.Uh.send("dynamicTextSDFInfoLoaded", i.data)
                    }),
                    this.yw.on("dynamicTextVerticeLoaded", function(i) {
                        var t, e = i;
                        o.Zw ? (t = i.type,
                        delete i.type,
                        o.$w.push({
                            type: t,
                            data: e
                        })) : (delete i.type,
                        o.Uh.send("dynamicTextVerticeLoaded", e))
                    }),
                    this.yw.on("dynamicTextVerticeLoadedByTile", function(i) {
                        var t, e = i;
                        o.Zw ? (t = i.type,
                        delete i.type,
                        o.$w.push({
                            type: t,
                            data: e
                        })) : (delete i.type,
                        o.Uh.send("dynamicTextVerticeLoadedByTile", e))
                    })
                }
                ,
                i
            }(polyfill.Event);
            return polyfill.Support.DW && (self.Wh = new AMapWorker(self,sharedChunk.key,env),
            self.StyleParser = polyfill.StyleParser),
            AMapWorker
        }),
        define(["./shared"], function(U) {
            var j = {
                "AMap.MouseTool": ["AMap.RangingTool"],
                "AMap.Adaptor": ["AMap.CallAMap"]
            }
              , P = new U.tS;
            function B(t) {
                try {
                    var i, n = localStorage.getItem("_AMap_" + t);
                    return n && ((i = JSON.parse(n)).version === U.Module.eS.iS ? (window._jsload_(t, i.script, !0),
                    i.css && window._cssload_(t, i.css, !0),
                    P.add([t], undefined),
                    P.finish(t),
                    1) : void window.localStorage.removeItem("_AMap_" + t))
                } catch (s) {}
            }
            function F(t) {
                for (var i = [], n = 0, s = t; n < s.length; n++) {
                    var e = s[n]
                      , r = e;
                    if (!P.has(e)) {
                        if (r = j[r])
                            for (var h = 0, o = r; h < o.length; h++) {
                                var a = o[h];
                                !t[a] && i.indexOf(a) < 0 && (B(a) || i.push(a))
                            }
                        i.indexOf(e) < 0 && (B(e) || i.push(e))
                    }
                }
                return i
            }
            function W(t, i) {
                var n = document.createElement("script");
                n.type = "text/javascript",
                (document.body ? (n.onload = function() {
                    document.body.removeChild(n),
                    i()
                }
                ,
                n.src = t,
                document.body) : (n.onload = function() {
                    document.head.removeChild(n),
                    i()
                }
                ,
                n.src = t,
                document.head)).appendChild(n)
            }
            (N = document.getElementById("AMap_Dynamic_style")) || ((N = document.createElement("style")).type = "text/css",
            N.id = "AMap_Dynamic_style",
            (ut = document.head || document.getElementsByTagName("head")[0]).childNodes.length < 2 ? ut.appendChild(N) : ut.insertBefore(N, ut.childNodes[1]));
            var N, G = function(t) {
                N.appendChild(document.createTextNode(t))
            }, _ = (window._cssload_ = function(t, i, n) {
                try {
                    !n && window.localStorage && i && "" !== i && window.localStorage.setItem("_AMap_" + t, JSON.stringify({
                        css: i,
                        version: U.Module.eS.iS
                    }))
                } catch (s) {}
                G(i)
            }
            ,
            window._jsload_ = function(t, i, n) {
                try {
                    var s;
                    !n && i && "" !== i && (s = window.localStorage["_AMap_" + t] || "{}",
                    (s = JSON.parse(s)).version !== U.Module.eS.iS || s.script ? window.localStorage.setItem("_AMap_" + t, JSON.stringify({
                        version: U.Module.eS.iS,
                        script: i
                    })) : window.localStorage.setItem("_AMap_" + t, JSON.stringify({
                        version: U.Module.eS.iS,
                        script: i,
                        css: s.css
                    })))
                } catch (e) {}
                U.Module.nS(t, i)
            }
            ,
            window.cZ = U.Module,
            "function" == typeof Float32Array);
            function Y(t, i) {
                return 1 - 3 * i + 3 * t
            }
            function Z(t, i) {
                return 3 * i - 6 * t
            }
            function X(t, i, n) {
                return ((Y(i, n) * t + Z(i, n)) * t + 3 * i) * t
            }
            function J(t, i, n) {
                return 3 * Y(i, n) * t * t + 2 * Z(i, n) * t + 3 * i
            }
            H.prototype.t = function(t) {
                for (var i = 0, n = 1; 10 !== n && this.i[n] <= t; ++n)
                    i += .1;
                var s = i + (t - this.i[--n]) / (this.i[n + 1] - this.i[n]) * .1
                  , e = J(s, this.o, this.s);
                if (.001 <= e) {
                    for (var r = t, h = s, o = this.o, a = this.s, u = 0; u < 4; ++u) {
                        var f = J(h, o, a);
                        if (0 === f)
                            return h;
                        h -= (X(h, o, a) - r) / f
                    }
                    return h
                }
                if (0 === e)
                    return s;
                for (var c, l, d = t, p = i, v = i + .1, m = this.o, y = this.s, b = 0; 0 < (c = X(l = p + (v - p) / 2, m, y) - d) ? v = l : p = l,
                1e-7 < Math.abs(c) && ++b < 10; )
                    ;
                return l
            }
            ,
            H.prototype.h = function(t) {
                return 0 === t ? 0 : 1 === t ? 1 : X(this.t(t), this.l, this.u)
            }
            ,
            H.prototype.p = function(t) {
                return t
            }
            ;
            var V = H;
            function H(t, i, n, s) {
                if (!(0 <= t && t <= 1 && 0 <= n && n <= 1))
                    throw new Error("bezier x values must be in [0, 1] range");
                this.o = t,
                this.l = i,
                this.s = n,
                this.u = s,
                this.i = new (_ ? Float32Array : Array)(11);
                for (var e = 0; e < 11; ++e)
                    this.i[e] = X(.1 * e, t, n)
            }
            var q, K, w = {
                getViewport: function(t) {
                    return t ? [t.clientWidth, t.clientHeight] : [0, 0]
                },
                getStyle: function(t, i) {
                    var n, s = t.style[i];
                    return "auto" === (s = (s = (s = s && "auto" !== s || !document.defaultView ? s : (n = document.defaultView.getComputedStyle(t, null)) ? n[i] : null) && "auto" !== s || "height" !== i ? s : t.clientHeight + "px") && "auto" !== s || "width" !== i ? s : t.clientWidth + "px") ? null : s
                },
                getViewportOffset: function(t) {
                    var i, n = 0, s = 0, e = t, r = document.body, h = document.documentElement;
                    do {
                        if (n += e.offsetTop || 0,
                        s += e.offsetLeft || 0,
                        n += parseInt(w.getStyle(e, "borderTopWidth"), 10) || 0,
                        s += parseInt(w.getStyle(e, "borderLeftWidth"), 10) || 0,
                        i = w.getStyle(e, "position"),
                        e.offsetParent === r && "absolute" === i)
                            break;
                        if ("fixed" === i) {
                            n += r.scrollTop || h.scrollTop || 0,
                            s += r.scrollLeft || h.scrollLeft || 0;
                            break
                        }
                    } while (e = e.offsetParent);
                    for (e = t; e !== r && (n -= e.scrollTop || 0,
                    s -= e.scrollLeft || 0,
                    !w.m() && U.Support.webkit && (s += e.scrollWidth - e.clientWidth),
                    e = e.parentNode); )
                        ;
                    return [s, n]
                },
                m: function() {
                    return q || (K = "ltr" === w.getStyle(document.body, "direction"),
                    q = !0),
                    K
                },
                create: function(t, i, n, s) {
                    return t = document.createElement(t),
                    n && (t.className = n),
                    i && (s && "before" === s ? (n = i.firstChild,
                    i.insertBefore(t, n)) : i.appendChild(t)),
                    t
                },
                toggleClass: function(t, i, n) {
                    n ? this.addClass(t, i) : this.removeClass(t, i)
                },
                hasClass: function(t, i) {
                    if (t && i)
                        return 0 < t.className.length && new RegExp("(^|\\s)" + i + "(\\s|$)").test(t.className)
                },
                addClass: function(t, i) {
                    t && i && (t.classList && t.classList.add ? t.classList.add(i) : this.hasClass(t, i) || (t.className += (t.className ? " " : "") + i))
                },
                setClass: function(t, i) {
                    t && (t.className = i || "")
                },
                removeClass: function(t, n) {
                    t && n && (t.classList && t.classList.remove ? t.classList.remove(n) : t.className = t.className.replace(/(\S+)\s*/g, function(t, i) {
                        return i === n ? "" : t
                    }).replace(/(^\s+|\s+$)/, ""))
                },
                watchSize: function(n, s, e) {
                    var i = document.createElement("iframe")
                      , r = (i.style.cssText = "width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",
                    i.onload = function() {
                        i && (i.contentWindow.onresize = t)
                    }
                    ,
                    n.appendChild(i),
                    i.src = "javascript:void(0)",
                    0)
                      , h = 0;
                    function t() {
                        e.k = n.getBoundingClientRect(),
                        e.M = [n.clientLeft, n.clientTop];
                        var t = n.offsetWidth
                          , i = n.offsetHeight;
                        t === r && i === h || (s(t, i),
                        r = t,
                        h = i)
                    }
                    return t(),
                    e.resize = t,
                    window.onscroll = t,
                    function() {
                        var t;
                        e.resize && (e.resize = null),
                        window.onscroll && (window.onscroll = null),
                        i.contentWindow && (i.contentWindow.onresize = null,
                        i.contentWindow.document.write(""),
                        i.parentNode.removeChild(i),
                        null != (t = i.contentWindow)) && t.close()
                    }
                },
                watchSize2: function(n, s, e) {
                    var r, h, o = document.createElement("_"), a = (o.className = "expand",
                    o.appendChild(document.createElement("_"))), u = (a.className = "shrink",
                    o.appendChild(document.createElement("_"))), t = (u.className = "expandChild",
                    a.appendChild(document.createElement("_")));
                    return t.className = "shrinkChild",
                    a.style.cssText = o.style.cssText = "height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",
                    t.style.cssText = u.style.cssText = "display:block;height:100%;transition:0s;width:100%",
                    t.style.width = t.style.height = "200%",
                    n.appendChild(o),
                    f(),
                    function() {
                        c(),
                        n.removeChild(o)
                    }
                    ;
                    function f() {
                        c(),
                        e.k = n.getBoundingClientRect(),
                        e.M = [n.clientLeft, n.clientTop];
                        var t = n.offsetWidth
                          , i = n.offsetHeight;
                        t === r && i === h || (r = t,
                        h = i,
                        u.style.width = 2 * t + "px",
                        u.style.height = 2 * i + "px",
                        o.scrollLeft = o.scrollWidth,
                        o.scrollTop = o.scrollHeight,
                        a.scrollLeft = a.scrollWidth,
                        a.scrollTop = a.scrollHeight,
                        s(t, i)),
                        a.addEventListener("scroll", f),
                        o.addEventListener("scroll", f)
                    }
                    function c() {
                        a.removeEventListener("scroll", f),
                        o.removeEventListener("scroll", f)
                    }
                },
                mousePos: function(t, i, n) {
                    return t && (n.k = t.getBoundingClientRect(),
                    n.M = [t.clientLeft, t.clientTop]),
                    t = n.k,
                    [(i = i.touches && i.changedTouches ? 0 < i.touches.length ? i.touches[0] : i.changedTouches[i.changedTouches.length - 1] : i).clientX - t.left - n.M[0], i.clientY - t.top - n.M[1]]
                },
                remove: function(t) {
                    t && t.parentNode && t.parentNode.removeChild(t)
                },
                empty: function(t) {
                    for (; t.firstChild; )
                        t.removeChild(t.firstChild)
                },
                closest: function(t, i) {
                    return t ? this.hasClass(t, i) ? t : (t = t.parentElement) ? w.closest(t, i) : null : null
                },
                fillText: function(t, i) {
                    if (t)
                        return void 0 !== t.textContent ? t.textContent = i : void 0 !== t.innerText ? t.innerText = i : t.innerHTML = i,
                        t
                },
                _L: function(t) {
                    for (var i = document.documentElement.style, n = 0; n < t.length; n += 1)
                        if (t[n]in i)
                            return t[n];
                    return !1
                },
                rotate: function(t, i, n) {
                    var s, e = w.kL;
                    n = n || {
                        x: t.clientWidth / 2,
                        y: t.clientHeight / 2
                    },
                    e ? (s = "",
                    t.style[e] = s += " rotate(" + i + "deg)",
                    t.style[w.ML[e] + "-origin"] = n.x + "px " + n.y + "px") : (s = Math.cos(i * Math.PI / 180),
                    e = Math.sin(i * Math.PI / 180),
                    t.style.filter = "progid:DXImageTransform.Microsoft.Matrix()",
                    0 < t.filters.length && ((i = t.filters.item(0)).Dx = -n.x * s + n.y * e + n.x,
                    i.Dy = -n.x * e - n.y * s + n.y,
                    i.M11 = i.M22 = s,
                    i.M12 = -(i.M21 = e)))
                },
                setCss: function(t, i) {
                    t = t instanceof Array ? t : [t];
                    for (var n = 0; n < t.length; n += 1)
                        for (var s in i)
                            i.hasOwnProperty(s) && (t[n].style[s] = i[s]);
                    return this
                },
                setOpacity: function(t, i) {
                    t.style && ("opacity"in t.style ? t.style.opacity = "" + i : "filter"in t.style && (i = Math.round(100 * i),
                    t.style.filter = "",
                    100 !== i) && (t.style.filter = " progid:DXImageTransform.Microsoft.Alpha(opacity=" + i + ")"))
                },
                ML: {},
                kL: K = q = !1
            }, Q = (w.kL = w._L(["WebkitTransform", "OTransform", "MozTransform", "msTransform", "transform"]),
            w.ML = {
                transform: "transform",
                WebkitTransform: "-webkit-transform",
                OTransform: "-o-transform",
                MozTransform: "-moz-transform",
                msTransform: "-ms-transform"
            },
            t.prototype.isEnabled = function() {
                return "disabled" !== this.R
            }
            ,
            t.prototype.isActive = function() {
                return "active" === this.R
            }
            ,
            t.prototype.enable = function() {
                this.isEnabled() || (this.R = "enabled")
            }
            ,
            t.prototype.disable = function() {
                this.isEnabled() && (this.R,
                this.R = "disabled")
            }
            ,
            t.prototype.L = function(t) {
                this.A && (this.A = !1),
                t.ctrlKey || 0 !== t.button || (document.addEventListener("mousemove", this.T),
                document.addEventListener("mouseup", this.I),
                this.D(t))
            }
            ,
            t.prototype.P = function(t) {
                this.Xdt = t.Hdt,
                1 < t.touches.length ? (this.j.removeEventListener("touchmove", this.T),
                this.R = "enabled") : (this.A && (this.A = !1),
                "enabled" === this.R && (this.j.addEventListener("touchmove", this.T, {
                    capture: !0,
                    passive: !0
                }),
                document.addEventListener("touchend", this.oS),
                this.D(t)))
            }
            ,
            t.prototype.D = function(t) {
                this.$ = this.U = this.B = w.mousePos(this.j, t, this._map),
                this.YF = this._map.getView().getStatus().centerCoord,
                this.XF = this._map.containerToCoord(this.$),
                this.W = [[Date.now(), this.$]],
                this.R = "active"
            }
            ,
            t.prototype.Z = function(t) {
                var i = (new Date).getTime()
                  , n = this.Xdt;
                "touchmove" === t.type && 1 < t.touches.length || i - n < 50 || (this.W.length < 2 && "active" === this.R && this.G("dragstart", t),
                "touchmove" === t.type && this.G("touchmove", t),
                this.G("dragging", t),
                this.isEnabled() && ("active" === this.R && (this.R = "pending"),
                "disabled" !== this.R) && this._map.getStatus().dragEnable && (i = w.mousePos(this.j, t, this._map),
                this.q = t,
                this.B = U.set(U.create(), i[0], i[1]),
                this.Y(),
                this.W.push([Date.now(), this.B]),
                this.W.length < 2 || (n = this._map.getView(),
                t = this._map.containerToCoord(i),
                i = [this.XF[0] - t[0] + this.YF[0], this.XF[1] - t[1] + this.YF[1]],
                n.setOptions({
                    center: this._map.getProjection().unproject(i[0], i[1])
                }))))
            }
            ,
            t.prototype.tt = function(t) {
                if (0 === t.button)
                    if (this.it())
                        this.S(),
                        this.C();
                    else
                        switch (this.R) {
                        case "active":
                            this.R = "enabled",
                            this.S(),
                            this.C();
                            break;
                        case "pending":
                            this.R = "enabled",
                            this.S(),
                            this.C(),
                            this.et(t),
                            this.G("dragend", t);
                            break;
                        default:
                            this.R = "enabled",
                            this.S(),
                            this.G("dragend", t)
                        }
            }
            ,
            t.prototype.N = function(t) {
                if (0 < t.touches.length)
                    this.$ = this.U = this.B = w.mousePos(this.j, t, this._map),
                    this.YF = this._map.getView().getStatus().centerCoord,
                    this.XF = this._map.containerToCoord(this.$);
                else if (this.it())
                    this.S(),
                    this.C(),
                    this.R = "enabled",
                    this.G("dragend", t);
                else
                    switch (this.R) {
                    case "active":
                        this.R = "enabled",
                        this.S(),
                        this.C();
                        break;
                    case "pending":
                        this.R = "enabled",
                        this.S(),
                        this.C(),
                        this.G("dragend", t),
                        this.et(t);
                        break;
                    default:
                        this.G("dragend", t),
                        this.S()
                    }
            }
            ,
            t.prototype.it = function() {
                var t, i, n, s, e = this._map.getLimitBounds();
                if (e = e && e.toJSON())
                    return t = this._map.getBounds().toJSON(),
                    i = [],
                    s = [(n = this._map.getCenter().toJSON())[0], n[1]],
                    (t[0] < e[0] || t[1] < e[1] || t[2] > e[2] || t[3] > e[3]) && (i[0] = t[0] - e[0],
                    i[1] = t[1] - e[1],
                    i[2] = t[2] - e[2],
                    i[3] = t[3] - e[3],
                    i[0] < 0 && 0 < i[2] ? s[0] = (e[0] + e[2]) / 2 : i[0] < 0 ? s[0] = n[0] - i[0] : 0 < i[2] && (s[0] = n[0] - i[2]),
                    i[1] < 0 && 0 < i[3] ? s[1] = (e[1] + e[3]) / 2 : i[1] < 0 ? s[1] = n[1] - i[1] : 0 < i[3] && (s[1] = n[1] - i[3]),
                    this._map.panTo(s, 100),
                    !0)
            }
            ,
            t.prototype.S = function() {
                this.j.removeEventListener("touchmove", this.T),
                document.removeEventListener("touchend", this.oS),
                document.removeEventListener("mousemove", this.T),
                document.removeEventListener("mouseup", this.I)
            }
            ,
            t.prototype.C = function() {
                delete this.q,
                delete this.$,
                delete this.U,
                delete this.B
            }
            ,
            t.prototype.Y = function() {
                for (var t = this.W, i = Date.now(); 0 < t.length && 60 < i - t[0][0]; )
                    t.shift()
            }
            ,
            t.prototype.et = function(t) {
                var i, n, s, e, r, h, o, a, u, f, c, l, d, p;
                function v() {
                    this.isEnabled() && this.A || (h = -1);
                    var t = Date.now() - a
                      , t = (u < t && (h = -1),
                    [l[0] * t + d[0] * t * t / 2, l[1] * t + d[1] * t * t / 2]);
                    o = [o[0] + (t[0] - p[0]), o[1] + (t[1] - p[1])],
                    p = t,
                    h <= 0 ? this.A = !1 : (s.setOptions({
                        center: U.ProjectionManager.getProjection(e.projectionId).unproject(o[0], o[1])
                    }),
                    U.Util.requestAnimFrame(v.bind(this)),
                    h--)
                }
                this._map.getStatus().jogEnable && (this.A = !0,
                this.Y(),
                (i = this.W).length < 2 || (f = [(n = i[i.length - 1])[1][0] - (c = i[0])[1][0], n[1][1] - c[1][1]],
                0 == (r = (n[0] - c[0]) / 1e3) || U.equals(n[1], c[1]) ? this.G("moveend", t) : (c = [f[0] / (.3 / r), f[1] / (.3 / r)],
                t = Math.sqrt(c[0] * c[0] + c[1] * c[1]) / 750,
                s = this._map.getView(),
                r = (e = s.getStatus()).rotation,
                c = h = parseInt((1e3 * t + 400) / 17 + "", 10),
                new V(.1,0,1,.1),
                U.V[e.projectionId].nt(-f[0] / 7, f[1] / 7, e.zoom),
                o = U.ProjectionManager.getProjection(e.projectionId).project(e.center[0], e.center[1]),
                a = Date.now(),
                u = 17 * c,
                t = i[i.length - Math.min(i.length, 3)],
                f = [n[1][0] - t[1][0], n[1][1] - t[1][1]],
                0 !== r && (f = this.J(r, f)),
                f = U.V[e.projectionId].nt(f[0], -f[1], e.zoom),
                c = Math.min(t[0] - n[0], -15),
                l = [f[0] / c, f[1] / c],
                d = [-l[0] / u, -l[1] / u],
                p = [0, 0],
                U.Util.requestAnimFrame(v.bind(this)))))
            }
            ,
            t.prototype.J = function(t, i) {
                var n = Math.sqrt(i[0] * i[0] + i[1] * i[1])
                  , s = Math.atan2(i[1], i[0])
                  , t = t / 180 * Math.PI - s;
                return i[0] = n * Math.cos(t),
                i[1] = -n * Math.sin(t),
                i
            }
            ,
            t.prototype.G = function(t, i) {
                this._map.getBindHandler().fireEvent(t, i)
            }
            ,
            t);
            function t(t, i) {
                this.st = "mouse",
                this.Xdt = 0,
                this._map = i,
                this.W = [],
                this.j = t,
                this.R = "disabled",
                this.T = this.Z.bind(this),
                this.I = this.tt.bind(this),
                this.oS = this.N.bind(this)
            }
            i.prototype.isEnabled = function() {
                return "disabled" !== this.R
            }
            ,
            i.prototype.isActive = function() {
                return "active" === this.R
            }
            ,
            i.prototype.enable = function() {
                this.isEnabled() || (this.rt = !0,
                this.R = "enabled")
            }
            ,
            i.prototype.ht = function() {
                return !!this.lt
            }
            ,
            i.prototype.disable = function() {
                if (this.isEnabled())
                    switch (this.R) {
                    case "enabled":
                    case "active":
                        this.R = "disabled",
                        this.S(),
                        this.C();
                        break;
                    case "pending":
                        this.R = "disabled",
                        this.S();
                        break;
                    default:
                        this.R = "disabled"
                    }
            }
            ,
            i.prototype.ut = function(t) {
                t.preventDefault(),
                "enabled" === this.R && this._map.getStatus().doubleClickZoom && !t.ctrlKey && 0 === t.button && this.D(t)
            }
            ,
            i.prototype.P = function(t, i) {
                var n = this;
                this.$ = w.mousePos(this.j, t, this._map),
                2 === t.touches.length ? (this.rt = !1,
                this.ct = 0) : (this.rt = !0,
                this.ct++,
                this.ft = i,
                this.lt = !1,
                setTimeout(function() {
                    1 === n.ct && (n.ct = 0)
                }, 300),
                this.pt = [t.changedTouches[0].clientX, t.changedTouches[0].clientY],
                this.j.addEventListener("touchmove", this.dt),
                2 <= this.ct && this.j.addEventListener("touchend", this.N.bind(this)))
            }
            ,
            i.prototype.vt = function(t) {
                var i = this;
                this.rt && (this.yt++,
                setTimeout(function() {
                    i.yt = 0
                }, 300),
                2 === this.yt && !this.lt && this._map.getStatus().doubleClickZoom && (t.preventDefault(),
                this.yt = 0,
                this.ct = 0,
                this.D(t)),
                2 === this.ct) && (this.ct = 0)
            }
            ,
            i.prototype.D = function(i) {
                var n, s, e = this, r = (this.lt = !0,
                this.R = "active",
                this.G("zoomstart"),
                400), h = 0, o = this._map.getView().getStatus().zoom, a = new V(.4,0,.15,1);
                o >= this.xt[1] || (s = 0,
                n = function() {
                    h += 16;
                    var t = o + a.h(h / r);
                    t >= e.xt[1] || (e.bt(i, t),
                    o + 1 <= t && (U.Util.cancelAnimFrame(s),
                    e.lt = !1,
                    e.R = "enabled",
                    e.tt(),
                    e.N()),
                    (e.lt || h < 400) && (s = U.Util.requestAnimFrame(n)))
                }
                ,
                s = U.Util.requestAnimFrame(n))
            }
            ,
            i.prototype.gt = function(t) {
                var i, n, s = w.mousePos(this.j, t, this._map);
                s[0] - this.$[0] == 0 && s[1] - this.$[1] == 0 || (this.yt = -1,
                this.ct < 2 ? this.ct = 0 : this.rt && (this.lt = !0,
                this.wt = !0,
                this.ft.disable(),
                s = t.changedTouches.length,
                i = this._map.getView(),
                n = this._map.getView().getStatus().zoom - (t.changedTouches[s - 1].clientY - this.pt[1]) / 100,
                i.setOptions({
                    zoom: n
                }),
                this.pt = [t.changedTouches[s - 1].clientX, t.changedTouches[s - 1].clientY]))
            }
            ,
            i.prototype.N = function() {
                this.wt && 2 <= this.ct && (this.ft.enable(),
                this.tt(),
                this.lt = !1,
                this.wt = !1)
            }
            ,
            i.prototype.bt = function(t, i) {
                var n, s, e, r = this._map.getView(), o = (h = r.getStatus()).center, a = h.zoom, u = h.rotation, h = h.projectionId;
                this._map.getStatus().zoomEnable && (t = w.mousePos(this.j, t, this._map),
                e = [this.j.clientWidth / 2, this.j.clientHeight / 2],
                s = this._t(e, t),
                n = Math.atan((t[1] - e[1]) / (t[0] - e[0])),
                u = -u / 180 * Math.PI + n,
                n = [-Math.cos(u) * s, Math.sin(u) * s],
                t[0] - e[0] < 0 && (n[0] = -n[0],
                n[1] = -n[1]),
                u = U.V[h].nt(n[0], n[1], a),
                s = U.V[h].nt(n[0], n[1], i),
                e = Math.pow(2, i - a),
                r.setOptions({
                    kt: {
                        pos: t,
                        Mt: i,
                        Rt: s,
                        zt: u,
                        scale: e,
                        center: U.set(U.create(), o[0], o[1])
                    }
                }),
                this.G("zooming"))
            }
            ,
            i.prototype.tt = function(t) {
                t && 0 !== t.button || (this.S(),
                this.C(),
                this.G("zoomend"))
            }
            ,
            i.prototype.S = function() {
                this.j.removeEventListener("dblclick", this.St),
                this.j.removeEventListener("touchmove", this.dt)
            }
            ,
            i.prototype.C = function() {
                delete this.$,
                delete this.U,
                delete this.U
            }
            ,
            i.prototype._t = function(t, i) {
                var n = i[0] - t[0]
                  , i = i[1] - t[1];
                return Math.sqrt(n * n + i * i)
            }
            ,
            i.prototype.G = function(t, i) {
                this._map.getBindHandler().fireEvent(t, i)
            }
            ;
            var $ = i;
            function i(t, i) {
                this.lt = !1,
                this.wt = !1,
                this.rt = !0,
                this.xt = U.zoomRange,
                this.yt = 0,
                this.ct = 0,
                this.pt = [0, 0],
                this._map = i,
                this.j = t,
                this.R = "disabled",
                this.St = this.ut.bind(this),
                this.dt = this.gt.bind(this)
            }
            it.prototype.isEnabled = function() {
                return "disabled" !== this.R
            }
            ,
            it.prototype.isActive = function() {
                return "active" === this.R
            }
            ,
            it.prototype.enable = function() {
                this.isEnabled() || (this.R = "enabled")
            }
            ,
            it.prototype.disable = function() {
                if (this.isEnabled())
                    switch (w.removeClass(this.j, "mapboxgl-touch-drag-pan"),
                    this.R) {
                    case "active":
                        this.R = "disabled",
                        this.S(),
                        this.G("zoomstart");
                        break;
                    case "pending":
                        this.R = "disabled",
                        this.S();
                        break;
                    default:
                        this.R = "disabled"
                    }
            }
            ,
            it.prototype.ht = function() {
                return !!this.lt
            }
            ,
            it.prototype.P = function(t) {
                2 === t.touches.length && (t.stopPropagation(),
                this.G("zoomstart"),
                this.$ = [{
                    clientX: t.touches[0].clientX,
                    clientY: t.touches[0].clientY,
                    pageX: t.touches[0].pageX,
                    pageY: t.touches[0].pageY
                }, {
                    clientX: t.touches[1].clientX,
                    clientY: t.touches[1].clientY,
                    pageX: t.touches[1].pageX,
                    pageY: t.touches[1].pageY
                }],
                this.B = this.$,
                t = this._map.getView(),
                this.zY = t.getStatus(),
                this.j.addEventListener("touchmove", this.T),
                this.j.addEventListener("touchend", this.At))
            }
            ,
            it.prototype.Z = function(t) {
                var i, n, s, e, r, h, o, a, u, f, c, l, d, p, v, m, y, b, g, M, k;
                t.touches.length < 2 || (this.G("touchmove"),
                this._map.getStatus().touchZoom && this.isEnabled() && (this.lt = !0,
                i = -this.CF(t),
                s = (h = (n = this._map.getView()).getStatus()).rotation,
                e = h.center,
                r = h.zoom,
                g = void 0 === (g = h.Tt) ? h.projectionId : g,
                h = h.pitch,
                o = (f = this._map.getStatus()).rotateEnable,
                a = f.zoomEnable,
                u = f.pitchEnable,
                f = f.touchZoomCenter,
                c = this.MW.CY,
                d = l = !1,
                y = this.It(this.B[0], this.B[1]),
                v = this.It(t.touches[0], t.touches[1]),
                p = this.Dt(this.$[0], this.$[1]),
                k = this.Dt(t.touches[0], t.touches[1]),
                v = r + (v - y) / 180,
                y = [((y = U.Pt(w.mousePos(this.j, this.$[0], this._map), w.mousePos(this.j, this.$[1], this._map)))[0] + y[2]) / 2, (y[1] + y[3]) / 2],
                b = [this.j.clientWidth / 2, this.j.clientHeight / 2],
                m = this.jt(b, y),
                M = Math.atan((y[1] - b[1]) / (y[0] - b[0])),
                M = s * Math.PI / 180 + M,
                M = [-Math.cos(M) * m, Math.sin(M) * m],
                y[0] - b[0] < 0 && (M[0] = -M[0],
                M[1] = -M[1]),
                m = U.V[g].nt(M[0], M[1], r),
                y = U.V[g].nt(M[0], M[1], v),
                b = Math.pow(2, v - r),
                g = this.zY.rotation + (k - p),
                10 < Math.abs(k - p) && (this.MW.CY = !0),
                .1 < Math.abs(i) && (l = c = !(d = !0)),
                .01 < Math.abs(v - r) && (l = !0),
                M = w.mousePos(this.j, this.$[0], this._map),
                k = w.mousePos(this.j, this.$[1], this._map),
                1 === f ? n.setOptions({
                    pitch: u && d ? h + i : h,
                    zoom: a && l ? v : r,
                    rotation: o && c ? g : s
                }) : n.setOptions({
                    pitch: u && d ? h + i : h,
                    kt: a && l && {
                        Mt: v,
                        Rt: y,
                        zt: m,
                        pos: [(M[0] + k[0]) / 2, (M[1] + k[1]) / 2],
                        scale: b,
                        center: U.set(U.create(), e[0], e[1])
                    },
                    rotation: o && c ? g : s
                }),
                this.B = [{
                    clientX: t.touches[0].clientX,
                    clientY: t.touches[0].clientY,
                    pageX: t.touches[0].pageX,
                    pageY: t.touches[0].pageY
                }, {
                    clientX: t.touches[1].clientX,
                    clientY: t.touches[1].clientY,
                    pageX: t.touches[1].pageX,
                    pageY: t.touches[1].pageY
                }]))
            }
            ,
            it.prototype.CF = function(t) {
                var i, n = this.B, s = this.$, n = [w.mousePos(this.j, n[0], this._map), w.mousePos(this.j, n[1], this._map)], s = (w.mousePos(this.j, s[0], this._map),
                w.mousePos(this.j, s[1], this._map),
                [w.mousePos(this.j, t.touches[0], this._map), w.mousePos(this.j, t.touches[1], this._map)]), t = Math.sqrt(Math.pow(n[0][0] - n[1][0], 2) + Math.pow(n[0][1] - n[1][1], 2)), e = Math.sqrt(Math.pow(s[0][0] - s[1][0], 2) + Math.pow(s[0][1] - s[1][1], 2));
                return 2 < Math.abs(e - t) || (e = s[0][0] - n[0][0],
                t = s[0][1] - n[0][1],
                i = s[1][0] - n[1][0],
                s = s[1][1] - n[1][1],
                Math.abs(t) < Math.abs(e)) || Math.abs(s) < Math.abs(i) ? 0 : -(t + s) / 2 / 4
            }
            ,
            it.prototype.Et = function(t) {
                this.MW.CY = !1,
                this.G("zoomend"),
                this.S()
            }
            ,
            it.prototype.It = function(t, i) {
                var n = i.clientX - t.clientX
                  , i = i.clientY - t.clientY;
                return Math.sqrt(n * n + i * i)
            }
            ,
            it.prototype.jt = function(t, i) {
                var n = i[0] - t[0]
                  , i = i[1] - t[1];
                return Math.sqrt(n * n + i * i)
            }
            ,
            it.prototype.Dt = function(t, i) {
                var n = t.pageX - i.pageX;
                return Math.atan2(t.pageY - i.pageY, n) / Math.PI * 180
            }
            ,
            it.prototype.S = function() {
                this.j.removeEventListener("touchstart", this.Nt),
                this.j.removeEventListener("touchmove", this.T),
                this.j.removeEventListener("touchend", this.At)
            }
            ,
            it.prototype.G = function(t, i) {
                this._map.getBindHandler().fireEvent(t, i)
            }
            ;
            var tt = it;
            function it(t, i) {
                this.MW = {
                    CY: !1
                },
                this._map = i,
                this.j = t,
                this.R = "disabled",
                this.T = this.Z.bind(this),
                this.At = this.Et.bind(this)
            }
            var nt = 4.000244140625
              , st = (et.prototype.isEnabled = function() {
                return "disabled" !== this.R
            }
            ,
            et.prototype.isActive = function() {
                return "active" === this.R
            }
            ,
            et.prototype.enable = function() {
                this.isEnabled() || (this.R = "enabled")
            }
            ,
            et.prototype.disable = function() {
                this.isEnabled() && (this.R = "disabled",
                this.C(),
                this.G("zoomend"))
            }
            ,
            et.prototype.Ut = function(t) {
                t.preventDefault();
                var i, n, s, e = this._map.getStatus();
                this.G("zoomstart"),
                this.isEnabled() && (i = t.deltaMode === WheelEvent.DOM_DELTA_LINE ? 40 * t.deltaY : t.deltaMode === WheelEvent.DOM_DELTA_PAGE ? 400 * t.deltaY : t.deltaY,
                s = (n = Date.now()) - (this.Bt || 0),
                this.Bt = n,
                0 !== i && i % nt == 0 ? this.Wt = "wheel" : 0 !== i && Math.abs(i) < 4 ? this.Wt = "trackpad" : 400 < s ? (this.Wt = null,
                this.Gt = i) : this.Wt || (this.Wt = Math.abs(s * i) < 200 ? "trackpad" : "wheel",
                this.Zt && (i += this.Gt)),
                t.shiftKey && i && (i /= 4),
                e && e.zoomSpeed && (i *= e.zoomSpeed),
                this.Wt) && (this.$t -= i,
                this.isActive() || this.D(t))
            }
            ,
            et.prototype.D = function(t) {
                var i, n, s, e, r, h, o, a, u;
                this.$t && (a = (e = (i = this._map.getView()).getStatus()).rotation,
                n = e.zoom,
                s = e.center,
                e = e.projectionId,
                h = "wheel" === this.Wt && Math.abs(this.$t) > nt ? 1 / 450 : .01,
                h = 2 / (1 + Math.exp(-Math.abs(this.$t * h))),
                this.$t < 0 && 0 !== h && (h = 1 / h),
                r = this.Yt(n),
                r = Math.min(this._map.getZooms()[1], Math.max(2, this.Vt(r * h))),
                h = w.mousePos(this.j, t, this._map),
                t = [this.j.clientWidth / 2, this.j.clientHeight / 2],
                u = this._t(t, h),
                o = Math.atan((h[1] - t[1]) / (h[0] - t[0])),
                a = -a / 180 * Math.PI + o,
                o = [-Math.cos(a) * u, Math.sin(a) * u],
                h[0] - t[0] < 0 && (o[0] = -o[0],
                o[1] = -o[1]),
                a = U.V[e].nt(o[0], o[1], n),
                u = U.V[e].nt(o[0], o[1], r),
                t = Math.pow(2, r - n),
                this._map.XT(o),
                i.setOptions({
                    kt: {
                        pos: h,
                        Mt: r,
                        Rt: u,
                        zt: a,
                        scale: t,
                        center: U.set(U.create(), s[0], s[1])
                    }
                }),
                this.$t = 0)
            }
            ,
            et.prototype.Yt = function(t) {
                return Math.pow(2, t)
            }
            ,
            et.prototype.Vt = function(t) {
                return Math.log(t) / Math.LN2
            }
            ,
            et.prototype._t = function(t, i) {
                var n = i[0] - t[0]
                  , i = i[1] - t[1];
                return Math.sqrt(n * n + i * i)
            }
            ,
            et.prototype.C = function() {
                delete this.q,
                delete this.$,
                delete this.U,
                delete this.B
            }
            ,
            et.prototype.G = function(t, i) {
                this._map.getBindHandler().fireEvent(t, i)
            }
            ,
            et);
            function et(t, i) {
                this._map = i,
                this.j = t,
                this.R = "disabled",
                this.Wt = "wheel",
                this.$t = 0
            }
            ht.prototype.isEnabled = function() {
                return "disabled" !== this.R
            }
            ,
            ht.prototype.isActive = function() {
                return "active" === this.R
            }
            ,
            ht.prototype.enable = function() {
                this.isEnabled() || (this.R = "enabled")
            }
            ,
            ht.prototype.disable = function() {
                if (this.isEnabled()) {
                    switch (this.R) {
                    case "active":
                        this.S(),
                        this.C();
                        break;
                    case "pending":
                        this.S()
                    }
                    this.R = "disabled"
                }
            }
            ,
            ht.prototype.L = function(t) {
                this.A && clearInterval(this.A),
                (2 === t.button || t.ctrlKey && 0 === t.button) && (this.j.addEventListener("mousemove", this.T, {
                    passive: !0
                }),
                this.j.addEventListener("mouseup", this.I),
                this.j.addEventListener("mouseleave", this.I),
                this.D(t))
            }
            ,
            ht.prototype.D = function(t) {
                this.$ = this.U = this.B = w.mousePos(this.j, t, this._map),
                this.W = [[Date.now(), this.$]],
                this.R = "active"
            }
            ,
            ht.prototype.Z = function(t) {
                var i, n, s;
                this.W.length < 2 && "active" === this.R && this.G("dragstart", t),
                this.G("dragging", t),
                this.isEnabled() && (n = w.mousePos(this.j, t, this._map),
                this.q = t,
                this.B = U.set(U.create(), n[0], n[1]),
                this.Y(),
                this.W.push([Date.now(), this.B]),
                this.W.length < 2 || ("active" === this.R && (this.R = "pending"),
                "disabled" !== this.R && (i = (n = (t = this._map.getView()).getStatus()).rotation,
                n = n.pitch,
                s = [this.B[0] - this.W[this.W.length - 2][1][0], this.B[1] - this.W[this.W.length - 2][1][1]],
                (!this._map.getStatus().pitchEnable || Math.abs(s[0]) > Math.abs(s[1])) && (s[1] = 0),
                (!this._map.getStatus().rotateEnable || Math.abs(s[0]) < Math.abs(s[1])) && (s[0] = 0),
                15 < Math.abs(this.B[0] - this.$[0]) && (this.B[1] > this.j.clientHeight / 2 ? i -= s[0] / 10 : i += s[0] / 10),
                n -= s[1] / this._map.getZooms()[1] * 2,
                t.setOptions({
                    rotation: i,
                    pitch: n
                }))))
            }
            ,
            ht.prototype.tt = function(t) {
                switch (this.R) {
                case "active":
                    this.R = "enabled",
                    this.C();
                    break;
                case "pending":
                    this.R = "enabled",
                    this.G("dragend", t);
                    break;
                default:
                    this.G("dragend", t)
                }
                this.S()
            }
            ,
            ht.prototype.S = function() {
                this.j.removeEventListener("mousemove", this.T),
                this.j.removeEventListener("mouseup", this.I),
                this.j.removeEventListener("mouseleave", this.I)
            }
            ,
            ht.prototype.C = function() {
                delete this.q,
                delete this.$,
                delete this.U,
                delete this.B
            }
            ,
            ht.prototype.Y = function() {
                for (var t = this.W, i = Date.now(); 0 < t.length && 160 < i - t[0][0]; )
                    t.shift()
            }
            ,
            ht.prototype.G = function(t, i) {
                this._map.getBindHandler().fireEvent(t, i)
            }
            ;
            var rt = ht;
            function ht(t, i) {
                this._map = i,
                this.W = [],
                this.j = t,
                this.R = "disabled",
                this.T = this.Z.bind(this),
                this.I = this.tt.bind(this)
            }
            n.prototype.Xt = function() {
                this._container.addEventListener("mouseenter", this.DL.bind(this)),
                this._container.addEventListener("mouseover", this.OL.bind(this)),
                this._container.addEventListener("mouseleave", this.PL.bind(this)),
                this._container.addEventListener("mouseup", this.tt.bind(this)),
                this._container.addEventListener("mouseout", this.BL.bind(this)),
                this._container.addEventListener("mousemove", this.jL.bind(this)),
                this._container.addEventListener("mousedown", this.Jt.bind(this)),
                this._container.addEventListener("touchend", this.N.bind(this)),
                this._container.addEventListener("touchstart", this.Kt.bind(this), !1),
                this._container.addEventListener("touchmove", this.gt.bind(this), !1),
                this._container.addEventListener("wheel", this.Qt.bind(this), {
                    passive: !1
                }),
                this._container.addEventListener("contextmenu", this.EL.bind(this)),
                this._container.addEventListener("keydown", this.ii.bind(this))
            }
            ,
            n.prototype.fireEvent = function(t, i) {
                if (i) {
                    i.Adt = t;
                    var n = this._map.getStatus();
                    if ("scrollWheel" === t) {
                        if (!n.scrollWheel)
                            return void this.oi.disable();
                        this.oi.enable()
                    }
                    var s, r = (e = w.mousePos(this._container, i, this._map))[0], e = e[1], o = (h = this._map.getView().containerTolnglat(r, e))[0], h = h[1];
                    if ("mousemove" === t && this.ri && this.ri.P$)
                        s = this.ri;
                    else if ("dragstart" === t || "dragging" === t || "dragend" === t)
                        switch (t) {
                        case "dragstart":
                            s = !n.pickWhenMoving && this._map.TL() ? this.ri : this.si(i),
                            this.ri = s;
                            break;
                        case "dragging":
                            s = this.ri;
                            break;
                        case "dragend":
                            s = this.ri,
                            this.ri = undefined
                        }
                    else
                        s = !n.pickWhenMoving && this._map.TL() ? this.ri : this.si(i);
                    var a = this.hi(s, t)
                      , u = new U.LngLat(o,h)
                      , o = {
                        lnglat: u,
                        target: s,
                        pixel: r = new U.Pixel(r,e),
                        originEvent: i,
                        pos: e = this._map.getProjection().project(o, h),
                        vectorIndex: 0
                    }
                      , h = (s && (o.vectorIndex = s && s.iE && i.lnglat && s.iE(i.lnglat) || 0),
                    -1 !== ["mouseover", "mousemove", "mouseout", "mouseenter", "mouseleave"].indexOf(t) ? this.ui(t, o) : s && this.ci(s, t, o),
                    o.target)
                      , o = {
                        lnglat: u,
                        target: s,
                        pixel: r,
                        originEvent: i,
                        pos: e
                    };
                    h && "poi" !== h.type && !a || (o.target = this._map),
                    s && "poi" === s.type || s && a ? this._map.emit(t, o) : "dblclick" === t && s ? this.fi.disable() : "dragstart" !== t && "dragging" !== t && "dragend" !== t || !s || !s.getDraggable() && "AMap.InfoWindow" !== s.type && "AMap.ContextMenu" !== s.type ? s || (n.dragEnable || "dragging" !== t && "dragstart" !== t && "dragend" !== t) && this._map.emit(t, o) : "dragend" === t ? this.ft.enable() : this.ft.disable()
                }
            }
            ,
            n.prototype.hi = function(t, i) {
                return !!t && "poi" !== t.type && !("dragstart" === i || "dragging" === i || "dragend" === i || !this._map.getStatus().allBubble && !Boolean(t.getOptions().bubble))
            }
            ,
            n.prototype.ti = function(t) {
                this.fi.enable(),
                this.fireEvent("dblclick", t),
                this.fi.ut(t)
            }
            ,
            n.prototype.Jt = function(t) {
                this._map.cancelMapAnimate(),
                this.Ht = "mousedown",
                this.fireEvent("mousedown", t),
                this.ft.enable(),
                this.ft.L(t),
                this.ei.L(t),
                this.$ = w.mousePos(this._container, t, this._map)
            }
            ,
            n.prototype.OL = function(t) {
                this.fireEvent("mouseover", t)
            }
            ,
            n.prototype.DL = function(t) {
                this.fireEvent("mouseenter", t)
            }
            ,
            n.prototype.PL = function(t) {
                this.fireEvent("mouseleave", t)
            }
            ,
            n.prototype.BL = function(t) {
                this.fireEvent("mouseout", t)
            }
            ,
            n.prototype.tt = function(t) {
                var i = this;
                "mousedown" !== this.Ht || t.ctrlKey || (setTimeout(function() {
                    i.nB = 0
                }, 300),
                this.Ht = "false",
                2 === t.button ? this.fireEvent("rightclick", t) : (this.nB++,
                2 <= this.nB ? (this.fi.enable(),
                this.fireEvent("dblclick", t),
                this.fi.ut(t),
                this.nB = 0) : this.fireEvent("click", t))),
                this.fireEvent("mouseup", t)
            }
            ,
            n.prototype.FL = function(t) {
                "move" !== this.Ht && this.fireEvent("click", t)
            }
            ,
            n.prototype.jL = function(t) {
                var i;
                "mousedown" === this.Ht && (i = w.mousePos(this._container, t, this._map),
                1 < Math.abs(this.$[0] - i[0]) || 1 < Math.abs(this.$[1] - i[1])) && (this.Ht = "move"),
                this.fireEvent("mousemove", t)
            }
            ,
            n.prototype.Kt = function(t) {
                var i = this;
                "infoWindow" !== t.cH && "markerContent" !== t.cH && t.cancelable && t.preventDefault(),
                this.oB = "touchstart",
                this.$ = w.mousePos(this._container, t, this._map),
                this._map.cancelMapAnimate(),
                this.fireEvent("touchstart", t),
                this.rB = (new Date).getTime(),
                t.Hdt = this.rB,
                this.ft.enable(),
                this.ft.P(t),
                this.fi.P(t, this.ft),
                this.ni.P(t),
                clearTimeout(this.aB),
                1 === t.touches.length && (this.aB = setTimeout(function() {
                    i.fireEvent("rightclick", t)
                }, 800))
            }
            ,
            n.prototype.gt = function(t) {
                this.$ && (t = w.mousePos(this._container, t, this._map),
                1 < Math.abs(t[0] - this.$[0]) || 1 < Math.abs(t[1] - this.$[1])) && "touchstart" === this.oB && (this.oB = "touchmove")
            }
            ,
            n.prototype.N = function(t) {
                var i = this
                  , n = (new Date).getTime();
                this.fireEvent("touchend", t),
                clearTimeout(this.aB),
                "touchstart" === this.oB && n - this.rB < 800 && (this.oB = "false",
                this.fireEvent("click", t),
                setTimeout(function() {
                    i.dH = 0
                }, 300),
                this.dH++,
                2 <= this.dH) && (this.fireEvent("dblclick", t),
                this.dH = 0),
                this.fi.vt(t)
            }
            ,
            n.prototype.Qt = function(t) {
                this._map.cancelMapAnimate(),
                this.fireEvent("mousewheel", t),
                this._map.getStatus().scrollWheel && (t.preventDefault(),
                this.ft.disable(),
                this.oi.Ut(t))
            }
            ,
            n.prototype.EL = function(t) {
                t.ctrlKey,
                t.preventDefault()
            }
            ,
            n.prototype.si = function(t) {
                for (var i, s = (n = this._map).DF(), e = n.pi, r = n.di, n = n.vm, h = s.concat([e, r, n]), r = (e = w.mousePos(this._container, t, this._map))[0], n = e[1], e = (s = this._map.getView().containerTolnglat(r, n))[0], o = (t.lnglat = new U.LngLat(e,s[1]),
                t.pixel = new U.Pixel(r,n),
                h.length - 1); 0 <= o; o--) {
                    var a = h[o];
                    if (a = a && a.vi(t)) {
                        if (!a.getOptions) {
                            i = a;
                            break
                        }
                        if (!0 !== a.getOptions().noSelect) {
                            i = a;
                            break
                        }
                    }
                }
                return i
            }
            ,
            n.prototype.ui = function(t, i) {
                var s = void 0 === (s = (n = this.mi).yi) ? null : s
                  , e = void 0 === (e = n.xi) ? null : e
                  , n = n.vectorIndex
                  , r = i.target;
                "mousemove" !== t && "mouseleave" !== t || ("mousemove" === t ? s ? r ? s.hS !== r.hS || (void 0 === n ? -1 : n) !== i.vectorIndex ? (this.ci(s, "mouseout", e),
                this.ci(r, "mouseover", i)) : this.ci(r, "mousemove", i) : this.ci(s, "mouseout", e) : r && this.ci(r, "mouseover", i) : "mouseleave" === t && s && this.ci(s, "mouseout", e),
                this.mi.yi = r,
                this.mi.vectorIndex = i.vectorIndex,
                this.mi.xi = i)
            }
            ,
            n.prototype.ci = function(t, i, n) {
                "poi" === t.type ? this._map.getStatus().isHotspot && this.bi(t, i, n) : t.emit(i, n)
            }
            ,
            n.prototype.bi = function(t, i, n) {
                var s, e, r, h = "hotspot";
                switch (i) {
                case "click":
                    this._map.setCursor("pointer"),
                    s = h + i;
                    break;
                case "mouseover":
                    this._map.setCursor("pointer"),
                    s = h + "over";
                    break;
                case "mouseout":
                    this._map.setCursor(""),
                    s = h + "out"
                }
                s && (r = (e = this._map.getProjection().unproject(t.lnglat[0], t.lnglat[1]))[0],
                t = {
                    type: s,
                    id: t.id,
                    name: t.name,
                    lnglat: new U.LngLat(r,e[1]),
                    originEvent: n.originEvent
                },
                this._map.emit(s, t))
            }
            ,
            n.prototype.ii = function(t) {
                var i, n;
                this._map.getStatus().keyboardEnable && (i = this._map.getZoom(),
                n = this._map.getRotation(),
                "=" === t.key ? this._map.setZoom(i + 1, !0) : "-" === t.key && this._map.setZoom(i - 1, !0),
                t.ctrlKey ? "ArrowLeft" === t.key ? this._map.setRotation(n - 90, !0) : "ArrowRight" === t.key && this._map.setRotation(n + 90, !0) : "ArrowUp" === t.key ? this._map.panBy(0, 300) : "ArrowDown" === t.key ? this._map.panBy(0, -300) : "ArrowLeft" === t.key ? this._map.panBy(300, 0) : "ArrowRight" === t.key && this._map.panBy(-300, 0))
            }
            ;
            var ot = n;
            function n(t) {
                this.Ht = "false",
                this.oB = "false",
                this.nB = 0,
                this.dH = 0,
                this.aB = 0,
                this.rB = 0,
                this.mi = {
                    yi: null,
                    xi: null
                },
                this._map = t,
                this._container = this._map.getMapsContainer(),
                this.ft = new Q(this._container,t),
                this.ft.enable(),
                this.oi = new st(this._container,t),
                this.oi.enable(),
                this.fi = new $(this._container,t),
                this.fi.enable(),
                this.ni = new tt(this._container,t),
                this.ni.enable(),
                this.ei = new rt(this._container,t),
                this.ei.enable()
            }
            new U.rW({}),
            at = U.Event,
            U.Ei(ft, at),
            ft.prototype.lo = function() {
                return this.Oo
            }
            ,
            ft.prototype.destroy = function() {}
            ,
            ft.prototype.Fo = function(t) {
                !t || t === this.Oo || this.pS || this.Oo || (this.pS = !0,
                this.Oo = !0,
                this.emit("complete"))
            }
            ,
            ft.prototype.rG = function(t, i) {
                return !1
            }
            ,
            ft.prototype.UH = function(t) {}
            ,
            ft.prototype.Eo = function() {
                this.map.setNeedUpdate(!0)
            }
            ;
            var at, ut = U.dZ([U.pZ("Source")], ft);
            function ft(t, i, n, s) {
                var e = at.call(this) || this;
                return e.map = n,
                e.layer = s,
                e.Oo = !1,
                e.pS = !1,
                e._id = t.id,
                e.Wt = t.type,
                e._tileUrl = t.tileUrl,
                t.url && (e.$o = t.url),
                e
            }
            Object.defineProperty(lt.prototype, "size", {
                get: function() {
                    return U.keys(this.VL).length
                },
                eb: !1,
                nb: !0
            }),
            lt.prototype.clear = function() {
                this.VL = {}
            }
            ,
            lt.prototype.set = function(t, i) {
                this.VL[t] = i
            }
            ,
            lt.prototype.get = function(t) {
                return this.VL[t]
            }
            ,
            lt.prototype["delete"] = function(t) {
                delete this.VL[t]
            }
            ,
            lt.prototype.has = function(t) {
                return "undefined" != typeof this.VL[t]
            }
            ;
            var ct = lt;
            function lt() {
                this.VL = {}
            }
            var h = "newer"
              , o = "older"
              , s = (e.prototype.Uo = function(t) {
                var i = this.Bo;
                (this.Bo = t) < i && this.MN()
            }
            ,
            e.prototype.keys = function() {
                return new pt(this.Wo)
            }
            ,
            e.prototype.values = function() {
                return new mt(this.Wo)
            }
            ,
            e.prototype.entries = function() {
                return this
            }
            ,
            e.prototype.forEach = function(t, i) {
                "object" != typeof i && (i = this);
                for (var n = this.Wo; n; )
                    t.call(i, n.value, n.key, this),
                    n = n[h]
            }
            ,
            e.prototype.toJSON = function() {
                for (var t = new Array(this.size), i = 0, n = this.Wo; n; )
                    t[i++] = {
                        key: n.key,
                        value: n.value
                    },
                    n = n[h];
                return t
            }
            ,
            e.prototype.toString = function() {
                for (var t = "", i = this.Wo; i; )
                    t += String(i.key) + ":" + i.value,
                    (i = i[h]) && (t += " < ");
                return t
            }
            ,
            e.prototype.Go = function(t) {
                t !== this.Zo && (t[h] && (t === this.Wo && (this.Wo = t[h]),
                t[h][o] = t[o]),
                t[o] && (t[o][h] = t[h]),
                t[h] = undefined,
                t[o] = this.Zo,
                this.Zo && (this.Zo[h] = t),
                this.Zo = t)
            }
            ,
            e.prototype.assign = function(t) {
                for (var i, n = this.Bo || Number.MAX_VALUE, s = (this.qo.clear(),
                t), e = s.next(); !e.done; e = s.next()) {
                    var r = new dt(e.value[0],e.value[1]);
                    if (this.qo.set(r.key, r),
                    i ? (i[h] = r)[o] = i : this.Wo = r,
                    i = r,
                    0 == n--)
                        throw new Error("overflow")
                }
                this.Zo = i,
                this.size = this.qo.size
            }
            ,
            e.prototype.get = function(t, i) {
                if (t = this.qo.get(t))
                    return i && this.Go(t),
                    t.value
            }
            ,
            e.prototype.set = function(t, i) {
                var n = this.qo.get(t);
                return n ? (n.value = i,
                this.Go(n)) : (this.qo.set(t, n = new dt(t,i)),
                this.Zo ? (this.Zo[h] = n)[o] = this.Zo : this.Wo = n,
                this.Zo = n,
                ++this.size,
                this.size > this.Bo && this.MN()),
                this
            }
            ,
            e.prototype.shift = function() {
                var t = this.Wo;
                if (t)
                    return this.Wo[h] ? (this.Wo = this.Wo[h],
                    this.Wo[o] = undefined) : (this.Wo = undefined,
                    this.Zo = undefined),
                    t[h] = t[o] = undefined,
                    t.value.destroy(),
                    this.qo["delete"](t.key),
                    --this.size,
                    [t.key, t.value]
            }
            ,
            e.prototype.find = function(t) {
                return (t = this.qo.get(t)) ? t.value : undefined
            }
            ,
            e.prototype.has = function(t) {
                return this.qo.has(t)
            }
            ,
            e.prototype["delete"] = function(t) {
                if (t = this.qo.get(t))
                    return this.qo["delete"](t.key),
                    t[h] && t[o] ? (t[o][h] = t[h],
                    t[h][o] = t[o]) : t[h] ? (t[h][o] = undefined,
                    this.Wo = t[h]) : t[o] ? (t[o][h] = undefined,
                    this.Zo = t[o]) : this.Wo = this.Zo = undefined,
                    this.size--,
                    t.value
            }
            ,
            e.prototype.clear = function() {
                this.Wo = this.Zo = undefined,
                this.size = 0,
                this.qo.clear()
            }
            ,
            e.prototype.AN = function(t) {
                return "loaded" !== t.value.status || (t = t.value.stamp) && this.wN && t === this.wN
            }
            ,
            e.prototype.QF = function(t) {
                this.wN = t
            }
            ,
            e.prototype.MN = function() {
                if (this.Wo && this.Zo)
                    for (var t = this.Wo, i = this.Zo.key; t && i && t.key !== i; ) {
                        if (this.AN(t))
                            this.Go(t);
                        else if (this.shift(),
                        this.size <= this.Bo)
                            return;
                        t = this.Wo
                    }
            }
            ,
            e);
            function e(t, i) {
                this.entries = i,
                "number" != typeof (this.Bo = t) && (i = t,
                t = 0),
                this.size = 0,
                this.Bo = t,
                this.Wo = this.Zo = undefined,
                this.qo = new ("undefined" != typeof Map ? Map : ct),
                i && (this.assign(i),
                t < 1) && (this.Bo = this.size)
            }
            var dt = function(t, i) {
                this.key = t,
                this.value = i,
                this[h] = undefined,
                this[o] = undefined
            }
              , pt = (vt.prototype.next = function() {
                var t = this.Yo;
                return t ? (this.Yo = t[h],
                {
                    done: !1,
                    value: t.key
                }) : {
                    done: !0,
                    value: undefined
                }
            }
            ,
            vt);
            function vt(t) {
                this.Vo = t
            }
            yt.prototype.next = function() {
                var t = this.Yo;
                return t ? (this.Yo = t[h],
                {
                    done: !1,
                    value: t.value
                }) : {
                    done: !0,
                    value: undefined
                }
            }
            ;
            var mt = yt;
            function yt(t) {
                this.Vo = t
            }
            bt = s,
            U.Ei(Mt, bt),
            Mt.prototype.shift = function() {
                var t = this.Wo;
                if (t)
                    return this.Wo[h] ? (this.Wo = this.Wo[h],
                    this.Wo[o] = undefined) : (this.Wo = undefined,
                    this.Zo = undefined),
                    t[h] = t[o] = undefined,
                    this.qo["delete"](t.key),
                    this.emit("delete", {
                        key: t.key
                    }),
                    --this.size,
                    [t.key, t.value]
            }
            ,
            Mt.prototype.on = function(t, i, n, s) {
                void 0 === n && (n = this),
                void 0 === s && (s = !1);
                for (var e = 0, r = Array.isArray(t) ? t : [t]; e < r.length; e++) {
                    var h = r[e];
                    this._on(h, i, n, s)
                }
                return this
            }
            ,
            Mt.prototype.off = function(t, i, n) {
                void 0 === n && (n = this);
                var s = this.vI;
                if (t in s)
                    for (var e = 0; e < s[t].length; e += 1)
                        if (s[t][e].fn === i && s[t][e].context === n)
                            return s[t].splice(e, 1),
                            this;
                return this
            }
            ,
            Mt.prototype.hasEvents = function(t, i, n) {
                void 0 === n && (n = this);
                var s = this.vI;
                if (t && i && t in s)
                    for (var e = 0; e < s[t].length; e += 1)
                        if (s[t][e].fn === i && s[t][e].context === n)
                            return !0;
                return !1
            }
            ,
            Mt.prototype.clearEvents = function(t) {
                return t ? this.vI[t] && delete this.vI[t] : this.vI = {},
                this
            }
            ,
            Mt.prototype.emit = function(t, i) {
                if (void 0 === i && (i = {}),
                t in this.vI)
                    for (var n = U.Ln(U.Ln({}, i), {
                        type: t
                    }), s = this.vI[t], e = 0, r = s.length; e < r; e += 1) {
                        var h = s[e];
                        h.fn && (h.fn.call(h.context, n),
                        h.once) && (this.vI[t].splice(e, 1),
                        --e,
                        --r)
                    }
                return this
            }
            ,
            Mt.prototype._on = function(t, i, n, s) {
                var e;
                return void 0 === s && (s = !1),
                this.hasEvents(t, i, n = void 0 === n ? this : n) || ((e = this.vI)[t] = e[t] || [],
                e[t].push({
                    fn: i,
                    context: n || this,
                    once: s
                })),
                this
            }
            ;
            var bt, gt = Mt;
            function Mt() {
                var t = null !== bt && bt.apply(this, arguments) || this;
                return t.vI = {},
                t
            }
            kt = U.Event,
            U.Ei(xt, kt),
            xt.prototype.QF = function(t) {
                this.Ho.QF(t)
            }
            ,
            xt.prototype.Xo = function(t) {
                this.Ho.Uo(t)
            }
            ,
            xt.prototype.Jo = function(t) {
                var i = this.ia(t.zo);
                this.keys[i] = 1,
                this.Ho.set(i, t)
            }
            ,
            xt.prototype.Qo = function(t) {
                var i = this.ia(t.zo);
                this.Ho.set(i, t)
            }
            ,
            xt.prototype.getTile = function(t, i) {
                return void 0 === i && (i = !0),
                this.Ko(t) ? this.Ho.get(this.ia(t), i) : null
            }
            ,
            xt.prototype.xf = function(t, i) {
                return void 0 === i && (i = !1),
                this.Ho.has(t) ? this.Ho.get(t, i) : null
            }
            ,
            xt.prototype.ea = function(t) {
                var i = this.ia(t.zo);
                return !!this.Ko(t.zo) && (this.Ho["delete"](i),
                delete this.keys[i],
                !0)
            }
            ,
            xt.prototype.Ko = function(t) {
                return t = this.ia(t),
                !!this.Ho.has(t)
            }
            ,
            xt.prototype.destroy = function() {
                this.Ho.clear()
            }
            ,
            xt.prototype.forEach = function(t) {
                this.Ho.forEach(t)
            }
            ,
            xt.prototype.ia = function(t) {
                return t.key || (t.key = t.z + "," + t.x + "," + t.y)
            }
            ;
            var kt, wt = U.dZ([U.pZ("TileCache")], xt);
            function xt(t) {
                void 0 === t && (t = 500);
                var i = kt.call(this) || this;
                return i.keys = {},
                i.na = t,
                i.Ho = new gt(i.na),
                i
            }
            At = wt,
            U.Ei(Ct, At),
            Ct.prototype.MD = function(t, i) {
                return void 0 === i && (i = U.zB.ALL),
                t ? i === t || t === U.zB.ALL ? "" : i === U.zB.ALL ? t === U.zB.LITE ? U.zB.LEFT : U.zB.LITE : i : i
            }
            ,
            Ct.prototype.ea = function(t) {
                return t.rN(),
                At.prototype.ea.call(this, t)
            }
            ;
            var At, zt = Ct;
            function Ct(t) {
                return t = At.call(this, t = void 0 === t ? 500 : t) || this,
                U.Event.extend("delete", t.Ho, t),
                t
            }
            Tt = wt,
            U.Ei(It, Tt);
            var Tt, St = It;
            function It(t) {
                return t = Tt.call(this, t = void 0 === t ? 500 : t) || this,
                U.Event.extend("delete", t.Ho, t),
                t
            }
            Dt.prototype.Uo = function(t) {
                this.Bo = t
            }
            ,
            Dt.prototype._B = function(t, i, n, s) {
                void 0 === s && (s = this.Bo);
                for (var e = n || "china", r = 0; r < t.length; r += s) {
                    var h = t.slice(r, r + s)
                      , o = this.qN++
                      , h = {
                        wD: this.target(h, o, i, e),
                        ZN: h,
                        id: o
                    };
                    this.KN.push(h),
                    this.YN[o] = h
                }
            }
            ,
            Dt.prototype.qH = function(t) {
                for (var i = [], n = [], s = 0, e = this.KN; s < e.length; s++)
                    for (var r = e[s], h = 0; h < r.ZN.length; h++) {
                        var o = r.ZN[h];
                        if (this.QN(t, o)) {
                            Array.prototype.push.apply(i, r.ZN);
                            break
                        }
                        h === r.ZN.length - 1 && n.push(r)
                    }
                for (var a = 0, u = n; a < u.length; a++) {
                    (r = u[a]).wD && r.wD.cancel();
                    var f = this.KN.indexOf(r);
                    this.KN.splice(f, 1),
                    delete this.YN[r.id],
                    this.JN(r.ZN)
                }
                return {
                    yB: i,
                    SB: n
                }
            }
            ,
            Dt.prototype.QN = function(t, i) {
                return -1 < t.indexOf(i.slice(0, -2))
            }
            ,
            Dt.prototype.CB = function(t) {
                var i = this.YN[t];
                delete this.YN[t],
                i && (t = this.KN.indexOf(i),
                this.KN.splice(t, 1))
            }
            ;
            var Lt = Dt;
            function Dt(t, i, n) {
                void 0 === n && (n = 5),
                this.target = t,
                this.JN = i,
                this.Bo = n,
                this.qN = 0,
                this.KN = [],
                this.YN = {}
            }
            var Ot, Rt = U.Support.scale, s = (Ot = ut,
            U.Ei(r, Ot),
            r.prototype.loadData = function(t, i, n, s) {
                var e = this;
                if ("optimise" === s.loadData() && s.TL())
                    return !1;
                this.aa = t,
                this.sa = [];
                for (var r = t.bounds, h = this.ra(t.optimalZoom), o = this.ha(r, h), a = [], u = t.optimalZoom, r = U.map(o, function(t) {
                    var i = e.fa(t.x, t.z);
                    return t.z + "," + i + "," + t.y
                }), f = this.QH.qH(r), c = [], l = 0; l < o.length; l++) {
                    var d, p, v = o[l], m = new U.ca(v.z,this.fa(v.x, v.z),v.y), y = new U.ca(v.z,v.x,v.y), b = U.Util.kD(m.key, u), g = this.ua.getTile(m, !0);
                    g ? (d = this.ua.MD(g.tag, b)) && (g.tag = b,
                    p = v.key + "," + U.Util.SD(d),
                    f.yB.indexOf(p) < 0) && c.push(p) : (p = m.key + "," + U.Util.SD(b),
                    f.yB.indexOf(p) < 0 && ((m = new U.pa(m)).status = U.TileState.LOADING,
                    m.xB = U.TileState.LOADING,
                    this.ua.Jo(m),
                    m.tag = b,
                    m.gB = b,
                    c.push(p))),
                    !g || g.status !== U.TileState.LOADED && g.status !== U.TileState.RELOADING || this.sa.push(y),
                    g && (g.status === U.TileState.LOADED || g.status === U.TileState.RELOADING) || a.push(v),
                    g && g.status === U.TileState.LOADED && g.version && g.version !== this.VH && (this.sa.push(y),
                    g.status = U.TileState.RELOADING,
                    c.push(v.key + "," + U.Util.SD(g.tag)),
                    d = this.ua.MD(g.tag, b)) && (p = v.key + "," + U.Util.SD(d),
                    f.yB.indexOf(p) < 0) && c.push(p)
                }
                return this.da(t, this.sa, a, s),
                this.PE(c, "china"),
                this.zD(c, t, h, s, n, undefined),
                0 === c.length
            }
            ,
            r.prototype.getData = function(i) {
                var n = this
                  , t = i.bounds
                  , s = this.ra(i.optimalZoom)
                  , e = this.ha(t, s)
                  , r = []
                  , h = {}
                  , o = (14 === s && (h = this.ha(t, 15, !0)),
                this.map.qF());
                if (this.ua.QF(o),
                this.sa.sort(function(t) {
                    return n.ra(i.optimalZoom) === t.z ? 1 : -1
                }),
                0 < this.sa.length)
                    for (var a = 0; a < this.sa.length; a++) {
                        var u, f = this.sa[a], c = this.ua.getTile(f, !0), l = 0, d = 0, p = [0, 0], v = i.centerCoord;
                        c ? (v = U.lcs.getLocalByCoord([v[0], v[1]]),
                        i.optimalZoom >= U.Ra ? (u = U.lcs.getSize(),
                        l = c.localCoord.x - v.x,
                        d = c.localCoord.y - v.y,
                        0 != l && (l *= u[0],
                        p[0] = l),
                        0 != d && (d *= u[1],
                        p[1] = d),
                        i.optimalZoom >= U.Ra && U.za >= c.zo.z && (p[0] = -v.center[0],
                        p[1] = -v.center[1])) : i.optimalZoom < U.Ra && U.za < c.zo.z && (p[0] = v.center[0],
                        p[1] = v.center[1])) : (l = new U.ca(f.z,this.fa(f.x, f.z),f.y),
                        (d = this.ua.getTile(l, !0)) && (c = new U.pa(f),
                        u = 1 << f.z,
                        (f.x < 0 || f.x >= u) && (v = Math.floor(f.x / u),
                        p[0] += 20037508.342789244 * v * 2),
                        l = d.tag,
                        c.Ro = d.Ro,
                        c.ID(d),
                        c.Sa = p,
                        c.status = d.status,
                        c.tag = l)),
                        c && (c.stamp = o,
                        c.Sa = p,
                        r.push(c))
                    }
                var m = i.optimalZoom
                  , t = U.every(e, function(s) {
                    return U.some(r, function(t) {
                        var i = t.zo.key
                          , n = t.zo.z
                          , n = U.Util.VF(n, m)
                          , t = t.tag
                          , t = U.Util.LD(t, n);
                        return i === s.key && t
                    })
                })
                  , e = this.jE(r)
                  , e = (t && (this.a_ = !0,
                this.map.bZ.dynamic.set("firstAllLoaded", !0)),
                e && this.map.bZ.dynamic.set("firstLabelDataAllLoaded", !0),
                {
                    s_: this.a_,
                    fo: !!t && e,
                    yZ: e,
                    tiles: r,
                    Ca: h,
                    outseaData: undefined
                });
                return 0 !== r.length && !t || this.Fo(!0),
                e.tiles = this.UE(r, s),
                e
            }
            ,
            r.prototype.pe = function(t) {
                return t = new U.ca(t[0],t[1],t[2]),
                this.ua.getTile(t)
            }
            ,
            r.prototype.ra = function(t) {
                return ("fast" !== this.map.bZ.MZ.drawMode || this.map.bZ.dynamic.get("firstPaint") ? {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 10,
                    11: 10,
                    12: 10,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14,
                    23: 14,
                    24: 14,
                    25: 14,
                    26: 14,
                    27: 14,
                    28: 14,
                    29: 14,
                    30: 14
                } : {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 8,
                    11: 8,
                    12: 8,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14,
                    23: 14,
                    24: 14,
                    25: 14,
                    26: 14,
                    27: 14,
                    28: 14,
                    29: 14,
                    30: 14
                })[t]
            }
            ,
            r.prototype.Ept = function(t) {
                return {
                    10: 10,
                    11: 10,
                    12: 10,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14
                }[t]
            }
            ,
            r.prototype.YE = function(t) {
                var i = this;
                return t(null, {
                    GW: "worker",
                    cb: function(t) {
                        i.dynamicTextVerticeLoadedByTile(t)
                    }
                }),
                !0
            }
            ,
            r.prototype.destroy = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request),
                    t.destroy()
                }),
                this.ua.destroy(),
                this.sa = [],
                this.la = [],
                this.mapStyle && this.mapStyle.destroy && (this.mapStyle.destroy(),
                delete this.mapStyle),
                this.R_ && this.R_.destroy && (this.R_.destroy(),
                delete this.R_)
            }
            ,
            r.prototype.reload = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request),
                    t.reload()
                }),
                this.sa = [],
                this.la = []
            }
            ,
            r.prototype.Aa = function(t) {
                var i;
                t.zo && (i = this.ua.getTile(t.zo)) && (i.rO({
                    Ta: !0
                }, t.tag),
                i.xa({
                    Ta: !0
                }, t.tag),
                i.JE({
                    Ta: !0
                }, t.tag))
            }
            ,
            r.prototype.setTileCacheSize = function(t) {
                t = t || (U.Support.$e ? 50 : 200),
                this.ua.Xo(t)
            }
            ,
            r.prototype.UH = function(t) {
                this.VH = t
            }
            ,
            r.prototype.dynamicTextVerticeLoaded = function(t) {
                console.log("errorr")
            }
            ,
            r.prototype.dynamicTextVerticeLoadedByTile = function(t) {
                for (var i = 0, n = t.data; i < n.length; i++) {
                    var s = n[i];
                    this.dynamicTextVerticeLoaded({
                        data: s.data,
                        tag: s.tag,
                        XE: s.XE
                    })
                }
            }
            ,
            r.prototype.Ia = function() {
                this.map.on("tileSdfInfoFinished", this.Aa.bind(this))
            }
            ,
            r.prototype.zD = function(t, i, n, s, e, r, h) {
                void 0 === r && (r = "transit,road,region,building");
                var a = {}
                  , o = ((o = this.cP()) && (a = o.getState().vS),
                a = U.Ln(U.Ln({}, a), {
                    buildingColor: U.Ln({}, s.getBuildingColor())
                }),
                {
                    zoom: i.zoom,
                    optimalZoom: i.optimalZoom,
                    projectionId: i.projectionId,
                    mS: a,
                    viewMode: i.viewMode,
                    showBuildingBlock: this.map.yS(),
                    ZL: i.zoom,
                    hH: r
                });
                this.QH._B(t, o, h)
            }
            ,
            r.prototype.cP = function() {
                for (var t, i = this.map.getLayers(), n = 0; n < i.length; n++)
                    if ("AMap.Buildings" === (s = i[n]).CLASS_NAME && !s.getState().u$) {
                        t = s;
                        break
                    }
                if (!t)
                    for (var s, n = 0; n < i.length; n++)
                        if ("AMap.Buildings" === (s = i[n]).CLASS_NAME) {
                            t = s;
                            break
                        }
                return t
            }
            ,
            r.prototype.ma = function(t, i) {
                var n, s = new RegExp(/\{(\w|\,)+\}/g);
                return s.test(this._tileUrl) ? (n = this._tileUrl.match(s)[0].replace(/[\{|\}]/g, "").split(","),
                this._tileUrl.replace(s, n[(t + i) % 4])) : this._tileUrl
            }
            ,
            r.prototype.AD = function() {
                return this._tileUrl
            }
            ,
            r.prototype.ha = function(t, i, n) {
                void 0 === n && (n = !1);
                var s = [t[0], t[3]]
                  , t = [t[2], t[1]]
                  , s = this.Ga(s, i)
                  , t = this.Ga(t, i)
                  , e = s[0]
                  , r = s[1]
                  , h = t[0]
                  , o = t[1];
                if (n)
                    return {
                        ja: e,
                        Fa: r,
                        Oa: h,
                        Ea: o,
                        z: i
                    };
                this.Pa = {
                    ja: e,
                    Fa: r,
                    Oa: h,
                    Ea: o,
                    z: i
                };
                for (var a = [], u = e; u <= h; u += 1)
                    for (var f = r; f <= o; f += 1)
                        a.push(new U.ca(i,u,f));
                return this.Da(a),
                a
            }
            ,
            r.prototype.da = function(t, i, n, s) {
                var e = [3, 6, 8, 10, 12, 14]
                  , r = this.ra(t.optimalZoom);
                if (this.Za)
                    for (var h = Math.min(14, r + 3), o = r + 1; n.length && o <= h; o += 1)
                        if (-1 !== e.indexOf(o)) {
                            for (var a = o - r, u = [], f = [], c = n.length - 1; 0 <= c; --c)
                                for (var l = n[c].x << a, d = n[c].y << a, p = 1 << a; 0 <= p; --p)
                                    for (var v = 1 << a; 0 <= v; --v) {
                                        var m = new U.ca(o,this.fa(l + p, o),d + v)
                                          , y = new U.ca(o,l + p,d + v);
                                        ((M = this.ua.getTile(m, !0)) && M.status === U.TileState.LOADED ? f : u).push(y)
                                    }
                            f.length && i.push.apply(i, f),
                            n = u
                        }
                if (this.qa)
                    for (var b = this.xt[0], o = r - 1; n.length && b <= o; --o)
                        if (-1 !== e.indexOf(o)) {
                            for (var f = [], u = [], g = {}, c = n.length - 1; 0 <= c; --c) {
                                var M, k = n[c], a = o, w = k.z - a, p = k.x >> w, v = k.y >> w;
                                g[k = (m = new U.ca(a,p,v)).key] || (w = new U.ca(a,this.fa(p, a),v),
                                y = new U.ca(a,p,v),
                                M = this.ua.getTile(w, !0),
                                g[k] = !0,
                                (M && M.status === U.TileState.LOADED ? f : u).push(y))
                            }
                            f.length && i.push.apply(i, f),
                            n = u
                        }
                return i
            }
            ,
            r.prototype.Da = function(t) {
                var e, r, h;
                t.length && (e = this.Pa.z,
                r = (this.Pa.ja + this.Pa.Oa) / 2,
                h = (this.Pa.Fa + this.Pa.Ea) / 2,
                t.sort(function(t, i) {
                    var n = (t.x << e - t.z) - r
                      , t = (t.y << e - t.z) - h
                      , s = (i.x << e - i.z) - r;
                    return n * n + t * t <= s * s + (i = (i.y << e - i.z) - h) * i ? -1 : 1
                }))
            }
            ,
            r.prototype.Ga = function(t, i) {
                var n = 180 / (i = Math.pow(2, i));
                return [Math.floor(t[0] / (360 / i)) + i / 2, i / 2 - Math.ceil(t[1] / n)]
            }
            ,
            r.prototype.fa = function(t, i) {
                for (var n = 1 << (i = i || this.aa.optimalZoom); t < 0 || n <= t; )
                    t = n <= t ? t - n : t < 0 ? n + t : t;
                return t
            }
            ,
            r.prototype.sD = function() {
                var e, r, h = this;
                this.map.bZ.dynamic.get("_preloadNebulaIcons") || (this.map.bZ.dynamic.set("_preloadNebulaIcons", !0),
                e = U.G8t.getIconUrls({
                    Cmt: AMap.getConfig().iconVersion,
                    Smt: AMap.getConfig().iconClass,
                    key: AMap.getConfig().key
                }),
                (r = this.z_).loadImages(e, {
                    type: "icon",
                    imageBitmap: U.Support.imageBitmap,
                    cb: function() {
                        for (var t = [], i = 0; i < e.length; i++) {
                            var n = e[i]
                              , s = r.getImage(n);
                            t.push({
                                img: s.img,
                                name: n,
                                iconIndex: i,
                                width: s.width,
                                height: s.height
                            })
                        }
                        h.map.so.sv(t)
                    }
                }, {
                    poiImgVersion: this.ymt,
                    bmt: this.Bdt
                }))
            }
            ,
            r.prototype.PE = function(t, i) {
                for (var n = 0, s = t; n < s.length; n++) {
                    var e = s[n].split(",").slice(0, 3).join(",");
                    (e = this.ua.xf(e)) && (e.region = i)
                }
            }
            ,
            r.prototype.UE = function(t, i) {
                void 0 === t && (t = []);
                var n = [];
                if (10 <= i) {
                    for (var s = 0, e = t; s < e.length; s++) {
                        var r = e[s];
                        "china" !== r.region && "world" !== r.region && "oversea" !== r.region || n.push(r)
                    }
                    return n
                }
                return t
            }
            ,
            r.prototype.jE = function(t) {
                for (var i = !!t.length, n = 0, s = t; n < s.length; n++) {
                    var e = s[n].data;
                    if (i)
                        for (var r = 0, h = e; r < h.length; r++) {
                            var o = h[r];
                            if (!(i = i && !!o.Ta))
                                break
                        }
                }
                return i
            }
            ,
            r);
            function r(t, i, n, s) {
                var o = Ot.call(this, t, i, n, s) || this
                  , i = (o.xt = U.zoomRange,
                o.sa = [],
                o.la = [],
                o.qa = !0,
                o.Za = !0,
                o.a_ = !1,
                o.$D = 0,
                o.hD = [U.G8t.getIconUrls("icons_1", {
                    Cmt: AMap.getConfig().iconVersion,
                    Smt: AMap.getConfig().iconClass,
                    key: AMap.getConfig().key
                }), U.G8t.getIconUrls("icons_4", {
                    Cmt: AMap.getConfig().iconVersion,
                    Smt: AMap.getConfig().iconClass,
                    key: AMap.getConfig().key
                }), U.G8t.getIconUrls("icons_9", {
                    Cmt: AMap.getConfig().iconVersion,
                    Smt: AMap.getConfig().iconClass,
                    key: AMap.getConfig().key
                }), U.G8t.getIconUrls("icons_64", {
                    Cmt: AMap.getConfig().iconVersion,
                    Smt: AMap.getConfig().iconClass,
                    key: AMap.getConfig().key
                })],
                o.VH = "",
                o.Bdt = "",
                o.ymt = "",
                o.wH = function(t) {
                    !o.map.yH || parseInt(t.key.split(",")[0], 10) < 10 || o.map.yH.kH(t.key)
                }
                ,
                o.Xa = t.tileSize,
                o._tileUrl = t.tileUrl,
                o.tG = null,
                U.Support.$e ? 30 : 200);
                o.ua = new zt(i),
                o.NE = new St(i),
                n.Wdt && (o.hD = n.Wdt),
                window.xZ = o.ua;
                t = (s = AMap.getConfig()).tileVersion,
                i = s.tileCombo,
                n.gn.Ha({
                    scale: Rt,
                    showLabel: n.showLabel,
                    tileVersion: t,
                    iconVersion: s.iconVersion,
                    iconClass: s.iconClass,
                    DD: -1 !== location.search.indexOf("forceAll"),
                    tileCombo: i
                }),
                o.R_ = n.R_,
                o.z_ = n.z_,
                n.gn.Ja(AMap.getConfig().protocol),
                o.Bdt = AMap.getConfig().key,
                o.ymt = AMap.getConfig().poiImgVersion,
                o.mapStyle = n.mapStyle,
                o.mapStyle.pn(function(t) {
                    n && n.gn && n.gn.Ka({
                        value: t,
                        TY: "fast" === o.map.bZ.MZ.drawMode
                    })
                }),
                o.Ia(),
                o.ua.on("delete", o.wH),
                t = n.options.tileCombo ? 5 : 1;
                return "fast" === n.bZ.MZ.drawMode && (t = 1),
                o.QH = new Lt(function(t, h, i, n) {
                    var s = o.AD()
                      , e = o.map.bZ.dynamic.get("firstLabelDataAllLoaded") || !1;
                    return new U.vH(o.map.gn.va({
                        url: s,
                        zoom: i.zoom,
                        optimalZoom: i.optimalZoom,
                        projectionId: i.projectionId,
                        mS: i.mS,
                        viewMode: i.viewMode,
                        showBuildingBlock: i.showBuildingBlock,
                        ya: t,
                        ZL: i.zoom,
                        hH: i.hH,
                        kZ: e,
                        showOversea: o.map.Dpt,
                        languageCode: o.map.options.languageCode
                    }, function(t) {
                        o.QH.CB(h);
                        for (var i = 0, n = t; i < n.length; i++) {
                            var s, e = n[i], r = e && o.ua.getTile(e.zo);
                            r && (delete r.request,
                            r.xa(e.ba, e.tag),
                            o.map.Mv.t0(r.zo),
                            r.status = U.TileState.LOADED,
                            e = U.wa.ga(r.zo.x, r.zo.y, r.zo.z, "EPSG:3857"),
                            s = U.lcs.getLocalByCoord([e[0], e[1]]),
                            r.localCoord = s,
                            r.Ro = e,
                            o.map.mm) && r.LY(o.map.mm.context)
                        }
                        o.map.setNeedUpdate(!0)
                    }))
                }
                ,function(t) {
                    for (var i = 0, n = t; i < n.length; i++) {
                        var s = n[i];
                        (s = o.ua.xf(s.slice(0, -2))) && s.status !== U.TileState.LOADED && o.ua.ea(s)
                    }
                }
                ,t),
                "fast" === n.bZ.MZ.drawMode && o.map.bZ.dynamic.subscribe("firstPaint", function() {
                    o.QH.Uo(5)
                }, o, !0),
                o
            }
            function a() {}
            a.prototype.Qa = function(t) {
                for (var i = this.createEmpty(), n = 0, s = t.length; n < s; n += 1)
                    this.extendCoordinate(i, t[n]);
                return i
            }
            ,
            a.prototype.ns = function(t, i, n) {
                var s = Math.min.apply(null, t)
                  , t = Math.max.apply(null, t)
                  , e = Math.min.apply(null, i)
                  , i = Math.max.apply(null, i);
                return this.os(s, t, e, i, n)
            }
            ,
            a.prototype.buffer = function(t, i) {
                t[0] -= i,
                t[1] -= i,
                t[2] += i,
                t[3] += i
            }
            ,
            a.prototype.clone = function(t) {
                return t.slice()
            }
            ,
            a.prototype.ss = function(t, i) {
                return t[0] <= i[0] && i[0] <= t[2] && t[1] <= i[1] && i[1] <= t[3]
            }
            ,
            a.prototype.rs = function(t, i) {
                return t[0] <= i[0] && i[2] <= t[2] && t[1] <= i[1] && i[3] <= t[3]
            }
            ,
            a.prototype.createEmpty = function() {
                return [Infinity, Infinity, -Infinity, -Infinity]
            }
            ,
            a.prototype.os = function(t, i, n, s, e) {
                return void 0 !== e ? (e[0] = t,
                e[2] = i,
                e[1] = n,
                e[3] = s,
                e) : [t, n, i, s]
            }
            ,
            a.prototype.empty = function(t) {
                return t[0] = t[1] = Infinity,
                t[2] = t[3] = -Infinity,
                t
            }
            ,
            a.prototype.equals = function(t, i) {
                return t[0] === i[0] && t[2] === i[2] && t[1] === i[1] && t[3] === i[3]
            }
            ,
            a.prototype.extend = function(t, i) {
                i[0] < t[0] && (t[0] = i[0]),
                t[2] < i[2] && (t[2] = i[2]),
                i[1] < t[1] && (t[1] = i[1]),
                t[3] < i[3] && (t[3] = i[3])
            }
            ,
            a.prototype.extendCoordinate = function(t, i) {
                +i[0] < t[0] && (t[0] = i[0]),
                t[2] < +i[0] && (t[2] = i[0]),
                +i[1] < t[1] && (t[1] = i[1]),
                t[3] < +i[1] && (t[3] = i[1])
            }
            ,
            a.prototype.hs = function(t) {
                return [t[0], t[1]]
            }
            ,
            a.prototype.ls = function(t) {
                return [t[2], t[1]]
            }
            ,
            a.prototype.getCenter = function(t) {
                return [(t[0] + t[2]) / 2, (t[1] + t[3]) / 2]
            }
            ,
            a.prototype.us = function(t, i, n, s, e) {
                for (var r, h, o = i * s[0] / 2, i = i * s[1] / 2, a = Math.cos(n), u = Math.sin(n), f = [-o, -o, o, o], c = [-i, i, -i, i], l = 0; l < 4; l += 1)
                    r = f[l],
                    h = c[l],
                    f[l] = t[0] + r * a - h * u,
                    c[l] = t[1] + r * u + h * a;
                return this.ns(f, c, e)
            }
            ,
            a.prototype.getHeight = function(t) {
                return t[3] - t[1]
            }
            ,
            a.prototype.getSize = function(t) {
                return [t[2] - t[0], t[3] - t[1]]
            }
            ,
            a.prototype.cs = function(t) {
                return [t[0], t[3]]
            }
            ,
            a.prototype.fs = function(t) {
                return [t[2], t[3]]
            }
            ,
            a.prototype.getWidth = function(t) {
                return t[2] - t[0]
            }
            ,
            a.prototype.intersects = function(t, i) {
                return t[0] <= i[2] && t[2] >= i[0] && t[1] <= i[3] && t[3] >= i[1]
            }
            ,
            a.prototype.isEmpty = function(t) {
                return t[2] < t[0] || t[3] < t[1]
            }
            ,
            a.prototype.normalize = function(t, i) {
                return [(i[0] - t[0]) / (t[2] - t[0]), (i[1] - t[1]) / (t[3] - t[1])]
            }
            ,
            a.prototype.ps = function(t, i) {
                var n = (t[2] - t[0]) / 2 * (i - 1)
                  , i = (t[3] - t[1]) / 2 * (i - 1);
                t[0] -= n,
                t[2] += n,
                t[1] -= i,
                t[3] += i
            }
            ,
            a.prototype.touches = function(t, i) {
                return this.intersects(t, i) && (t[0] === i[2] || t[2] === i[0] || t[1] === i[3] || t[3] === i[1])
            }
            ,
            a.prototype.transform = function(t, i, n) {
                return i(t = [t[0], t[1], t[0], t[3], t[2], t[1], t[2], t[3]], t, 2),
                this.ns([t[0], t[2], t[4], t[6]], [t[1], t[3], t[5], t[7]], n)
            }
            ;
            var Et = new a
              , l = (u.from = function(t) {
                for (var i = Infinity, n = Infinity, s = -Infinity, e = -Infinity, r = 0, h = t; r < h.length; r++)
                    var o = h[r]
                      , i = Math.min(i, o.southWest.KL)
                      , n = Math.min(n, o.southWest.kT)
                      , s = Math.max(s, o.northEast.KL)
                      , e = Math.max(e, o.northEast.kT);
                return new u(new U.LngLat(i,n),new U.LngLat(s,e))
            }
            ,
            u.xS = function(t) {
                if (t)
                    return t = U.jsonLngLatData(t),
                    new u(Et.Qa(t))
            }
            ,
            u.bS = function(t) {
                if (t && t.length) {
                    for (var i, n = 0, s = U.jsonLngLatData(t); n < s.length; n++) {
                        var e, r = s[n];
                        i ? (e = u.ds(r)) && i.union(e) : i = u.xS(r)
                    }
                    return i
                }
            }
            ,
            u.ds = function(t) {
                if (t)
                    return t = U.jsonLngLatData(t),
                    U.ys(t) ? u.xS(t) : u.xS(t[0])
            }
            ,
            u.ms = function(t) {
                if (t && t.length) {
                    for (var i, n = 0, s = U.jsonLngLatData(t); n < s.length; n++) {
                        var e, r = s[n];
                        i ? (e = u.ds(r)) && i.union(e) : i = u.ds(r)
                    }
                    return i
                }
            }
            ,
            u.prototype.getSouthWest = function() {
                return this.southWest
            }
            ,
            u.prototype.getNorthEast = function() {
                return this.northEast
            }
            ,
            u.prototype.getNorthWest = function() {
                return new U.LngLat(this.southWest.KL,this.northEast.kT,!0)
            }
            ,
            u.prototype.getSouthEast = function() {
                return new U.LngLat(this.northEast.KL,this.southWest.kT,!0)
            }
            ,
            u.prototype.contains = function(t) {
                var i, n, s = this.southWest, e = this.northEast;
                return !U.xs(t) && (t = U.parseLngLatData(t),
                i = s.KL,
                (n = e.KL) < i && (n += 360),
                t.KL >= i) && t.kT >= s.kT && t.KL <= n && t.kT <= e.kT
            }
            ,
            u.prototype.intersects = function(t) {
                var i = this.southWest
                  , n = this.northEast
                  , s = t.southWest
                  , e = (t = t.northEast).kT >= i.kT && s.kT <= n.kT
                  , i = i.KL <= t.KL && s.KL <= n.KL;
                return e && i
            }
            ,
            u.prototype.getCenter = function() {
                var t = this.southWest.KL > this.northEast.KL ? (this.southWest.KL + this.northEast.KL + 360) / 2 % 360 : (this.southWest.KL + this.northEast.KL) / 2
                  , i = (this.southWest.kT + this.northEast.kT) / 2;
                return new U.LngLat(t,i)
            }
            ,
            u.prototype.extend = function(t) {
                return this.southWest.setLng(Math.min(this.southWest.KL, t.KL)),
                this.southWest.setLat(Math.min(this.southWest.kT, t.kT)),
                this.northEast.setLng(Math.max(this.northEast.KL, t.KL)),
                this.northEast.setLat(Math.max(this.northEast.kT, t.kT)),
                this
            }
            ,
            u.prototype.union = function(t) {
                return this.extend(t.southWest).extend(t.northEast)
            }
            ,
            u.prototype.toString = function() {
                return this.southWest.toString() + ";" + this.northEast.toString()
            }
            ,
            u.prototype.toJSON = function() {
                return [this.southWest.lng, this.southWest.lat, this.northEast.lng, this.northEast.lat]
            }
            ,
            u.prototype.getWidth = function() {
                return Math.abs(this.northEast.lng - this.southWest.lng)
            }
            ,
            u.prototype.getHeight = function() {
                return Math.abs(this.southWest.lat - this.northEast.lat)
            }
            ,
            u.prototype.clone = function() {
                return u.from([this])
            }
            ,
            u.prototype.check = function() {
                return !!(this.northEast && this.southWest && this.northEast.lat && this.southWest.lat)
            }
            ,
            u);
            function u() {
                this.className = "AMap.Bounds";
                var i, n, s, e, r, h = "undefined" != typeof Float64Array;
                if (1 === arguments.length && (arguments[0]instanceof Array || h && arguments[0]instanceof Float64Array))
                    e = new U.LngLat(arguments[0][0],arguments[0][1],!0),
                    r = new U.LngLat(arguments[0][2],arguments[0][3],!0);
                else if (2 === arguments.length)
                    e = U.parseLngLatData(arguments[0]),
                    r = U.parseLngLatData(arguments[1]);
                else if (4 === arguments.length)
                    e = new U.LngLat(arguments[0],arguments[1]),
                    r = new U.LngLat(arguments[2],arguments[3]);
                else {
                    if (0 !== arguments.length)
                        throw Error("Invalid Object: Bounds(" + arguments + ")");
                    e = new U.LngLat(-180,-90),
                    r = new U.LngLat(180,90)
                }
                (e.KL > r.KL || e.kT > r.kT) && (h = Math.max(e.KL, r.KL),
                i = Math.min(e.KL, r.KL),
                n = Math.max(e.kT, r.kT),
                s = Math.min(e.kT, r.kT),
                e = new U.LngLat(i,s),
                r = new U.LngLat(h,n)),
                this.southWest = e,
                this.northEast = r
            }
            jt = ut,
            U.Ei(Bt, jt),
            Bt.prototype.loadData = function(t, i, n) {
                return this.ze = i,
                !(this.Oo && !this.io || !this.map.isDOMMode() && !i || (t = this.c0(t, i, n),
                this.io ? t(this.io, "canvas") : ((i = new Image).crossOrigin = "",
                i.onload = t,
                i.src = this.gs.getImageUrl(),
                this.Rs = i),
                0))
            }
            ,
            Bt.prototype.reLoadImgage = function(t) {
                var s = this;
                t && this.Rs && ((t = new Image).crossOrigin = "",
                t.onload = function(t, i) {
                    var n;
                    "image" === (i = void 0 === i ? "image" : i) ? n = t.target : "canvas" === i && (n = t),
                    s._s && s._s.update(n),
                    s.Fo(!0)
                }
                ,
                t.src = this.gs.getImageUrl(),
                this.Rs = t)
            }
            ,
            Bt.prototype.c0 = function(t, e, r) {
                var h = this;
                return function(t, i) {
                    var n, s;
                    void 0 === i && (i = "image"),
                    e && (n = void 0,
                    "image" === i ? (n = t.target,
                    s = n,
                    h._s ? h._s.update(s) : (h._s = e.createTexture(s, {
                        Zi: !0
                    }),
                    h._s.bind(e.gl.CLAMP_TO_EDGE, e.gl.LINEAR, e.gl.LINEAR)),
                    h.Fo(!0)) : "canvas" === i && (s = h.mmt(n = t, function() {
                        h._s ? h._s.update(s) : (h._s = e.createTexture(s, {
                            Zi: !0
                        }),
                        h._s.bind(e.gl.CLAMP_TO_EDGE, e.gl.LINEAR, e.gl.LINEAR)),
                        h.Fo(!0)
                    }))),
                    r()
                }
            }
            ,
            Bt.prototype.getData = function(t) {
                if (this.Oo && this._s) {
                    (i = this.gs.getBounds())instanceof l && (i = i.toJSON());
                    var n = U.lcs.getLocalByCoord([t.centerCoord[0], t.centerCoord[1]])
                      , e = (s = U.ProjectionManager.getProjection(t.projectionId)).project(i[0], i[1])
                      , i = s.project(i[2], i[3])
                      , r = [0, 0, 0, 0];
                    if (t.optimalZoom >= U.Ra) {
                        for (var s = U.lcs.getLocalByCoord([e[0], e[1]]), t = U.lcs.getLocalByCoord([i[0], i[1]]), h = U.lcs.getSize(), r = [s.x - n.x, s.y - n.y, t.x - n.x, t.y - n.y], o = 0; o < r.length; o++)
                            0 !== r[o] && (r[o] *= h[0]);
                        r = [r[0] - s.center[0], r[1] - s.center[1], r[2] - t.center[0], r[3] - t.center[1]]
                    }
                    return this.ze && (this.ks = this.ze.fe(new Float32Array([e[0] + r[0], e[1] + r[1], 0, 1, i[0] + r[2], e[1] + r[1], 1, 1, e[0] + r[0], i[1] + r[3], 0, 0, i[0] + r[2], e[1] + r[1], 1, 1, i[0] + r[2], i[1] + r[3], 1, 0, e[0] + r[0], i[1] + r[3], 0, 0]), 16)),
                    {
                        Ro: this.ws,
                        image: this.Rs,
                        texture: this._s,
                        zs: this.ks,
                        Sa: [0, 0]
                    }
                }
            }
            ,
            Bt.prototype.destroy = function() {
                this.Rs && delete this.Rs,
                this._s && this._s.destroy && (this._s.destroy(),
                delete this._s),
                this.ks && delete this.ks,
                this.gs
            }
            ,
            Bt.prototype.mmt = function(t, i) {
                var n = new Image;
                return t ? (n.onload = function(t) {
                    i(n)
                }
                ,
                t = t.toDataURL(),
                n.src = t,
                n) : (console.log("No canvas element provided."),
                null)
            }
            ;
            var jt, Pt = Bt;
            function Bt(t, i, n, s) {
                return (t = jt.call(this, t, i, n, s) || this).gs = s,
                t.io = s.canvas,
                t
            }
            var Ft, Wt = U.M8t(function(t, i) {
                function u(t, i) {
                    var n = t[0]
                      , s = t[1]
                      , e = t[2]
                      , r = t[3]
                      , s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & e | ~s & r) + i[0] - 680876936 | 0) << 7 | n >>> 25) + s | 0) & s | ~n & e) + i[1] - 389564586 | 0) << 12 | r >>> 20) + n | 0) & n | ~r & s) + i[2] + 606105819 | 0) << 17 | e >>> 15) + r | 0) & r | ~e & n) + i[3] - 1044525330 | 0) << 22 | s >>> 10) + e | 0;
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & e | ~s & r) + i[4] - 176418897 | 0) << 7 | n >>> 25) + s | 0) & s | ~n & e) + i[5] + 1200080426 | 0) << 12 | r >>> 20) + n | 0) & n | ~r & s) + i[6] - 1473231341 | 0) << 17 | e >>> 15) + r | 0) & r | ~e & n) + i[7] - 45705983 | 0) << 22 | s >>> 10) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & e | ~s & r) + i[8] + 1770035416 | 0) << 7 | n >>> 25) + s | 0) & s | ~n & e) + i[9] - 1958414417 | 0) << 12 | r >>> 20) + n | 0) & n | ~r & s) + i[10] - 42063 | 0) << 17 | e >>> 15) + r | 0) & r | ~e & n) + i[11] - 1990404162 | 0) << 22 | s >>> 10) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & e | ~s & r) + i[12] + 1804603682 | 0) << 7 | n >>> 25) + s | 0) & s | ~n & e) + i[13] - 40341101 | 0) << 12 | r >>> 20) + n | 0) & n | ~r & s) + i[14] - 1502002290 | 0) << 17 | e >>> 15) + r | 0) & r | ~e & n) + i[15] + 1236535329 | 0) << 22 | s >>> 10) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & r | e & ~r) + i[1] - 165796510 | 0) << 5 | n >>> 27) + s | 0) & e | s & ~e) + i[6] - 1069501632 | 0) << 9 | r >>> 23) + n | 0) & s | n & ~s) + i[11] + 643717713 | 0) << 14 | e >>> 18) + r | 0) & n | r & ~n) + i[0] - 373897302 | 0) << 20 | s >>> 12) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & r | e & ~r) + i[5] - 701558691 | 0) << 5 | n >>> 27) + s | 0) & e | s & ~e) + i[10] + 38016083 | 0) << 9 | r >>> 23) + n | 0) & s | n & ~s) + i[15] - 660478335 | 0) << 14 | e >>> 18) + r | 0) & n | r & ~n) + i[4] - 405537848 | 0) << 20 | s >>> 12) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & r | e & ~r) + i[9] + 568446438 | 0) << 5 | n >>> 27) + s | 0) & e | s & ~e) + i[14] - 1019803690 | 0) << 9 | r >>> 23) + n | 0) & s | n & ~s) + i[3] - 187363961 | 0) << 14 | e >>> 18) + r | 0) & n | r & ~n) + i[8] + 1163531501 | 0) << 20 | s >>> 12) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s & r | e & ~r) + i[13] - 1444681467 | 0) << 5 | n >>> 27) + s | 0) & e | s & ~e) + i[2] - 51403784 | 0) << 9 | r >>> 23) + n | 0) & s | n & ~s) + i[7] + 1735328473 | 0) << 14 | e >>> 18) + r | 0) & n | r & ~n) + i[12] - 1926607734 | 0) << 20 | s >>> 12) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s ^ e ^ r) + i[5] - 378558 | 0) << 4 | n >>> 28) + s | 0) ^ s ^ e) + i[8] - 2022574463 | 0) << 11 | r >>> 21) + n | 0) ^ n ^ s) + i[11] + 1839030562 | 0) << 16 | e >>> 16) + r | 0) ^ r ^ n) + i[14] - 35309556 | 0) << 23 | s >>> 9) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s ^ e ^ r) + i[1] - 1530992060 | 0) << 4 | n >>> 28) + s | 0) ^ s ^ e) + i[4] + 1272893353 | 0) << 11 | r >>> 21) + n | 0) ^ n ^ s) + i[7] - 155497632 | 0) << 16 | e >>> 16) + r | 0) ^ r ^ n) + i[10] - 1094730640 | 0) << 23 | s >>> 9) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s ^ e ^ r) + i[13] + 681279174 | 0) << 4 | n >>> 28) + s | 0) ^ s ^ e) + i[0] - 358537222 | 0) << 11 | r >>> 21) + n | 0) ^ n ^ s) + i[3] - 722521979 | 0) << 16 | e >>> 16) + r | 0) ^ r ^ n) + i[6] + 76029189 | 0) << 23 | s >>> 9) + e | 0,
                    s = ((s += ((e = ((e += ((r = ((r += ((n = ((n += (s ^ e ^ r) + i[9] - 640364487 | 0) << 4 | n >>> 28) + s | 0) ^ s ^ e) + i[12] - 421815835 | 0) << 11 | r >>> 21) + n | 0) ^ n ^ s) + i[15] + 530742520 | 0) << 16 | e >>> 16) + r | 0) ^ r ^ n) + i[2] - 995338651 | 0) << 23 | s >>> 9) + e | 0,
                    s = ((s += ((r = ((r += (s ^ ((n = ((n += (e ^ (s | ~r)) + i[0] - 198630844 | 0) << 6 | n >>> 26) + s | 0) | ~e)) + i[7] + 1126891415 | 0) << 10 | r >>> 22) + n | 0) ^ ((e = ((e += (n ^ (r | ~s)) + i[14] - 1416354905 | 0) << 15 | e >>> 17) + r | 0) | ~n)) + i[5] - 57434055 | 0) << 21 | s >>> 11) + e | 0,
                    s = ((s += ((r = ((r += (s ^ ((n = ((n += (e ^ (s | ~r)) + i[12] + 1700485571 | 0) << 6 | n >>> 26) + s | 0) | ~e)) + i[3] - 1894986606 | 0) << 10 | r >>> 22) + n | 0) ^ ((e = ((e += (n ^ (r | ~s)) + i[10] - 1051523 | 0) << 15 | e >>> 17) + r | 0) | ~n)) + i[1] - 2054922799 | 0) << 21 | s >>> 11) + e | 0,
                    s = ((s += ((r = ((r += (s ^ ((n = ((n += (e ^ (s | ~r)) + i[8] + 1873313359 | 0) << 6 | n >>> 26) + s | 0) | ~e)) + i[15] - 30611744 | 0) << 10 | r >>> 22) + n | 0) ^ ((e = ((e += (n ^ (r | ~s)) + i[6] - 1560198380 | 0) << 15 | e >>> 17) + r | 0) | ~n)) + i[13] + 1309151649 | 0) << 21 | s >>> 11) + e | 0,
                    s = ((s += ((r = ((r += (s ^ ((n = ((n += (e ^ (s | ~r)) + i[4] - 145523070 | 0) << 6 | n >>> 26) + s | 0) | ~e)) + i[11] - 1120210379 | 0) << 10 | r >>> 22) + n | 0) ^ ((e = ((e += (n ^ (r | ~s)) + i[2] + 718787259 | 0) << 15 | e >>> 17) + r | 0) | ~n)) + i[9] - 343485551 | 0) << 21 | s >>> 11) + e | 0,
                    t[0] = n + t[0] | 0,
                    t[1] = s + t[1] | 0,
                    t[2] = e + t[2] | 0,
                    t[3] = r + t[3] | 0
                }
                function c(t) {
                    for (var i = [], n = 0; n < 64; n += 4)
                        i[n >> 2] = t.charCodeAt(n) + (t.charCodeAt(n + 1) << 8) + (t.charCodeAt(n + 2) << 16) + (t.charCodeAt(n + 3) << 24);
                    return i
                }
                function l(t) {
                    for (var i = [], n = 0; n < 64; n += 4)
                        i[n >> 2] = t[n] + (t[n + 1] << 8) + (t[n + 2] << 16) + (t[n + 3] << 24);
                    return i
                }
                function e(t) {
                    for (var e, r, o, h, i = t.length, n = [1732584193, -271733879, -1732584194, 271733878], s = 64; s <= i; s += 64)
                        u(n, c(t.substring(s - 64, s)));
                    for (e = (t = t.substring(s - 64)).length,
                    r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    s = 0; s < e; s += 1)
                        r[s >> 2] |= t.charCodeAt(s) << (s % 4 << 3);
                    if (r[s >> 2] |= 128 << (s % 4 << 3),
                    55 < s)
                        for (u(n, r),
                        s = 0; s < 16; s += 1)
                            r[s] = 0;
                    return h = (h = 8 * i).toString(16).match(/(.*?)(.{0,8})$/),
                    o = parseInt(h[2], 16),
                    h = parseInt(h[1], 16) || 0,
                    r[14] = o,
                    r[15] = h,
                    u(n, r),
                    n
                }
                function h(t) {
                    for (var i = 0; i < t.length; i += 1)
                        t[i] = function(t) {
                            for (var i = "", n = 0; n < 4; n += 1)
                                i += s[t >> 8 * n + 4 & 15] + s[t >> 8 * n & 15];
                            return i
                        }(t[i]);
                    return t.join("")
                }
                function o(t) {
                    return t = /[\u0080-\uFFFF]/.test(t) ? unescape(encodeURIComponent(t)) : t
                }
                function p(t) {
                    for (var i = [], n = t.length, s = 0; s < n - 1; s += 2)
                        i.push(parseInt(t.substr(s, 2), 16));
                    return String.fromCharCode.apply(String, i)
                }
                function v() {
                    this.reset()
                }
                var s;
                t.exports = (s = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"],
                h(e("hello")),
                "undefined" == typeof ArrayBuffer || ArrayBuffer.prototype.slice || function() {
                    function u(t, i) {
                        return (t = 0 | t || 0) < 0 ? Math.max(t + i, 0) : Math.min(t, i)
                    }
                    ArrayBuffer.prototype.slice = function(t, i) {
                        var n = this.byteLength
                          , t = u(t, n)
                          , e = n;
                        return (e = void 0 !== i ? u(i, n) : e) < t ? new ArrayBuffer(0) : (i = e - t,
                        n = new ArrayBuffer(i),
                        e = new Uint8Array(n),
                        t = new Uint8Array(this,t,i),
                        e.set(t),
                        n)
                    }
                }(),
                v.prototype.append = function(t) {
                    return this.Ypt(o(t)),
                    this
                }
                ,
                v.prototype.Ypt = function(t) {
                    this.Zpt += t,
                    this.Xpt += t.length;
                    for (var i = this.Zpt.length, n = 64; n <= i; n += 64)
                        u(this.Jpt, c(this.Zpt.substring(n - 64, n)));
                    return this.Zpt = this.Zpt.substring(n - 64),
                    this
                }
                ,
                v.prototype.end = function(t) {
                    for (var r, i = this.Zpt, n = i.length, e = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], s = 0; s < n; s += 1)
                        e[s >> 2] |= i.charCodeAt(s) << (s % 4 << 3);
                    return this.$N(e, n),
                    r = h(this.Jpt),
                    t && (r = p(r)),
                    this.reset(),
                    r
                }
                ,
                v.prototype.reset = function() {
                    return this.Zpt = "",
                    this.Xpt = 0,
                    this.Jpt = [1732584193, -271733879, -1732584194, 271733878],
                    this
                }
                ,
                v.prototype.getState = function() {
                    return {
                        Hpt: this.Zpt,
                        length: this.Xpt,
                        hash: this.Jpt.slice()
                    }
                }
                ,
                v.prototype.Mz = function(t) {
                    return this.Zpt = t.Hpt,
                    this.Xpt = t.length,
                    this.Jpt = t.hash,
                    this
                }
                ,
                v.prototype.destroy = function() {
                    delete this.Jpt,
                    delete this.Zpt,
                    delete this.Xpt
                }
                ,
                v.prototype.$N = function(t, i) {
                    var e, n = i;
                    if (t[n >> 2] |= 128 << (n % 4 << 3),
                    55 < n)
                        for (u(this.Jpt, t),
                        n = 0; n < 16; n += 1)
                            t[n] = 0;
                    i = (i = 8 * this.Xpt).toString(16).match(/(.*?)(.{0,8})$/),
                    e = parseInt(i[2], 16),
                    i = parseInt(i[1], 16) || 0,
                    t[14] = e,
                    t[15] = i,
                    u(this.Jpt, t)
                }
                ,
                v.hash = function(t, i) {
                    return v.Vpt(o(t), i)
                }
                ,
                v.Vpt = function(t, i) {
                    t = h(e(t));
                    return i ? p(t) : t
                }
                ,
                (v.ArrayBuffer = function() {
                    this.reset()
                }
                ).prototype.append = function(t) {
                    var s, i = function(t, i, n) {
                        var s = new Uint8Array(t.byteLength + i.byteLength);
                        return s.set(new Uint8Array(t)),
                        s.set(new Uint8Array(i), t.byteLength),
                        n ? s : s.buffer
                    }(this.Zpt.buffer, t, !0), n = i.length;
                    for (this.Xpt += t.byteLength,
                    s = 64; s <= n; s += 64)
                        u(this.Jpt, l(i.subarray(s - 64, s)));
                    return this.Zpt = s - 64 < n ? new Uint8Array(i.buffer.slice(s - 64)) : new Uint8Array(0),
                    this
                }
                ,
                v.ArrayBuffer.prototype.end = function(t) {
                    for (var r, i = this.Zpt, n = i.length, s = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], e = 0; e < n; e += 1)
                        s[e >> 2] |= i[e] << (e % 4 << 3);
                    return this.$N(s, n),
                    r = h(this.Jpt),
                    t && (r = p(r)),
                    this.reset(),
                    r
                }
                ,
                v.ArrayBuffer.prototype.reset = function() {
                    return this.Zpt = new Uint8Array(0),
                    this.Xpt = 0,
                    this.Jpt = [1732584193, -271733879, -1732584194, 271733878],
                    this
                }
                ,
                v.ArrayBuffer.prototype.getState = function() {
                    var t = v.prototype.getState.call(this);
                    return t.Hpt = function(t) {
                        return String.fromCharCode.apply(null, new Uint8Array(t))
                    }(t.Hpt),
                    t
                }
                ,
                v.ArrayBuffer.prototype.Mz = function(t) {
                    return t.Hpt = function(t, i) {
                        for (var n = t.length, s = new ArrayBuffer(n), e = new Uint8Array(s), r = 0; r < n; r += 1)
                            e[r] = t.charCodeAt(r);
                        return i ? e : s
                    }(t.Hpt, !0),
                    v.prototype.Mz.call(this, t)
                }
                ,
                v.ArrayBuffer.prototype.destroy = v.prototype.destroy,
                v.ArrayBuffer.prototype.$N = v.prototype.$N,
                v.ArrayBuffer.hash = function(t, i) {
                    t = function(t) {
                        for (var e, r, o, h, i = t.length, n = [1732584193, -271733879, -1732584194, 271733878], s = 64; s <= i; s += 64)
                            u(n, l(t.subarray(s - 64, s)));
                        for (e = (t = s - 64 < i ? t.subarray(s - 64) : new Uint8Array(0)).length,
                        r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        s = 0; s < e; s += 1)
                            r[s >> 2] |= t[s] << (s % 4 << 3);
                        if (r[s >> 2] |= 128 << (s % 4 << 3),
                        55 < s)
                            for (u(n, r),
                            s = 0; s < 16; s += 1)
                                r[s] = 0;
                        return h = (h = 8 * i).toString(16).match(/(.*?)(.{0,8})$/),
                        o = parseInt(h[2], 16),
                        h = parseInt(h[1], 16) || 0,
                        r[14] = o,
                        r[15] = h,
                        u(n, r),
                        n
                    }(new Uint8Array(t)),
                    t = h(t);
                    return i ? p(t) : t
                }
                ,
                v)
            }), Nt = (U.M8t(function(t, i) {
                U.eff,
                t.exports = function() {
                    function u(t) {
                        return "function" == typeof t
                    }
                    var n = Array.isArray || function(t) {
                        return "[object Array]" === Object.prototype.toString.call(t)
                    }
                      , s = 0
                      , e = void 0
                      , r = void 0
                      , o = function o(t, i) {
                        c[s] = t,
                        c[s + 1] = i,
                        2 === (s += 2) && (r ? r(l) : P())
                    }
                      , t = "undefined" != typeof window ? window : undefined
                      , i = (i = t || {}).MutationObserver || i.WebKitMutationObserver
                      , h = "undefined" == typeof self && "undefined" != typeof process && "[object process]" === {}.toString.call(process)
                      , a = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;
                    function f() {
                        var t = setTimeout;
                        return function() {
                            return t(l, 1)
                        }
                    }
                    var c = new Array(1e3);
                    function l() {
                        for (var t = 0; t < s; t += 2)
                            (0,
                            c[t])(c[t + 1]),
                            c[t] = undefined,
                            c[t + 1] = undefined;
                        s = 0
                    }
                    var p, v, m, P = void 0;
                    function y(t, i) {
                        var n, s = this, e = new this.constructor(M), r = (e[g] === undefined && O(e),
                        s.R);
                        return r ? (n = arguments[r - 1],
                        o(function() {
                            return L(r, e, n, s.t9)
                        })) : S(s, e, t, i),
                        e
                    }
                    function b(t) {
                        var i;
                        return t && "object" == typeof t && t.constructor === this ? t : (z(i = new this(M), t),
                        i)
                    }
                    var P = h ? function() {
                        return process.nextTick(l)
                    }
                    : i ? (v = 0,
                    h = new i(l),
                    m = document.createTextNode(""),
                    h.observe(m, {
                        characterData: !0
                    }),
                    function() {
                        m.data = v = ++v % 2
                    }
                    ) : a ? ((p = new MessageChannel).port1.onmessage = l,
                    function() {
                        return p.port2.postMessage(0)
                    }
                    ) : (t === undefined && "function" == typeof U.tff ? function() {
                        try {
                            var t = Function("return this")().Qb("vertx");
                            return void 0 !== (e = t.runOnLoop || t.runOnContext) ? function() {
                                e(l)
                            }
                            : f()
                        } catch (i) {
                            return f()
                        }
                    }
                    : f)()
                      , g = Math.random().toString(36).substring(2);
                    function M() {}
                    var k = void 0
                      , w = 1
                      , x = 2;
                    function B(t, i, n, s) {
                        try {
                            t.call(i, n, s)
                        } catch (e) {
                            return e
                        }
                    }
                    function A(t, i, n) {
                        var s, e, r, h;
                        i.constructor === t.constructor && n === y && i.constructor.resolve === b ? (r = t,
                        (h = i).R === w ? C(r, h.t9) : h.R === x ? T(r, h.t9) : S(h, undefined, function(t) {
                            return z(r, t)
                        }, function(t) {
                            return T(r, t)
                        })) : n !== undefined && u(n) ? (s = i,
                        e = n,
                        o(function(i) {
                            var n = !1
                              , t = B(e, s, function(t) {
                                n || (n = !0,
                                (s !== t ? z : C)(i, t))
                            }, function(t) {
                                n || (n = !0,
                                T(i, t))
                            }, i.Vnt);
                            !n && t && (n = !0,
                            T(i, t))
                        }, t)) : C(t, i)
                    }
                    function z(t, i) {
                        if (t === i)
                            T(t, new TypeError("You cannot resolve a promise with itself"));
                        else if (n = typeof i,
                        null === i || "object" != n && "function" != n)
                            C(t, i);
                        else {
                            n = void 0;
                            try {
                                n = i.then
                            } catch (s) {
                                return void T(t, s)
                            }
                            A(t, i, n)
                        }
                        var n
                    }
                    function F(t) {
                        t.emt && t.emt(t.t9),
                        I(t)
                    }
                    function C(t, i) {
                        t.R === k && (t.t9 = i,
                        t.R = w,
                        0 !== t.rmt.length) && o(I, t)
                    }
                    function T(t, i) {
                        t.R === k && (t.R = x,
                        t.t9 = i,
                        o(F, t))
                    }
                    function S(t, i, n, s) {
                        var e = t.rmt
                          , r = e.length;
                        t.emt = null,
                        e[r] = i,
                        e[r + w] = n,
                        e[r + x] = s,
                        0 === r && t.R && o(I, t)
                    }
                    function I(t) {
                        var i = t.rmt
                          , n = t.R;
                        if (0 !== i.length) {
                            for (var s, e = void 0, r = t.t9, h = 0; h < i.length; h += 3)
                                s = i[h],
                                e = i[h + n],
                                s ? L(n, s, e, r) : e(r);
                            t.rmt.length = 0
                        }
                    }
                    function L(t, i, n, s) {
                        var e = u(n)
                          , r = void 0
                          , h = void 0
                          , o = !0;
                        if (e) {
                            try {
                                r = n(s)
                            } catch (a) {
                                o = !1,
                                h = a
                            }
                            if (i === r)
                                return void T(i, new TypeError("A promises callback cannot return that same promise."))
                        } else
                            r = s;
                        i.R === k && (e && o ? z(i, r) : !1 === o ? T(i, h) : t === w ? C(i, r) : t === x && T(i, r))
                    }
                    function W(i, t) {
                        try {
                            t(function(t) {
                                z(i, t)
                            }, function(t) {
                                T(i, t)
                            })
                        } catch (n) {
                            T(i, n)
                        }
                    }
                    var D = 0;
                    function O(t) {
                        t[g] = D++,
                        t.R = undefined,
                        t.t9 = undefined,
                        t.rmt = []
                    }
                    R.prototype.amt = function(t) {
                        for (var i = 0; this.R === k && i < t.length; i++)
                            this.umt(t[i], i)
                    }
                    ,
                    R.prototype.umt = function(i, t) {
                        var n = this.omt
                          , s = n.resolve;
                        if (s === b) {
                            var e, r = void 0, h = void 0, o = !1;
                            try {
                                r = i.then
                            } catch (a) {
                                o = !0,
                                h = a
                            }
                            r === y && i.R !== k ? this.fmt(i.R, t, i.t9) : "function" != typeof r ? (this.hmt--,
                            this.t9[t] = i) : n === E ? (e = new n(M),
                            o ? T(e, h) : A(e, i, r),
                            this.cmt(e, t)) : this.cmt(new n(function(t) {
                                return t(i)
                            }
                            ), t)
                        } else
                            this.cmt(s(i), t)
                    }
                    ,
                    R.prototype.fmt = function(t, i, n) {
                        var s = this.promise;
                        s.R === k && (this.hmt--,
                        t === x ? T(s, n) : this.t9[i] = n),
                        0 === this.hmt && C(s, this.t9)
                    }
                    ,
                    R.prototype.cmt = function(t, i) {
                        var n = this;
                        S(t, undefined, function(t) {
                            return n.fmt(w, i, t)
                        }, function(t) {
                            return n.fmt(x, i, t)
                        })
                    }
                    ;
                    var N = R;
                    function R(t, i) {
                        this.omt = t,
                        this.promise = new t(M),
                        this.promise[g] || O(this.promise),
                        n(i) ? (this.length = i.length,
                        this.hmt = i.length,
                        this.t9 = new Array(this.length),
                        0 !== this.length && (this.length = this.length || 0,
                        this.amt(i),
                        0 !== this.hmt) || C(this.promise, this.t9)) : T(this.promise, new Error("Array Methods must be provided an Array"))
                    }
                    j.prototype["catch"] = function(t) {
                        return this.then(null, t)
                    }
                    ,
                    j.prototype["finally"] = function(i) {
                        var n = this.constructor;
                        return u(i) ? this.then(function(t) {
                            return n.resolve(i()).then(function() {
                                return t
                            })
                        }, function(t) {
                            return n.resolve(i()).then(function() {
                                throw t
                            })
                        }) : this.then(i, i)
                    }
                    ;
                    var E = j;
                    function j(t) {
                        if (this[g] = D++,
                        this.t9 = this.R = undefined,
                        this.rmt = [],
                        M !== t) {
                            if ("function" != typeof t)
                                throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
                            if (!(this instanceof j))
                                throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                            W(this, t)
                        }
                    }
                    return E.prototype.then = y,
                    E.all = function(t) {
                        return new N(this,t).promise
                    }
                    ,
                    E.race = function(e) {
                        var r = this;
                        return n(e) ? new r(function(t, i) {
                            for (var n = e.length, s = 0; s < n; s++)
                                r.resolve(e[s]).then(t, i)
                        }
                        ) : new r(function(t, i) {
                            return i(new TypeError("You must pass an array to race."))
                        }
                        )
                    }
                    ,
                    E.resolve = b,
                    E.reject = function(t) {
                        var i = new this(M);
                        return T(i, t),
                        i
                    }
                    ,
                    E.lmt = function(t) {
                        r = t
                    }
                    ,
                    E.dmt = function(t) {
                        o = t
                    }
                    ,
                    E.vmt = o,
                    E.smt = function() {
                        var t = void 0;
                        if ("undefined" != typeof U.eff)
                            t = U.eff;
                        else if ("undefined" != typeof self)
                            t = self;
                        else
                            try {
                                t = Function("return this")()
                            } catch (s) {
                                throw new Error("polyfill failed because global object is unavailable in this environment")
                            }
                        var i = t.Promise;
                        if (i) {
                            var n = null;
                            try {
                                n = Object.prototype.toString.call(i.resolve())
                            } catch (s) {}
                            if ("[object Promise]" === n && !i.cast)
                                return
                        }
                        t.Promise = E
                    }
                    ,
                    E.Promise = E
                }()
            }).smt(),
            Ft = ut,
            U.Ei(f, Ft),
            f.prototype.add = function(t, i, n) {
                void 0 === t && (t = {}),
                void 0 === i && (i = {}),
                Object.keys(t).length && (this.Ls = t,
                this.HB = !0,
                this.OB = i,
                n) && n()
            }
            ,
            f.prototype.remove = function(t, i, n) {
                void 0 === i && (i = {}),
                this.Ls = t = void 0 === t ? {} : t,
                this.HB = !0,
                this.OB = i,
                n && n()
            }
            ,
            f.prototype.update = function(t, i) {
                void 0 === t && (t = {}),
                this.HB = !0,
                this.OB = t,
                i && i()
            }
            ,
            f.prototype.clear = function() {
                this.Ls = {},
                this.Ts = [],
                this.gS = null
            }
            ,
            f.prototype.getData = function() {
                return {
                    other: this.gS
                }
            }
            ,
            f.prototype.Ds = function(t) {
                return this.Ls[t] || null
            }
            ,
            f.prototype.zL = function(t) {
                return this.CL && this.CL.zL(t)
            }
            ,
            f.prototype.destroy = function() {
                this.R_ && this.R_.destroy && (this.R_.destroy(),
                delete this.R_),
                this.z_ && this.z_.destory && (this.z_.destory(),
                delete this.z_)
            }
            ,
            f.prototype.loadData = function(t, i, n) {
                var s = this;
                return 0 === Object.keys(this.Ls).length && this.Fo(!0),
                this.HB && (this.HB = !1,
                this.As(this.OB, function() {
                    s.Fo(!0),
                    s._map.bZ.dynamic.set("firstLabelLayerDataAllLoaded", !0),
                    n()
                })),
                !0
            }
            ,
            f.prototype.As = function(t, i) {
                var n, s, e, r, h = this, o = (void 0 === t && (t = {}),
                this.R_,
                this.z_,
                this.Ls), a = (this.Ts = [],
                []), u = {};
                for (n in o)
                    o.hasOwnProperty(n) && (r = (s = o[n]).getOptions(),
                    e = s.hS,
                    (r = r.richText) && r.content && (a.push(s),
                    u[r.content] = e,
                    this.qpt.append(r.content),
                    e = this.qpt.end(),
                    r.Kpt = e),
                    r = this.Ps(s),
                    this.Ts.push(r));
                a && 0 < a.length ? this.xpt(a, u, t, function() {
                    h.Apt(t, i)
                }) : this.Apt(t, i)
            }
            ,
            f.prototype.Apt = function(i, n) {
                var t, s = this, e = (void 0 === i && (i = {}),
                this.R_);
                this.Ts.length ? (t = this.Ts[0].data.position,
                this.Os(t),
                this.z_.loadImages(Object.keys(this.Fs), {
                    cb: function() {
                        var t;
                        e && "SDFManagerBase" !== e.CLASS_NAME ? (t = Object.keys(s.Es),
                        e.getData(t, function(t) {
                            s.qL(i, n)
                        })) : s.qL(i, n)
                    }
                })) : (this.clear(),
                n())
            }
            ,
            f.prototype.$pt = function(s, t, i, e) {
                var r = this
                  , h = function(t) {
                    var i, n;
                    t < s.length ? ((i = s[t].getOptions().richText).content,
                    s[t].hS,
                    n = void 0,
                    i && i.Kpt && (n = i.Kpt),
                    r.zpt(i, s[t], n, function() {
                        h(t + 1)
                    })) : e()
                };
                h(0)
            }
            ,
            f.prototype.xpt = function(t, i, n, s) {
                for (var r = this, t = t.map(function(e, t) {
                    return function() {
                        return new Promise(function(t, i) {
                            var n = e.getOptions().richText
                              , s = n && n.Kpt ? n.Kpt : undefined;
                            r.zpt(n, e, s, t)
                        }
                        )
                    }
                }), e = Promise.resolve(), h = 0, o = t; h < o.length; h++)
                    var a = o[h]
                      , e = e.then(a);
                e.then(function() {
                    s()
                })["catch"](function(t) {
                    console.warn("An error warn occurred:", t),
                    s(t)
                })
            }
            ,
            f.prototype.zpt = function(n, s, e, r) {
                var t, h, i, o, a, u = this;
                n ? (n.content,
                (t = this._pt.get(e)) ? (t = {
                    image: t,
                    width: t.width,
                    height: t.height,
                    type: "image",
                    size: n.size,
                    clipOrigin: n.clipOrigin,
                    offset: n.offset,
                    anchor: n.anchor,
                    retina: n.retina,
                    hS: s.hS
                },
                this.Qpt[s.hS] = t,
                r()) : (h = this.Cpt(n, s.hS),
                i = h.childNodes,
                o = i[0].offsetWidth,
                a = i[0].offsetHeight,
                this.tmt(i[0]).then(function(t) {
                    return t = u.Fpt(i[0], t),
                    u.imt(t)
                }).then(function(t) {
                    document.body.removeChild(h);
                    var i = {
                        image: t,
                        width: o,
                        height: a,
                        type: "image",
                        size: n.size,
                        clipOrigin: n.clipOrigin,
                        offset: n.offset,
                        anchor: n.anchor,
                        retina: n.retina,
                        hS: s.hS
                    };
                    u.Qpt[s.hS] = i,
                    u._pt.set(e, t),
                    r()
                })["catch"](function(t) {
                    document.body.removeChild(h),
                    console.warn("URL  image load fali", t),
                    t = AMap.getConfig().protocol + "://a.amap.com/jsapi_demos/static/demo-center/icons/dom_marker.png",
                    u.pmt(t).then(function(t) {
                        var i = {
                            image: t,
                            width: o,
                            height: a,
                            type: "image",
                            size: n.size,
                            clipOrigin: n.clipOrigin,
                            offset: n.offset,
                            anchor: n.anchor,
                            retina: n.retina,
                            hS: s.hS
                        };
                        u.Qpt[s.hS] = i,
                        u._pt.set(e, t),
                        r()
                    })["catch"](function(t) {
                        console.warn("Default image load fail", t),
                        r(t)
                    })
                }))) : r()
            }
            ,
            f.prototype.pmt = function(i) {
                return new Promise(function(s, t) {
                    var e = new Image;
                    e.crossOrigin = "Anonymous",
                    e.onload = function() {
                        var t = document.createElement("canvas");
                        t.width = e.width,
                        t.height = e.height;
                        (i = t.getContext("2d")) && i.drawImage(e, 0, 0);
                        var i = t.toDataURL()
                          , n = new Image;
                        n.setAttribute("src", i),
                        s(n),
                        t.width = 0,
                        t.height = 0
                    }
                    ,
                    e.onerror = function() {
                        t(new Error("Could not load image at " + i))
                    }
                    ,
                    e.src = i
                }
                )
            }
            ,
            f.prototype.Cpt = function(t, i) {
                var n = new Map
                  , t = t.content
                  , s = document.getElementById("originDom")
                  , e = ((s = document.createElement("div")).setAttribute("id", "originDom"),
                s.setAttribute("style", "position: fixed; ;z-index: -999999; top: 0; left: 0; opacity: 0; poinert-events: none; width: 4096px;"),
                document.body.appendChild(s),
                s.innerHTML = '<div  data-index="' + i + '" style="float: left; padding: 2px;">' + t + "</div>",
                s.scrollWidth)
                  , r = Math.log2 ? 1 << Math.ceil(Math.log2(s.scrollHeight)) : Math.log(s.scrollHeight) * Math.LOG2E;
                s.style.height = r + "px";
                for (var h = s.querySelectorAll("div"), o = 0; o < h.length; o++) {
                    var a = h[o];
                    a.dataset && a.dataset.index && n.set(a.dataset.index, [a.offsetLeft / e, a.offsetTop / r, (a.offsetLeft + a.scrollWidth) / e, (a.offsetTop + a.scrollHeight) / r])
                }
                return s.setAttribute("style", "position: fixed; z-index: -999999; top: 0; left: 0; pointer-events: none; width: 4096px;height:" + r + "px"),
                s
            }
            ,
            f.prototype.drawImage = function(t, i, n) {
                var s, e;
                t && (s = t.width,
                e = t.height,
                i.width = s,
                i.height = e,
                n.clearRect(0, 0, i.width, i.height),
                n.drawImage(t, 0, 0))
            }
            ,
            f.prototype.loadImage = function(t, i) {
                var n = new Image;
                n.crossOrigin = "Anonymous",
                n.onload = function() {
                    return i(null, n)
                }
                ,
                n.onerror = function(t) {
                    return i(t, null)
                }
                ,
                n.src = t
            }
            ,
            f.prototype.Tpt = function(o, a) {
                var u = document.createElement("canvas")
                  , f = u.getContext("2d");
                if (t = o) {
                    var c = t.cloneNode(!0)
                      , l = (c.setAttribute("xmlns", "http://www.w3.org/1999/xhtml"),
                    null);
                    if ("img" === c.tagName.toLowerCase() && (l = c),
                    0 < c.querySelectorAll("img").length) {
                        if ((l = c.querySelectorAll("img")).crossOrigin = "anonymous",
                        l)
                            for (var i = 0; i < l.length; i++)
                                !function(e) {
                                    var r = l[e]
                                      , h = (r.crossOrigin = "anonymous",
                                    new Image);
                                    h.crossOrigin = "anonymous",
                                    h.onload = function() {
                                        var i, t, n = h.width, s = h.height;
                                        u.width = n,
                                        u.height = s,
                                        f && (f.clearRect(0, 0, n, s),
                                        f.drawImage(h, 0, 0)),
                                        u.toDataURL("image/png"),
                                        r.setAttribute("crossOrigin", "anonymous"),
                                        r && (r.src = u.toDataURL("image/png"),
                                        e === l.length - 1) && (t = (t = 'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="' + o.offsetWidth + '" height="' + o.offsetHeight + '"><foreignObject x="0" y="0" width="100%" height="100%">' + (new XMLSerializer).serializeToString(c) + document.querySelector("style").outerHTML + "</foreignObject></svg>").replace(/\n/g, "").replace(/\t/g, "").replace(/#/g, "%23")) && ((i = new Image).onload = function(t) {
                                            a(i, n, s)
                                        }
                                        ,
                                        i.src = t)
                                    }
                                    ,
                                    h.src = r.attributes.src.nodeValue
                                }(i)
                    } else {
                        var n, t = (t = 'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="' + o.offsetWidth + '" height="' + o.offsetHeight + '"><foreignObject x="0" y="0" width="100%" height="100%">' + (new XMLSerializer).serializeToString(c) + document.querySelector("style").outerHTML + "</foreignObject></svg>").replace(/\n/g, "").replace(/\t/g, "").replace(/#/g, "%23"), s = o.offsetWidth, e = o.offsetHeight;
                        t && ((n = new Image).onload = function(t) {
                            a(n, s, e)
                        }
                        ,
                        n.src = t)
                    }
                } else
                    console.log("未获取都转换dom节点")
            }
            ,
            f.prototype.Spt = function(t, i, n, s) {
                var e = new Image;
                DomToImage.dpt(t, {
                    width: i,
                    height: n,
                    ppt: 1
                }).then(function(t) {
                    e.src = t,
                    s(e, i, n)
                })["catch"](function(t) {
                    console.error(t)
                })
            }
            ,
            f.prototype.Wpt = function(t, s) {
                var e = this
                  , r = t.querySelectorAll("img")
                  , h = r.length
                  , o = new Map;
                if (0 === h)
                    s(o);
                else
                    for (var i = 0; i < r.length; i++)
                        !function(t) {
                            var i = r[t]
                              , n = new Image;
                            n.crossOrigin = "anonymous",
                            n.onload = function() {
                                o.set(i.src, e.Gpt(n)),
                                0 == --h && s(o)
                            }
                            ,
                            n.onerror = function() {
                                0 == --h && s(o)
                            }
                            ,
                            n.src = i.src
                        }(i)
            }
            ,
            f.prototype.tmt = function(t) {
                return t = t.querySelectorAll("img"),
                t = Array.prototype.slice.call(t).map(function(h) {
                    return new Promise(function(s, e) {
                        var r = new Image;
                        r.crossOrigin = "anonymous",
                        r.onload = function() {
                            var t = document.createElement("canvas")
                              , i = (t.width = r.width,
                            t.height = r.height,
                            t.getContext("2d"));
                            if (i) {
                                i.drawImage(r, 0, 0);
                                try {
                                    s({
                                        src: h.src,
                                        nmt: t.toDataURL()
                                    })
                                } catch (n) {
                                    e(n)
                                }
                            } else
                                e(new Error("Could not get canvas context"))
                        }
                        ,
                        r.onerror = function(t) {
                            e(new Error("Image load error"))
                        }
                        ,
                        r.src = h.src
                    }
                    )
                }),
                Promise.all(t).then(function(t) {
                    var i = new Map;
                    return t.forEach(function(t) {
                        i.set(t.src, t.nmt)
                    }),
                    i
                })
            }
            ,
            f.prototype.Gpt = function(t) {
                var i = document.createElement("canvas")
                  , n = (i.width = t.width,
                i.height = t.height,
                i.getContext("2d"));
                return n && n.drawImage(t, 0, 0),
                i.toDataURL()
            }
            ,
            f.prototype.Fpt = function(t, i) {
                for (var n = t.cloneNode(!0), s = n.querySelectorAll("img"), e = 0; e < s.length; e++) {
                    var r = s[e]
                      , h = r.getAttribute("src");
                    i.has(h) && r.setAttribute("src", i.get(h))
                }
                return n = (new XMLSerializer).serializeToString(n),
                t = '<svg xmlns="http://www.w3.org/2000/svg" width="' + t.offsetWidth + '" height="' + t.offsetHeight + '">\n                <foreignObject width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink">' + n + "</foreignObject>\n            </svg>",
                "data:image/svg+xml;charset=utf-8," + encodeURIComponent(t)
            }
            ,
            f.prototype.Npt = function(t, i) {
                var n = new Image;
                n.onload = function() {
                    i(n)
                }
                ,
                n.onerror = function() {
                    console.error("无法从SVG数据创建图像")
                }
                ,
                n.src = t
            }
            ,
            f.prototype.imt = function(s) {
                return new Promise(function(t, i) {
                    var n = new Image;
                    n.onload = function() {
                        return t(n)
                    }
                    ,
                    n.onerror = i,
                    n.src = s
                }
                )
            }
            ,
            f.prototype.qL = function(t, i) {
                void 0 === t && (t = {});
                var n = this.R_
                  , s = this.z_
                  , n = (this.CL = new U.eG({
                    R_: n,
                    z_: s
                }),
                this.CL.setRichtoImage(this.Qpt),
                this.Us)
                  , s = {
                    from: "labelsLayer",
                    zoom: this._map.getView().getOptions().zoom,
                    center: n.center
                }
                  , t = (U.assign(s, t),
                this.CL.Ns(this.Ts, s));
                this._map && this._map.isDOMMode() ? this.gS = t : this.gS = new U.La(null,t),
                this.gS.zo = n,
                i && i(t)
            }
            ,
            f.prototype.Ps = function(t) {
                var i, n, s, e, r, h, o, a, u, f, c, l, d, p, v, m, y, b, g;
                if (!t || "AMap.LabelMarker" === t.type)
                    return i = this._map.getProjection(),
                    this.AL = {},
                    c = t.getOptions(),
                    (n = t._position) ? (s = [U.tc.Mp, U.tc.Rp],
                    e = void 0 === (e = c.zooms) ? s : e,
                    r = c.opacity,
                    h = c.rank,
                    v = c.icon,
                    o = c.richText,
                    a = c.text,
                    u = c.zIndex,
                    f = c.rotation,
                    c = void 0 === (c = c.visible) || c,
                    l = U.Bs(n) ? n.toJSON() : n,
                    d = a && a.content || "",
                    p = a && a.style,
                    v && v.image && (this.Fs[v.image] = 1),
                    a && a.content && this.Ws(a.content),
                    v = v && v.image ? [{
                        type: "image",
                        image: v.image || "",
                        size: v.size,
                        clipOrigin: v.clipOrigin,
                        clipSize: v.clipSize,
                        offset: v.offset,
                        anchor: v.anchor,
                        retina: v.retina
                    }] : {},
                    g = y = 0,
                    p && (y = !p.strokeWidth && p.strokeColor ? 1 : p.strokeWidth || 0,
                    m = !p.strokeColor && p.strokeWidth ? "#fcfcfc" : p.strokeColor,
                    g = !p.borderWidth && p.borderColor ? 1 : p.borderWidth || 0,
                    b = !p.borderColor && p.strokeWidth ? "#ccc" : p.borderColor),
                    m = p ? {
                        fontFamily: p.fontFamily,
                        fontSize: p.fontSize,
                        fontWeight: p.fontWeight,
                        fillColor: p.fillColor,
                        strokeColor: m,
                        strokeWidth: y,
                        borderColor: b,
                        borderWidth: g,
                        padding: this.Gs(p.padding || [3]),
                        backgroundColor: p.backgroundColor,
                        fold: p.fold
                    } : {},
                    y = U.labelsUtil.Jj(e, a && a.zooms || s),
                    b = a && d ? {
                        txt: a.content || "",
                        direction: a.direction,
                        offset: a.offset,
                        zooms: y,
                        style: m
                    } : {},
                    g = i.project(l[0], l[1]),
                    {
                        data: {
                            id: t.hS,
                            name: d,
                            txt: d,
                            position: [g[0], g[1], n[2] || 0],
                            positionType: "lnglat",
                            extData: {
                                id: t.hS
                            },
                            rank: h,
                            rotation: f,
                            richText: o,
                            zooms: e
                        },
                        opts: {
                            visible: c,
                            opacity: r,
                            zooms: e,
                            zIndex: u,
                            icon: v,
                            richText: o,
                            text: b,
                            rotation: f,
                            height: n[2] || 0
                        }
                    }) : null
            }
            ,
            f.prototype.Ws = function(t) {
                var i = this;
                void 0 === t && (t = ""),
                Array.from(t).forEach(function(t) {
                    i.Es[t] = 1
                })
            }
            ,
            f.prototype.Os = function(t) {
                U.Bs(t) ? this.Us = U.lcs.getLocalByCoord([t.KL, t.kT]) : this.Us = U.lcs.getLocalByCoord(t)
            }
            ,
            f.prototype.Gs = function(t) {
                if ("string" == typeof t && (t = (t = t.trim()).split(" ")),
                "[object Array]" !== Object.prototype.toString.apply(t))
                    return [3, 3, 3, 3];
                for (var i = t.length, n = 0; n < i; n++) {
                    var s = "string" == typeof (s = t[n]) ? parseInt(s, 10) : s;
                    isNaN(s) ? t[n] = 3 : t[n] = s
                }
                switch (i) {
                case 0:
                    t = [3, 3, 3, 3];
                    break;
                case 1:
                    t = [t[0], t[0], t[0], t[0]];
                    break;
                case 2:
                    t = [t[0], t[1], t[0], t[1]];
                    break;
                case 3:
                    t = [t[0], t[1], t[2], t[1]]
                }
                return t
            }
            ,
            f);
            function f(t, i, n, s) {
                return (t = Ft.call(this, t, i, n, s) || this).Fs = {},
                t.Es = {},
                t.Ts = [],
                t.HB = !1,
                t.Ls = {},
                t.AL = {},
                t._pt = {},
                t.Upt = [],
                t.qpt = {},
                t.Qpt = {},
                i = n.R_,
                s = n.z_,
                t.R_ = i,
                t.z_ = s,
                t._pt = new Map,
                t.qpt = new Wt,
                t._map = n,
                t
            }
            Ut = ut,
            U.Ei(_t, Ut),
            _t.prototype.setTileUrl = function(t) {
                this._tileUrl = t = void 0 === t ? "" : t
            }
            ,
            _t.prototype.loadData = function(t, i, n, s) {
                var h = this;
                if (!i && "d" !== s.baseRender)
                    return !1;
                this.aa = t,
                this.ze = i,
                this.Zs = [],
                this.sa = [];
                var e = t.projectionId
                  , r = []
                  , o = this.ha(t.boundsCoord, t.optimalZoom, t.optimalResolution)
                  , a = (this.ua.forEach(function(t) {
                    var i = t.zo
                      , n = !1;
                    if (t.status !== U.TileState.LOADED) {
                        for (var s = o.ja; s <= o.Oa; s += 1)
                            for (var e = o.Fa; e <= o.Ea; e += 1) {
                                var r = h.fa(s, o.z);
                                i.z === o.z && i.y === e && r === i.x && (n = !0)
                            }
                        n || (t.data.src = "",
                        h.ua.ea(t))
                    }
                }),
                this.qs(t, this.Zs, r));
                return this.Ys(a, i, e, n),
                this.da(t, this.sa, r, s),
                this.sa = this.sa.concat(this.Zs),
                0 === a.length
            }
            ,
            _t.prototype.getData = function() {
                var t = this.aa
                  , i = []
                  , n = this.map.qF();
                if (this.ua.QF(n),
                0 < this.sa.length)
                    for (var s = 0; s < this.sa.length; s++) {
                        for (var e = this.sa[s], r = [], h = 0; h < e.length; h++) {
                            var o, c, f, d, a, u, m = [0, 0], y = t.centerCoord, b = this.ua.getTile(e[h]), y = U.lcs.getLocalByCoord([y[0], y[1]]);
                            b || (o = this.ua.getTile(new U.ca(e[h].z,this.fa(e[h].x, e[h].z),e[h].y)),
                            b = new U.Vs(e[h]),
                            o && o.data.texture && (a = this.aa.projectionId,
                            c = U.ProjectionManager.getProjection(a).getResolution(b.zo.z),
                            u = (d = b.zo.x * this.Xa * c) + this.Xa * c,
                            c = (f = b.zo.y * this.Xa * c) + this.Xa * c,
                            f = U.V[a].Xs(d, f),
                            a = U.V[a].Xs(u, c),
                            d = f[0],
                            u = a[0],
                            c = f[1],
                            b.Ro = [d, a[1], u, c],
                            f = U.lcs.getLocalByCoord([b.Ro[0], b.Ro[1]]),
                            this.aa.optimalZoom >= U.Ra && (b.Ro[0] -= f.center[0],
                            b.Ro[1] -= f.center[1],
                            b.Ro[2] -= f.center[0],
                            b.Ro[3] -= f.center[1]),
                            this.ze ? b.data = {
                                Hs: f,
                                texture: o.data.texture,
                                Js: o.data.Js,
                                zs: this.ze.fe(new Float32Array([b.Ro[0], b.Ro[1], 0, 1, b.Ro[2], b.Ro[1], 1, 1, b.Ro[0], b.Ro[3], 0, 0, b.Ro[2], b.Ro[1], 1, 1, b.Ro[2], b.Ro[3], 1, 0, b.Ro[0], b.Ro[3], 0, 0]), 16)
                            } : (b.data = o.data,
                            b.data.Hs = f),
                            b.data) && (b.status = U.TileState.LOADED)),
                            b.data && (t.optimalZoom >= U.Ra && b.data.Hs ? (d = U.lcs.getSize(),
                            a = b.data.Hs.x - y.x,
                            u = b.data.Hs.y - y.y,
                            0 != a && (a *= d[0],
                            m[0] = a),
                            0 != u && (u *= d[1],
                            m[1] = u),
                            t.optimalZoom >= U.Ra && U.za >= b.zo.z && (m[0] = -y.center[0],
                            m[1] = -y.center[1])) : t.optimalZoom < U.Ra && U.za < b.zo.z && (m[0] = y.center[0],
                            m[1] = y.center[1]),
                            b.data.Sa = m,
                            b.stamp = n,
                            r.push(b))
                        }
                        i.push(r)
                    }
                return {
                    tiles: i
                }
            }
            ,
            _t.prototype.setTileCacheSize = function(t) {
                t = t || (U.Support.$e ? 50 : 200),
                this.ua.Xo(t)
            }
            ,
            _t.prototype.reload = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && t.request.cancel && (t.request.cancel(),
                    delete t.request)
                }),
                this.ua.destroy(),
                this.sa = [],
                this.pS = !1,
                this.Fo(!1)
            }
            ,
            _t.prototype.getTileCache = function() {
                return this.ua
            }
            ,
            _t.prototype.Da = function(t, i) {
                var e, r, h;
                t.length && (e = this.Pa.z,
                r = (this.Pa.ja + this.Pa.Oa) / 2,
                h = (this.Pa.Fa + this.Pa.Ea) / 2,
                t.sort(function(t, i) {
                    var n = (t.x << e - t.z) - r
                      , t = (t.y << e - t.z) - h
                      , s = (i.x << e - i.z) - r;
                    return n * n + t * t <= s * s + (i = (i.y << e - i.z) - h) * i ? -1 : 1
                }))
            }
            ,
            _t.prototype.ha = function(t, i, n) {
                var s = this.aa.projectionId
                  , s = U.ProjectionManager.getProjection(s)
                  , s = (this.TB() && (n = s.getResolution(++i)),
                i < this.Qs[0] ? (i = this.Qs[0],
                n = s.getResolution(i)) : i > this.Qs[1] && (i = this.Qs[1],
                n = s.getResolution(i)),
                this.Xa)
                  , e = 20037508.342789244
                  , r = (t[0] + e) / n
                  , h = -(t[3] - e) / n
                  , o = -(t[1] - e) / n;
                return {
                    Oa: Math.floor((t[2] + e) / n / s),
                    Ea: Math.min((1 << i) - 1, Math.floor(o / s)),
                    ja: Math.floor(r / s),
                    Fa: Math.max(Math.floor(h / s), 0),
                    z: i
                }
            }
            ,
            _t.prototype.qs = function(t, i, n) {
                for (var s = t.optimalZoom, e = t.optimalResolution, r = t.boundsCoord, h = U.ProjectionManager.getProjection(t.projectionId), r = this.ha(r, s, e), o = (this.TB() && s++,
                s < this.Qs[0] ? s = this.Qs[0] : s > this.Qs[1] && (s = this.Qs[1]),
                h.getResolution(s),
                []), a = [], u = !0, f = r, c = f.ja; c <= f.Oa; c += 1)
                    for (var l = f.Fa; l <= f.Ea; l += 1) {
                        var d = new U.ca(s,this.fa(c, s),l)
                          , p = this.ua.getTile(d)
                          , v = (this.PF(d, t.projectionId),
                        new U.ca(s,c,l));
                        (p ? p.status === U.TileState.LOADED || p.status === U.TileState.ERROR ? a : (u = !1,
                        n) : (u = !1,
                        o.push(d),
                        n)).push(v)
                    }
                return a.length && i.push(a),
                this.Pa = r,
                this.Fo(u),
                o
            }
            ,
            _t.prototype.da = function(t, i, n, s) {
                if (t = t.optimalZoom,
                this.Za = "overlay" !== this.layer.type,
                this.qa = "overlay" !== this.layer.type,
                this.Za)
                    for (var e = Math.min(this.xt[1], t + 2), r = t + 1; n.length && r <= e; r += 1) {
                        for (var h = [], o = [], a = r, u = n.length - 1; 0 <= u; --u)
                            for (var f = n[u], c = f.x << 1, l = f.y << 1, d = 1; 0 <= d; --d)
                                for (var p = 1; 0 <= p; --p) {
                                    var v = new U.ca(a,this.fa(c + d, a),l + p)
                                      , m = this.ua.getTile(v)
                                      , y = new U.ca(a,c + d,l + p);
                                    (m && m.status === U.TileState.LOADED ? o : h).push(y)
                                }
                        o.length && i.push(o),
                        n = h
                    }
                if (this.qa)
                    for (var b = this.xt[0], r = t - 1; n.length && b <= r; --r) {
                        for (var o = [], h = [], g = {}, u = n.length - 1; 0 <= u; --u) {
                            var M = n[u]
                              , a = r
                              , k = M.z - a
                              , d = M.x >> k
                              , p = M.y >> k;
                            g[M = (v = new U.ca(a,this.fa(d, a),p)).key] || (m = this.ua.getTile(v),
                            g[M] = !0,
                            (m && m.status === U.TileState.LOADED ? o : h).push(new U.ca(a,d,p)))
                        }
                        o.length && i.push(o),
                        n = h
                    }
                return i
            }
            ,
            _t.prototype.ma = function() {
                var t, i = new RegExp(/\{(\w|\,)+\}/g);
                return i.test(this._tileUrl) ? (t = this._tileUrl.match(i)[0].replace(/[\{|\}]/g, "").split(","),
                this.tr++,
                t && this.tr >= t.length && (this.tr = 0),
                this._tileUrl.replace(i, t[this.tr])) : this._tileUrl
            }
            ,
            _t.prototype.Ys = function(c, l, d, p) {
                var v;
                if (!(this.aa.optimalZoom < this.xt[0] || this.aa.optimalZoom > this.xt[1])) {
                    this.Da(c);
                    for (var m = this, i = 0, n = c.length; i < n; i += 1)
                        !function(t) {
                            var n = m.layer.getLayerConfig()
                              , t = c[t]
                              , s = m.ma().replace("[z]", t.z + "").replace("[x]", t.x + "").replace("[y]", t.y + "")
                              , h = new U.Vs(t)
                              , e = (m.ua.Qo(h),
                            n.getTileUrl && (s = n.getTileUrl(t.x, t.y, t.z)),
                            U.ProjectionManager.getProjection(d).getResolution(t.z))
                              , r = t.x * m.Xa * e
                              , o = r + m.Xa * e
                              , e = (a = t.y * m.Xa * e) + m.Xa * e
                              , a = U.V[d].Xs(r, a)
                              , u = U.V[d].Xs(o, e);
                            function f(t) {
                                var i, n, s, e, r;
                                l && ((t = l.createTexture(t.target || t, {
                                    Zi: !0
                                })).bind(l.gl.CLAMP_TO_EDGE, l.gl.LINEAR, l.gl.LINEAR),
                                i = U.lcs.getLocalByCoord([h.Ro[0], h.Ro[1]]),
                                h.zo.z > U.za && (h.Ro[0] -= i.center[0],
                                h.Ro[1] -= i.center[1],
                                h.Ro[2] -= i.center[0],
                                h.Ro[3] -= i.center[1]),
                                n = l.fe(new Float32Array([h.Ro[0], h.Ro[1], 0, 1, h.Ro[2], h.Ro[1], 1, 1, h.Ro[0], h.Ro[3], 0, 0, h.Ro[2], h.Ro[1], 1, 1, h.Ro[2], h.Ro[3], 1, 0, h.Ro[0], h.Ro[3], 0, 0]), 16),
                                (e = (s = document.createElement("canvas")).getContext("2d")) && (r = this.Xa,
                                s.height = s.width = r,
                                s.style.height = s.style.width = r + "px",
                                e.beginPath(),
                                e.moveTo(0, 0),
                                e.lineTo(r, 0),
                                e.lineTo(r, r),
                                e.lineTo(0, r),
                                e.lineTo(0, 0),
                                e.lineWidth = 1,
                                e.font = "20px Verdana",
                                e.fillStyle = "#ff0000",
                                e.strokeStyle = "#FF0000",
                                e.strokeRect(0, 0, r, r),
                                e.fillText("z: " + h.zo.z, 10, 30),
                                e.fillText("x: " + h.zo.x, 10, 60),
                                e.fillText("y: " + h.zo.y, 10, 90),
                                e.stroke()),
                                (r = l.createTexture(s, {
                                    Zi: !0
                                })).bind(l.gl.MIRRORED_REPEAT, l.gl.LINEAR, l.gl.LINEAR_MIPMAP_NEAREST),
                                h.data = {
                                    texture: t,
                                    zs: n,
                                    Js: r,
                                    Hs: i
                                }),
                                h.status = U.TileState.LOADED,
                                p()
                            }
                            r = a[0],
                            o = u[0],
                            e = a[1],
                            h.Ro = [r, u[1], o, e],
                            h.status = U.TileState.LOADING,
                            "AMap.TileLayer.Flexible" === m.layer.CLASS_NAME || "AMap.TileLayer.WMTS" === m.layer.CLASS_NAME || "AMap.TileLayer.WMS" === m.layer.CLASS_NAME ? n.createTile(t.x, t.y, t.z, function(t) {
                                l ? f.call(this, t) : (h.data = t,
                                h.status = U.TileState.LOADED)
                            }
                            .bind(m), function() {
                                h.status = U.TileState.ERROR,
                                p()
                            }) : (a = new Image,
                            "w" === (null == (v = m.map) ? void 0 : v.baseRender) && (a.crossOrigin = "anonymous"),
                            a.onload = f.bind(m),
                            "d" === (null == (v = m.map) ? void 0 : v.baseRender) && 0 < s.indexOf("traffictile") && (s += "&hash=" + Math.random()),
                            a.src = s,
                            (h.data = a).addEventListener("dragstart", function(t) {
                                return t.preventDefault(),
                                !1
                            }))
                        }(i)
                }
            }
            ,
            _t.prototype.fa = function(t, i) {
                i = i || this.aa.optimalZoom;
                for (var n = this.Xa / 256, s = (n < 1 ? n = 1 / n : n--,
                1 << (i += n)); t < 0 || s <= t; )
                    t = s <= t ? t - s : t < 0 ? s + t : t;
                return t
            }
            ,
            _t.prototype.PF = function(t, i) {
                var n = U.ProjectionManager.getProjection(i).getResolution(t.z)
                  , s = (e = t.x * this.Xa * n) + this.Xa * n
                  , n = (t = t.y * this.Xa * n) + this.Xa * n
                  , t = U.V[i].Xs(e, t)
                  , i = U.V[i].Xs(s, n)
                  , e = t[0]
                  , s = i[0]
                  , n = t[1];
                return !(s < (i = this.map.getView().getStatus().boundsCoord)[0] && n < i[1] || e > i[2] && s > i[3])
            }
            ,
            _t.prototype.TB = function() {
                var t = !1;
                return this.layer.getState().detectRetina && (t = !0),
                !("d" !== U.Support.baseRender || !U.Support.Ue || !U.Support.$e) || t
            }
            ;
            var Ut, Gt = _t;
            function _t(t, i, n, s) {
                return (i = Ut.call(this, t, i, n, s) || this).ua = new wt(U.Support.$e ? 200 : 400),
                i.Xa = 256,
                i.sa = [],
                i.Zs = [],
                i.tr = -1,
                i.qa = !0,
                i.Za = !0,
                i.xt = t.zooms,
                i.Qs = t.dataZooms,
                i.Xa = t.tileSize,
                i._tileUrl = t.tileUrl,
                i
            }
            Yt = ut,
            U.Ei(Xt, Yt),
            Xt.prototype.loadData = function(t, i, n) {
                return this.ze = i,
                this.Oo || (this.Fo(!0),
                n()),
                !0
            }
            ,
            Xt.prototype.getData = function(t) {
                if (this.ir = t.bounds,
                this.Oo) {
                    var i = U.lcs.getLocalByCoord([t.centerCoord[0], t.centerCoord[1]])
                      , s = (n = U.ProjectionManager.getProjection(t.projectionId)).project(this.ir[0], this.ir[1])
                      , n = n.project(this.ir[2], this.ir[3])
                      , e = [0, 0, 0, 0];
                    if (t.optimalZoom >= U.Ra) {
                        for (var t = U.lcs.getLocalByCoord([s[0], s[1]]), s = U.lcs.getLocalByCoord([n[0], n[1]]), r = U.lcs.getSize(), e = [t.x - i.x, t.y - i.y, s.x - i.x, s.y - i.y], h = 0; h < e.length; h++)
                            0 !== e[h] && (e[h] *= r[0]);
                        e = [e[0] - t.center[0], e[1] - t.center[1], e[2] - s.center[0], e[3] - s.center[1]]
                    }
                    return {
                        texture: this._s,
                        zs: this.ks,
                        Sa: [0, 0]
                    }
                }
            }
            ;
            var Yt, Zt = Xt;
            function Xt(t, i, n, s) {
                return (t = Yt.call(this, t, i, n, s) || this).ir = n.getView().getStatus().bounds,
                t.io = s.canvas,
                t
            }
            Jt = ut,
            U.Ei(Ht, Jt),
            Ht.prototype.hasOverlay = function(t) {
                return -1 < this._overlays.indexOf(t)
            }
            ,
            Ht.prototype.getAllOverlays = function() {
                return this._overlays
            }
            ,
            Ht.prototype.add = function(t) {
                this.hasOverlay(t) || U.er(t) && (this._overlays.push(t),
                t.Zx(this.map),
                t.init(),
                t._bindEvents && t._bindEvents(),
                (U.GB(t) || U.VB(t)) && this.YB.push(t),
                t._afterSetMap && t._afterSetMap(this.map),
                this.map.setNeedUpdate(!0))
            }
            ,
            Ht.prototype.remove = function(t) {
                this.hasOverlay(t) && U.er(t) && (t._beforeRemoveMap && t._beforeRemoveMap(),
                this.ar(t),
                this.map.setNeedUpdate(!0),
                t.Zx(null))
            }
            ,
            Ht.prototype.getData = function(t, i) {
                this.nr();
                var n = 0
                  , s = 0
                  , e = this._overlays.length
                  , r = []
                  , h = new l(t.bounds);
                if (this.map.isDOMMode())
                    return {
                        sr: this._overlays
                    };
                for (; n < 8 && s < e; ) {
                    var o, a = this._overlays[s];
                    s++,
                    a && (o = Date.now(),
                    a._needUpdate && (a.ZB(i),
                    this.map.setNeedUpdate(!0)),
                    n += Date.now() - o)
                }
                for (var u = 0, f = this._overlays; u < f.length; u++) {
                    var c = (a = f[u]).getBounds();
                    a.visible && c && h.intersects(c) && r.push(a)
                }
                return {
                    sr: r
                }
            }
            ,
            Ht.prototype.loadData = function() {
                return !0
            }
            ,
            Ht.prototype.destroy = function() {
                this.map && this.map.off("zoomend", this.W_);
                for (var t = 0, i = this._overlays.slice(0); t < i.length; t++) {
                    var n = i[t];
                    this.remove(n),
                    n.destroy()
                }
                this._overlays = []
            }
            ,
            Ht.prototype.rr = function(t) {
                for (var i = t.lnglat, n = t.pixel, s = this._overlays.length - 1; 0 <= s; s--) {
                    var e = this._overlays[s];
                    if (!e._opts.noSelect && e.visible)
                        if (U.sB(e) && n) {
                            if (e.containsWithPixel(n))
                                return e
                        } else if (e.contains(i, t))
                            return e
                }
            }
            ,
            Ht.prototype.W_ = function() {
                for (var t = 0, i = this.YB; t < i.length; t++) {
                    var n = i[t];
                    n.W_ && n.W_()
                }
            }
            ,
            Ht.prototype.nr = function() {
                this._overlays.sort(function(t, i) {
                    return t._opts.zIndex - i._opts.zIndex
                })
            }
            ,
            Ht.prototype.ar = function(t) {
                var i = this._overlays.indexOf(t);
                -1 < i && this._overlays.splice(i, 1),
                (U.GB(t) || U.VB(t)) && -1 < (i = this.YB.indexOf(t)) && this.YB.splice(i, 1)
            }
            ;
            var Jt, qt, Vt = Ht;
            function Ht(t, i, n, s) {
                return (t = Jt.call(this, t, i, n, s) || this)._overlays = [],
                t.YB = [],
                t.Fo(!0),
                t.W_ = t.W_.bind(t),
                n.on("zoomend", t.W_),
                t
            }
            function Qt(t, i, n, s) {
                return (i = qt.call(this, t, i, n, s) || this).type = "vector",
                i.Ya = !1,
                i.Va = !1,
                i.Xa = 256,
                i.sa = [],
                i.la = [],
                i.xt = [2, 22],
                i.qa = !0,
                i.Za = !0,
                i.a_ = !1,
                i.Xa = t.tileSize,
                i._tileUrl = t.tileUrl,
                s = U.Support.$e ? 50 : 200,
                i.ua = new wt(s),
                i.NE = new St(s),
                (i.map = n).gn.Ja(AMap.getConfig().protocol),
                i
            }
            qt = ut,
            U.Ei(Qt, qt),
            Qt.prototype.loadData = function(s, t, e, i) {
                for (var r = this, n = (this.aa = s,
                this.sa = [],
                s.optimalResolution), h = s.zoom, o = this.ha(s.boundsCoord, s.optimalZoom, n, s), a = [], u = U.map(o, function(t) {
                    return t.key
                }), f = [], c = 0, l = this.la; c < l.length; c++) {
                    var d = l[c];
                    u.indexOf(d.key) < 0 && (m = this.ua.getTile(d)) && m.status !== U.TileState.LOADED && m.request && (m.request.cancel(),
                    delete m.request,
                    this.ua.ea(m))
                }
                for (var p = [], v = (i.getMapState().panning,
                0); v < o.length; v++) {
                    var m, y = o[v], b = new U.ca(y.z,this.fa(y.x, y.z),y.y), g = new U.ca(y.z,y.x,y.y);
                    (m = this.ua.getTile(b)) ? m.status === U.TileState.LOADED ? this.sa.push(g) : f.push(y) : ((g = new U.Sw(b)).nG(this.type),
                    g.status = U.TileState.LOADING,
                    this.ua.Jo(g),
                    p.push(b),
                    f.push(y)),
                    m && m.status === U.TileState.LOADED || a.push(y)
                }
                return this.da(s, this.sa, a, i),
                this.la = f,
                0 === p.length || (U.map(p, function(t) {
                    var i, n = r.ua.getTile(t);
                    n && (i = r.AD(t.x, t.y, t.z),
                    r.bw(n, {
                        url: i,
                        zo: t,
                        zoom: h,
                        viewState: s
                    }, e))
                }),
                0 === p.length)
            }
            ,
            Qt.prototype.bw = function(t, i, s) {
                var n, e = this, r = i.url, h = i.zo, o = i.zoom, i = i.viewState;
                "AMap.MapboxVectorTileLayer" === this.layer.CLASS_NAME && (n = this.layer.cX && this.layer.cX()),
                this.lX(t, {
                    url: r,
                    ya: h.key,
                    zoom: o,
                    optimalZoom: i.optimalZoom,
                    projectionId: i.projectionId,
                    tileCoord: h,
                    tileSize: this.Xa,
                    styles: n
                }, function(t) {
                    var i, n = t && e.ua.getTile(t.zo);
                    n && (delete n.request,
                    n.status = U.TileState.LOADED,
                    n.localCoord = t.zS,
                    n.Ro = t.Ro,
                    n.stencil = t.stencil,
                    i = U.lcs.getLocalByCoord([n.Ro[0], n.Ro[1]]),
                    n.data = U.Ln(U.Ln({}, t), {
                        Hs: i
                    }),
                    s())
                })
            }
            ,
            Qt.prototype.getData = function(t) {
                var i = t.optimalResolution
                  , n = t.optimalZoom
                  , i = this.ha(t.boundsCoord, n, i, t)
                  , s = this.aa && this.aa.projectionId || "EPSG:3857"
                  , e = U.ProjectionManager.getProjection(s)
                  , r = []
                  , h = this.map.qF();
                if (this.ua.QF(h),
                this.sa.sort(function(t) {
                    return n === t.z + 1 ? 1 : -1
                }),
                0 < this.sa.length)
                    for (var o = 0; o < this.sa.length; o++) {
                        var u, a, f = this.sa[o], c = this.ua.getTile(f), l = [0, 0], d = t.centerCoord, d = U.lcs.getLocalByCoord([d[0], d[1]]);
                        !c && (a = this.fa(f.x, f.z),
                        a = this.ua.getTile(new U.ca(f.z,a,f.y))) && (c = new U.Sw(f),
                        u = e.getResolution(f.z),
                        f = f.x - a.zo.x,
                        l[0] += u * this.Xa * f,
                        c.Ro = a.Ro,
                        c.localCoord = a.localCoord,
                        c.data = a.data,
                        c.Sa = l,
                        c.status = a.status),
                        c && 10 < n && (n >= U.Ra && c.data.Hs ? (u = U.lcs.getSize(),
                        f = c.data.Hs.x - d.x,
                        a = c.data.Hs.y - d.y,
                        0 != f && (f *= u[0],
                        l[0] = f),
                        0 != a && (a *= u[1],
                        l[1] = a),
                        n >= U.Ra && U.za >= c.zo.z && (l[0] = -d.center[0],
                        l[1] = -d.center[1])) : n < U.Ra && U.za < c.zo.z && (l[0] = d.center[0],
                        l[1] = d.center[1])),
                        c && (c.Sa = l,
                        c.stamp = h,
                        r.push(c))
                    }
                return s = U.every(i, function(i) {
                    return U.some(r, function(t) {
                        return t.zo.key === i.key
                    })
                }),
                this.Fo(s),
                i = this.jE(r),
                s && (this.a_ = !0,
                this.map.bZ.dynamic.set("firstAllLoaded", !0)),
                this.a_ && this.map.bZ.dynamic.set("firstLabelDataAllLoaded", !0),
                {
                    s_: this.a_,
                    yZ: i,
                    fo: !!s,
                    tiles: r
                }
            }
            ,
            Qt.prototype.destroy = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request),
                    t.destroy()
                }),
                this.ua.destroy(),
                this.sa = [],
                this.la = []
            }
            ,
            Qt.prototype.forEachTileCache = function(t) {
                this.ua.forEach(t)
            }
            ,
            Qt.prototype.reload = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request)
                }),
                this.ua.destroy(),
                this.sa = [],
                this.la = []
            }
            ,
            Qt.prototype.setTileUrl = function(t) {
                this._tileUrl = t || this._tileUrl
            }
            ,
            Qt.prototype.getTileCache = function() {
                return this.ua
            }
            ,
            Qt.prototype.setTileCacheSize = function(t) {
                t = t || (U.Support.$e ? 50 : 200),
                this.ua.Xo(t)
            }
            ,
            Qt.prototype.AD = function(t, i, n) {
                return this._tileUrl.replace("[x]", t.toString()).replace("[y]", i.toString()).replace("[z]", n.toString()).replace("{1234}", (Math.abs(t + i) % 4 + 1).toString())
            }
            ,
            Qt.prototype.Da = function(t, i) {
                var e, r, h;
                t.length && (e = this.Pa.z,
                r = (this.Pa.ja + this.Pa.Oa) / 2,
                h = (this.Pa.Fa + this.Pa.Ea) / 2,
                t.sort(function(t, i) {
                    var n = (t.x << e - t.z) - r
                      , t = (t.y << e - t.z) - h
                      , s = (i.x << e - i.z) - r;
                    return n * n + t * t <= s * s + (i = (i.y << e - i.z) - h) * i ? -1 : 1
                }))
            }
            ,
            Qt.prototype.ha = function(t, i, n, s) {
                for (var e = this.layer.getSourceConfig().dataZooms, e = (i = +Math.max(Math.min(i, e[1]), e[0]),
                n = U.ProjectionManager.getProjection(s.projectionId).getResolution(i),
                this.Xa), s = 20037508.342789244, r = (t[0] + s) / n, h = -(t[3] - s) / n, o = -(t[1] - s) / n, a = Math.floor((t[2] + s) / n / e), u = Math.min((1 << i) - 1, Math.floor(o / e)), t = Math.floor(r / e), f = Math.max(Math.floor(h / e), 0), c = (this.Pa = {
                    Oa: a,
                    Ea: u,
                    ja: t,
                    Fa: f,
                    z: i
                },
                []), l = t; l <= a; l += 1)
                    for (var d = f; d <= u; d += 1)
                        c.push(new U.ca(i,l,d));
                return this.Da(c),
                c
            }
            ,
            Qt.prototype.da = function(t, i, n, s) {
                if (t = t.optimalZoom - 1,
                this.Za = "overlay" !== this.layer.type,
                this.qa = "overlay" !== this.layer.type,
                this.Za)
                    for (var e = Math.min(this.xt[1] - 1, 2 + t), r = 1 + t; n.length && r <= e; r += 1) {
                        for (var h = [], o = [], a = r, u = n.length - 1; 0 <= u; --u)
                            for (var f = n[u], c = f.x << 1, l = f.y << 1, d = 1; 0 <= d; --d)
                                for (var p = 1; 0 <= p; --p) {
                                    var v = new U.ca(a,this.fa(c + d, a),l + p)
                                      , m = this.ua.getTile(v)
                                      , y = new U.ca(a,c + d,l + p);
                                    (m && m.status === U.TileState.LOADED ? o : h).push(y)
                                }
                        o.length && i.push.apply(i, o),
                        n = h
                    }
                if (this.qa)
                    for (var b = this.xt[0] - 1, r = t - 1; n.length && b <= r; --r) {
                        for (var o = [], h = [], g = {}, u = n.length - 1; 0 <= u; --u) {
                            var M = n[u]
                              , a = r
                              , k = M.z - a
                              , d = M.x >> k
                              , p = M.y >> k;
                            g[M = (v = new U.ca(a,this.fa(d, a),p)).key] || (m = this.ua.getTile(v),
                            g[M] = !0,
                            (m && m.status === U.TileState.LOADED ? o : h).push(new U.ca(a,d,p)))
                        }
                        o.length && i.push.apply(i, o),
                        n = h
                    }
                return i
            }
            ,
            Qt.prototype.fa = function(t, i) {
                for (var n = 1 << (i = i || this.aa.optimalZoom); t < 0 || n <= t; )
                    t = n <= t ? t - n : t < 0 ? n + t : t;
                return t
            }
            ,
            Qt.prototype.vX = function(t, i) {
                var n = [-180, -90]
                  , s = [180, 90]
                  , e = U.ProjectionManager.getProjection("EPSG:3857")
                  , r = e.project(256 * t + n[0], s[1] - 256 * i)
                  , t = e.project(256 * (t + 1) + n[0], s[1] - 256 * (i + 1));
                return [r[0], r[1], t[0], t[1]]
            }
            ,
            Qt.prototype.jE = function(t) {
                for (var i = !!t.length, n = 0, s = t; n < s.length; n++) {
                    var e = s[n].data;
                    if (i)
                        for (var r = 0, h = e; r < h.length; r++) {
                            var o = h[r];
                            if (!(i = i && !!o.Ta))
                                break
                        }
                }
                return i
            }
            ,
            $t = Kt = Qt,
            U.Ei(ii, $t),
            ii.prototype.ha = function(t, i, n, s) {
                for (var e = this.layer.getSourceConfig().dataZooms, e = (i = Math.max(Math.min(i, e[1]), e[0]) - 1,
                n = U.ProjectionManager.getProjection(s.projectionId).getResolution(i),
                this.Xa), s = 20037508.342789304, r = (t[0] + s) / n, h = -(t[3] - s) / n, o = -(t[1] - s) / n, a = Math.floor((t[2] + s) / n / e), u = Math.min((1 << i) - 1, Math.floor(o / e)), t = Math.floor(r / e), f = Math.max(Math.floor(h / e), 0), c = (this.Pa = {
                    Oa: a,
                    Ea: u,
                    ja: t,
                    Fa: f,
                    z: i
                },
                []), l = t; l <= a; l += 1)
                    for (var d = f; d <= u; d += 1)
                        c.push(new U.ca(i,l,d));
                return this.Da(c),
                c
            }
            ;
            var $t, ti = ii;
            function ii(t, i, n, s) {
                return (t = $t.call(this, t, i, n, s) || this).lX = t.map.gn.loadDistrictSourceTile.bind(t.map.gn),
                t
            }
            ni = Kt,
            U.Ei(ei, ni),
            ei.prototype.reStyle = function(i, s) {
                var e = this;
                this.ua.forEach(function(n) {
                    var t;
                    n.status === U.TileState.LOADED ? (n.zo.z + 1 !== s && e.ua.ea(n),
                    t = U.Ln(U.Ln({}, n.data), {
                        dX: null,
                        Dc: null,
                        A_: null,
                        $c: null,
                        pX: null,
                        labels: null
                    }),
                    e.yX.mX(t, i, function(t, i) {
                        n.data.Oc = i.Oc,
                        n.data.Fc = i.Fc,
                        n.data.w0 = i.w0,
                        n.data.Uc = i.Uc,
                        n.data.dX = i.dX,
                        n.data.IX = i.IX,
                        n.data.labels = i.labels,
                        e.map.setNeedUpdate(!0)
                    })) : n.status === U.TileState.LOADING && (null != (t = n.request) && t.cancel(),
                    e.ua.ea(n))
                })
            }
            ,
            ei.prototype.ha = function(t, i, n, s) {
                for (var e = this.layer.getSourceConfig().dataZooms, e = (i = Math.max(Math.min(i - 1, e[1]), e[0]),
                n = U.ProjectionManager.getProjection(s.projectionId).getResolution(i),
                this.Xa), s = 20037508.342789244, r = (t[0] + s) / n, h = -(t[3] - s) / n, o = -(t[1] - s) / n, a = Math.floor((t[2] + s) / n / e), u = Math.min((1 << i) - 1, Math.floor(o / e)), t = Math.floor(r / e), f = Math.max(Math.floor(h / e), 0), c = (this.Pa = {
                    Oa: a,
                    Ea: u,
                    ja: t,
                    Fa: f,
                    z: i
                },
                []), l = t; l <= a; l += 1)
                    for (var d = f; d <= u; d += 1)
                        c.push(new U.ca(i,l,d));
                return this.Da(c),
                c
            }
            ;
            var ni, si = ei;
            function ei(t, i, n, s) {
                return (t = ni.call(this, t, i, n, s) || this).yX = new U.bX,
                t._tileUrl = s.getSourceConfig().tileUrl,
                t.lX = t.map.gn.gX.bind(t.map.gn),
                t
            }
            ri = ut,
            U.Ei(oi, ri),
            oi.prototype.loadData = function(t, i, n) {
                return this.ze = i,
                this.Oo || (this.Fo(!0),
                n()),
                !0
            }
            ,
            oi.prototype.getData = function(t) {
                return this.ir = t.bounds,
                {
                    Sa: [0, 0]
                }
            }
            ;
            var ri, hi = oi;
            function oi(t, i, n, s) {
                return (t = ri.call(this, t, i, n, s) || this).ir = n.getView().getStatus().bounds,
                t.io = s.canvas,
                t
            }
            ai = ut,
            U.Ei(fi, ai),
            fi.prototype.loadData = function(t, i, n) {
                return !0
            }
            ,
            fi.prototype.getData = function(t) {
                return !0
            }
            ,
            fi.prototype.destroy = function() {
                this.gs && this.gs.destroy && this.gs.destroy()
            }
            ;
            var ai, ui = fi;
            function fi(t, i, n, s) {
                return (t = ai.call(this, t, i, n, s) || this).gs = s,
                t
            }
            ci = ut,
            U.Ei(di, ci),
            di.prototype.CS = function() {
                this.AS = !1
            }
            ,
            di.prototype.loadData = function(t, i, n) {
                return !0
            }
            ,
            di.prototype.getData = function(t) {
                var i, r, e, h, n, o, a, u = this, s = this.gs.getState().path;
                return this.AS || !s || (i = U.GeometryUtil.typePolygon(s),
                r = {
                    type: "Polygon",
                    $S: new Array,
                    polygons: new Array,
                    BM: new Array,
                    LS: {
                        x: 0,
                        y: 0
                    }
                },
                i && "Polygon" === i ? (s[0][0]instanceof U.LngLat ? r.LS = U.lcs.getLocalByLnglat(s[0][0].toString()) : r.LS = U.lcs.getLocalByLnglat(s[0][0]),
                e = (n = r.LS).x,
                h = n.y,
                U.forEach(s, function(t, i) {
                    var s;
                    0 === i ? U.forEach(t, function(t) {
                        t instanceof U.LngLat && (t = t.toArray());
                        var t = U.lcs.getLocalByLnglat(t)
                          , i = u.DS(e, h, t.x, t.y)
                          , n = i[0];
                        r.$S.push(t.Sa[0] + n, t.Sa[1] + i[1])
                    }) : (s = [],
                    U.forEach(t, function(t) {
                        t instanceof U.LngLat && (t = t.toArray());
                        var t = U.lcs.getLocalByLnglat(t)
                          , i = u.DS(e, h, t.x, t.y)
                          , n = i[0];
                        s.push(t.Sa[0] + n, t.Sa[1] + i[1])
                    }),
                    r.BM.push(s))
                })) : i && "MultiPolygon" === i && (r.type = "MultiPolygon",
                s[0][0][0]instanceof U.LngLat ? r.LS = U.lcs.getLocalByLnglat(s[0][0][0].toArray()) : r.LS = U.lcs.getLocalByLnglat(s[0][0][0]),
                o = (n = r.LS).x,
                a = n.y,
                U.forEach(s, function(t) {
                    var e = []
                      , n = [];
                    U.forEach(t, function(t, i) {
                        var s;
                        0 === i ? U.forEach(t, function(t) {
                            t instanceof U.LngLat && (t = t.toArray());
                            var t = U.lcs.getLocalByLnglat(t)
                              , i = u.DS(o, a, t.x, t.y)
                              , n = i[0];
                            e.push(t.Sa[0] + n, t.Sa[1] + i[1])
                        }) : (s = [],
                        U.forEach(t, function(t) {
                            t instanceof U.LngLat && (t = t.toArray());
                            var t = U.lcs.getLocalByLnglat(t)
                              , i = u.DS(o, a, t.x, t.y)
                              , n = i[0];
                            s.push(t.Sa[0] + n, t.Sa[1] + i[1])
                        }),
                        n.push(s))
                    }),
                    r.BM.push(n),
                    r.polygons.push(e)
                })),
                this.AS = this.zw(r),
                this.AS)
            }
            ,
            di.prototype.zw = function(t) {
                if (t.Oc = new U._w,
                !t.Dc) {
                    t.Dc = new U.K_;
                    var i = []
                      , n = [];
                    "Polygon" === t.type ? (i = [t.$S],
                    n = [t.BM]) : "MultiPolygon" === t.type && (i = t.polygons,
                    n = t.BM);
                    for (var s = 0; s < i.length; s++) {
                        for (var e = i[s], r = [], h = 0; h < n[s].length; h++) {
                            var o = n[s][h];
                            r.push(e.length / 2),
                            e.push.apply(e, o)
                        }
                        var a = t.Dc.Nx(e, r);
                        0 < a && t.Oc.add(99, 99, a, U.zoomRange[0], U.zoomRange[1])
                    }
                    return t
                }
            }
            ,
            di.prototype.DS = function(t, i, n, s) {
                return n -= t,
                t = s - i,
                [n * (s = U.lcs.getSize())[0], t * s[1]]
            }
            ;
            var ci, li = di;
            function di(t, i, n, s) {
                return (t = ci.call(this, t, i, n, s) || this).gs = s,
                t
            }
            var pi = {
                ielt9: "ActiveXObject"in window && !document.addEventListener,
                opts: {
                    callback: "callback",
                    type: "json",
                    charset: "utf-8"
                },
                setOptions: function(t) {
                    this.opts = U.assign(this.opts, t)
                },
                bv: function() {},
                gv: function() {
                    this.emit("error", {
                        info: "TIME_OUT_A"
                    })
                },
                JSONP: function(i, n, t) {
                    void 0 === t && (t = {}),
                    i = encodeURI(i);
                    var s = U.Util.getGuid("jsonp_", 6) + "_"
                      , e = document.createElement("script")
                      , r = (e.type = "text/javascript",
                    e.charset = "utf-8",
                    e["async"] = !0,
                    t = U.assign({}, this.opts, t),
                    function() {
                        window[s] = null,
                        e.onerror = null,
                        e.parentNode && e.parentNode.removeChild(e)
                    }
                    )
                      , h = (e.onerror = function(t) {
                        r(),
                        n && n("error", {
                            url: i,
                            info: "Request Error"
                        })
                    }
                    ,
                    window[s] = function(t) {
                        r(),
                        n && n("complete", {
                            info: "ok",
                            url: i,
                            data: t
                        })
                    }
                    ,
                    "?")
                      , h = (-1 !== i.indexOf("?") && (h = "&"),
                    i + h + t.callback + "=" + s);
                    e.src = h,
                    (document.getElementsByTagName("body")[0] || document.getElementsByTagName("head")[0]).appendChild(e)
                },
                Ajax: function(i, t, n, s) {
                    var e, r;
                    return window.XMLHttpRequest === undefined && window.wv ? ((e = this._v = new window.wv).onerror = function(t) {
                        n("error", {
                            info: "Request Error",
                            url: i,
                            data: ""
                        })
                    }
                    ,
                    e.onload = function() {
                        n("complete", {
                            url: i,
                            data: e.responseText
                        })
                    }
                    ,
                    e.open(t.type || "GET", i),
                    setTimeout(function() {
                        e.send(t.content || null)
                    }, 0),
                    e) : window.XMLHttpRequest ? ((r = new XMLHttpRequest).onreadystatechange = function() {
                        var t;
                        4 === r.readyState && (200 === r.status ? (t = "arraybuffer" === r.responseType ? r.response : r.responseText,
                        n("complete", {
                            info: "ok",
                            url: i,
                            data: t
                        })) : (r.abort(),
                        n("error", {
                            info: r.status,
                            url: i,
                            data: ""
                        })))
                    }
                    ,
                    r.onerror = function(t) {
                        r.abort(),
                        n("error", {
                            info: "Request Error",
                            url: i,
                            data: ""
                        })
                    }
                    ,
                    r.open(t.type || "GET", i, !0),
                    r.responseType = t.responseType || "text",
                    "POST" === t.type && s && s.key && (r.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                    t.content = "key=" + s.key + "&oversea=" + s.oversea),
                    r.send(t.content || null),
                    r) : void n("error", {
                        info: "Not Support Ajax",
                        url: i,
                        data: ""
                    })
                },
                sendRequest: function(t, i, n) {
                    void 0 === i && (i = "GET"),
                    void 0 === n && (n = null);
                    try {
                        var s = new XMLHttpRequest;
                        return s.open(i, t, !1),
                        "POST" === i && n ? (s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                        s.send(n)) : s.send(),
                        200 <= s.status && s.status < 300 ? "arraybuffer" === s.responseType ? s.response : s.responseText : (console.log("Request failed with status:", s.status, s.statusText),
                        null)
                    } catch (e) {
                        return console.log("An error occurred:", e),
                        null
                    }
                },
                sendRequestInit: function(s) {
                    return new Promise(function(t, i) {
                        var n = new XMLHttpRequest;
                        n.onload = function() {
                            (200 <= n.status && n.status <= 299 ? t : i)(n.response)
                        }
                        ,
                        n.onerror = i,
                        n.open("GET", s, !0),
                        n.responseType = "json",
                        n.send()
                    }
                    )
                }
            }
              , vi = (mi.prototype.add = function(t, i, n, s, e) {
                yi.getKey(t, i, e, s) !== (this.WM ? this.WM.getKey() : "-1") && (this.XR = t,
                this.qR = i,
                this.VM += this.WM ? this.WM.length : 0,
                this.WM = new yi(t,i,this.VM,s,e),
                this.jc.push(this.WM)),
                this.WM.add(n)
            }
            ,
            mi);
            function mi() {
                this.jc = [],
                this.XR = 0,
                this.qR = 0,
                this.VM = 0
            }
            bi.getKey = function(t, i, n, s) {
                return t + ":" + i + ":" + n + ":" + s
            }
            ,
            bi.prototype.add = function(t) {
                this.length += t
            }
            ,
            bi.prototype.getKey = function() {
                return this.color + ":" + this.width + ":" + this.maxzoom + ":" + this.minzoom
            }
            ;
            var yi = bi;
            function bi(t, i, n, s, e) {
                this.color = t,
                this.width = i,
                this.offset = n,
                this.minzoom = s,
                this.maxzoom = e,
                this.length = 0
            }
            gi = Gt,
            U.Ei(ki, gi),
            ki.prototype.loadData = function(t, i, n, s) {
                var h = this
                  , e = (this.aa = t,
                this.ze = i,
                this.Zs = [],
                this.sa = [],
                t.projectionId)
                  , r = []
                  , o = this.ha(t.boundsCoord, t.optimalZoom, t.optimalResolution)
                  , a = (this.ua.forEach(function(t) {
                    var i = t.zo
                      , n = !1;
                    if (t.status !== U.TileState.LOADED) {
                        for (var s = o.ja; s <= o.Oa; s += 1)
                            for (var e = o.Fa; e <= o.Ea; e += 1) {
                                var r = h.fa(s, o.z);
                                i.z === o.z && i.y === e && r === i.x && (n = !0)
                            }
                        n || (t.request && t.request.abort && t.request.abort(),
                        h.ua.ea(t))
                    }
                }),
                this.qs(t, this.Zs, r));
                return this.Ys(a, i, e, n),
                this.da(t, this.sa, r, s),
                this.sa = this.sa.concat(this.Zs),
                0 === a.length
            }
            ,
            ki.prototype.Ys = function(h, t, C, T) {
                if (!(this.aa.optimalZoom < this.xt[0] || this.aa.optimalZoom > this.xt[1])) {
                    this.Da(h);
                    var i = this.map.mapStyle.vn.MS("traffic");
                    i && i.multiFillColors && ((i = i.multiFillColors).congested && i.congested,
                    i.unknown) && i.unknown;
                    for (var S = this.layer.getOptions().rZ, o = this, n = 0, s = h.length; n < s; n += 1)
                        !function(t) {
                            var t = h[t]
                              , k = U.Util.Rg(t.x, t.y, t.z)
                              , i = o.ll(k)
                              , w = new U.Sw(t)
                              , x = (o.ua.Qo(w),
                            U.ProjectionManager.getProjection(C).getResolution(t.z))
                              , n = (r = t.x * o.Xa * x) + o.Xa * x
                              , s = (t = t.y * o.Xa * x) + o.Xa * x
                              , t = U.V[C].Xs(r, t)
                              , e = U.V[C].Xs(n, s)
                              , r = t[0]
                              , n = e[0]
                              , s = t[1]
                              , A = (w.Ro = [r, e[1], n, s],
                            w.status = U.TileState.LOADING,
                            U.lcs.getLocalByCoord([w.Ro[0], w.Ro[1]]))
                              , z = w.zo.z > U.za;
                            z && (w.Ro[0] -= A.center[0],
                            w.Ro[1] -= A.center[1],
                            w.Ro[2] -= A.center[0],
                            w.Ro[3] -= A.center[1]),
                            w.request = pi.Ajax(i, {}, function(t, i) {
                                w.data = {};
                                try {
                                    i = JSON.parse(i.data)
                                } catch (M) {
                                    return w.status = U.TileState.LOADED,
                                    void T()
                                }
                                if (i = i.data[k.join("_")],
                                "complete" === t && i) {
                                    for (var n = new vi, s = new U.J_, e = 0, r = i.length; e < r; e++)
                                        for (var h = i[e], o = 0, a = h.length; o < a; o++)
                                            for (var u = h[o], f = .6 * u[0] * S, c = 0, l = u[1].length; c < l; c++) {
                                                for (var d = [], p = U.Util.Eg(u[1][c]), v = 0, m = p.length; v < m; v += 2) {
                                                    var y = x * (256 * w.zo.x + p[v])
                                                      , b = x * (256 * w.zo.y + p[v + 1])
                                                      , y = U.V[C].Xs(y, b);
                                                    z && (y[0] -= A.center[0],
                                                    y[1] -= A.center[1]),
                                                    d.push(y[0], y[1])
                                                }
                                                var g = s.hb(d).Iw;
                                                n.add(e, f, g, 8, 20)
                                            }
                                    w.data = {
                                        $c: s,
                                        Uc: n,
                                        Hs: A
                                    }
                                }
                                w.status = U.TileState.LOADED,
                                T()
                            })
                        }(n)
                }
            }
            ;
            var gi, Mi = ki;
            function ki(t, i, n, s) {
                return (t = gi.call(this, t, i, n, s) || this).Qs = [3, 17],
                t.Xa = 256,
                t.Za = t.qa = !1,
                t.ll = function(t) {
                    return AMap.getConfig().protocol + "://vdata.amap.com/traffic?key=" + AMap.getConfig().key + "&v=" + AMap.getConfig().version + "&t=" + t + "&w=" + (new Date).getTime()
                }
                ,
                t
            }
            var wi, Ai = {
                nebula: "tile",
                mapbox: "tile",
                nebulaLabel: "tile",
                indoor: "other"
            }, zi = (wi = ut,
            U.Ei(Ci, wi),
            Ci.prototype.loadData = function(e, t, i, r, n) {
                var s, h = this, o = this.Yh;
                for (s in Object.keys(o).length,
                o)
                    !function(s) {
                        o.hasOwnProperty(s) && o[s].YE(function(t, i) {
                            var n = i.GW
                              , i = i.cb;
                            "worker" === (void 0 === n ? "main" : n) ? (h.Ye[s] = i,
                            r.gn.innerLabelsLoadData({
                                id: s,
                                bounds: e.bounds.slice(),
                                zoom: e.optimalZoom
                            }, function(t) {
                                Object.keys(t).length
                            })) : (t = function(t, i) {
                                var n, s, e = i.R_, r = i.z_, h = {};
                                for (n in t)
                                    t.hasOwnProperty(n) && (s = t[n],
                                    s = new U.eG({
                                        R_: e,
                                        z_: r
                                    }).Ns(s.data, {
                                        zoom: s.zoom,
                                        from: "inner",
                                        center: s.center
                                    }),
                                    h[n] = new U.La(n,s));
                                return h
                            }(t, {
                                R_: h.Mf,
                                z_: h.ac
                            }),
                            i && i(t))
                        })
                    }(s);
                return !0
            }
            ,
            Ci.prototype.getData = function(t) {
                var i, n, s, e, r = this.Yh, h = {
                    tile: [],
                    other: []
                }, o = !0;
                for (i in r)
                    r.hasOwnProperty(i) && (e = r[i],
                    n = Ai[i] || "other",
                    e) && (s = e.getData(t),
                    e = e.lo(),
                    h[n].push(s),
                    o = o && e);
                return this.Oo = o,
                this.Fo(o),
                h
            }
            ,
            Ci.prototype.getSources = function() {
                return this.Yh
            }
            ,
            Ci.prototype.addSource = function(t, i) {
                this.Yh[t] = i
            }
            ,
            Ci.prototype.Xh = function(t) {
                delete this.Yh[t]
            }
            ,
            Ci.prototype.uU = function(t) {
                var i = t.id
                  , n = this.Ye;
                n[i] && n[i](t)
            }
            ,
            Ci.prototype.destroy = function() {
                var t, i, n = this.Yh;
                for (t in n)
                    n.hasOwnProperty(t) && (i = n[t]) && i.destroy()
            }
            ,
            Ci.prototype.reload = function() {
                var t, i, n = this.Yh;
                for (t in n)
                    n.hasOwnProperty(t) && (i = n[t]) && i.reload && i.reload()
            }
            ,
            Ci.prototype.Ia = function() {
                this.map.gn.on("dynamicTextVerticeLoadedByTile", this.uU.bind(this))
            }
            ,
            Ci);
            function Ci(t, i, n, s) {
                return (t = wi.call(this, t, i, n, s) || this).Yh = {},
                t.Ye = {},
                t.Mf = n.R_,
                t.ac = n.z_,
                t.Ia(),
                t
            }
            var Ti, Si = U.Support.scale, Ii = (Ti = s,
            U.Ei(Li, Ti),
            Li.prototype.loadData = function(t, i, n, s) {
                var e = this;
                if (!s.gn.dE)
                    return !1;
                this.aa = t,
                this.sa = [];
                for (var r = t.bounds, h = this.ra(t.optimalZoom), o = this.ha(r, h), r = U.map(o, function(t) {
                    var i = e.fa(t.x, t.z);
                    return t.z + "," + i + "," + t.y
                }), a = this.QH.qH(r).yB, u = [], f = 0; f < o.length; f++) {
                    var c, l, d = o[f], p = new U.ca(d.z,this.fa(d.x, d.z),d.y), v = new U.ca(d.z,d.x,d.y), m = U.zB.ALL, y = this.ua.getTile(p, !0);
                    y ? (c = this.ua.MD(y.tag, m)) && (y.tag = m,
                    l = d.key + "," + U.Util.SD(c),
                    a.indexOf(l) < 0) && u.push(l) : (l = p.key + "," + U.Util.SD(m),
                    a.indexOf(l) < 0 && ((d = new U.pa(p)).status = U.TileState.LOADING,
                    this.ua.Jo(d),
                    d.tag = m,
                    u.push(l))),
                    !y || y.status !== U.TileState.LOADED && y.status !== U.TileState.RELOADING || this.sa.push(v)
                }
                return this.da(t, this.sa, [], s),
                this.zD(u, t, h, s, n, "transit,road,region,building"),
                0 === u.length
            }
            ,
            Li.prototype.destroy = function() {
                this.mapStyle && this.mapStyle.destroy && (this.mapStyle.destroy(),
                delete this.mapStyle),
                this.R_ && this.R_.destroy && (this.R_.destroy(),
                delete this.R_)
            }
            ,
            Li.prototype.reload = function() {
                var i = this;
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request),
                    t.destroy(),
                    i.ua.ea(t)
                }),
                this.sa = [],
                this.la = []
            }
            ,
            Li);
            function Li(t, i, n, s) {
                var e = Ti.call(this, t, i, n, s) || this
                  , i = (e.Xa = t.tileSize,
                e._tileUrl = t.tileUrl,
                U.Support.$e ? 50 : 200);
                return e.ua = new zt(i),
                n.gn.Ha({
                    scale: Si,
                    showLabel: n.showLabel,
                    DD: -1 !== location.search.indexOf("forceAll")
                }),
                e.R_ = n.R_,
                e.z_ = n.z_,
                n.gn.Ja(AMap.getConfig().protocol),
                e.mapStyle = n.mapStyle,
                e.mapStyle.pn(function() {
                    n && n.gn && e.sD()
                }),
                e.Ia(),
                e
            }
            Di = ut,
            U.Ei(Ri, Di),
            Ri.prototype.loadData = function(t, i, n, s, e) {
                var r;
                if (!(e = e.getSource("nebula")))
                    return this.gs && (r = this.gs.VR.showId) && this.GR([r]),
                    !1;
                for (var h = e.getData(t).tiles, o = h.length, a = [], u = 0; u < o; u++)
                    for (var f = 0, c = h[u].data || []; f < c.length; f++) {
                        var l = c[f];
                        if (l.indoorInfo)
                            for (var d = l.indoorInfo, p = d.length, v = 0; v < p; v++) {
                                for (var m = d[v], y = !1, b = 0; b < a.length; b++)
                                    m === a[b] && (y = !0);
                                y || a.push(m)
                            }
                    }
                return this.GR(a),
                this.Fo(!0),
                !0
            }
            ,
            Ri.prototype.getData = function() {
                return this._indoorData
            }
            ,
            Ri.prototype.lo = function() {
                return !0
            }
            ,
            Ri.prototype.GR = function(t, i) {
                if (!t || t.length < 1)
                    return null;
                if (!this.map.isDOMMode()) {
                    for (var s = (n = this.gs).VR, e = [], n = this._config.server + "/v3/indoor/indoormaps?", r = t, h = r.length, o = [], a = [], t = [], u = !1, f = 0; f < h; f++) {
                        var c = r[f]
                          , l = 1
                          , d = (this._indoorData.data[c] || (this._indoorData.data[c] = {}),
                        s.floorInfo && s.floorInfo[c] && (d = s.floorInfo[c]) && (l = d),
                        this._indoorData.data[c]);
                        d && d.data && d.data[l] || (u = !0,
                        o.push(l),
                        a.push(0),
                        e.push(c))
                    }
                    this.LL = e,
                    t.push("poiid=" + e.join(";")),
                    t.push("floor=" + o.join(";")),
                    t.push("version=" + a.join(";")),
                    t.push("s=rsv3"),
                    t.push("from=indoorH5Map"),
                    t.push("servicetype=unify"),
                    t.push("key=" + this._config.key),
                    this._config.jscode ? t.push("jscode=" + this._config.jscode) : this._config.gaodeserver && (n = this._config.gaodeserver + "/v3/indoor/indoormaps?"),
                    n += t.join("&"),
                    u && this.ZR.url !== n ? (this.ZR.url = n,
                    this.YR(n, this.jF)) : (this.jF(),
                    i && i())
                }
            }
            ,
            Ri.prototype.JR = function(t, i, n) {
                var s = this;
                if (!t || !i)
                    return !1;
                this.GR([t], function() {
                    s.gs && s.gs._map && s.gs._map.setNeedUpdate(!0),
                    n && n()
                })
            }
            ,
            Ri.prototype.YR = function(t, u) {
                var f = this
                  , i = new XMLHttpRequest;
                i.onreadystatechange = function() {
                    4 === i.readyState && 200 === i.status && f.map.gn.JB(i.response, function(t, i) {
                        if (t)
                            console.log(t);
                        else
                            for (var n = 0, s = Object.keys(i); n < s.length; n++)
                                for (var e = s[n], r = (f._indoorData.data[e] && f._indoorData.data[e].data || (f._indoorData.data[e].data = {}),
                                f._indoorData.data[e].building = i[e].building,
                                i[e].data), h = 0, o = Object.keys(r); h < o.length; h++) {
                                    var a = o[h];
                                    f._indoorData.data[e].data[a] = r[a]
                                }
                        u()
                    })
                }
                ,
                i.open("GET", t, !0),
                i.responseType = "arraybuffer",
                i.send()
            }
            ;
            var Di, Oi = Ri;
            function Ri(t, i, n, s) {
                var e = Di.call(this, t, i, n, s) || this;
                return e.jF = function() {
                    var t;
                    e.gs && (t = e.gs.getRender()) && t.render(e._indoorData)
                }
                ,
                e.gs = s,
                e._config = AMap.getConfig(),
                e._indoorData = {
                    extData: {},
                    data: {}
                },
                e.LL = [],
                e.ZR = {
                    url: null,
                    status: !1
                },
                e
            }
            var Ei, ji, Pi = U.Support.scale, ut = (Ei = ut,
            U.Ei(c, Ei),
            c.prototype.loadData = function(t, i, n, s) {
                var e = this;
                if ("optimise" === s.loadData() && s.TL())
                    return !1;
                this.aa = t,
                this.sa = [];
                for (var r = t.bounds, h = this.ra(t.optimalZoom), o = this.ha(r, h), a = [], u = t.optimalZoom, r = U.map(o, function(t) {
                    var i = e.fa(t.x, t.z);
                    return t.z + "," + i + "," + t.y
                }), f = this.KH.qH(r), c = [], l = 0; l < o.length; l++) {
                    var d, p, v = o[l], m = new U.ca(v.z,this.fa(v.x, v.z),v.y), y = new U.ca(v.z,v.x,v.y), b = U.Util.kD(m.key, u), g = this.ua.getTile(m, !0);
                    g ? (d = this.ua.MD(g.gB, b)) && (g.gB = b,
                    p = v.key + "," + U.Util.SD(d),
                    f.yB.indexOf(p) < 0) && c.push(p) : (p = m.key + "," + U.Util.SD(b),
                    f.yB.indexOf(p) < 0 && ((m = new U.pa(m)).status = U.TileState.LOADING,
                    m.xB = U.TileState.LOADING,
                    this.ua.Jo(m),
                    m.tag = b,
                    m.gB = b,
                    c.push(p))),
                    !g || g.xB !== U.TileState.LOADED && g.xB !== U.TileState.RELOADING || this.sa.push(y),
                    g && (g.xB === U.TileState.LOADED || g.xB === U.TileState.RELOADING) || a.push(v),
                    g && g.xB === U.TileState.LOADED && g.version && g.version !== this.VH && (this.sa.push(y),
                    g.xB = U.TileState.RELOADING,
                    c.push(v.key + "," + U.Util.SD(g.gB)),
                    d = this.ua.MD(g.gB, b)) && (p = v.key + "," + U.Util.SD(d),
                    f.yB.indexOf(p) < 0) && c.push(p)
                }
                return this.da(t, this.sa, a, s),
                this.PE(c, "china"),
                s.showLabel && this.bB(c, t),
                0 === c.length
            }
            ,
            c.prototype.getData = function(i) {
                var n = this
                  , t = i.bounds
                  , s = this.ra(i.optimalZoom)
                  , e = this.ha(t, s)
                  , r = []
                  , h = {}
                  , o = (14 === s && (h = this.ha(t, 15, !0)),
                this.map.qF());
                if (this.ua.QF(o),
                this.sa.sort(function(t) {
                    return n.ra(i.optimalZoom) === t.z ? 1 : -1
                }),
                0 < this.sa.length)
                    for (var a = 0; a < this.sa.length; a++) {
                        var u, f, c, l = this.sa[a], d = this.ua.getTile(l, !0), p = 0, v = 0, m = [0, 0], y = i.centerCoord;
                        d ? (d.localCoord || (f = U.wa.ga(d.zo.x, d.zo.y, d.zo.z, "EPSG:3857"),
                        u = U.lcs.getLocalByCoord([f[0], f[1]]),
                        d.localCoord = u,
                        d.Ro = f),
                        u = U.lcs.getLocalByCoord([y[0], y[1]]),
                        i.optimalZoom >= U.Ra ? (c = U.lcs.getSize(),
                        p = d.localCoord.x - u.x,
                        v = d.localCoord.y - u.y,
                        0 != p && (p *= c[0],
                        m[0] = p),
                        0 != v && (v *= c[1],
                        m[1] = v),
                        i.optimalZoom >= U.Ra && U.za >= d.zo.z && (m[0] = -u.center[0],
                        m[1] = -u.center[1])) : i.optimalZoom < U.Ra && U.za < d.zo.z && (m[0] = u.center[0],
                        m[1] = u.center[1])) : (f = new U.ca(l.z,this.fa(l.x, l.z),l.y),
                        (y = this.ua.getTile(f, !0)) && (d = new U.pa(l),
                        c = 1 << l.z,
                        (l.x < 0 || l.x >= c) && (p = Math.floor(l.x / c),
                        m[0] += 20037508.342789244 * p * 2),
                        v = y.gB,
                        d.Ro = y.Ro,
                        d.ID(y),
                        d.Sa = m,
                        d.status = y.status,
                        d.tag = v,
                        d.gB = v)),
                        d && (d.stamp = o,
                        d.Sa = m,
                        r.push(d))
                    }
                var b = i.optimalZoom
                  , t = U.every(e, function(s) {
                    return U.some(r, function(t) {
                        var i = t.zo.key
                          , n = t.zo.z
                          , n = U.Util.VF(n, b)
                          , t = t.gB
                          , t = U.Util.LD(t, n);
                        return i === s.key && t
                    })
                })
                  , e = (r && 0 <= r.length && this.Fo(!0),
                this.jE(r));
                return t && (this.a_ = !0,
                this.map.bZ.dynamic.set("firstAllLoaded", !0)),
                e && this.map.bZ.dynamic.set("firstLabelDataAllLoaded", !0),
                t && e && this.Fo(!0),
                (t = {
                    s_: this.a_,
                    fo: !!t && e,
                    yZ: e,
                    tiles: r,
                    Ca: h,
                    outseaData: undefined
                }).tiles = this.UE(r, s),
                t
            }
            ,
            c.prototype.pe = function(t) {
                return t = new U.ca(t[0],t[1],t[2]),
                this.ua.getTile(t)
            }
            ,
            c.prototype.jpt = function(t) {
                return ("fast" !== this.map.bZ.MZ.drawMode || this.map.bZ.dynamic.get("firstPaint") ? {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 10,
                    11: 10,
                    12: 10,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14,
                    23: 14,
                    24: 14,
                    25: 14,
                    26: 14,
                    27: 14,
                    28: 14,
                    29: 14,
                    30: 14
                } : {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 8,
                    11: 8,
                    12: 8,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14,
                    23: 14,
                    24: 14,
                    25: 14,
                    26: 14,
                    27: 14,
                    28: 14,
                    29: 14,
                    30: 14
                })[t]
            }
            ,
            c.prototype.ra = function(t) {
                return ("fast" !== this.map.bZ.MZ.drawMode || this.map.bZ.dynamic.get("firstPaint") ? {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 10,
                    11: 10,
                    12: 10,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14,
                    23: 14,
                    24: 14,
                    25: 14,
                    26: 14,
                    27: 14,
                    28: 14,
                    29: 14,
                    30: 14
                } : {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 8,
                    11: 8,
                    12: 8,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14,
                    23: 14,
                    24: 14,
                    25: 14,
                    26: 14,
                    27: 14,
                    28: 14,
                    29: 14,
                    30: 14
                })[t]
            }
            ,
            c.prototype.YE = function(t) {
                var i = this;
                return t(null, {
                    GW: "worker",
                    cb: function(t) {
                        i.dynamicTextVerticeLoadedByTile(t)
                    }
                }),
                !0
            }
            ,
            c.prototype.destroy = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request),
                    t.destroy()
                }),
                this.ua.destroy(),
                this.sa = [],
                this.la = [],
                this.mapStyle && this.mapStyle.destroy && (this.mapStyle.destroy(),
                delete this.mapStyle),
                this.R_ && this.R_.destroy && (this.R_.destroy(),
                delete this.R_)
            }
            ,
            c.prototype.reload = function() {
                this.ua.forEach(function(t) {
                    t.status !== U.TileState.LOADED && t.request && (t.request.cancel(),
                    delete t.request),
                    t.reload()
                }),
                this.sa = [],
                this.la = []
            }
            ,
            c.prototype.Aa = function(t) {
                var i;
                t.zo && (i = this.ua.getTile(t.zo)) && (i.rO({
                    Ta: !0
                }, t.tag),
                i.xa({
                    Ta: !0
                }, t.tag),
                i.JE({
                    Ta: !0
                }, t.tag))
            }
            ,
            c.prototype.setTileCacheSize = function(t) {
                t = t || (U.Support.$e ? 30 : 100),
                this.ua.Xo(t)
            }
            ,
            c.prototype.UH = function(t) {
                this.VH = t
            }
            ,
            c.prototype.dynamicTextVerticeLoaded = function(t) {
                var i = t.data
                  , n = t.XE;
                if (i instanceof U.ca)
                    return (s = this.ua.getTile(i)) ? (s.data || s.xa({}, t.tag),
                    void s.rO({}, t.tag)) : void 0;
                var s = i[Object.keys(i)[0]];
                if (s = this.ua.getTile(s.zo, !0)) {
                    s.data || s.xa({}, t.tag);
                    var e, r, h = {};
                    for (e in i)
                        i.hasOwnProperty(e) && (r = i[e],
                        h[e] = new U.La(r.zo,r));
                    s.rO({
                        Ta: !0,
                        labels: h,
                        XE: n
                    }, t.tag),
                    s.xa({
                        Ta: !0
                    }, t.tag),
                    s.JE({
                        Ta: !0
                    }, t.tag),
                    s.xB = U.TileState.LOADED,
                    this.map.Mv.t0(s.zo),
                    this.Eo()
                }
            }
            ,
            c.prototype.dynamicTextVerticeLoadedByTile = function(t) {
                for (var i = 0, n = t.data; i < n.length; i++) {
                    var s = n[i];
                    this.dynamicTextVerticeLoaded({
                        data: s.data,
                        tag: s.tag,
                        XE: s.XE
                    })
                }
            }
            ,
            c.prototype.Ia = function() {
                this.map.on("tileSdfInfoFinished", this.Aa.bind(this))
            }
            ,
            c.prototype.bB = function(t, i, n) {
                i = {
                    zoom: i.zoom,
                    projectionId: i.projectionId,
                    mH: U.Support.mH
                },
                this.KH._B(t, i, n)
            }
            ,
            c.prototype.cP = function() {
                for (var t, i = this.map.getLayers(), n = 0; n < i.length; n++)
                    if ("AMap.Buildings" === (s = i[n]).CLASS_NAME && !s.getState().u$) {
                        t = s;
                        break
                    }
                if (!t)
                    for (var s, n = 0; n < i.length; n++)
                        if ("AMap.Buildings" === (s = i[n]).CLASS_NAME) {
                            t = s;
                            break
                        }
                return t
            }
            ,
            c.prototype.ma = function(t, i) {
                var n, s = new RegExp(/\{(\w|\,)+\}/g);
                return s.test(this._tileUrl) ? (n = this._tileUrl.match(s)[0].replace(/[\{|\}]/g, "").split(","),
                this._tileUrl.replace(s, n[(t + i) % 4])) : this._tileUrl
            }
            ,
            c.prototype.AD = function() {
                var t = new RegExp(/\{(\w|\,)+\}/g)
                  , i = this._tileUrl.match(t)[0].replace(/[\{|\}]/g, "").split(",")
                  , n = i.length
                  , t = this._tileUrl.replace(t, i[this.$D % n]);
                return this.$D = (this.$D + 1) % n,
                t
            }
            ,
            c.prototype.ha = function(t, i, n) {
                void 0 === n && (n = !1);
                var s = [t[0], t[3]]
                  , t = [t[2], t[1]]
                  , s = this.Ga(s, i)
                  , t = this.Ga(t, i)
                  , e = s[0]
                  , r = s[1]
                  , h = t[0]
                  , o = t[1];
                if (n)
                    return {
                        ja: e,
                        Fa: r,
                        Oa: h,
                        Ea: o,
                        z: i
                    };
                this.Pa = {
                    ja: e,
                    Fa: r,
                    Oa: h,
                    Ea: o,
                    z: i
                };
                for (var a = [], u = e; u <= h; u += 1)
                    for (var f = r; f <= o; f += 1)
                        a.push(new U.ca(i,u,f));
                return this.Da(a),
                a
            }
            ,
            c.prototype.da = function(t, i, n, s) {
                var e = [3, 6, 8, 10, 12, 15]
                  , r = this.ra(t.optimalZoom);
                if (this.Za)
                    for (var h = Math.min(14, r + 3), o = r + 1; n.length && o <= h; o += 1)
                        if (-1 !== e.indexOf(o)) {
                            for (var a = o - r, u = [], f = [], c = n.length - 1; 0 <= c; --c)
                                for (var l = n[c].x << a, d = n[c].y << a, p = 1 << a; 0 <= p; --p)
                                    for (var v = 1 << a; 0 <= v; --v) {
                                        var m = new U.ca(o,this.fa(l + p, o),d + v)
                                          , y = new U.ca(o,l + p,d + v);
                                        ((M = this.ua.getTile(m, !0)) && M.status === U.TileState.LOADED ? f : u).push(y)
                                    }
                            f.length && i.push.apply(i, f),
                            n = u
                        }
                if (this.qa)
                    for (var b = this.xt[0], o = r - 1; n.length && b <= o; --o)
                        if (-1 !== e.indexOf(o)) {
                            for (var f = [], u = [], g = {}, c = n.length - 1; 0 <= c; --c) {
                                var M, k = n[c], a = o, w = k.z - a, p = k.x >> w, v = k.y >> w;
                                g[k = (m = new U.ca(a,p,v)).key] || (w = new U.ca(a,this.fa(p, a),v),
                                y = new U.ca(a,p,v),
                                M = this.ua.getTile(w, !0),
                                g[k] = !0,
                                (M && M.status === U.TileState.LOADED ? f : u).push(y))
                            }
                            f.length && i.push.apply(i, f),
                            n = u
                        }
                return i
            }
            ,
            c.prototype.Da = function(t) {
                var e, r, h;
                t.length && (e = this.Pa.z,
                r = (this.Pa.ja + this.Pa.Oa) / 2,
                h = (this.Pa.Fa + this.Pa.Ea) / 2,
                t.sort(function(t, i) {
                    var n = (t.x << e - t.z) - r
                      , t = (t.y << e - t.z) - h
                      , s = (i.x << e - i.z) - r;
                    return n * n + t * t <= s * s + (i = (i.y << e - i.z) - h) * i ? -1 : 1
                }))
            }
            ,
            c.prototype.Ga = function(t, i) {
                var n = 180 / (i = Math.pow(2, i));
                return [Math.floor(t[0] / (360 / i)) + i / 2, i / 2 - Math.ceil(t[1] / n)]
            }
            ,
            c.prototype.fa = function(t, i) {
                for (var n = 1 << (i = i || this.aa.optimalZoom); t < 0 || n <= t; )
                    t = n <= t ? t - n : t < 0 ? n + t : t;
                return t
            }
            ,
            c.prototype.sD = function() {
                var e, r, h = this;
                this.map.bZ.dynamic.get("_preloadNebulaIcons") || (this.map.bZ.dynamic.set("_preloadNebulaIcons", !0),
                e = U.G8t.getIconUrls({
                    Cmt: AMap.getConfig().iconVersion,
                    Smt: AMap.getConfig().iconClass,
                    key: AMap.getConfig().key
                }),
                (r = this.z_).loadImages(e, {
                    type: "icon",
                    imageBitmap: U.Support.imageBitmap,
                    cb: function() {
                        for (var t = [], i = 0; i < e.length; i++) {
                            var n = e[i]
                              , s = r.getImage(n);
                            t.push({
                                img: s.img,
                                name: n,
                                iconIndex: i,
                                width: s.width,
                                height: s.height
                            })
                        }
                        h.map.so.sv(t)
                    }
                }))
            }
            ,
            c.prototype.PE = function(t, i) {
                for (var n = 0, s = t; n < s.length; n++) {
                    var e = s[n].split(",").slice(0, 3).join(",");
                    (e = this.ua.xf(e)) && (e.region = i)
                }
            }
            ,
            c.prototype.UE = function(t, i) {
                void 0 === t && (t = []);
                var n = [];
                if (10 <= i) {
                    for (var s = 0, e = t; s < e.length; s++) {
                        var r = e[s];
                        "china" !== r.region && "world" !== r.region && "oversea" !== r.region || n.push(r)
                    }
                    return n
                }
                return t
            }
            ,
            c.prototype.jE = function(t) {
                for (var i = !!t.length, n = 0, s = t; n < s.length; n++) {
                    var e = s[n].data;
                    if (i)
                        for (var r = 0, h = e; r < h.length; r++) {
                            var o = h[r];
                            if (!(i = i && !!o.Ta))
                                break
                        }
                }
                return i
            }
            ,
            c);
            function c(t, i, n, s) {
                var a = Ei.call(this, t, i, n, s) || this
                  , i = (a.xt = U.zoomRange,
                a.sa = [],
                a.la = [],
                a.qa = !0,
                a.Za = !0,
                a.a_ = !1,
                a.$D = 0,
                a.VH = "",
                a.wH = function(t) {
                    !a.map.yH || parseInt(t.key.split(",")[0], 10) < 10 || a.map.yH.kH(t.key)
                }
                ,
                a.Xa = t.tileSize,
                a._tileUrl = t.tileUrl,
                a.tG = null,
                U.Support.$e ? 30 : 200);
                a.ua = new zt(i),
                a.NE = new St(i),
                window.xZ = a.ua;
                var t = (s = AMap.getConfig()).tileVersion
                  , i = s.tileCombo
                  , e = n.options && n.options.languageCode
                  , t = (n.gn.Ha({
                    scale: Pi,
                    showLabel: n.showLabel,
                    tileVersion: t,
                    iconVersion: s.iconVersion,
                    iconClass: s.iconClass,
                    DD: -1 !== location.search.indexOf("forceAll"),
                    tileCombo: i,
                    languageCode: e
                }),
                a.R_ = n.R_,
                a.z_ = n.z_,
                n.gn.Ja(AMap.getConfig().protocol),
                a.mapStyle = n.mapStyle,
                a.mapStyle.pn(function(t) {
                    n && n.gn && (a.sD(),
                    n.gn.Ka({
                        value: t,
                        TY: "fast" === a.map.bZ.MZ.drawMode
                    }))
                }),
                a.Ia(),
                a.ua.on("delete", a.wH),
                n.options.tileCombo ? 5 : 1);
                return a.KH = new Lt(function(t, o, i, n) {
                    var s = a.AD();
                    return new U.vH(a.map.gn.RD({
                        url: s,
                        projectionId: i.projectionId,
                        ya: t,
                        ZL: i.zoom,
                        mH: i.mH,
                        showOversea: a.map.Dpt,
                        languageCode: e
                    }, function(t, i) {
                        if (a.Eo(),
                        a.KH.CB(o),
                        t)
                            console.log(t),
                            a.map.emit("TileDecodeError", {
                                type: "nebulasdf",
                                err: t
                            });
                        else if (i)
                            for (var n = 0, s = Object.keys(i); n < s.length; n++) {
                                var e, r, h = s[n].slice(0, -2);
                                (h = a.ua.xf(h)) && (h.status = U.TileState.LOADED,
                                h.xB = U.TileState.LOADED,
                                e = U.wa.ga(h.zo.x, h.zo.y, h.zo.z, "EPSG:3857"),
                                r = U.lcs.getLocalByCoord([e[0], e[1]]),
                                h.localCoord = r,
                                h.Ro = e)
                            }
                        else
                            console.log("no data"),
                            a.map.emit("TileDecodeError", {
                                type: "nebulasdf",
                                err: "no data"
                            })
                    }))
                }
                ,function(t) {
                    for (var i = 0, n = t; i < n.length; i++) {
                        var s = n[i];
                        (s = a.ua.xf(s.slice(0, -2))) && s.status !== U.TileState.LOADED && a.ua.ea(s)
                    }
                }
                ,t),
                U.Support.$e && !U.Support.iPad && (a.map.on("zoomend", function() {
                    15 <= a.map.getZoom() ? a.ua.Xo(6) : a.ua.Xo(20)
                }),
                15 <= a.map.getZoom()) && a.ua.Xo(6),
                a
            }
            function Fi(t, i, n, s) {
                return (t = ji.call(this, t, i, n, s) || this).Rs = null,
                t
            }
            ji = Gt,
            U.Ei(Fi, ji),
            Fi.prototype.Ys = function(o, a, u, f) {
                var c = this;
                if (!(this.aa.optimalZoom < this.xt[0] || this.aa.optimalZoom > this.xt[1])) {
                    this.Da(o);
                    for (var l = this, i = 0, n = o.length; i < n; i += 1)
                        !function(t) {
                            var n = l.layer.getLayerConfig()
                              , t = o[t]
                              , h = (l.ma().replace("[z]", t.z + "").replace("[x]", t.x + "").replace("[y]", t.y + ""),
                            new U.Vs(t))
                              , n = (l.ua.Qo(h),
                            n.getTileUrl && n.getTileUrl(t.x, t.y, t.z),
                            U.ProjectionManager.getProjection(u).getResolution(t.z))
                              , e = (s = t.x * l.Xa * n) + l.Xa * n
                              , n = (t = t.y * l.Xa * n) + l.Xa * n
                              , t = U.V[u].Xs(s, t)
                              , r = U.V[u].Xs(e, n)
                              , s = t[0]
                              , e = r[0];
                            n = t[1],
                            h.Ro = [s, r[1], e, n],
                            h.status = U.TileState.LOADING,
                            setTimeout(function() {
                                var t, i;
                                if (a) {
                                    if (t = U.lcs.getLocalByCoord([h.Ro[0], h.Ro[1]]),
                                    h.zo.z > U.za && (h.Ro[0] -= t.center[0],
                                    h.Ro[1] -= t.center[1],
                                    h.Ro[2] -= t.center[0],
                                    h.Ro[3] -= t.center[1]),
                                    i = a.fe(new Float32Array([h.Ro[0], h.Ro[1], 0, 1, h.Ro[2], h.Ro[1], 1, 1, h.Ro[0], h.Ro[3], 0, 0, h.Ro[2], h.Ro[1], 1, 1, h.Ro[2], h.Ro[3], 1, 0, h.Ro[0], h.Ro[3], 0, 0]), 16),
                                    !c.Rs) {
                                        var n = document.createElement("canvas")
                                          , s = n.getContext("2d");
                                        if (s) {
                                            n.height = n.width = 256,
                                            n.style.height = n.style.width = "256px",
                                            s.font = "20px PingFangSC-Light, sans-serif",
                                            s.fillStyle = "rgba(255, 0, 0, 1)",
                                            s.rotate(-15 * Math.PI / 180);
                                            for (var e = "未获得高德地图商用授权", r = 0; r < e.length; r++)
                                                s.fillText(e[r], 22 * r - 30, 150);
                                            s.stroke()
                                        }
                                        c.Rs = n
                                    }
                                    (n = a.createTexture(c.Rs, {
                                        Zi: !0
                                    })).bind(a.gl.MIRRORED_REPEAT, a.gl.LINEAR, a.gl.LINEAR_MIPMAP_NEAREST),
                                    h.data = {
                                        texture: n,
                                        zs: i,
                                        Js: n,
                                        Hs: t
                                    }
                                }
                                h.status = U.TileState.LOADED,
                                f()
                            }, 10)
                        }(i)
                }
            }
            ;
            var Wi = {
                nebula: s,
                nebulaLabel: ut,
                building: Ii,
                sky: ui,
                mask: li,
                inner: zi,
                image: Pt,
                custom: Zt,
                gl_custom: hi,
                raster: Gt,
                overlay: Vt,
                labelsLayer: Nt,
                vectorTile: Kt,
                districtVectorTile: ti,
                mapboxVectorTile: si,
                indoor: Oi,
                vectortraffic: Mi,
                markLayer: Fi
            }
              , Ni = (Ui.addSource = function(t, i) {
                Wi[t] || (Wi[t] = i)
            }
            ,
            Ui.prototype.addSource = function(t, i, n) {
                return ("nebula" === t.id || "indoor" === t.id) && this.Yh[t.id] || this.Yh[t.id] || (this.Yh[t.id] = new Wi[t.type](t,i,this.map,n),
                n.source = this.Yh[t.id]),
                this.Yh[t.id]
            }
            ,
            Ui.prototype.getSource = function(t) {
                return this.Yh[t]
            }
            ,
            Ui.prototype.Xh = function(t) {
                delete this.Yh[t]
            }
            ,
            Ui.prototype.getData = function(t, i, n) {
                return this.Yh[t].getData(i, n)
            }
            ,
            Ui.prototype.loadData = function(t, i, n) {
                var s = this
                  , e = i.Zdt() || [];
                this.Uyt ? this.Gyt(t, i, n, e) : this._yt(function() {
                    s.Gyt(t, i, n, e)
                })
            }
            ,
            Ui.prototype.destroy = function() {
                for (var t in this.Yh)
                    this.Yh[t] && this.Yh[t].destroy();
                this.Yh = {}
            }
            ,
            Ui.prototype.UH = function(t) {
                for (var i in this.Yh)
                    this.Yh[i] && this.Yh[i].UH && this.Yh[i].UH(t)
            }
            ,
            Ui.prototype.i0 = function(t, i) {
                if (this.Yh[t])
                    return this.Yh[t].ua.getTile(i, !1)
            }
            ,
            Ui.prototype.t0 = function(t) {
                var i = this.i0(U.n0.nebulaLabel, t);
                (t = 15 === t.z ? this.i0(U.n0.nebula, t.s0(14)) : this.i0(U.n0.nebula, t)) && i && i.KE(t.data)
            }
            ,
            Ui.prototype.Gyt = function(t, i, n, s) {
                for (var e = 0, r = s; e < r.length; e++) {
                    var o = (h = r[e]).getOptions()
                      , h = h.getSource();
                    U.Util.dS(i.getZoom(), o.zooms) && h && o.visible && 0 < o.opacity && h.loadData(t, n, function() {
                        i.setNeedUpdate(!0)
                    }, i, this)
                }
            }
            ,
            Ui.prototype._yt = function(i) {
                var n = this;
                this.isEmpty(AMap.getConfig().tileVersion) || this.isEmpty(AMap.getConfig().styleVersion) || this.isEmpty(AMap.getConfig().iconVersion) ? this.map.Ryt().then(function(t) {
                    t && (n.Yyt(),
                    n.Uyt = !0,
                    i())
                }) : (this.Yyt(),
                this.Uyt = !0,
                i())
            }
            ,
            Ui.prototype.Yyt = function() {
                this.map && this.map.gn && this.map.gn.Ha({
                    tileVersion: AMap.getConfig().tileVersion,
                    iconVersion: AMap.getConfig().iconVersion,
                    iconClass: AMap.getConfig().iconClass,
                    tileCombo: AMap.getConfig().tileCombo,
                    DD: -1 !== location.search.indexOf("forceAll")
                })
            }
            ,
            Ui.prototype.isEmpty = function(t) {
                return !t.trim().length
            }
            ,
            U.dZ([U.pZ("SourceManager")], Ui));
            function Ui(t) {
                this.map = t,
                this.Uyt = !1,
                this.Yh = {}
            }
            Gi = U.Event,
            U.Ei(d, Gi),
            d.prototype.onAdd = function() {}
            ,
            d.prototype.v$ = function() {}
            ,
            d.prototype.Hh = function(t) {
                this.uo = t
            }
            ,
            d.prototype.Do = function(t) {
                return this.Jh = t,
                this.Jh
            }
            ,
            d.prototype.setMap = function(t) {
                var i, n = this;
                null === t && this.map ? this.map.removeLayer(this) : (this.map = t) && (i = t.getLayers(),
                U.find(i, function(t) {
                    return t.getLayerConfig().id === n.getLayerConfig().id
                }) || t.addLayer(this))
            }
            ,
            d.prototype.Kh = function(t) {
                var i = this;
                (this.source = t) && this.source.on("complete", function() {
                    i.emit("complete")
                })
            }
            ,
            d.prototype.setzIndex = function(t) {
                this.Qh = t,
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            d.prototype.setOpacity = function(t) {
                this.tl = t,
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            d.prototype.getOpacity = function() {
                return this.tl
            }
            ,
            d.prototype.getSource = function() {
                if (this.uo)
                    return this.uo.getSource(this.co())
            }
            ,
            d.prototype.getzIndex = function() {
                return this.getLayerConfig().zIndex
            }
            ,
            d.prototype.getMap = function() {
                return this.map
            }
            ,
            d.prototype.getRender = function() {
                return this.Jh
            }
            ,
            d.prototype.getLayerConfig = function() {
                return {
                    id: this._id,
                    zooms: this.xt,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    visible: this.il,
                    createTile: undefined,
                    rejectMapMask: this._rejectMapMask
                }
            }
            ,
            d.prototype.getOptions = function() {
                var t = this.getLayerConfig()
                  , i = this._opts || {};
                return U.assign({}, i, t)
            }
            ,
            d.prototype.getZooms = function() {
                return this.xt
            }
            ,
            d.prototype.setZooms = function(t) {
                this.xt = t,
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            d.prototype.getVisible = function() {
                return this.il
            }
            ,
            d.prototype.beforeRender = function() {}
            ,
            d.prototype.afterRender = function() {}
            ,
            d.prototype.get = function(t) {
                return this.getOptions()[t]
            }
            ,
            d.prototype.vi = function(t) {
                return null
            }
            ,
            d.prototype.lo = function() {
                if (this.source)
                    return this.source.lo()
            }
            ,
            d.prototype.T$ = function() {
                return this._id
            }
            ,
            d.prototype.show = function() {
                this.il = !0,
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            d.prototype.hide = function() {
                this.il = !1,
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            d.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            d.prototype.onCreated = function() {
                this.map && this.map.addLayer(this)
            }
            ;
            var Gi, s = U.dZ([U.pZ("Layer")], d);
            function d(t) {
                void 0 === t && (t = {});
                var i = Gi.call(this) || this;
                return i.el = "AMap.Layer",
                i.CLASS_NAME = "AMap.Layer",
                i.hS = U.Util.stamp(i),
                i.il = !0,
                i.tl = 1,
                i.xt = U.zoomRange,
                i._id = "layer",
                i.nl = !0,
                i._id = "layer_" + U.Util.uuid(),
                i.xt = t.zooms || U.zoomRange,
                i.tl = t.opacity === undefined ? 1 : t.opacity,
                i.Qh = t.zIndex || 1,
                i._rejectMapMask = t.rejectMapMask !== undefined && t.rejectMapMask,
                i.il = t.visible === undefined || t.visible,
                i.AF = t.depthTest !== undefined && Boolean(t.depthTest),
                i.IF = t.ce !== undefined && Boolean(t.ce),
                i.wl = t.cacheSize,
                i.map = t && t.map || null,
                i._opts = t,
                i
            }
            _i = s,
            U.Ei(Zi, _i),
            Zi.prototype.getState = function() {
                return {
                    ol: !0,
                    al: !0,
                    visible: this.il,
                    opacity: this.tl,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF,
                    cacheSize: this.wl
                }
            }
            ,
            Zi.prototype.getLayerConfig = function() {
                var t = _i.prototype.getLayerConfig.call(this);
                return t.mapNumber = "GS(2024)1158",
                t
            }
            ,
            Zi.prototype.getSourceConfig = function() {
                var t = AMap.getConfig().protocol;
                return {
                    id: "nebula",
                    type: "nebula",
                    tileUrl: U.G8t.getDataHost(t),
                    tileSize: 0,
                    zooms: U.zoomRange
                }
            }
            ,
            Zi.prototype.co = function() {
                return "nebula"
            }
            ,
            Zi.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            Zi.prototype.show = function() {
                _i.prototype.show.call(this);
                var t = this.iP();
                t && t.show(),
                (t = this.map && this.map.getLayerByClass("AMap.Inner.LabelsLayer")) && t.oP() && t.show()
            }
            ,
            Zi.prototype.hide = function() {
                _i.prototype.hide.call(this);
                var t = this.iP();
                t && t.hide(),
                this.rP()
            }
            ,
            Zi.prototype.v$ = function() {
                _i.prototype.v$.call(this);
                var t = this.iP();
                t && this.map.removeLayer(t),
                this.rP()
            }
            ,
            Zi.prototype.Hh = function(t) {
                this.uo = t,
                this.uo.getSource(this.co()).setTileCacheSize(this.wl)
            }
            ,
            Zi.prototype.rP = function() {
                var t = this.map && this.map.getLayerByClass("AMap.Inner.LabelsLayer");
                t && t.aP() && t.hide()
            }
            ,
            Zi.prototype.iP = function() {
                var t;
                if (this.map)
                    for (var i = null == (t = this.map) ? void 0 : t.getLayers(), n = 0; n < i.length; n++) {
                        var s = i[n];
                        if ("AMap.Buildings" === s.CLASS_NAME && s.getState().u$)
                            return s
                    }
            }
            ;
            var _i, Yi = Zi;
            function Zi() {
                var t = null !== _i && _i.apply(this, arguments) || this;
                return t.CLASS_NAME = "AMap.NebulaLayer",
                t
            }
            var Xi, Ji = "inner.labelsLayer", Hi = "inner", qi = (Xi = s,
            U.Ei(Ki, Xi),
            Ki.prototype.getState = function() {
                return U.assign({}, {
                    layer: this,
                    rejectMapMask: this._rejectMapMask
                }, Xi.prototype.getLayerConfig.call(this))
            }
            ,
            Ki.prototype.getSourceConfig = function() {
                return {
                    id: Hi,
                    type: Hi,
                    tileUrl: AMap.getConfig().protocol + (U.Support.wasm ? "://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3" : "://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),
                    tileSize: 0,
                    zooms: U.zoomRange
                }
            }
            ,
            Ki.prototype.co = function() {
                return Hi
            }
            ,
            Ki.prototype.sl = function() {
                this.source.reload(),
                this.Jh && this.Jh.reset()
            }
            ,
            Ki.prototype.vi = function(t, i) {
                return void 0 === i && (i = !1),
                this.fz ? this.fz.vi(t, this.hS, i) : null
            }
            ,
            Ki.prototype.Do = function(t) {
                return t = Xi.prototype.Do.call(this, t),
                this.map && this.uz(this.map),
                t
            }
            ,
            Ki.prototype.aP = function() {
                var t, i = this.map;
                return !!i && (t = i && i.getLayerByClass("AMap.TileLayer.RoadNet"),
                i = i && i.getLayerByClass("AMap.NebulaLayer"),
                t = t && t.getVisible(),
                i = i && i.getVisible(),
                !t) && !i
            }
            ,
            Ki.prototype.oP = function() {
                var t, i, n = this.map;
                return !!n && (t = n && n.getLayerByClass("AMap.TileLayer.RoadNet"),
                i = n && n.getLayerByClass("AMap.NebulaLayer"),
                t = t && t.getVisible(),
                i = i && i.getVisible(),
                n.showLabel) && (t || i)
            }
            ,
            Ki.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh),
                this.source && this.source.destroy && (this.source.destroy(),
                delete this.source)
            }
            ,
            Ki.prototype.uz = function(t) {
                (this.fz = t.fS()).add(this)
            }
            ,
            Ki);
            function Ki(t) {
                var i = Xi.call(this, t = void 0 === t ? {} : t) || this;
                return i.CLASS_NAME = "AMap.Inner.LabelsLayer",
                i._opts = {
                    id: Ji,
                    type: Ji,
                    opacity: 1,
                    visible: 1,
                    collision: !0,
                    allowCollision: !1
                },
                i._opts = U.assign({}, i._opts, t),
                i.Qh = t.labelzIndex || 100,
                i.il = !1 !== t.showLabel,
                i.tl = "undefined" == typeof t.opacity ? 1 : t.opacity,
                i
            }
            Qi = s,
            U.Ei($i, Qi),
            $i.prototype.getState = function() {
                return {
                    ol: !0,
                    al: !0,
                    visible: this.il,
                    opacity: this.tl,
                    layer: this,
                    zooms: this.xt,
                    zIndex: this.Qh,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF,
                    HY: this.rX()
                }
            }
            ,
            $i.prototype.getLayerConfig = function() {
                var t = Qi.prototype.getLayerConfig.call(this);
                return t.mapNumber = "",
                t
            }
            ,
            $i.prototype.getSourceConfig = function() {
                return {
                    id: "vectortraffic",
                    type: "vectortraffic",
                    tileUrl: "",
                    tileSize: 256,
                    zooms: this.xt
                }
            }
            ,
            $i.prototype.co = function() {
                return "vectortraffic"
            }
            ,
            $i.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            $i.prototype.onAdd = function() {
                var t = this;
                this.map.on("styleChanged", this.reload, this),
                this.dl && (this.iT = setInterval(function() {
                    t.reload()
                }, 1e3 * this.vl))
            }
            ,
            $i.prototype.v$ = function() {
                this.map.off("styleChanged", this.reload, this),
                clearInterval(this.iT),
                delete this.iT
            }
            ,
            $i.prototype.reload = function() {
                var t = this.getSource();
                t && this.map && (t.reload(),
                this.map.setNeedUpdate(!0))
            }
            ,
            $i.prototype.rX = function() {
                var t, i = ["fff93a43", "fffcac19", "ff20a962", "ff83171c", "ffadadad"];
                this.map && (t = this.map.mapStyle.vn.MS("traffic")) && t.multiFillColors && ((t = t.multiFillColors).congested && (i[0] = t.congested),
                t.slow && (i[1] = t.slow),
                t.smooth && (i[2] = t.smooth),
                t.seriousCongested && (i[3] = t.seriousCongested),
                t.unknown) && (i[4] = t.unknown);
                for (var n = 0, s = i.length; n < s; n++)
                    i[n] = U.Util.qg(i[n]);
                return i
            }
            ;
            var Qi;
            function $i() {
                var t = null !== Qi && Qi.apply(this, arguments) || this;
                return t.vl = 60,
                t.dl = !0,
                t
            }
            var tn, nn = {
                opacity: 1,
                visible: !0,
                zIndex: 4,
                zooms: [7, U.zoomRange[1]],
                dataZooms: [7, 17],
                interval: 60,
                ml: !0,
                depthTest: !1,
                rZ: 1
            }, Ii = (tn = $i,
            U.Ei(sn, tn),
            sn);
            function sn(t) {
                var i = this;
                return (t = void 0 === t ? nn : t).id = U.Util.uuid(),
                t.opacity = (t.opacity === undefined ? nn : t).opacity,
                t.visible = (t.visible === undefined ? nn : t).visible,
                t.zIndex = (t.zIndex === undefined ? nn : t).zIndex,
                t.zooms = (t.zooms === undefined ? nn : t).zooms,
                t.interval = (t.interval === undefined ? nn : t).interval,
                t.ml = (t.ml === undefined ? nn : t).ml,
                t.depthTest = (t.depthTest === undefined ? nn : t).depthTest,
                t.rZ = (t.rZ === undefined ? nn : t).rZ,
                (i = tn.call(this, t) || this).vl = Math.max(30, t.interval || i.vl),
                i.dl = t.ml !== undefined && i.dl,
                i.CLASS_NAME = "AMap.TileLayer.Traffic",
                i.onCreated(),
                i
            }
            en = s,
            U.Ei(rn, en),
            rn.prototype.getSourceConfig = function() {
                return {
                    id: this._id || "tile",
                    tileUrl: this._tileUrl || "",
                    type: "raster",
                    tileSize: this.Xa || 256,
                    zooms: this.xt,
                    dataZooms: this.Qs || [7, 17],
                    projection: this.hl || "EPS3857"
                }
            }
            ,
            rn.prototype.co = function() {
                return this._id
            }
            ,
            rn.prototype.getState = function() {
                return {
                    visible: this.il,
                    opacity: this.tl,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF,
                    detectRetina: this.yl
                }
            }
            ,
            rn.prototype.Hh = function(t) {
                this.uo = t,
                this.uo.getSource(this.co()).setTileCacheSize(this.wl)
            }
            ;
            var en, ui = rn;
            function rn(t) {
                var i = en.call(this, t) || this;
                return i.CLASS_NAME = "AMap.RasterLayer",
                i._tileUrl = t.tileUrl,
                i.xt = t.zooms || U.zoomRange,
                i.Qs = t.dataZooms,
                i.tl = t.opacity === undefined ? 1 : t.opacity,
                i.Qh = t.zIndex || 1,
                i.il = t.visible === undefined || t.visible,
                i.Xa = t.tileSize || 256,
                i.hl = t.projection,
                i.AF = t.depthTest !== undefined && Boolean(t.depthTest),
                i.yl = t.detectRetina === undefined || Boolean(t.detectRetina),
                i.wl = t.cacheSize,
                i
            }
            var hn, on = {
                id: "tile_" + U.Util.uuid(),
                tileUrl: undefined,
                zooms: U.zoomRange,
                dataZooms: [2, 18],
                opacity: 1,
                tileSize: 256,
                visible: !0,
                projection: "EPSG:3857",
                zIndex: 2
            }, an = {
                id: "satellite" + U.Util.uuid(),
                tileUrl: "http://webst0{1,2,3,4}.is.autonavi.com/appmaptile?style=6&x=[x]&y=[y]&z=[z]",
                zooms: U.zoomRange,
                dataZooms: [3, 18],
                opacity: 1,
                tileSize: 256,
                visible: !0,
                projection: "EPSG:3857",
                zIndex: 2
            }, un = {
                id: "traffic" + U.Util.uuid(),
                tileUrl: "http://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&zoom=[z]&x=[x]&y=[y]",
                zooms: [7, U.zoomRange[1]],
                dataZooms: [7, 17],
                opacity: 1,
                tileSize: 256,
                visible: !0,
                projection: "EPSG:3857",
                zIndex: 4,
                getTileUrl: function(t, i, n) {
                    return AMap.getConfig().protocol + "://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0\n&t=1&zoom=" + (17 - n) + "&x=" + t + "&y=" + i
                }
            }, fn = {
                id: "roadnet" + U.Util.uuid(),
                tileUrl: "http://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&lang=zh_cn&size=1&scl=1&style=8&ltype=11",
                zooms: U.zoomRange,
                dataZooms: [3, 18],
                opacity: 1,
                tileSize: 256,
                visible: !0,
                projection: "EPSG:3857",
                zIndex: 3
            }, cn = {
                id: "flexible" + U.Util.uuid(),
                zooms: U.zoomRange,
                dataZooms: U.zoomRange,
                opacity: 1,
                tileSize: 256,
                visible: !0,
                projection: "EPSG:3857",
                zIndex: 3
            }, ln = {
                id: "wms" + U.Util.uuid(),
                url: "",
                zooms: U.zoomRange,
                dataZooms: U.zoomRange,
                opacity: 1,
                tileSize: 512,
                visible: !0,
                projection: "EPSG:3857",
                zIndex: 3
            }, p = (hn = ui,
            U.Ei(dn, hn),
            dn.prototype.setTileUrl = function(t) {
                t = 0 === (t = t.replace(/^\/\//, "").replace("http://", "")).indexOf("http") ? t : AMap.getConfig().protocol + "://" + t,
                this._tileUrl = t,
                this.reload()
            }
            ,
            dn.prototype.getTileUrl = function() {
                return this._tileUrl
            }
            ,
            dn.prototype.getLayerConfig = function() {
                var t = "";
                return this._tileUrl !== AMap.getConfig().qT && this._tileUrl !== AMap.getConfig().YT || (t = "GS(2024)1158"),
                {
                    id: this._id,
                    tileUrl: this._tileUrl,
                    zooms: this.xt,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    visible: this.il,
                    getTileUrl: this.ll,
                    mapNumber: t
                }
            }
            ,
            dn.prototype.reload = function() {
                var t = this.getSource();
                t && (t.setTileUrl(this._tileUrl),
                t.reload(),
                t.Fo(!1),
                this.map) && this.map.setNeedUpdate(!0)
            }
            ,
            U.dZ([U.pZ("TileLayer")], dn));
            function dn(t) {
                var i = this
                  , n = {};
                return (t = void 0 === t ? on : t).getTileUrl && "string" == typeof t.getTileUrl && (t.tileUrl = t.getTileUrl,
                delete t.getTileUrl),
                n.tileUrl = t.tileUrl === undefined ? AMap.getConfig().y_ : t.tileUrl,
                n.tileUrl && (n.tileUrl = n.tileUrl.replace(/^\/\//, "").replace("http://", "")),
                t && t.name && "AMap.TileLayer.Mark" === t.name || (n.tileUrl = n.tileUrl && 0 === n.tileUrl.indexOf("http") ? n.tileUrl : AMap.getConfig().protocol + "://" + n.tileUrl),
                n.id = t.id || "tile_" + U.Util.uuid(),
                n.tileSize = t.tileSize || on.tileSize,
                "d" === U.Support.baseRender && U.Support.$e && (on.dataZooms = [2, 20]),
                n.dataZooms = t.dataZooms || on.dataZooms,
                n.zooms = t.zooms || on.zooms,
                n.projection = t.projection || on.projection,
                n.opacity = (t.opacity === undefined ? on : t).opacity,
                n.visible = (t.visible === undefined ? on : t).visible,
                n.zIndex = (t.zIndex === undefined ? on : t).zIndex,
                n.rejectMapMask = t.rejectMapMask,
                n.depthTest = t.depthTest !== undefined && Boolean(t.depthTest),
                n.map = t.map,
                n.detectRetina = t.detectRetina !== undefined && t.detectRetina,
                n.cacheSize = t.cacheSize,
                (i = hn.call(this, n) || this).type = t.type || "base",
                i.ll = t.getTileUrl,
                i.CLASS_NAME = "AMap.TileLayer",
                i.onCreated(),
                i
            }
            pn = p,
            U.Ei(vn, pn),
            vn.prototype.getLayerConfig = function() {
                var t = pn.prototype.getLayerConfig.call(this);
                return t.mapNumber = "GS(2025)1807",
                t.OY = !0,
                t
            }
            ;
            var pn, li = vn;
            function vn(t) {
                var i = this;
                return (t = void 0 === t ? an : t).id = "satellite_" + U.Util.uuid(),
                t.tileUrl = an.tileUrl,
                t.zooms = (t.zooms === undefined ? an : t).zooms,
                t.opacity = (t.opacity === undefined ? an : t).opacity,
                t.visible = (t.visible === undefined ? an : t).visible,
                t.zIndex = (t.zIndex === undefined ? an : t).zIndex,
                (i = pn.call(this, t) || this).CLASS_NAME = "AMap.TileLayer.Satellite",
                i.type = t.type || "base",
                i.onCreated(),
                i
            }
            mn = p,
            U.Ei(yn, mn),
            yn.prototype.ul = function() {
                clearInterval(this.cl)
            }
            ,
            yn.prototype.pl = function() {
                var t = this;
                this.dl && 0 < this.vl && (this.cl = setInterval(function() {
                    t.reload()
                }, 1e3 * this.vl))
            }
            ;
            var mn, zi = yn;
            function yn(t) {
                var i = this;
                return (t = void 0 === t ? un : t).id = "traffic_" + U.Util.uuid(),
                t.tileUrl = un.tileUrl,
                t.zooms = (t.zooms === undefined ? un : t).zooms,
                t.opacity = (t.opacity === undefined ? un : t).opacity,
                t.visible = (t.visible === undefined ? un : t).visible,
                t.zIndex = (t.zIndex === undefined ? un : t).zIndex,
                t.getTileUrl = t.getTileUrl || un.getTileUrl,
                (i = mn.call(this, t) || this).vl = Math.max(30, t.interval || 60),
                i.dl = t.ml === undefined || t.ml,
                i.CLASS_NAME = "AMap.TileLayer.Traffic",
                i.type = t.type || "overlay",
                i.onCreated(),
                i.pl(),
                i
            }
            bn = p,
            U.Ei(gn, bn),
            gn.prototype.show = function() {
                bn.prototype.show.call(this);
                var t = this.map && this.map.getLayerByClass("AMap.Inner.LabelsLayer");
                t && t.oP() && t.show()
            }
            ,
            gn.prototype.hide = function() {
                bn.prototype.hide.call(this);
                var t = this.map && this.map.getLayerByClass("AMap.Inner.LabelsLayer");
                t && t.aP() && t.hide()
            }
            ,
            gn.prototype.v$ = function() {
                bn.prototype.v$.call(this);
                var t = this.map && this.map.getLayerByClass("AMap.Inner.LabelsLayer");
                t && t.aP() && t.hide()
            }
            ;
            var bn, Pt = gn;
            function gn(t) {
                var i, n = this;
                return (t = void 0 === t ? fn : t).id = "roadNet_" + U.Util.uuid(),
                t.tileUrl = fn.tileUrl,
                "d" === U.Support.baseRender && (t.tileUrl = null == (i = t.tileUrl) ? void 0 : i.replace("&ltype=11", "")),
                t.zooms = (t.zooms === undefined ? fn : t).zooms,
                t.opacity = (t.opacity === undefined ? fn : t).opacity,
                t.visible = (t.visible === undefined ? fn : t).visible,
                t.zIndex = (t.zIndex === undefined ? fn : t).zIndex,
                (n = bn.call(this, t) || this).CLASS_NAME = "AMap.TileLayer.RoadNet",
                n.type = t.type || "overlay",
                n.onCreated(),
                n
            }
            Mn = p,
            U.Ei(kn, Mn),
            kn.prototype.getLayerConfig = function() {
                return {
                    id: this._id,
                    zooms: this.xt,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    visible: this.il,
                    createTile: this.bl,
                    cacheSize: this.wl,
                    getTileUrl: this.ll,
                    rejectMapMask: this._rejectMapMask
                }
            }
            ,
            kn.prototype.Hh = function(t) {
                this.uo = t,
                this.uo.getSource(this.co()).setTileCacheSize(this.wl)
            }
            ;
            var Mn, Zt = kn;
            function kn(t) {
                var i = this;
                return (t = void 0 === t ? cn : t).id = cn.id,
                t.id = "flexible_" + U.Util.uuid(),
                t.zooms = (t.zooms === undefined ? cn : t).zooms,
                t.opacity = (t.opacity === undefined ? cn : t).opacity,
                t.visible = (t.visible === undefined ? cn : t).visible,
                t.zIndex = (t.zIndex === undefined ? cn : t).zIndex,
                (i = Mn.call(this, t) || this).bl = t.createTile,
                i.CLASS_NAME = "AMap.TileLayer.Flexible",
                i.type = t.type || "base",
                i.onCreated(),
                i
            }
            wn = p,
            U.Ei(xn, wn),
            xn.prototype._l = function() {
                this.kl.TileMatrixSet = this.kl.TileMatrixSet || "EPSG:3857",
                this.kl.Request = "GetTile",
                this.kl.Service = "WMTS",
                this.kl.Format = this.kl.Format || "image/png",
                this._tileUrl = this.Ml + "?" + U.Util.join(this.kl, "&"),
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            xn.prototype.setParams = function(t) {
                this.kl = U.assign({}, t),
                this._l()
            }
            ,
            xn.prototype.getParams = function() {
                return this.kl
            }
            ,
            xn.prototype.getUrl = function() {
                return this.Ml
            }
            ,
            xn.prototype.setUrl = function(t) {
                this.Ml = t,
                this._l()
            }
            ,
            xn.prototype.getLayerConfig = function() {
                return {
                    id: this._id,
                    zooms: this.xt,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    visible: this.il,
                    Ll: this.kl,
                    createTile: this.bl,
                    getTileUrl: this.ll
                }
            }
            ;
            var wn, hi = xn;
            function xn(t) {
                var o = this;
                return (t = void 0 === t ? cn : t).id = "wmts_" + U.Util.uuid(),
                t.cacheSize = cn.cacheSize,
                t.zooms = (t.zooms === undefined ? cn : t).zooms,
                t.opacity = (t.opacity === undefined ? cn : t).opacity,
                t.visible = (t.visible === undefined ? cn : t).visible,
                t.zIndex = (t.zIndex === undefined ? cn : t).zIndex,
                (o = wn.call(this, t) || this).kl = t.params || {},
                o.CLASS_NAME = "AMap.TileLayer.WMTS",
                o.type = t.type || "base",
                o._tileUrl = t.url,
                o.Ml = t.url,
                o.bl = function(t, i, n, s, e) {
                    var r, h = document.createElement("img");
                    "w" === (null == (r = o.map) ? void 0 : r.baseRender) && (h.crossOrigin = "anonymous"),
                    h.onload = function() {
                        s(h)
                    }
                    ,
                    h.onerror = function() {
                        e(h)
                    }
                    ,
                    h.src = o._tileUrl + "&TileMatrix=" + n + "&TileRow=" + i + "&TileCol=" + t
                }
                ,
                o._l(),
                o.onCreated(),
                o
            }
            An = p,
            U.Ei(zn, An),
            zn.prototype._l = function() {
                this.kl.WIDTH = this.Xa,
                this.kl.HEIGHT = this.Xa,
                this.kl.CRS = this.kl.CRS || "EPSG:3857",
                this.kl.REQUEST = "GetMap",
                this.kl.SERVICE = "WMS",
                this.kl.FORMAT = this.kl.FORMAT || "image/png",
                this.kl.TRANSPARENT = this.kl.TRANSPARENT === undefined ? "true" : this.kl.TRANSPARENT,
                delete this.kl.BBOX,
                this._tileUrl = this.Ml + "?" + U.Util.join(this.kl, "&")
            }
            ,
            zn.prototype.setParams = function(t) {
                this.kl = U.assign({}, t),
                this._l()
            }
            ,
            zn.prototype.getParams = function() {
                return this.kl
            }
            ,
            zn.prototype.getUrl = function() {
                return this.Ml
            }
            ,
            zn.prototype.setUrl = function(t) {
                this.Ml = t,
                this._l()
            }
            ,
            zn.prototype.getLayerConfig = function() {
                return {
                    id: this._id,
                    zooms: this.xt,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    visible: this.il,
                    Ll: this.kl,
                    createTile: this.bl,
                    getTileUrl: this.ll
                }
            }
            ;
            var An, Gt = zn;
            function zn(t) {
                var o = this;
                return (t = void 0 === t ? ln : t).id = "wms_" + U.Util.uuid(),
                t.cacheSize = cn.cacheSize,
                t.zooms = (t.zooms === undefined ? cn : t).zooms,
                t.opacity = (t.opacity === undefined ? cn : t).opacity,
                t.visible = (t.visible === undefined ? cn : t).visible,
                t.zIndex = (t.zIndex === undefined ? cn : t).zIndex,
                (o = An.call(this, t) || this)._tileUrl = t.url,
                o.Ml = t.url,
                o.kl = t.params || {},
                o.CLASS_NAME = "AMap.TileLayer.WMS",
                o.type = t.type || "base",
                o.bl = function(t, i, n, s, e) {
                    var r = [(n = 2 * U.x_ / 256 / Math.pow(2, n) * o.Xa) * t - U.x_, U.x_ - n * (i + 1)]
                      , t = [n * (t + 1) - U.x_, U.x_ - n * i]
                      , h = document.createElement("img");
                    "w" === (null == (n = o.map) ? void 0 : n.baseRender) && (h.crossOrigin = "anonymous"),
                    h.onload = function() {
                        s(h)
                    }
                    ,
                    h.onerror = function() {
                        e(h)
                    }
                    ,
                    o._l(),
                    h.src = o._tileUrl + "&BBOX=" + r + "," + t
                }
                ,
                o.bl = o.bl.bind(o),
                o.onCreated(),
                o
            }
            Cn = p,
            U.Ei(Tn, Cn),
            Tn.prototype.getLayerConfig = function() {
                return Cn.prototype.getLayerConfig.call(this)
            }
            ,
            Tn.prototype.getTileUrl = function() {
                return U.Util.getMarkUrl()
            }
            ;
            var Cn, Vt = Tn;
            function Tn(t) {
                var i = this;
                return t.id = "mark_" + U.Util.uuid(),
                t.tileUrl = U.Util.getMarkUrl(),
                t.zooms = [2, 30],
                t.opacity = 1,
                t.visible = !0,
                t.zIndex = 999999,
                t.name = "AMap.TileLayer.Mark",
                (i = Cn.call(this, t) || this).CLASS_NAME = "AMap.TileLayer.Mark",
                i.type = t.type || "base",
                i.onCreated(),
                i
            }
            function Sn() {
                this.Wl = !0,
                this._position = U.Dl(),
                U.Pl(this._position, 0, 0, 10),
                this.Gl = U.Dl(),
                U.Pl(this.Gl, 0, 0, -1),
                this.jl = U.Dl(),
                U.Pl(this.jl, 0, 0, -1),
                this.El = U.Dl(),
                U.Pl(this.El, 0, 1, 0),
                this.Nl = U.Zl(),
                this.Fl = U.Il(),
                this.Bl = U.Il(),
                this.ql = U.Il(),
                this.Yl = U.Il()
            }
            p.RoadNet = Pt,
            p.Satellite = li,
            p.Traffic = "d" === U.Support.baseRender ? zi : Ii,
            p.Flexible = Zt,
            p.WMTS = hi,
            p.WMS = Gt,
            p.Mark = Vt,
            Sn.prototype.lookAt = function(t) {
                var i, n, s, e, r, h, o, a, u, f = U.Il(), c = U.Dl();
                U.Pl(this.jl, t[0], t[0], t[2]),
                c = U.Ol(c, this.Fl),
                f = U.lookAt(f, c, t, this.El),
                c = this.Nl,
                f = (t = f)[0],
                n = t[4],
                s = t[8],
                e = t[1],
                h = t[9],
                o = t[2],
                a = t[6],
                0 < (u = f + (r = t[5]) + (t = t[10])) ? (i = .5 / Math.sqrt(u + 1),
                c[3] = .25 / i,
                c[0] = (a - h) * i,
                c[1] = (s - o) * i,
                c[2] = (e - n) * i) : r < f && t < f ? (i = 2 * Math.sqrt(1 + f - r - t),
                c[3] = (a - h) / i,
                c[0] = .25 * i,
                c[1] = (n + e) / i,
                c[2] = (s + o) / i) : t < r ? (i = 2 * Math.sqrt(1 + r - f - t),
                c[3] = (s - o) / i,
                c[0] = (n + e) / i,
                c[1] = .25 * i,
                c[2] = (h + a) / i) : (i = 2 * Math.sqrt(1 + t - f - r),
                c[3] = (e - n) / i,
                c[0] = (s + o) / i,
                c[1] = (h + a) / i,
                c[2] = .25 * i),
                this.$l()
            }
            ,
            Sn.prototype.setPosition = function(t) {
                U.Pl(this._position, t[0], t[1], t[2]),
                this.$l()
            }
            ,
            Sn.prototype.getPosition = function() {
                return this._position
            }
            ,
            Sn.prototype.$l = function() {
                var a, u, f, c, t = this.Fl, i = this._position, n = this.Nl, s = n[0], e = n[1], r = (u = n[2]) + u, h = s * (f = s + s), o = s * (c = e + e);
                s *= r,
                a = e * c,
                e *= r,
                f = (n = n[3]) * f,
                c *= n,
                n *= r,
                t[0] = 1 - (a + (u *= r)),
                t[1] = o + n,
                t[2] = s - c,
                t[3] = 0,
                t[4] = o - n,
                t[5] = 1 - (h + u),
                t[6] = e + f,
                t[7] = 0,
                t[8] = s + c,
                t[9] = e - f,
                t[10] = 1 - (h + a),
                t[11] = 0,
                t[12] = i[0],
                t[13] = i[1],
                t[14] = i[2],
                t[15] = 1,
                U.Ul(this.Bl, this.Fl)
            }
            ,
            In = Nt = Sn,
            U.Ei(Dn, In),
            Dn.prototype.Vl = function() {
                var t = U.Il();
                return U.multiply(t, this.ql, this.Xl),
                U.multiply(t, t, this.Bl),
                t
            }
            ,
            Dn.prototype.setOptions = function(t, i, n, s, e, r) {
                this.Hl = t !== undefined ? t : -1,
                this.Jl = i !== undefined ? i : 1,
                this.Kl = n !== undefined ? n : 1,
                this.Ql = s !== undefined ? s : -1,
                this.tu = e !== undefined ? e : .1,
                this.iu = r !== undefined ? r : 1,
                this.eu()
            }
            ,
            Dn.prototype.scale = function(t) {
                void 0 === t && (t = 1);
                var i = U.Il();
                i.set([t, 0, 0, 0, 0, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
                U.multiply(this.Xl, this.Xl, i)
            }
            ,
            Dn.prototype.setRotation = function(t) {
                var i = U.Il()
                  , n = (t - this.nu) / 180 * Math.PI;
                0 !== (this.nu = t) && (i.set([Math.cos(n), -Math.sin(n), 0, 0, Math.sin(n), Math.cos(n), 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
                U.multiply(this.Xl, this.Xl, i))
            }
            ,
            Dn.prototype.kt = function(t, i, n) {
                var s, e, r, h, o, a;
                t !== undefined && (s = t.Rt,
                e = t.zt,
                r = t.center,
                t = t.scale,
                h = U.Il(),
                a = U.Il(),
                o = U.Il(),
                h.set([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, e[0], e[1], 0, 1]),
                a.set([t, 0, 0, 0, 0, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
                o.set([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, -s[0], -s[1], 0, 1]),
                U.multiply(h, h, a),
                U.multiply(h, h, o),
                U.multiply(this.Xl, this.Xl, h),
                a = [(t = U.ProjectionManager.getProjection(i).project(r[0], r[1]))[0] - e[0] + s[0], t[1] - e[1] + s[1]],
                n(U.ProjectionManager.getProjection(i).unproject(a[0], a[1])))
            }
            ,
            Dn.prototype.Cu = function() {
                return this.Yl
            }
            ,
            Dn.prototype.lB = function() {
                return {
                    left: this.Hl,
                    right: this.Jl,
                    top: this.Kl,
                    bottom: this.Ql,
                    rotation: this.nu,
                    far: this.iu,
                    near: this.tu,
                    position: this._position
                }
            }
            ,
            Dn.prototype.eu = function() {
                var t = (this.Jl - this.Hl) / (2 * this.bt)
                  , i = (this.Kl - this.Ql) / (2 * this.bt)
                  , n = (this.Jl + this.Hl) / 2
                  , s = (this.Kl + this.Ql) / 2;
                U.ou(this.ql, n - t, n + t, s - i, s + i, this.tu, this.iu),
                U.Ul(this.Yl, this.ql)
            }
            ;
            var In, Ln = Dn;
            function Dn(t, i, n, s, e, r) {
                var h = In.call(this) || this;
                return h.type = "OthoCamera",
                h.bt = 1,
                h.nu = 0,
                h.Xl = U.Il(),
                h.Hl = t !== undefined ? t : -1,
                h.Jl = i !== undefined ? i : 1,
                h.Kl = n !== undefined ? n : 1,
                h.Ql = s !== undefined ? s : -1,
                h.tu = e !== undefined ? e : .1,
                h.iu = r !== undefined ? r : 1,
                h.eu(),
                h
            }
            On = U.Event,
            U.Ei(v, On),
            v.prototype.au = function() {
                return this.su
            }
            ,
            v.prototype.ru = function() {
                return U.ProjectionManager.getProjection(this.su)
            }
            ,
            v.prototype.setOptions = function(t, i) {
                void 0 === i && (i = !0),
                t.projectionId && (this.su = t.projectionId);
                var n = U.ProjectionManager.getProjection(this.su);
                if (t.center && (this.hu = t.center,
                s = this.lu(n),
                e = n.unproject(s[0], s[1]),
                this.hu = e,
                U.Pl(this.uu, s[0], s[1], 0),
                this.cu.setPosition(this.fu())),
                t.zoom !== undefined && (t.zoom = Math.min(Math.max(t.zoom, this.map.getZooms()[0]), this.map.getZooms()[1]),
                this.pu = Math.pow(2, t.zoom - this.bt),
                this.bt = t.zoom,
                this.du = n.getResolution(this.bt),
                this.vu(),
                this.cu.setPosition(this.fu())),
                t.size && (this.map.emit("resize"),
                this._size = t.size,
                this.vu()),
                t.rotation !== undefined && "w" === U.Support.baseRender && (360 < t.rotation ? t.rotation -= 360 : t.rotation < -360 && (t.rotation += 360),
                this.cu.setRotation(t.rotation),
                this.nu = t.rotation),
                t.kt) {
                    if (!this.map.getStatus().zoomEnable)
                        return;
                    var s, e, r = t.kt.Mt;
                    this.mu = t.kt,
                    r <= this.map.getZooms()[1] && r >= this.map.getZooms()[0] && (this.bt = r,
                    this.du = n.getResolution(this.bt),
                    r = (t = this.mu).Rt,
                    t = t.zt,
                    (s = this.lu(n))[0] = s[0] - t[0] + r[0],
                    s[1] = s[1] - t[1] + r[1],
                    e = n.unproject(s[0], s[1]),
                    this.hu = e,
                    U.Pl(this.uu, s[0], s[1], 0),
                    this.vu(),
                    this.cu.setPosition(this.fu()),
                    this.mu = undefined)
                }
                !this.h_() && i && this.map.setNeedUpdate(!0)
            }
            ,
            v.prototype.getOptions = function() {
                return {
                    zoom: this.bt,
                    center: this.hu,
                    rotation: this.nu,
                    projectionId: this.su,
                    pitch: 0
                }
            }
            ,
            v.prototype.getStatus = function() {
                var t = U.Zl()
                  , i = U.Zl()
                  , n = U.Zl()
                  , s = (this.xu(t, i, n),
                U.Util.getOptimalZoom(this.bt));
                return {
                    pitch: this.Pu,
                    size: this._size,
                    rotation: this.nu,
                    zoom: this.bt,
                    optimalZoom: s,
                    resolution: this.du,
                    optimalResolution: U.ProjectionManager.getProjection(this.su).getResolution(s),
                    center: this.hu,
                    bounds: t,
                    boundsCoord: i,
                    transformedBoundsCoord: n,
                    centerCoord: this.uu,
                    projectionId: this.su,
                    mvpMatrix: this.cu.Vl(),
                    viewMode: this.type,
                    skyHeight: this.EF(),
                    fov: 60
                }
            }
            ,
            v.prototype.bu = function(t) {
                this.hu = [t[0], t[1]],
                t = U.ProjectionManager.getProjection(this.su).project(this.hu[0], this.hu[1]),
                U.Pl(this.uu, t[0], t[1], 0)
            }
            ,
            v.prototype.containerTolnglat = function(t, i, n) {
                var s, r = (e = this.getStatus()).centerCoord, e = e.rotation, r = U.V[this.su].transform(r[0], r[1], n), h = (r = 0 !== e ? (n = e / 180 * Math.PI,
                e = t - this._size[0] / 2,
                s = -(i - this._size[1] / 2),
                h = Math.sqrt(e * e + s * s),
                e = Math.atan(e / s) - n,
                s < 0 && (e += Math.PI),
                n = h * Math.sin(e),
                s = h * Math.cos(e),
                [r[0] + n * this.du, r[1] - s * this.du]) : [r[0] + (t - this._size[0] / 2) * this.du, r[1] + (i - this._size[1] / 2) * this.du],
                r = U.V[this.su].Xs(r[0], r[1]),
                U.ProjectionManager.getProjection(this.su).unproject(r[0], r[1]));
                return h[0] = 180 < h[0] ? h[0] - 360 : h[0] < -180 ? h[0] + 360 : h[0],
                h
            }
            ,
            v.prototype.lnglatToContainer = function(t, i, n, s) {
                s = s || this.bt;
                var r = (e = this.getStatus()).rotation
                  , e = e.centerCoord
                  , i = [(t = U.ProjectionManager.getProjection(this.su).project(t, i))[0], t[1]]
                  , t = {
                    center: e,
                    rotation: r,
                    size: this._size
                };
                return U.V[this.su].wu(i[0], i[1], s, t)
            }
            ,
            v.prototype._u = function(t, i) {
                var n = this.getStatus()
                  , s = (n.optimalZoom,
                {
                    center: n.centerCoord,
                    rotation: n.rotation,
                    size: this._size
                });
                return U.V[this.su].wu(t, i, n.zoom, s)
            }
            ,
            v.prototype.ku = function(t, i) {
                this.getStatus().optimalZoom;
                i = this.containerTolnglat(t, i);
                return (t = U.ProjectionManager.getProjection(this.su)).project.apply(t, i)
            }
            ,
            v.prototype.h_ = function() {
                return U.Ru(this.Xl, this.cu.Vl())
            }
            ,
            v.prototype.aD = function() {
                return this.Xl = this.cu.Vl(),
                this.Xl
            }
            ,
            v.prototype.EF = function() {
                return 1
            }
            ,
            v.prototype.pz = function() {
                return this.cu
            }
            ,
            v.prototype.xu = function(t, i, n) {
                var s = this.nu / 180 * Math.PI
                  , e = this._size
                  , e = [(Math.abs(e[0] * Math.cos(s)) + Math.abs(e[1] * Math.sin(s))) / 2 * this.du, (Math.abs(e[0] * Math.sin(s)) + Math.abs(e[1] * Math.cos(s))) / 2 * this.du]
                  , s = U.ProjectionManager.getProjection(this.su)
                  , r = this.uu[0] - e[0]
                  , h = this.uu[0] + e[0]
                  , o = this.uu[1] - e[1]
                  , e = this.uu[1] + e[1]
                  , a = s.unproject(r, o)
                  , s = s.unproject(h, e)
                  , r = (i[0] = r,
                i[1] = o,
                i[2] = h,
                i[3] = e,
                t[0] = a[0],
                t[1] = a[1],
                t[2] = s[0],
                t[3] = s[1],
                U.V[this.su].transform(i[0], i[3]))
                  , o = U.V[this.su].transform(i[2], i[1]);
                return n[0] = r[0],
                n[1] = r[1],
                n[2] = o[0],
                n[3] = o[1],
                t
            }
            ,
            v.prototype.vu = function() {
                var i = (t = this._size)[0] * this.du
                  , t = t[1] * this.du;
                this.cu.setOptions(-i / 2, i / 2, t / 2, -t / 2, 1, 11e5)
            }
            ,
            v.prototype.fu = function() {
                var t, i = U.Dl();
                return U.Util.getOptimalZoom(this.bt) < U.Ra ? U.Pl(i, this.uu[0], this.uu[1], this.cz) : (t = U.lcs.getDeltaCoord([this.uu[0], this.uu[1]]),
                U.Pl(i, t[0], t[1], this.cz)),
                i
            }
            ,
            v.prototype.lu = function(t) {
                return this.hu[0] = 180 < this.hu[0] ? this.hu[0] - 360 : this.hu[0] < -180 ? this.hu[0] + 360 : this.hu[0],
                t.project(this.hu[0], this.hu[1])
            }
            ;
            var On, Rn = v;
            function v(t, i) {
                var n = On.call(this) || this;
                return n.type = "2D",
                n.Pu = 0,
                n.hu = [0, 0],
                n.bt = 12,
                n._size = [0, 0],
                n.pu = 1,
                n.nu = 0,
                n.cu = new Ln(-1,1,1,-1,10,1e3),
                n.su = "EPSG:3857",
                n.uu = U.Dl(),
                n.cz = 1e6,
                n.du = U.ProjectionManager.getProjection(n.su).getResolution(12),
                n.Xl = U.Il(),
                n.bt = t.zoom !== undefined ? t.zoom : 12,
                n.map = i,
                n.setOptions(t),
                n.vu(),
                n.Xl = n.cu.Vl(),
                n
            }
            En = Nt,
            U.Ei(m, En),
            m.prototype.Vl = function() {
                var t = [];
                return U.multiply(t, this.ql, this.zu),
                t
            }
            ,
            m.prototype.Su = function() {
                return this.ql
            }
            ,
            m.prototype.Cu = function() {
                return this.Yl
            }
            ,
            m.prototype.Lu = function() {
                return this.zu
            }
            ,
            m.prototype.Au = function() {
                return this.cu
            }
            ,
            m.prototype.setOptions = function(t, i, n, s, e) {
                void 0 === t && (t = [1, 1]),
                void 0 === n && (n = 1),
                void 0 === s && (s = 1),
                void 0 === e && (e = 10),
                this.Tu = this.Iu(i = void 0 === i ? 60 : i),
                this.tu = s,
                this.iu = e,
                this.Du = n,
                this._size = t,
                this.eu()
            }
            ,
            m.prototype.setSize = function(t) {
                this._size = t
            }
            ,
            m.prototype.setPitch = function(t) {
                this.Pu = void 0 !== t ? t : this.Pu;
                var t = this._size[1] / 2 / Math.tan(this.Tu / 2)
                  , i = this.Iu(this.Pu)
                  , n = this.Iu(this.nu)
                  , s = t * Math.sin(i)
                  , e = this.jl[0] - s * Math.sin(n)
                  , s = this.jl[1] - s * Math.cos(n)
                  , n = t * Math.cos(i);
                U.Pl(this._position, e, s, n),
                this.ju()
            }
            ,
            m.prototype.setRotation = function(t) {
                this.nu = void 0 !== t ? -t : this.nu;
                var t = this.Iu(this.nu)
                  , i = Math.sin(t)
                  , t = Math.cos(t);
                U.Pl(this.El, i, t, 0),
                this.Ou()
            }
            ,
            m.prototype.Fu = function(t, i, n) {
                U.Pl(this.jl, t, i, n),
                this.ju()
            }
            ,
            m.prototype.Ou = function(t, i, n) {
                void 0 !== t && void 0 !== i ? (U.Pl(this._position, t, i, void 0 === n ? this._position[2] : n),
                this.ju()) : (t = this._size[1] / 2 / Math.tan(this.Tu / 2),
                U.Pl(this._position, this.jl[0], this.jl[1], t),
                this.setPitch())
            }
            ,
            m.prototype.Eu = function(t) {
                var i = this._size;
                this.cz = t || i[1] / 2 / Math.tan(this.Tu / 2) || 0,
                U.Pl(this._position, this._position[0], this._position[1], this.cz),
                this.setPitch()
            }
            ,
            m.prototype.Nu = function(t, i, n) {
                U.Pl(this.El, t = void 0 === t ? 0 : t, i = void 0 === i ? 1 : i, n = void 0 === n ? 0 : n),
                this.ju()
            }
            ,
            m.prototype.dz = function() {
                return this.cz
            }
            ,
            m.prototype.lB = function() {
                return {
                    fov: this.Tu,
                    target: this.jl,
                    up: this.El,
                    position: this._position,
                    far: this.iu,
                    near: this.tu
                }
            }
            ,
            m.prototype.eu = function() {
                U.perspective(this.ql, this.Tu, this.Du, this.tu, this.iu),
                U.Ul(this.Yl, this.ql)
            }
            ,
            m.prototype.ju = function() {
                U.lookAt(this.zu, this._position, this.jl, this.El),
                U.Ul(this.cu, this.zu)
            }
            ,
            m.prototype.Iu = function(t) {
                return t * Math.PI / 180
            }
            ;
            var En, jn = m;
            function m(t, i, n, s, e) {
                void 0 === t && (t = [1, 1]),
                void 0 === i && (i = 60),
                void 0 === n && (n = 1),
                void 0 === s && (s = 10),
                void 0 === e && (e = 2e4);
                var r = En.call(this) || this;
                return r.Wt = "PerspectiveCamera",
                r.Pu = 0,
                r.nu = 0,
                r.cu = U.Il(),
                r.zu = U.Il(),
                r.cz = 0,
                r.Tu = r.Iu(i),
                r.tu = s,
                r.iu = e,
                r.Du = n,
                U.Pl(r.El, 0, 1, 0),
                r._size = t,
                r.eu(),
                r
            }
            Pn = U.Event,
            U.Ei(y, Pn),
            y.prototype.setOptions = function(t) {
                var i = U.ProjectionManager.getProjection(this.su);
                if (t.projectionId && (this.su = t.projectionId),
                t.size && (this.map.emit("resize"),
                this._size = t.size,
                this.vu(),
                this.cu.Ou()),
                t.rotation !== undefined && "w" === U.Support.baseRender && (this.cu.setRotation(t.rotation),
                this.nu = t.rotation),
                t.zoom !== undefined && (t.zoom = Math.min(Math.max(t.zoom, this.map.getZooms()[0]), this.map.getZooms()[1]),
                n = this.bt,
                this.bt = t.zoom,
                this.du = i.getResolution(this.bt),
                e = this.fu(),
                (U.Util.getOptimalZoom(t.zoom) < U.Ra && U.Util.getOptimalZoom(n) >= U.Ra || U.Util.getOptimalZoom(t.zoom) >= U.Ra && U.Util.getOptimalZoom(n) < U.Ra) && (s = this.fu(),
                this.cu.Fu(s[0], s[1], 0),
                this.cu.Ou(),
                this.vu()),
                this.cu.Fu(e[0], e[1], 0),
                this.cu.Ou(),
                this.vu()),
                void 0 !== t.pitch && "w" === U.Support.baseRender && (t.pitch > this.$u() || this.Pu > this.$u() ? t.pitch = this.$u() : (t.pitch < 0 || this.Pu < 0) && (t.pitch = 0),
                this.Pu = Math.min(t.pitch, this.$u()),
                this.cu.setPitch(t.pitch)),
                t.center && (this.hu = t.center,
                r = this.lu(i),
                U.Pl(this.uu, r[0], r[1], 0),
                e = this.fu(),
                s = i.unproject(r[0], r[1]),
                this.hu = s,
                this.cu.Fu(e[0], e[1], 0),
                this.cu.Ou()),
                t.kt) {
                    if (!this.map.getStatus().zoomEnable)
                        return;
                    var n = this.bt
                      , n = (this.bt = Math.min(Math.max(t.kt.Mt, this.map.getZooms()[0]), this.map.getZooms()[1]),
                    this.du = i.getResolution(this.bt),
                    (U.Util.getOptimalZoom(t.kt.Mt) < U.Ra && U.Util.getOptimalZoom(n) >= U.Ra || U.Util.getOptimalZoom(t.kt.Mt) >= U.Ra && U.Util.getOptimalZoom(n) < U.Ra) && (s = this.fu(),
                    this.cu.Fu(s[0], s[1], 0),
                    this.cu.Ou()),
                    this.lu(i))
                      , s = t.kt.pos
                      , i = this.X(s[0], s[1])
                      , t = U.lcs.getLocalByCoord([n[0], n[1]])
                      , e = (this.vu(),
                    this.fu());
                    this.cu.Fu(e[0], e[1], 0),
                    this.cu.Ou();
                    var s = [(s = this.X(s[0], s[1]))[0] - i[0], s[1] - i[1]]
                      , i = [e[0] - s[0], e[1] - s[1]]
                      , r = [n[0] - s[0], n[1] - s[1]]
                      , e = U.lcs.getLocalByCoord(r);
                    this.bt >= U.Ra && (e.x !== t.x || t.y !== e.y) && (n = e.x - t.x,
                    s = e.y - t.y,
                    i[0] -= n * U.lcs.getSize()[0],
                    i[1] -= s * U.lcs.getSize()[1]),
                    this.cu.Fu(i[0], i[1], 0),
                    this.cu.Ou(),
                    this.bu(r)
                }
                this.h_() || this.map.setNeedUpdate(!0)
            }
            ,
            y.prototype.bu = function(t) {
                var i = U.ProjectionManager.getProjection(this.su)
                  , t = (U.Pl(this.uu, t[0], t[1], 0),
                i.unproject(t[0], t[1]));
                this.hu = t
            }
            ,
            y.prototype.getOptions = function() {
                return {
                    size: this._size,
                    zoom: this.bt,
                    center: this.hu,
                    rotation: this.nu,
                    projectionId: this.su,
                    pitch: this.Pu,
                    resolution: this.du
                }
            }
            ,
            y.prototype.au = function() {
                return this.su
            }
            ,
            y.prototype.ru = function() {
                return U.ProjectionManager.getProjection(this.su)
            }
            ,
            y.prototype.getStatus = function() {
                var t = U.Zl()
                  , i = U.Zl()
                  , n = U.Zl()
                  , s = (this.xu(t, i, n),
                U.Util.getOptimalZoom(this.bt));
                return {
                    size: this._size,
                    pitch: this.Pu,
                    rotation: this.nu,
                    zoom: this.bt,
                    optimalZoom: s,
                    resolution: this.du,
                    optimalResolution: U.ProjectionManager.getProjection(this.su).getResolution(s),
                    center: this.hu,
                    bounds: t,
                    boundsCoord: i,
                    transformedBoundsCoord: n,
                    centerCoord: this.uu,
                    projectionId: this.su,
                    mvpMatrix: this.cu.Vl(),
                    modelMatrix: this.cu.Au(),
                    viewMode: this.type,
                    skyHeight: this.EF(),
                    fov: this.cu.Tu
                }
            }
            ,
            y.prototype.$u = function(t) {
                return 80
            }
            ,
            y.prototype.Uu = function(t) {
                var t = void 0 !== t ? t : this.Pu
                  , i = this.bt
                  , t = Math.max(t / 100 - .4, 0)
                  , i = Math.max(4 * (i - 22), 0) / 100;
                return this._size[1] * (t - i) - 10
            }
            ,
            y.prototype.EF = function() {
                var t = 1;
                return 0 < (t = this.Uu()) ? 1 - t / this._size[1] * 2 : 1
            }
            ,
            y.prototype.X = function(t, i) {
                var n, s = this.cu.Cu(), e = this.cu.Au(), r = this._size;
                return t = t / r[0] * 2 - 1,
                s ? (r = U.Bu(t, i = 1 - i / r[1] * 2, -1, 1),
                this.Wu(r, this.tu),
                n = U.Zl(),
                U.Gu(n, r, s),
                r = U.Bu(t, i, 1, 1),
                this.Wu(r, this.iu),
                t = U.Zl(),
                U.Gu(t, r, s),
                i = U.Zl(),
                U.Gu(i, n, e),
                r = U.Zl(),
                U.Gu(r, t, e),
                s = +i[2] / (i[2] - r[2]),
                [i[0] - s * (i[0] - r[0]), i[1] - s * (i[1] - r[1])]) : [0, 0]
            }
            ,
            y.prototype.ku = function(t, i) {
                var n = U.Util.getOptimalZoom(this.bt)
                  , s = this.uu
                  , e = this.X(t, i);
                return t = e[0],
                i = e[1],
                n >= U.Ra && (t += (e = U.lcs.getLocalByCoord([s[0], s[1]])).center[0],
                i += e.center[1]),
                [t, i]
            }
            ,
            y.prototype.H = function(t, i, n) {
                void 0 === n && (n = 0);
                var s = this.cu.Su()
                  , e = this.cu.Lu()
                  , t = ((r = this.fG)[0] = t,
                r[1] = i,
                r[2] = n,
                this.uG)
                  , i = this.cG
                  , n = (U.Gu(t, r, e),
                U.Gu(i, t, s),
                U.scale(i, i, 1 / i[3]),
                (i[0] + 1) / 2 * this._size[0])
                  , r = (1 - i[1]) / 2 * this._size[1];
                return this.lG(i),
                this.lG(t),
                [n, r]
            }
            ,
            y.prototype._u = function(t, i, n) {
                void 0 === n && (n = 0);
                var s = U.Util.getOptimalZoom(this.bt)
                  , e = this.uu;
                return s >= U.Ra && (t -= (s = U.lcs.getLocalByCoord([e[0], e[1]])).center[0],
                i -= s.center[1]),
                this.H(t, i, n)
            }
            ,
            y.prototype.containerTolnglat = function(t, i) {
                var t = this.X(t, i)
                  , i = 0
                  , n = 0
                  , s = (U.Util.getOptimalZoom(this.bt) >= U.Ra && (i = (s = U.lcs.getLocalByCoord([this.uu[0], this.uu[1]]).center)[0],
                n = s[1]),
                t[0] += i,
                t[1] += n,
                U.ProjectionManager.getProjection(this.su).unproject(t[0], t[1]));
                return s[0] = 180 < s[0] ? s[0] - 360 : s[0] < -180 ? s[0] + 360 : s[0],
                s
            }
            ,
            y.prototype.lnglatToContainer = function(t, i, n, s) {
                return void 0 === n && (n = 0),
                t = U.ProjectionManager.getProjection(this.su).project(t, i),
                U.Util.getOptimalZoom(this.bt) >= U.Ra && (i = U.lcs.getLocalByCoord([this.uu[0], this.uu[1]]),
                t[0] -= i.center[0],
                t[1] -= i.center[1]),
                this.H(t[0], t[1], n)
            }
            ,
            y.prototype.pz = function() {
                return this.cu
            }
            ,
            y.prototype.h_ = function() {
                return U.Ru(this.Xl, this.cu.Vl())
            }
            ,
            y.prototype.aD = function() {
                return this.Xl = this.cu.Vl(),
                this.Xl
            }
            ,
            y.prototype.xu = function(t, i, n) {
                var s = 0
                  , e = 0
                  , r = this.Uu()
                  , h = (U.Util.getOptimalZoom(this.bt) >= U.Ra && (s = (h = U.lcs.getLocalByCoord([this.uu[0], this.uu[1]]).center)[0],
                e = h[1]),
                U.ProjectionManager.getProjection(this.su))
                  , o = this.X(0, r)
                  , a = this.X.apply(this, this._size)
                  , r = this.X(this._size[0], r)
                  , u = this.X(0, this._size[1])
                  , f = Math.min(o[0], u[0], r[0], a[0]) + s
                  , s = Math.max(o[0], u[0], r[0], a[0]) + s
                  , c = Math.min(o[1], u[1], r[1], a[1]) + e
                  , o = Math.max(o[1], u[1], r[1], a[1]) + e
                  , u = h.unproject(f, c)
                  , r = h.unproject(s, o)
                  , a = (i[0] = f,
                i[1] = c,
                i[2] = s,
                i[3] = o,
                t[0] = u[0],
                t[1] = u[1],
                t[2] = r[0],
                t[3] = r[1],
                U.V[this.su].transform(i[0], i[3]))
                  , e = U.V[this.su].transform(i[2], i[1]);
                return n[0] = a[0],
                n[1] = a[1],
                n[2] = e[0],
                n[3] = e[1],
                t
            }
            ,
            y.prototype.vu = function() {
                var t = this._size
                  , i = t[0] * this.du
                  , n = t[1] * this.du
                  , s = (this.cu.setSize([i, n]),
                this.cu.Eu(),
                this.cu.dz())
                  , s = (this.tu = s / 10,
                this.iu = 50 * s,
                56 - this.bt);
                this.cu.setOptions([i, n], s, t[0] / t[1], this.tu, this.iu),
                this.cu.Eu()
            }
            ,
            y.prototype.fu = function() {
                var t;
                return U.Util.getOptimalZoom(this.bt) < U.Ra ? [this.uu[0], this.uu[1]] : [(t = U.lcs.getDeltaCoord([this.uu[0], this.uu[1]]))[0], t[1]]
            }
            ,
            y.prototype.lu = function(t) {
                return this.hu[0] = 180 < this.hu[0] ? this.hu[0] - 360 : this.hu[0] < -180 ? this.hu[0] + 360 : this.hu[0],
                t.project(this.hu[0], this.hu[1])
            }
            ,
            y.prototype.Wu = function(t, i) {
                t[0] *= i,
                t[1] *= i,
                t[2] *= i,
                t[3] *= i
            }
            ,
            y.prototype.lG = function(t) {
                for (var i = t.length, n = 0; n < i; n++)
                    t[n] = 0
            }
            ;
            var Pn, Bn = y;
            function y(t, i) {
                var n = Pn.call(this) || this;
                return n.type = "3D",
                n.Pu = 0,
                n.hu = [116.397128, 39.916527],
                n.bt = 12,
                n.tu = 1e3,
                n.iu = 1 << 30,
                n._size = [0, 0],
                n.nu = 0,
                n.cu = new jn,
                n.su = "EPSG:3857",
                n.uu = U.Dl(),
                n.du = U.ProjectionManager.getProjection(n.su).getResolution(12),
                n.Xl = U.Il(),
                n.fG = [0, 0, 0, 1],
                n.uG = [0, 0, 0, 0],
                n.cG = [0, 0, 0, 0],
                n.map = i,
                n.setOptions(t),
                n.cu.Ou(n.uu[0], n.uu[1]),
                n.Xl = n.cu.Vl(),
                n
            }
            var Fn = {
                Fe: ["water", "buildings", "sky", "atmosphere", "bg", "traffic"],
                aX: {
                    regions: {
                        subType: {
                            land: {
                                styleMap: [{
                                    mainkey: 30001,
                                    subkey: [1, 4, 5]
                                }],
                                name: ["区域面", "陆地"]
                            },
                            green: {
                                styleMap: [{
                                    mainkey: 30001,
                                    subkey: [3, 7, 8, 9, 10, 12, 37]
                                }],
                                name: ["区域面", "绿地"]
                            },
                            "water:ocean": {
                                styleMap: [{
                                    mainkey: 30001,
                                    subkey: [6]
                                }, {
                                    mainkey: 10002,
                                    subkey: [38]
                                }],
                                name: ["区域面", "海洋"]
                            },
                            "water:watersystem": {
                                styleMap: [{
                                    mainkey: 30001,
                                    subkey: [2, 11, 13]
                                }, {
                                    mainkey: 20014
                                }, {
                                    mainkey: 10002,
                                    subkey: [13]
                                }],
                                name: ["区域面", "其他水系"]
                            },
                            edu: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [3, 31]
                                }, {
                                    mainkey: 30005,
                                    subkey: [1, 2, 3, 4, 5, 6]
                                }],
                                name: ["区域面", "教育体育"]
                            },
                            scenicSpot: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [5, 33, 41]
                                }],
                                name: ["区域面", "景区"]
                            },
                            sports: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [9, 10, 13, 19, 20, 21, 34, 37, 39]
                                }],
                                name: ["区域面", "运动场所"]
                            },
                            parkingLot: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [1]
                                }],
                                name: ["区域面", "停车场"]
                            },
                            subway: {
                                styleMap: [{
                                    mainkey: 30003
                                }],
                                name: ["区域面", "地铁设施"]
                            },
                            servicearea: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [42, 43]
                                }],
                                name: ["区域面", "高速服务区"]
                            },
                            desert: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [41]
                                }],
                                name: ["区域面", "沙漠沙地"]
                            },
                            culture: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [7, 35]
                                }],
                                name: ["区域面", "文化"]
                            },
                            "public": {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [4, 12, 22, 32, 42, 43]
                                }, {
                                    mainkey: 30005,
                                    subkey: [7]
                                }],
                                name: ["区域面", "公共设施"]
                            },
                            health: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [8, 36]
                                }],
                                name: ["区域面", "医疗卫生"]
                            },
                            business: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [11, 23, 24, 25, 26, 27, 28, 29, 30, 38]
                                }],
                                name: ["区域面", "商业场所"]
                            },
                            transporthub: {
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [6, 14, 40]
                                }, {
                                    mainkey: 30004
                                }],
                                name: ["区域面", "交通枢纽"]
                            }
                        }
                    },
                    roads: {
                        subType: {
                            "highWay:highway": {
                                styleMap: [{
                                    mainkey: 20001,
                                    subkey: [1, 5]
                                }],
                                name: ["道路", "高速"]
                            },
                            "highWay:highwayTunnel": {
                                styleMap: [{
                                    mainkey: 20001,
                                    subkey: [3]
                                }],
                                name: ["道路", "高速隧道"]
                            },
                            "highWay:highwayOthers": {
                                styleMap: [{
                                    mainkey: 20001,
                                    subkey: [2, 6]
                                }],
                                name: ["道路", "高速其他路"]
                            },
                            "ringRoad:ringRoad": {
                                styleMap: [{
                                    mainkey: 20002,
                                    subkey: [1, 5]
                                }],
                                name: ["道路", "环路"]
                            },
                            "ringRoad:ringRoadTunnel": {
                                styleMap: [{
                                    mainkey: 20002,
                                    subkey: [3]
                                }],
                                name: ["道路", "环路隧道"]
                            },
                            "ringRoad:ringRoadOthers": {
                                styleMap: [{
                                    mainkey: 20002,
                                    subkey: [2]
                                }],
                                name: ["道路", "环路其他路"]
                            },
                            "nationalRoad:nationalRoad": {
                                styleMap: [{
                                    mainkey: 20003,
                                    subkey: [1]
                                }],
                                name: ["道路", "国道"]
                            },
                            "nationalRoad:nationalRoadTunnel": {
                                styleMap: [{
                                    mainkey: 20003,
                                    subkey: [3]
                                }],
                                name: ["道路", "国道隧道"]
                            },
                            "nationalRoad:nationalRoadOthers": {
                                styleMap: [{
                                    mainkey: 20003,
                                    subkey: [2, 5]
                                }],
                                name: ["道路", "国道其他路"]
                            },
                            "provincialRoad:provincialRoad": {
                                styleMap: [{
                                    mainkey: 20004,
                                    subkey: [1]
                                }],
                                name: ["道路", "省道"]
                            },
                            "provincialRoad:provincialRoadTunnel": {
                                styleMap: [{
                                    mainkey: 20004,
                                    subkey: [3]
                                }],
                                name: ["道路", "省道隧道"]
                            },
                            "provincialRoad:provincialRoadOthers": {
                                styleMap: [{
                                    mainkey: 20004,
                                    subkey: [2]
                                }],
                                name: ["道路", "省道其他路"]
                            },
                            secondaryRoad: {
                                styleMap: [{
                                    mainkey: 20007
                                }, {
                                    mainkey: 20031
                                }, {
                                    mainkey: 20032
                                }],
                                name: ["道路", "二级道路"]
                            },
                            levelThreeRoad: {
                                styleMap: [{
                                    mainkey: 20008
                                }],
                                name: ["道路", "三级道路"]
                            },
                            levelFourRoad: {
                                styleMap: [{
                                    mainkey: 20009
                                }, {
                                    mainkey: 20026
                                }],
                                name: ["道路", "四级道路"]
                            },
                            roadsBeingBuilt: {
                                styleMap: [{
                                    mainkey: 20018
                                }, {
                                    mainkey: 20023
                                }],
                                name: ["道路", "在建道路"]
                            },
                            railway: {
                                styleMap: [{
                                    mainkey: 20010,
                                    subkey: [1, 3]
                                }],
                                name: ["道路", "铁路"]
                            },
                            highSpeedRailway: {
                                styleMap: [{
                                    mainkey: 20010,
                                    subkey: [2]
                                }],
                                name: ["道路", "高铁"]
                            },
                            subway: {
                                styleMap: [{
                                    mainkey: 20015,
                                    subkey: [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47, 48, 50, 51, 52, 54, 55, 56, 57, 58, 59, 60, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 86, 87, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190]
                                }],
                                name: ["道路", "地铁"]
                            },
                            subwayBeingBuilt: {
                                styleMap: [{
                                    mainkey: 20015,
                                    subkey: [1, 2]
                                }, {
                                    mainkey: 20019
                                }],
                                name: ["道路", "在建地铁"]
                            },
                            overPass: {
                                styleMap: [{
                                    mainkey: 20012
                                }],
                                name: ["道路", "天桥"]
                            },
                            underPass: {
                                styleMap: [{
                                    mainkey: 20013
                                }],
                                name: ["道路", "地道"]
                            },
                            other: {
                                styleMap: [{
                                    mainkey: 20011
                                }, {
                                    mainkey: 20017
                                }, {
                                    mainkey: 20020
                                }, {
                                    mainkey: 20024
                                }, {
                                    mainkey: 20028
                                }],
                                name: ["道路", "其他线路"]
                            },
                            guideBoards: {
                                styleMap: [{
                                    mainkey: 40001
                                }],
                                name: ["道路", "道路路牌"]
                            }
                        }
                    },
                    labels: {
                        subType: {
                            "building:officebuilding": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [5, 74, 75, 76, 77, 78, 79]
                                }, {
                                    mainkey: 10004,
                                    subkey: [12]
                                }],
                                name: ["标注", "商务大厦"]
                            },
                            "building:residence": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [6, 80, 81]
                                }],
                                name: ["标注", "住宅"]
                            },
                            "building:landmark": {
                                styleMap: [{
                                    mainkey: 10007,
                                    subkey: [187, 188, 189, 190, 192, 193, 195, 196, 198]
                                }],
                                name: ["标注", "地标建筑"]
                            },
                            "repast:restaurant": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [19, 20, 114, 115, 116, 117, 118, 119]
                                }, {
                                    mainkey: 10007,
                                    subkey: [179, 180, 181]
                                }, {
                                    mainkey: 10010,
                                    subkey: [5, 6]
                                }],
                                name: ["标注", "餐厅"]
                            },
                            "repast:tearoom": {
                                styleMap: [{
                                    mainkey: 10007,
                                    subkey: [167]
                                }],
                                name: ["标注", "茶馆"]
                            },
                            "repast:cafe": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [22]
                                }, {
                                    mainkey: 10007,
                                    subkey: [215]
                                }],
                                name: ["标注", "咖啡厅"]
                            },
                            "repast:dessert": {
                                styleMap: [{
                                    mainkey: 10007,
                                    subkey: [166]
                                }],
                                name: ["标注", "甜品店"]
                            },
                            "entertainment:mall": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [7, 68, 82, 83, 84, 85, 93, 94, 98]
                                }, {
                                    mainkey: 10004,
                                    subkey: [8, 18]
                                }, {
                                    mainkey: 10007,
                                    subkey: [175, 200, 201, 202, 203, 204]
                                }],
                                name: ["标注", "购物商场"]
                            },
                            "entertainment:market": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [8, 92]
                                }, {
                                    mainkey: 10007,
                                    subkey: [1, 2, 3, 4, 5, 6, 10, 168]
                                }],
                                name: ["标注", "便利超市"]
                            },
                            "entertainment:cinema": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [60]
                                }, {
                                    mainkey: 10007,
                                    subkey: [178]
                                }],
                                name: ["标注", "影剧院"]
                            },
                            "entertainment:entertainment": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [61, 62]
                                }, {
                                    mainkey: 10007,
                                    subkey: [169]
                                }],
                                name: ["标注", "娱乐场所"]
                            },
                            "entertainment:pedestrainmall": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [99]
                                }],
                                name: ["标注", "步行街"]
                            },
                            "entertainment:hotel": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [9, 133, 134, 135, 136]
                                }],
                                name: ["标注", "酒店"]
                            },
                            "entertainment:zoo": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [38, 103]
                                }],
                                name: ["标注", "动物园"]
                            },
                            "entertainment:funfair": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [37, 73, 184, 185, 188, 203, 204, 205]
                                }],
                                name: ["标注", "游乐场"]
                            },
                            "scenic:attraction": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [4, 12, 104, 105, 106, 107, 108, 109, 110, 111, 112, 120, 167, 168, 171, 213]
                                }, {
                                    mainkey: 10004,
                                    subkey: [3, 13, 21]
                                }, {
                                    mainkey: 10007,
                                    subkey: [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 227, 228, 229, 230, 231, 236]
                                }, {
                                    mainkey: 10008
                                }],
                                name: ["标注", "风景名胜"]
                            },
                            "scenic:park": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [14, 69, 100, 101, 102]
                                }],
                                name: ["标注", "公园"]
                            },
                            "scenic:mountain": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [18]
                                }],
                                name: ["标注", "山"]
                            },
                            "traffic:busstop": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [24]
                                }],
                                name: ["标注", "公交站"]
                            },
                            "traffic:port": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [36]
                                }],
                                name: ["标注", "港口"]
                            },
                            "traffic:transporthub": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [2, 27, 28, 29, 30, 31, 172, 175]
                                }, {
                                    mainkey: 10004,
                                    subkey: [4, 10, 14, 20]
                                }],
                                name: ["标注", "交通枢纽"]
                            },
                            "traffic:trainstation": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [26]
                                }],
                                name: ["标注", "火车站"]
                            },
                            "traffic:airportterminal": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [23, 176, 177, 178]
                                }, {
                                    mainkey: 10009
                                }],
                                name: ["标注", "机场航站楼"]
                            },
                            "traffic:coachstation": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [25]
                                }],
                                name: ["标注", "长途汽车站"]
                            },
                            culture: {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [10, 11, 13, 35, 138, 139, 140, 141, 142, 143, 163, 164, 165, 166, 170]
                                }, {
                                    mainkey: 10004,
                                    subkey: [1, 5, 11, 15]
                                }, {
                                    mainkey: 10007,
                                    subkey: [43, 44, 45, 46, 47, 176, 177]
                                }]
                            },
                            "service:lifestyle": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [58, 63, 64, 65, 66, 67, 121, 122, 123, 173, 214]
                                }, {
                                    mainkey: 10007,
                                    subkey: [28, 29, 30, 58]
                                }],
                                name: ["标注", "生活服务"]
                            },
                            "service:bank": {
                                styleMap: [{
                                    mainkey: 10007,
                                    subkey: [14, 15, 16, 17]
                                }],
                                name: ["标注", "银行"]
                            },
                            "service:restroom": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [59]
                                }],
                                name: ["标注", "卫生间"]
                            },
                            "medical:medicalcenter": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [70]
                                }, {
                                    mainkey: 10004,
                                    subkey: [6, 16]
                                }],
                                name: ["标注", "大型医院"]
                            },
                            "medical:hospital": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [32, 33, 169, 206, 207, 208, 209, 210]
                                }, {
                                    mainkey: 10007,
                                    subkey: [170]
                                }],
                                name: ["标注", "医院"]
                            },
                            "medical:emergencycenter": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [132]
                                }],
                                name: ["标注", "急救中心"]
                            },
                            "medical:clinic": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [131]
                                }, {
                                    mainkey: 10007,
                                    subkey: [209]
                                }],
                                name: ["标注", "诊所"]
                            },
                            "medical:pharmacy": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [57]
                                }],
                                name: ["标注", "药店"]
                            },
                            "casual:golf": {
                                styleMap: [{
                                    mainkey: 10004,
                                    subkey: [7, 17]
                                }],
                                name: ["标注", "高尔夫"]
                            },
                            "casual:swimmingpool": {
                                styleMap: [{
                                    mainkey: 10007,
                                    subkey: [171]
                                }],
                                name: ["标注", "游泳馆"]
                            },
                            "casual:basketballcourt": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [129]
                                }],
                                name: ["标注", "篮球馆"]
                            },
                            "casual:soccerfield": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [130]
                                }],
                                name: ["标注", "足球场"]
                            },
                            "casual:tenniscourt": {
                                styleMap: [{
                                    mainkey: 10007,
                                    subkey: [174]
                                }],
                                name: ["标注", "网球场"]
                            },
                            "casual:otherstadium": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [15, 16, 17, 124, 125, 126, 127, 128]
                                }, {
                                    mainkey: 10007,
                                    subkey: [172, 173]
                                }],
                                name: ["标注", "其他体育馆"]
                            },
                            "point:toll": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [218]
                                }],
                                name: ["标注", "收费站"]
                            },
                            "point:trafficlight": {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [2]
                                }],
                                name: ["标注", "红绿灯"]
                            },
                            "point:tunnel": {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [16]
                                }],
                                name: ["标注", "隧道"]
                            },
                            insurance: {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [42, 55]
                                }],
                                name: ["标注", "金融保险"]
                            },
                            motorcycleservices: {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [113]
                                }],
                                name: ["标注", "摩托车服务"]
                            },
                            automobileservices: {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [39, 40, 41, 71, 72]
                                }, {
                                    mainkey: 10007,
                                    subkey: [40, 41, 42]
                                }],
                                name: ["标注", "汽车服务"]
                            },
                            subway: {
                                styleMap: [{
                                    mainkey: 10005
                                }, {
                                    mainkey: 10006
                                }],
                                name: ["标注", "地铁站"]
                            },
                            transportfacilities: {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [149, 150, 215, 216, 217]
                                }, {
                                    mainkey: 10002,
                                    subkey: [11]
                                }, {
                                    mainkey: 11001,
                                    subkey: [1, 2, 3]
                                }, {
                                    mainkey: 10004,
                                    subkey: [22, 23]
                                }],
                                name: ["标注", "道路附属设施"]
                            },
                            bizcircle: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [10]
                                }],
                                name: ["标注", "商圈"]
                            },
                            others: {
                                styleMap: [{
                                    mainkey: 10001,
                                    subkey: [1, 3, 34, 43, 137]
                                }, {
                                    mainkey: 10002,
                                    subkey: [12, 14, 15, 21, 23, 28, 36]
                                }, {
                                    mainkey: 10004,
                                    subkey: [2]
                                }, {
                                    mainkey: 10007,
                                    subkey: [208, 210, 211, 212, 213, 214]
                                }, {
                                    mainkey: 10011
                                }, {
                                    mainkey: 10012
                                }, {
                                    mainkey: 10013
                                }, {
                                    mainkey: 10014
                                }, {
                                    mainkey: 10015
                                }, {
                                    mainkey: 10016
                                }],
                                name: ["标注", "其他"]
                            }
                        }
                    },
                    districtsname: {
                        subType: {
                            continent: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [20]
                                }],
                                name: ["行政区名", "大洲名"]
                            },
                            country_cn: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [18]
                                }],
                                name: ["行政区名", "中国国家名"]
                            },
                            country_global: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [19]
                                }],
                                name: ["行政区名", "世界国家名"]
                            },
                            capital_global: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [24, 35]
                                }],
                                name: ["行政区名", "境外首都名"]
                            },
                            state: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [1, 3, 4, 22, 26, 30, 32, 33, 34]
                                }],
                                name: ["行政区名", "省/直辖市/特别行政区名"]
                            },
                            "city:provincial_capital": {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [2, 31]
                                }],
                                name: ["行政区名", "省会名"]
                            },
                            "city:city": {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [5, 7, 25, 27]
                                }],
                                name: ["行政区名", "地级市名"]
                            },
                            "city:district": {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [6]
                                }],
                                name: ["行政区名", "县级市名"]
                            },
                            district: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [8, 37]
                                }],
                                name: ["行政区名", "区县名"]
                            },
                            town: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [9]
                                }],
                                name: ["行政区名", "乡镇名"]
                            },
                            village: {
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [17]
                                }],
                                name: ["行政区名", "村庄名"]
                            }
                        }
                    },
                    borders: {
                        subType: {
                            global: {
                                styleMap: [{
                                    mainkey: 20016,
                                    subkey: [3, 4, 8, 10, 11, 14]
                                }],
                                name: ["行政区边界", "外国国界/停火线/主张线"]
                            },
                            provincial: {
                                styleMap: [{
                                    mainkey: 20016,
                                    subkey: [5, 6, 7, 12]
                                }],
                                name: ["行政区边界", "省界线"]
                            }
                        }
                    },
                    buildings: {
                        subType: {
                            "default": {
                                styleMap: [{
                                    mainkey: 50001,
                                    subkey: [1, 2]
                                }],
                                name: ["楼块", "默认楼块"]
                            },
                            education: {
                                styleMap: [{
                                    mainkey: 50002,
                                    subkey: [1, 2, 3, 4]
                                }],
                                name: ["楼块", "高校教学"]
                            }
                        }
                    },
                    environment: {
                        subType: {
                            sky: {
                                styleMap: [{
                                    mainkey: "00001",
                                    subkey: [1]
                                }],
                                name: ["环境", "天空"]
                            },
                            atmosphere: {
                                styleMap: [{
                                    mainkey: "00001",
                                    subkey: [2]
                                }],
                                name: ["环境", "大气"]
                            }
                        }
                    },
                    bg: {
                        styleMap: [{
                            mainkey: "00001",
                            subkey: [3]
                        }]
                    }
                },
                uX: {
                    regions: {
                        name: "区域面",
                        subType: {
                            land: {
                                name: "陆地",
                                keyMap: ["regions#land"],
                                styleMap: [{
                                    mainkey: 30001,
                                    subkey: [1, 4, 5]
                                }]
                            },
                            green: {
                                name: "绿地",
                                keyMap: ["regions#green:greenspace", "regions#green:grass", "regions#green:woodland", "regions#green:mountain", "regions#green:golf"],
                                styleMap: [{
                                    mainkey: 30001,
                                    subkey: [3, 7, 8, 9, 10, 12]
                                }]
                            },
                            edu: {
                                name: "教育体育",
                                keyMap: ["regions#edu"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [3, 31]
                                }]
                            },
                            "public": {
                                name: "公共设施",
                                keyMap: ["regions#public"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [4, 12, 22, 32]
                                }]
                            },
                            traffic: {
                                name: "交通枢纽",
                                keyMap: ["regions#transporthub"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [6, 14, 40]
                                }, {
                                    mainkey: 30004,
                                    subkey: [6, 14, 40]
                                }]
                            },
                            scenicSpot: {
                                name: "景区",
                                keyMap: ["regions#scenicSpot"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [5, 33]
                                }]
                            },
                            culture: {
                                name: "文化",
                                keyMap: ["regions#culture"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [7, 35]
                                }]
                            },
                            health: {
                                name: "医疗卫生",
                                keyMap: ["regions#health"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [8, 36]
                                }]
                            },
                            sports: {
                                name: "运动场所",
                                keyMap: ["regions#sports"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [9, 10, 13, 19, 20, 21, 34, 37, 39]
                                }]
                            },
                            business: {
                                name: "商业场所",
                                keyMap: ["regions#business"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [11, 23, 24, 25, 26, 27, 28, 29, 30, 38]
                                }]
                            },
                            parkingLot: {
                                name: "停车场",
                                keyMap: ["regions#parkingLot"],
                                styleMap: [{
                                    mainkey: 30002,
                                    subkey: [1]
                                }]
                            },
                            subway: {
                                name: "地铁设施",
                                keyMap: ["regions#subway"],
                                styleMap: [{
                                    mainkey: 30003,
                                    allSubKey: !0
                                }]
                            }
                        }
                    },
                    water: {
                        name: "水系",
                        keyMap: ["regions#water:ocean", "regions#water:watersystem"],
                        styleMap: [{
                            mainkey: 30001,
                            subkey: [2, 6, 11, 13]
                        }, {
                            mainkey: 20014,
                            subkey: [1, 2]
                        }, {
                            mainkey: 10002,
                            subkey: [13, 38]
                        }]
                    },
                    buildings: {
                        name: "建筑物",
                        keyMap: ["buildings#default", "buildings#residence", "buildings#education", "buildings#life", "buildings#event", "buildings#landmark"],
                        styleMap: [{
                            mainkey: 50001,
                            subkey: [1, 2]
                        }, {
                            mainkey: 50002,
                            subkey: [1, 2, 3, 4]
                        }, {
                            mainkey: 50003,
                            subkey: [1]
                        }, {
                            mainkey: 50004,
                            subkey: [1]
                        }, {
                            mainkey: 30002,
                            subkey: [2, 15, 16, 17, 18]
                        }]
                    },
                    roads: {
                        name: "道路",
                        subType: {
                            highWay: {
                                name: "高速公路",
                                keyMap: ["roads#highWay:highway", "roads#highWay:highwayTunnel", "roads#highWay:highwayOthers"],
                                styleMap: [{
                                    mainkey: 20001,
                                    subkey: [1, 2, 3, 5, 6]
                                }]
                            },
                            ringRoad: {
                                name: "城市环线",
                                keyMap: ["roads#ringRoad:ringRoad", "roads#ringRoad:ringRoadTunnel", "roads#ringRoad:ringRoadOthers"],
                                styleMap: [{
                                    mainkey: 20002,
                                    subkey: [1, 2, 3]
                                }]
                            },
                            nationalRoad: {
                                name: "国道",
                                keyMap: ["roads#nationalRoad:nationalRoad", "roads#nationalRoad:nationalRoadTunnel", "roads#nationalRoad:nationalRoadOthers"],
                                styleMap: [{
                                    mainkey: 20003,
                                    subkey: [1, 2, 3, 5]
                                }]
                            },
                            provincialRoad: {
                                name: "省道",
                                keyMap: ["roads#provincialRoad:provincialRoad", "roads#provincialRoad:provincialRoadTunnel", "roads#provincialRoad:provincialRoadOthers"],
                                styleMap: [{
                                    mainkey: 20004,
                                    subkey: [1, 2, 3]
                                }]
                            },
                            secondaryRoad: {
                                name: "二级公路",
                                keyMap: ["roads#secondaryRoad"],
                                styleMap: [{
                                    mainkey: 20007,
                                    subkey: [1, 2, 3]
                                }]
                            },
                            levelThreeRoad: {
                                name: "三级公路",
                                keyMap: ["roads#levelThreeRoad"],
                                styleMap: [{
                                    mainkey: 20008,
                                    subkey: [1, 2, 4, 5]
                                }]
                            },
                            levelFourRoad: {
                                name: "四级道路",
                                keyMap: ["roads#levelFourRoad"],
                                styleMap: [{
                                    mainkey: 20009,
                                    subkey: [1, 2, 3, 5, 6, 7]
                                }]
                            },
                            roadsBeingBuilt: {
                                name: "在建道路",
                                keyMap: ["roads#roadsBeingBuilt"],
                                styleMap: [{
                                    mainkey: 20018,
                                    subkey: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
                                }]
                            },
                            railway: {
                                name: "铁路",
                                keyMap: ["roads#railway"],
                                styleMap: [{
                                    mainkey: 20010,
                                    subkey: [1]
                                }]
                            },
                            highSpeedRailway: {
                                name: "高铁",
                                keyMap: ["roads#highSpeedRailway"],
                                styleMap: [{
                                    mainkey: 20010,
                                    subkey: [2]
                                }]
                            },
                            subway: {
                                name: "地铁",
                                keyMap: ["roads#subway"],
                                styleMap: [{
                                    mainkey: 20015,
                                    allSubKey: !0,
                                    subkey0: [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47, 48, 50, 51, 52, 54, 55, 56, 57, 58, 59, 60, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 86, 87, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 131, 132, 133, 143]
                                }]
                            },
                            subwayBeingBuilt: {
                                name: "在建地铁",
                                keyMap: ["roads#subwayBeingBuilt"],
                                styleMap: [{
                                    mainkey: 20015,
                                    subkey: [1, 2]
                                }, {
                                    mainkey: 20019,
                                    subkey: [1]
                                }]
                            },
                            overPass: {
                                name: "天桥",
                                keyMap: ["roads#overPass"],
                                styleMap: [{
                                    mainkey: 20012,
                                    subkey: [1, 2, 3]
                                }]
                            },
                            underPass: {
                                name: "地道",
                                keyMap: ["roads#underPass"],
                                styleMap: [{
                                    mainkey: 20013,
                                    subkey: [1, 2, 3]
                                }]
                            },
                            other: {
                                name: "其他线条",
                                keyMap: ["roads#other"],
                                styleMap: [{
                                    mainkey: 20011,
                                    subkey: [1]
                                }, {
                                    mainkey: 20017,
                                    subkey: [1, 2, 3, 4, 8]
                                }, {
                                    mainkey: 20020,
                                    subkey: [1, 2, 3]
                                }, {
                                    mainkey: 20024,
                                    subkey: [1, 2]
                                }, {
                                    mainkey: 20028,
                                    subkey: [1]
                                }]
                            },
                            guideBoards: {
                                name: "道路路牌",
                                keyMap: ["roads#guideBoards"],
                                styleMap: [{
                                    mainkey: 40001,
                                    subkey: [2800, 110100, 110101, 110102, 110103, 110104, 110105]
                                }]
                            }
                        }
                    },
                    labels: {
                        name: "标注",
                        subType: {
                            pois: {
                                name: "兴趣点",
                                subType: {
                                    hotel: {
                                        name: "住宿",
                                        keyMap: ["labels#entertainment:hotel"],
                                        isDetailedType: !0,
                                        detailedCode: 0,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [9, 133, 134, 135, 136, 155, 156, 157, 158, 159, 160, 161, 162, 186]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [31, 32, 33, 34, 35, 36, 37, 38, 39, 164, 165]
                                        }]
                                    },
                                    restaurant: {
                                        name: "餐饮",
                                        keyMap: ["labels#repast:restaurant"],
                                        isDetailedType: !0,
                                        detailedCode: 1,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [19, 20, 21, 22, 114, 115, 116, 117, 118, 119, 183, 187]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [1, 2, 3, 4, 166, 167, 168, 179, 180, 181, 203, 205, 206, 215]
                                        }]
                                    },
                                    shop: {
                                        name: "购物",
                                        keyMap: ["labels#entertainment:mall"],
                                        isDetailedType: !0,
                                        detailedCode: 2,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [7, 8, 68, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [5, 6, 7, 8, 9, 10, 11, 12, 13, 175, 200, 201, 202, 204]
                                        }]
                                    },
                                    scenicSpot: {
                                        name: "风景名胜",
                                        keyMap: ["labels#repast:restaurant", "labels#scenic:park"],
                                        isDetailedType: !0,
                                        detailedCode: 3,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [4, 12, 14, 38, 69, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 120, 167, 171, 188, 189, 190, 191, 192]
                                        }, {
                                            mainkey: 10008,
                                            allSubKey: !0
                                        }, {
                                            mainkey: 10007,
                                            subkey: [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 187, 188, 190, 192, 193, 194, 195, 196, 198, 216, 217, 218, 219, 220, 221, 223, 224, 225]
                                        }]
                                    },
                                    traffic: {
                                        name: "交通设施",
                                        isDetailedType: !0,
                                        detailedCode: 4,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [23, 24, 25, 26, 31, 36, 148, 154, 168, 172, 175, 176, 177, 178]
                                        }, {
                                            mainkey: 10002,
                                            subkey: [11, 16]
                                        }, {
                                            mainkey: 10009,
                                            allSubKey: !0
                                        }]
                                    },
                                    bank: {
                                        name: "金融保险",
                                        isDetailedType: !0,
                                        detailedCode: 5,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [42, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 144, 145, 146, 147]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27]
                                        }]
                                    },
                                    edu: {
                                        name: "科教文化",
                                        isDetailedType: !0,
                                        detailedCode: 6,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [10, 11, 13, 35, 138, 139, 140, 141, 142, 143, 163, 164, 165, 166, 170]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [43, 44, 45, 46, 47, 176, 177]
                                        }]
                                    },
                                    live: {
                                        name: "生活服务",
                                        isDetailedType: !0,
                                        detailedCode: 7,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [58, 63, 64, 65, 66, 67, 121, 122, 123]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [28, 29, 30]
                                        }]
                                    },
                                    hospital: {
                                        name: "医疗保健",
                                        isDetailedType: !0,
                                        detailedCode: 8,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [32, 33, 57, 70, 131, 132, 169, 193, 206, 207, 208, 209, 210]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [170, 209]
                                        }]
                                    },
                                    pe: {
                                        name: "休闲体育",
                                        isDetailedType: !0,
                                        detailedCode: 9,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [15, 16, 17, 37, 60, 61, 62, 73, 124, 125, 126, 127, 128, 129, 130, 180, 181, 182, 184, 185, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 213, 214]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [169, 171, 172, 173, 174, 178, 197, 207]
                                        }]
                                    },
                                    "public": {
                                        name: "公共设施",
                                        isDetailedType: !0,
                                        detailedCode: 10,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [59, 173, 215]
                                        }]
                                    },
                                    buidling: {
                                        name: "商务住宅",
                                        isDetailedType: !0,
                                        detailedCode: 11,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [5, 6, 74, 75, 76, 77, 78, 79, 80, 81, 179]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [189, 191]
                                        }]
                                    },
                                    gov: {
                                        name: "政府机构及社会团体",
                                        isDetailedType: !0,
                                        detailedCode: 12,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [3, 34, 43, 137]
                                        }]
                                    },
                                    moto: {
                                        name: "摩托车服务",
                                        isDetailedType: !0,
                                        detailedCode: 13,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [113]
                                        }]
                                    },
                                    vehicle: {
                                        name: "汽车服务",
                                        isDetailedType: !0,
                                        detailedCode: 14,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [39, 40, 41, 71, 72, 151, 152, 153]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [40, 41, 42, 182, 183, 184, 185, 186]
                                        }]
                                    },
                                    pass: {
                                        name: "通行设施",
                                        isDetailedType: !0,
                                        detailedCode: 15,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [27, 28, 149, 150, 174]
                                        }, {
                                            mainkey: 10002,
                                            subkey: [21]
                                        }]
                                    },
                                    subway: {
                                        name: "地铁站",
                                        isDetailedType: !0,
                                        detailedCode: 16,
                                        styleMap: [{
                                            mainkey: 10005,
                                            subkey: [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49, 51, 53, 54, 55, 56, 57, 59, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 103, 104, 105]
                                        }, {
                                            mainkey: 10006,
                                            subkey: [1, 2]
                                        }]
                                    },
                                    roadFacilities: {
                                        name: "道路附属设施",
                                        isDetailedType: !0,
                                        detailedCode: 17,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [2, 29, 30]
                                        }, {
                                            mainkey: 10017,
                                            allSubKey: !0
                                        }]
                                    },
                                    address: {
                                        name: "地名",
                                        isDetailedType: !0,
                                        detailedCode: 18,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [18]
                                        }, {
                                            mainkey: 10002,
                                            subkey: [10, 12, 14, 15, 23, 36]
                                        }]
                                    },
                                    other: {
                                        name: "其他",
                                        isDetailedType: !0,
                                        detailedCode: 19,
                                        styleMap: [{
                                            mainkey: 10001,
                                            subkey: [1, 211, 212]
                                        }, {
                                            mainkey: 10002,
                                            subkey: [28]
                                        }, {
                                            mainkey: 10007,
                                            subkey: [208, 210, 211, 212, 213, 214]
                                        }, {
                                            mainkey: 10010
                                        }, {
                                            mainkey: 10011
                                        }, {
                                            mainkey: 10012
                                        }, {
                                            mainkey: 10013
                                        }, {
                                            mainkey: 10014
                                        }, {
                                            mainkey: 10015
                                        }, {
                                            mainkey: 10016,
                                            allSubKey: !0
                                        }]
                                    }
                                }
                            },
                            aois: {
                                name: "区域标注",
                                keyMap: ["labels#building:officebuilding", "labels#entertainment:mall", "labels#traffic:transporthub", "labels#medical:medicalcenter", "labels#casual:golf"],
                                styleMap: [{
                                    mainkey: 10004,
                                    allSubKey: !0,
                                    subkey: [1, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 15, 16, 17, 18, 21, 22, 23]
                                }]
                            },
                            continent: {
                                name: "大洲",
                                keyMap: ["districtsname#continent"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [20]
                                }]
                            },
                            country: {
                                name: "国家",
                                keyMap: ["districtsname#country_cn"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [18, 19, 29]
                                }]
                            },
                            province: {
                                name: "省/直辖市/自治区/特别行政区",
                                keyMap: ["districtsname#state"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [22, 26, 33]
                                }]
                            },
                            city: {
                                name: "城市",
                                keyMap: ["districtsname#city:provincial_capital", "districtsname#city:city"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [1, 2, 3, 4, 5, 7, 24, 25, 27, 30, 31, 32, 34, 35]
                                }]
                            },
                            district: {
                                name: "区县",
                                keyMap: ["districtsname#city:district"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [6, 8, 37]
                                }]
                            },
                            town: {
                                name: "乡镇",
                                keyMap: ["districtsname#town"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [9]
                                }]
                            },
                            village: {
                                name: "村庄",
                                keyMap: ["districtsname#village"],
                                styleMap: [{
                                    mainkey: 10002,
                                    subkey: [17]
                                }]
                            }
                        }
                    },
                    borders: {
                        name: "行政区边界",
                        subType: {
                            China: {
                                name: "中国国界",
                                keyMap: ["borders#China"],
                                styleMap: [{
                                    mainkey: 20016,
                                    subkey: [1, 2, 9]
                                }]
                            },
                            foreign: {
                                name: "外国国界/停火线/主张线",
                                keyMap: ["borders#global"],
                                styleMap: [{
                                    mainkey: 20016,
                                    subkey: [3, 4, 8, 10, 11, 14, 16]
                                }]
                            },
                            provincial: {
                                name: "省界线",
                                keyMap: ["borders#provincial"],
                                styleMap: [{
                                    mainkey: 20016,
                                    subkey: [5, 6, 7, 12]
                                }]
                            }
                        }
                    },
                    sky: {
                        name: "天空",
                        keyMap: ["environment#sky"],
                        styleMap: [{
                            mainkey: "00001",
                            subkey: [1]
                        }]
                    },
                    atmosphere: {
                        name: "大气",
                        keyMap: ["environment#atmosphere"],
                        styleMap: [{
                            mainkey: "00001",
                            subkey: [2]
                        }]
                    },
                    bg: {
                        name: "背景网格线",
                        keyMap: ["bg"],
                        styleMap: [{
                            mainkey: "00001",
                            subkey: [3]
                        }]
                    }
                }
            }
              , Wn = function(i, n) {
                U.Support[i] && Object.keys(n).forEach(function(t) {
                    U.Support[i][t] = n[t]
                })
            }
              , Nn = (Un.prototype.CZ = function(t) {
                if (!t || !t.styles)
                    return {
                        styles: [],
                        version: (null == t ? void 0 : t.version) || ""
                    };
                for (var i = t.styles, n = this.decodeStyleList(i), s = [], e = 0; e < n.length; e++) {
                    var r, h = n[e], o = {};
                    for (r in h)
                        h[r] !== undefined && null !== h[r] && ("object" != typeof h[r] || 0 < Object.keys(h[r]).length) && (o[r] = h[r]);
                    s.push(o)
                }
                return {
                    styles: s,
                    version: t.version
                }
            }
            ,
            Un.prototype.decodeStyleList = function(t) {
                var i = [];
                if (t && 0 !== t.length) {
                    var n = this.parseStyle(t[0]);
                    i.push(n);
                    for (var s = 1; s < t.length; s++) {
                        var e, r, h = t[s], o = this.parseStyle(h);
                        if (h.kyt) {
                            if (o = U.Ln(U.Ln({}, o), {
                                mainKey: n.mainKey,
                                subKey: n.subKey,
                                minZoom: n.maxZoom + 1,
                                maxZoom: n.maxZoom + 1
                            }),
                            n.poi && (o.poi || (o.poi = {}),
                            !o.fresh))
                                for (var a in n.poi)
                                    n.poi.hasOwnProperty(a) && (e = n.poi[a],
                                    (r = o.poi[a]) !== undefined && 0 !== r || (o.poi[a] = e));
                            if (n.road && (o.road || (o.road = {}),
                            !o.fresh))
                                for (var a in n.road)
                                    n.road.hasOwnProperty(a) && (e = n.road[a],
                                    (r = o.road[a]) !== undefined && 0 !== r || (o.road[a] = e));
                            if (n.region && (o.region || (o.region = {}),
                            !o.fresh))
                                for (var a in n.region)
                                    n.region.hasOwnProperty(a) && (e = n.region[a],
                                    (r = o.region[a]) !== undefined && 0 !== r || (o.region[a] = e));
                            if (n.guide && (o.guide || (o.guide = {}),
                            !o.fresh))
                                for (var a in n.guide)
                                    n.guide.hasOwnProperty(a) && (e = n.guide[a],
                                    (r = o.guide[a]) !== undefined && 0 !== r || (o.guide[a] = e));
                            if (n.building && (o.building || (o.building = {}),
                            !o.fresh))
                                for (var a in n.building)
                                    n.building.hasOwnProperty(a) && (e = n.building[a],
                                    (r = o.building[a]) !== undefined && 0 !== r || (o.building[a] = e))
                        } else {
                            h.mainKey || (o.mainKey = n.mainKey),
                            h.subKey !== undefined && 0 !== h.subKey || (o.subKey = n.subKey + 1),
                            h.minZoom !== undefined && 0 !== h.minZoom || (o.minZoom = n.minZoom),
                            h.maxZoom !== undefined && 0 !== h.maxZoom || (o.maxZoom = n.maxZoom);
                            for (var u = 0, f = ["poi", "road", "region", "guide", "building"]; u < f.length; u++) {
                                var c = f[u];
                                if (n[c] && !h.fresh)
                                    if (o[c]) {
                                        var l = U.Ln({}, n[c]);
                                        for (a in o[c])
                                            0 !== o[c][a] && "" !== o[c][a] && (l[a] = o[c][a]);
                                        o[c] = l
                                    } else
                                        o[c] = U.Ln({}, n[c])
                            }
                        }
                        i.push(o),
                        n = o
                    }
                }
                return i
            }
            ,
            Un.prototype.parseStyle = function(t) {
                for (var i = {}, n = (t.mainKey !== undefined && (i.mainKey = t.mainKey),
                t.subKey === undefined && 0 !== t.subKey || (i.subKey = t.subKey),
                t.minZoom !== undefined && (i.minZoom = t.minZoom),
                t.maxZoom !== undefined && (i.maxZoom = t.maxZoom),
                t.fresh !== undefined && (i.fresh = t.fresh),
                t.kyt !== undefined && (i.kyt = t.kyt),
                0), s = ["poi", "road", "region", "guide", "building"]; n < s.length; n++) {
                    var e = s[n];
                    t[e] && (i[e] = U.Ln({}, t[e]))
                }
                return i
            }
            ,
            Un);
            function Un() {}
            b.prototype.pn = function(t) {
                this.qe ? t(this.ON) : this.Ye.push(t)
            }
            ,
            b.prototype.dn = function(t, i, n) {
                return window && window.amapStyle_test && (window.amapStyle_test[t] || (window.amapStyle_test[t] = {}),
                window.amapStyle_test[t][i] = !0),
                this.vn.dn(t, i, n)
            }
            ,
            b.prototype.mn = function(t, i) {
                return this.vn.mn(t, i)
            }
            ,
            b.prototype.setStyle = function(t, i, n) {
                var s = t;
                this.vn.setStyle(s),
                t.layer && this.vn.EY(t.layer),
                this.vn.kF(t),
                n.gn.bn(s, function() {
                    n.emit("styleChanged")
                })
            }
            ,
            b.prototype.setStyleByPlat = function(t, i) {
                var n;
                U.Module.eS.BY && (n = this.xn(t),
                this.vn.setStyle(n),
                t.layer && this.vn.EY(t.layer),
                this.vn.kF(t),
                i.gn.bn(n, function() {
                    i.emit("styleChanged")
                }))
            }
            ,
            b.prototype.destroy = function() {
                this.vn && this.vn.destroy(),
                this.Ze = {},
                this.ON = ""
            }
            ,
            b.prototype.fn = function(t, i, n) {
                var s = this;
                Wn("amapRunTime", {
                    "style2.0-request": Date.now()
                }),
                this.Zyt() ? this._map.Ryt().then(function(t) {
                    t && s._map && s.Jyt(i, n)
                }) : this.Jyt(i, n)
            }
            ,
            b.prototype.Zyt = function() {
                var t = AMap.getConfig();
                return this.isEmpty(t.tileVersion) || this.isEmpty(t.styleVersion) || this.isEmpty(t.iconVersion)
            }
            ,
            b.prototype.Jyt = function(t, i) {
                var n;
                this._map && (n = this.Xyt(),
                this.Vyt(n, t, i))
            }
            ,
            b.prototype.Xyt = function() {
                var t = AMap.getConfig()
                  , i = t.styleVersion
                  , n = this.Hyt;
                // return "https://o4.amap.com/style/" + i + "/" + n.p + "/" + n.format + "/" + t.styleClass + "?key=" + t.key
                return './amap/jsapi/2.0.1'
            }
            ,
            b.prototype.qyt = function() {
                var t = AMap.getConfig()
                  , i = t.styleVersion
                  , n = this.Hyt
                  , s = n.p;
                return t.protocol + "://custyle.amap.com/web/rendering/vdata/getMergedStyleData?key=" + t.key + "&format=" + n.format + "&t=" + t.styleClass + "&v=" + i + "&p=" + s
            }
            ,
            b.prototype.Kyt = function(t, n) {
                var s = this;
                pi.Ajax(t, {
                    responseType: "arraybuffer"
                }, function(t, i) {
                    "complete" === t && null != i && i.data && (Wn("amapRunTime", {
                        "style2.0-loaded": Date.now()
                    }),
                    t = U.CZ(new Uint8Array(i.data)),
                    i = JSON.parse(t.N9t || "{}"),
                    t = s.zyt.CZ(t),
                    Wn("amapRunTime", {
                        "style2.0-jsonParse-End": Date.now()
                    }),
                    i && i.layer && (i = i.layer,
                    s.vn.EY(i)),
                    s.parseStyle(t),
                    Wn("amapRunTime", {
                        "style2.0-decoded": Date.now()
                    }),
                    n) && s.Ze && n(s.Ze)
                })
            }
            ,
            b.prototype.Vyt = function(t, n, s) {
                var i, e = this;
                n ? this.Qyt.includes(n) ? (i = this.qyt(),
                this.Kyt(i + "&styleid=" + n + "&publishtime=", s)) : (i = "https://jsapi.amap.com/web/map/sytles?styleId=" + n + "&key=" + AMap.getConfig().key,
                fetch(i).then(function(t) {
                    return t.json()
                }).then(function(t) {
                    var i;
                    t && (i = e.qyt(),
                    e.Kyt(i + "&styleid=" + n + "&publishtime=" + t.cus_style, s))
                })["catch"](function() {
                    e.Kyt(t, s)
                })) : this.Kyt(t, s)
            }
            ,
            b.prototype.isEmpty = function(t) {
                return !t.trim().length
            }
            ,
            b.prototype.w_ = function(t) {
                var i;
                return this.Ze && this.Ze[t] ? (i = [],
                Object.keys(this.Ze[t]).forEach(function(t) {
                    t = parseFloat(t),
                    i.push(t)
                }),
                i) : null
            }
            ,
            b.prototype.xn = function(t) {
                for (var i = {}, n = t.version && "2.0" === t.version ? t.mapStyle : t, s = t.version && "2.0" === t.version ? Fn.aX : Fn.uX, e = Object.keys(n), r = 0; r < e.length; r++) {
                    var h = e[r]
                      , o = n[h];
                    if (s[h]) {
                        var a = s[h];
                        if (a.styleMap) {
                            for (var u = a.styleMap, f = 0; f < u.length; f++)
                                if (i[A = u[f].mainkey] || (i[A] = {}),
                                u[f].subkey)
                                    for (var c = 0; c < u[f].subkey.length; c++) {
                                        var l = u[f].subkey[c]
                                          , d = U.yn(o);
                                        if (o.styles)
                                            for (var p = Object.keys(o.styles), v = 0; v < p.length; v++) {
                                                var m = p[v]
                                                  , y = o.styles[m].transitional
                                                  , b = o.styles[m].nodes;
                                                d.styles[m] = {
                                                    nodes: b,
                                                    transitional: y || undefined,
                                                    nodesObj: {}
                                                };
                                                for (var g = 0; g < b.length; g++) {
                                                    var M = b[g].zoom
                                                      , k = b[g].value;
                                                    d.styles[m].nodesObj[M] = k
                                                }
                                            }
                                        i[A][l] = d
                                    }
                        } else if (a.subType && o.subType)
                            for (var w = Object.keys(o.subType), f = 0; f < w.length; f++) {
                                var x = w[f];
                                if (a.subType[x] && a.subType[x].styleMap) {
                                    for (u = a.subType[x].styleMap,
                                    c = 0; c < u.length; c++)
                                        if (u[c].mainkey) {
                                            i[A = u[c].mainkey] || (i[A] = {});
                                            var A, z = u[c].subkey;
                                            if (z = (u[c].allSubKey ? this.w_(A) : z) || ["all"])
                                                for (var C = 0; C < z.length; C++) {
                                                    var l = z[C]
                                                      , T = o.subType[x];
                                                    if ((d = U.yn(T)).styles)
                                                        for (p = Object.keys(T.styles),
                                                        v = 0; v < p.length; v++)
                                                            for (m = p[v],
                                                            y = T.styles[m].transitional,
                                                            b = T.styles[m].nodes,
                                                            d.styles[m] = {
                                                                nodes: b,
                                                                nodesObj: {},
                                                                transitional: y || undefined
                                                            },
                                                            g = 0; g < b.length; g++)
                                                                M = b[g].zoom,
                                                                k = b[g].value,
                                                                d.styles[m].nodesObj[M] = k;
                                                    i[A][l] = d
                                                }
                                        }
                                } else if (a.subType[x] && a.subType[x].subType)
                                    for (var S = a.subType[x].subType, P = Object.keys(S), T = o.subType[x], d = U.yn(T), I = 0; I < P.length; I++) {
                                        var L = P[I];
                                        if (S[L].styleMap)
                                            for (var D = 0; D < S[L].styleMap.length; D++) {
                                                var O = S[L].styleMap[D];
                                                if (O.mainkey && O.subkey) {
                                                    i[O.mainkey] || (i[O.mainkey] = {});
                                                    for (var R = 0; R < O.subkey.length; R++) {
                                                        var B = O.subkey[R];
                                                        if (d.detailedType && d.detailedType[L]) {
                                                            var E = d.detailedType[L]
                                                              , j = U.yn(E);
                                                            if (E.styles)
                                                                for (p = Object.keys(E.styles),
                                                                v = 0; v < p.length; v++)
                                                                    for (m = p[v],
                                                                    b = E.styles[m].nodes,
                                                                    j.styles[m] = {
                                                                        nodes: b,
                                                                        nodesObj: {}
                                                                    },
                                                                    g = 0; g < b.length; g++)
                                                                        M = b[g].zoom,
                                                                        k = b[g].value,
                                                                        j.styles[m].nodesObj[M] = k;
                                                            i[O.mainkey][B] = j
                                                        } else
                                                            i[O.mainkey][B] = d
                                                    }
                                                }
                                            }
                                    }
                            }
                    }
                }
                return i
            }
            ,
            b.prototype.wn = function(t) {
                for (var i = 0, n = this.Ye.length; i < n; i += 1)
                    (0,
                    this.Ye[i])(t);
                this.Ye = []
            }
            ,
            b.prototype.parseStyle = function(t) {
                this.Ze = this.vn.parseStyle(t),
                Wn("amapRunTime", {
                    "style2.0-format-End": Date.now()
                }),
                this.vn.jY(this.Ze),
                this.Ze._bgColor = U._n.create("fcf9f2"),
                this.Ze.iconGridSize = 24,
                this.qe = !0,
                this.ON = JSON.stringify(this.Ze),
                this.wn(this.ON)
            }
            ;
            var Gn = b;
            function b(t) {
                this._map = t,
                this.vz = null,
                this.qe = !1,
                this.Ne = U.Support.$e && !U.Support.Ue,
                this.Ze = {},
                this.Ye = [],
                this.Ve = null,
                this.Dpt = !1,
                this.Hyt = {
                    p: "v1",
                    format: "pbf"
                },
                this.Qyt = ["blue", "dark", "darkblue", "fresh", "graffiti", "grey", "light", "macaron", "midnight", "normal", "twilight", "whitesmoke", "wine"],
                this.vn = new U.StyleParser("fast" === t.bZ.MZ.drawMode),
                this.zyt = new Nn,
                this.fn(t.kmt, t.Byt)
            }
            _n = U.vG,
            U.Ei(Zn, _n),
            Zn.prototype.getData = function(t, i) {
                for (var n = this, s = [], e = 0, r = t; e < r.length; e++) {
                    for (var h = r[e], o = [], a = 0; a < h.length; a++) {
                        var u = h.charCodeAt(a);
                        o.push(u)
                    }
                    var f = o.join("|");
                    s.push(f)
                }
                var c = this.Zu(s)
                  , l = this._map.gn;
                switch (c.status) {
                case U.qu.AllLoaded:
                    i();
                    break;
                case U.qu.AllUnLoaded:
                    var d = this.Yu(i);
                    l && l.getSDFData(c.Vu, function(t, i) {
                        n.Xu[d] = i = void 0 === i ? {} : i,
                        n.Hu()
                    });
                    break;
                case U.qu.SomeLoading:
                    var p = this.Yu(i);
                    l && l.getSDFData(c.Vu, function(t, i) {
                        n.Xu[p] = i = void 0 === i ? {} : i,
                        n.Hu()
                    });
                    break;
                case U.qu.AllLoading:
                    var v = this.Yu(i);
                    this.Xu[v] = [],
                    this.Hu()
                }
            }
            ,
            Zn.prototype.Ju = function(t) {
                for (var i = {}, n = 0, s = t; n < s.length; n++) {
                    var e = s[n]
                      , r = e.range
                      , h = e.pos
                      , o = this.info;
                    o[r],
                    o[r] = {
                        info: ((o = {})[r] = e.info,
                        o),
                        pos: h
                    },
                    this.range.push(r),
                    i[r] = 1
                }
                return i
            }
            ,
            Zn.prototype.mz = function(t, i) {
                var n = this.info || [];
                return !(i = void 0 === i ? !1 : i) && n.hasOwnProperty(t) && (i = n[t]).pos && i.info[t] ? {
                    key: t,
                    index: U.cY.dynamic,
                    "char": i.info[t],
                    pos: i.pos
                } : null
            }
            ,
            Zn.prototype.measureText = function(t, i) {
                for (var n = U.PY, s = U.tc.ic, e = 0, r = this.info, h = i / this._size, o = this.nc, a = 0, u = t; a < u.length; a++) {
                    var f = u[a]
                      , c = void 0
                      , l = f;
                    (c = 13312 <= l && l <= 40959 ? n : o[l]) || r.hasOwnProperty(l) && (l = r[l].info[l]) && (this.nc[f] = c = l[4]),
                    e += (c + s) * h
                }
                return e
            }
            ,
            Zn.prototype.destroy = function() {
                this.range = [],
                this.info = {},
                this.sc = [],
                this.Xu && (this.Xu = {}),
                this._c = [],
                this.nc = {},
                this.xc = [],
                this.bc = {},
                this.Xu = {}
            }
            ,
            Zn.prototype._bindEvents = function() {
                this.dG.on("loadWordsByFront", this.pG.bind(this))
            }
            ,
            Zn.prototype.fc = function() {
                var t = U.tc.pc
                  , i = t[this.dc];
                return this.dc = (this.dc + 1) % t.length,
                i
            }
            ,
            Zn.prototype.vc = function(t) {
                void 0 === t && (t = {});
                var i = (t = (Object.keys(t) || []).sort(function(t, i) {
                    return t - i
                })).length;
                return 2 <= i ? t[0] + "-" + t[i - 1] : 1 === i ? t[0] : ""
            }
            ,
            Zn.prototype.mc = function() {}
            ,
            Zn.prototype.Yu = function(t, i) {
                void 0 === i && (i = {});
                var n = this.yc += 1;
                return this.xc.push(n),
                this.bc && (this.bc[n] = t,
                this.bc[n] = {
                    cb: t,
                    params: i
                }),
                n
            }
            ,
            Zn.prototype.Hu = function() {
                var t, i, n = this.xc[0];
                n && (t = this.Xu[n]) && (this.xc.shift(),
                (i = this.bc[n]) ? i.cb(t) : console.error("sdf task error"),
                delete this.Xu[n],
                delete this.bc[n],
                this.Hu())
            }
            ,
            Zn.prototype.gc = function(t) {
                for (var i = this.range || [], n = this.info || {}, s = parseInt(t, 10), e = 0, r = i; e < r.length; e++) {
                    var h = r[e];
                    if (h.indexOf("-") < 0) {
                        if (s === +h && (n[h] && n[h].info || {})[t])
                            return !0
                    } else {
                        var o = h.split("-")
                          , a = parseInt(o[0] || "", 10)
                          , o = parseInt(o[1] || "", 10);
                        if (a <= s && s <= o && (n[h] && n[h].info || {})[t])
                            return !0
                    }
                }
                return !1
            }
            ,
            Zn.prototype.pG = function(t) {
                var i = this
                  , n = t.mG
                  , s = t.cb
                  , t = this._map.bZ.MZ.lY.add("LangSDF", n);
                this._map.bZ.MZ.yY.setNeedUpdate(!0),
                this._map.bZ.MZ.lY.on("task:" + t, function(t) {
                    t = i._map.bZ.MZ.lY.add("SDFCombine", t.data),
                    i._map.bZ.MZ.yY.setNeedUpdate(!0),
                    i._map.bZ.MZ.lY.on("task:" + t, function(t) {
                        i.Ju(t.data),
                        s(t.data)
                    }, i, !0)
                }, this, !0)
            }
            ,
            Zn.prototype._G = function(t) {
                for (var i = "", n = 0, s = t.split("|"); n < s.length; n++) {
                    var e = s[n];
                    i += String.fromCharCode(parseInt(e, 10))
                }
                return i
            }
            ,
            Zn.prototype.wc = function(t) {
                return -1 !== this._c.indexOf(t)
            }
            ,
            Zn.prototype.Zu = function(t) {
                for (var i = [], n = (this.range,
                0), s = 0, e = 0, r = t; e < r.length; e++) {
                    var h = r[e];
                    this.gc(h) || (this.wc(h) ? s += 1 : (n += 1,
                    i.push(h)))
                }
                return 0 === s && 0 === n ? {
                    status: U.qu.AllLoaded,
                    Vu: i
                } : 0 < n && 0 === s ? {
                    status: U.qu.AllUnLoaded,
                    Vu: i
                } : 0 === n && 0 < s ? {
                    status: U.qu.AllLoading,
                    Vu: i
                } : {
                    status: U.qu.SomeLoading,
                    Vu: i
                }
            }
            ;
            var _n, Yn = Zn;
            function Zn(t, i) {
                var n = _n.call(this) || this;
                return n._map = i,
                n.CLASS_NAME = "SDFManager",
                n.range = [],
                n.info = {},
                n.sc = [],
                n.dc = 0,
                n._c = [],
                n._size = 24,
                n.nc = {},
                n.xc = [],
                n.bc = {},
                n.Xu = {},
                n.yc = 1,
                n.ac = t,
                n.yG = new U.bG({
                    Fyt: i && i.options
                }),
                n.dG = n._map.gn,
                n._bindEvents(),
                n
            }
            Jn.prototype.play = function(t) {
                for (var i = t, n = Date.now(), s = this.result; 0 < i && this.offset < this.mG.length; ) {
                    var e = this.mG[this.offset]
                      , r = {}
                      , h = this._G(e)
                      , o = U.bG.gG(e)
                      , h = (o = this.lang.D$(o).Ce(h)).bitmap
                      , o = o.info;
                    r.range = e,
                    r.info = o,
                    r.data = h,
                    s.push(r),
                    this.offset++,
                    i = t - (Date.now() - n)
                }
                return this.result
            }
            ,
            Jn.prototype._G = function(t) {
                for (var i = "", n = 0, s = t.split("|"); n < s.length; n++) {
                    var e = s[n];
                    i += String.fromCharCode(parseInt(e, 10))
                }
                return i
            }
            ,
            Object.defineProperty(Jn.prototype, "status", {
                get: function() {
                    return this.offset >= this.mG.length ? U.vY.finish : U.vY.pause
                },
                eb: !1,
                nb: !0
            });
            var Xn = Jn;
            function Jn(t, i) {
                this.lang = t,
                this.mG = i,
                this.type = "LangSDFTask",
                this.offset = 0,
                this.result = []
            }
            Hn.prototype.loadImage = function(t, i, n) {
                var s = i.name
                  , e = i.cb
                  , r = this.Fs[s = s || t];
                r && r.status === U.uc.LOADED ? e(r, i) : r && r.status === U.uc.LOADING ? (this.Mc[s] || (this.Mc[s] = []),
                this.Mc[s].push({
                    cb: e,
                    opts: i
                })) : t ? this.Rc(t, i, n) : e(null, i)
            }
            ,
            Hn.prototype.TZ = function(t, i) {
                this.Rc(t.data, {
                    name: t.hash,
                    cb: i
                })
            }
            ,
            Hn.prototype.loadImages = function(t, i, n) {
                var s = t.length
                  , e = i.cb
                  , r = 0;
                if (t.length) {
                    i.cb = function() {
                        (r += 1) === s && e()
                    }
                    ;
                    for (var h = 0, o = t; h < o.length; h++)
                        this.loadImage(o[h], i, n)
                } else
                    e()
            }
            ,
            Hn.prototype.imageLoaded = function(t, i) {
                var n = i.data
                  , i = i.cb
                  , s = this.zc[i];
                s && (s(n),
                delete this.zc[i])
            }
            ,
            Hn.prototype.addImageData = function(t, i) {
                i.img ? this.Fs[t] && this.Fs[t].src === i.img.src || (this.Fs[t] = i) : this.Fs[t] || (this.Fs[t] = i)
            }
            ,
            Hn.prototype.getImage = function(t) {
                return this.Fs[t = void 0 === t ? "" : t] || {}
            }
            ,
            Hn.prototype.destory = function() {
                this.Fs = {},
                this.Mc && (this.Mc = {}),
                this.zc && (this.zc = {})
            }
            ,
            Hn.prototype.Rc = function(t, e, i) {
                var r = this
                  , n = e.name
                  , h = e.ext
                  , s = e.type
                  , o = void 0 === s ? "other" : s
                  , a = e.cb
                  , u = this.Fs
                  , f = new Image
                  , c = n || t;
                u[c] = {
                    type: o,
                    img: f,
                    ext: h,
                    width: f.width,
                    height: f.height,
                    status: U.uc.LOADING
                },
                f.crossOrigin = "anonymous",
                f.onload = function() {
                    if (e.imageBitmap)
                        createImageBitmap(f).then(function(t) {
                            if (u[c] = {
                                type: o,
                                img: t,
                                ext: h,
                                width: t.width,
                                height: t.height,
                                status: U.uc.LOADED
                            },
                            a(u[c], e),
                            r.Mc[c])
                                for (var i = 0, n = r.Mc[c]; i < n.length; i++) {
                                    var s = n[i];
                                    s.cb(u[c], s.opts)
                                }
                            f.onload = null,
                            f.onerror = null
                        });
                    else {
                        if (u[c] = {
                            type: o,
                            img: f,
                            ext: h,
                            width: f.width,
                            height: f.height,
                            status: U.uc.LOADED
                        },
                        a(u[c], e),
                        r.Mc[c])
                            for (var t = 0, i = r.Mc[c]; t < i.length; t++) {
                                var n = i[t];
                                n.cb(u[c], n.opts)
                            }
                        f.onload = null,
                        f.onerror = null
                    }
                }
                ,
                f.onerror = function() {
                    a(null, e),
                    f.onload = null,
                    f.onerror = null
                }
                ,
                t = U.G8t.getImgUrl(t, i),
                f.src = t
            }
            ,
            Hn.prototype.Sc = function(t) {
                var i, n = (n = (t = void 0 === t ? {} : t).img) && n.context ? (i = n.width || 0,
                n.height || 0) : (i = t.width || 0,
                t.height || 0);
                return [i, n]
            }
            ;
            var Vn = Hn;
            function Hn() {
                this.Fs = {},
                this.Cc = 16,
                this.zc = {},
                this.Mc = {}
            }
            var qn, Kn = 0;
            function Qn(t) {
                var i = qn.call(this, t = void 0 === t ? {} : t) || this;
                return i.CLASS_NAME = "AMap.VectorLayer",
                i.zF = "AMap.VectorLayer" + Kn++,
                i.pC = !1,
                i.Qh = t.zIndex || 110,
                i
            }
            qn = s,
            U.Ei(Qn, qn),
            Qn.prototype.add = function(t) {
                for (var i = 0, n = t = Array.isArray(t) ? t : [t]; i < n.length; i++) {
                    var s = n[i];
                    this.source.add(s)
                }
            }
            ,
            Qn.prototype.remove = function(t) {
                for (var i = 0, n = t = Array.isArray(t) ? t : [t]; i < n.length; i++) {
                    var s = n[i];
                    this.source.remove(s)
                }
            }
            ,
            Qn.prototype.getSourceConfig = function() {
                return {
                    id: this.zF,
                    type: "overlay",
                    url: ""
                }
            }
            ,
            Qn.prototype.co = function() {
                return this.zF
            }
            ,
            Qn.prototype.getState = function() {
                return {
                    visible: this.il,
                    opacity: 1,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            Qn.prototype.vi = function(t) {
                var i = this.source;
                if (i)
                    return i.rr(t) || null
            }
            ,
            Qn.prototype.getAllOverlays = function(i) {
                return this.source.getAllOverlays().filter(function(t) {
                    return !i || -1 < t.className.toLocaleLowerCase().indexOf(i)
                })
            }
            ,
            Qn.prototype.destroy = function() {
                this.source && this.source.destroy && this.source.destroy(),
                this._container && delete this._container
            }
            ,
            $n = Qn,
            U.Ei(is, $n),
            is.prototype.has = function(t) {
                return !!this.source && -1 < this.source.getAllOverlays().indexOf(t)
            }
            ,
            is.prototype.clear = function() {
                var t;
                this.source && (t = this.source.getAllOverlays(),
                this.remove(t.slice(0)))
            }
            ,
            is.prototype.setOptions = function(t) {
                if (this.source)
                    for (var i = 0, n = this.source.getAllOverlays(); i < n.length; i++)
                        n[i].setOptions(t)
            }
            ,
            is.prototype.query = function(t) {
                if (this.source)
                    return this.source.rr({
                        lnglat: t
                    })
            }
            ,
            is.prototype.getBounds = function() {
                if (this.source) {
                    var t = this.getAllOverlays();
                    if (0 < t.length) {
                        for (var i, n = void 0, s = 0; s < t.length; s++)
                            n ? (i = t[s].getBounds()) && n.union(i) : n = (n = t[s].getBounds()) && n.clone();
                        return n
                    }
                }
            }
            ;
            var $n, ts = is;
            function is() {
                return null !== $n && $n.apply(this, arguments) || this
            }
            ss.prototype.va = function(n, s) {
                var e = this
                  , t = (AMap.getConfig().vdataProxy && (n.url = AMap.getConfig().vdataProxy + "/" + n.url.split("/")[3] + "/" + n.url.split("/")[4]),
                {
                    key: AMap.getConfig().key,
                    flds: n.hH,
                    t: n.ya.join(";"),
                    oversea: n.showOversea ? 1 : 0,
                    tileVersion: AMap.getConfig().tileVersion,
                    tileCombo: AMap.getConfig().tileCombo,
                    languageCode: n.languageCode
                })
                  , r = U.G8t.getTileUrl(t)
                  , h = (window.amap_sdk_log && window.amap_sdk_log("data-request:" + r + "-" + Date.now()),
                U.Support.amapRunTime && !U.Support.amapRunTime.workerTime["data-request"] && (U.Support.amapRunTime.workerTime["data-request"] = Date.now()),
                U.Support.amapRunTime && (U.Support.amapRunTime.dataTime["data-request:" + r] = Date.now()),
                new U.vH)
                  , t = pi.Ajax(r, {
                    responseType: "arraybuffer",
                    type: t.tileCombo ? "POST" : "GET"
                }, function(t, i) {
                    window.amap_sdk_log && window.amap_sdk_log("data-loaded:" + r + "-" + Date.now()),
                    U.Support.amapRunTime && !U.Support.amapRunTime.workerTime["data-loaded"] && (U.Support.amapRunTime.workerTime["data-loaded"] = Date.now()),
                    U.Support.amapRunTime && (U.Support.amapRunTime.dataTime["data-loaded:" + r] = Date.now()),
                    "complete" === t && (n.buffer = i.data,
                    t = e.parent.jD().send("decodeNebulaSourceTile", n, function(t, i) {
                        t && e.parent._map.emit("TileDecodeError", {
                            type: "nebula",
                            err: t
                        }),
                        i && i.nebulaDatas && (U.Support.amapRunTime && (U.Support.amapRunTime.dataTime["data-decoded:" + r] = Date.now()),
                        U.Support.amapRunTime && !U.Support.amapRunTime.workerTime["data-decode-begin"] && (U.Support.amapRunTime.workerTime["data-decode-begin"] = i.amapRunTime["data-decode-begin"]),
                        U.Support.amapRunTime && !U.Support.amapRunTime.workerTime["data-decode-end"] && (U.Support.amapRunTime.workerTime["data-decode-end"] = i.amapRunTime["data-decode-end"]),
                        U.Support.amapRunTime && !U.Support.amapRunTime.workerTime["style-parse-begin"] && (U.Support.amapRunTime.workerTime["style-parse-begin"] = i.amapRunTime["style-parse-begin"]),
                        U.Support.amapRunTime && !U.Support.amapRunTime.workerTime["style-parse-end"] && (U.Support.amapRunTime.workerTime["style-parse-end"] = i.amapRunTime["data-decode-end"]),
                        s(i.nebulaDatas))
                    }),
                    h._H(t))
                }, t);
                return h._H({
                    cancel: t.abort.bind(t)
                }),
                h
            }
            ,
            ss.prototype.RD = function(n, s) {
                var e = this
                  , t = {
                    key: AMap.getConfig().key,
                    flds: "transit,road,region,poi",
                    t: n.ya.join(";"),
                    oversea: n.showOversea ? 1 : 0,
                    tileVersion: AMap.getConfig().tileVersion,
                    tileCombo: AMap.getConfig().tileCombo,
                    languageCode: n.languageCode
                }
                  , i = U.G8t.getTileUrl(t)
                  , r = new U.vH
                  , i = pi.Ajax(i, {
                    responseType: "arraybuffer",
                    type: "POST"
                }, function(t, i) {
                    "complete" === t && (n.buffer = i.data,
                    t = e.parent.Uh.send("decodeNebulaSourceTileSdf", n, function(t, i) {
                        s(t, i)
                    }),
                    r._H(t))
                }, t);
                return r._H({
                    cancel: i.abort.bind(i)
                }),
                r
            }
            ;
            var ns = ss;
            function ss(t) {
                this.parent = t
            }
            var es, rs = !1, hs = (es = U.Event,
            U.Ei(g, es),
            g.prototype.va = function(t, n, i) {
                var s, e = this, r = this.jD();
                return U.Support.LZ && r.UD ? (window.amap_sdk_log && (s = t.url + "t=" + t.ya.join(";"),
                window.amap_sdk_log("loadNebulaTile" + s + "-" + Date.now())),
                AMap.getConfig().vdataProxy && (t.url = AMap.getConfig().vdataProxy + "/" + t.url.split("/")[3] + "/" + t.url.split("/")[4]),
                r.send("loadNebulaSourceTile", t, function(t, i) {
                    t && e._map.emit("TileDecodeError", {
                        type: "nebula",
                        err: t
                    }),
                    i && i.nebulaDatas && (U.Support.amapRunTime && (U.Support.amapRunTime.workerTime = i.amapRunTime),
                    n(i.nebulaDatas))
                })) : this.DZ.va(t, n)
            }
            ,
            g.prototype.RD = function(t, i) {
                AMap.getConfig().vdataProxy && (t.url = AMap.getConfig().vdataProxy + "/" + t.url.split("/")[3] + "/" + t.url.split("/")[4]);
                var n = this.Uh;
                return !U.Support.LZ || !n.UD && U.Support.o6t ? this.DZ.RD(t, i) : n.send("loadNebulaSourceTileSdf", t, i)
            }
            ,
            g.prototype.loadDistrictSourceTile = function(t, i, n) {
                t.request = this.Uh.send("loadDistrictSourceTile", i, function(t, i) {
                    i && n(i)
                })
            }
            ,
            g.prototype.gX = function(t, i, n) {
                t.request = this.Uh.send("loadMapboxVTSourceTile", i, function(t, i) {
                    i && n(i)
                })
            }
            ,
            g.prototype.kX = function(t, i, n, s) {
                t.request = this.Uh.send("reBufferMapboxVTSource", {
                    MX: i,
                    styles: n
                }, function(t, i) {
                    i && s(i)
                })
            }
            ,
            g.prototype.aG = function(t, i, n) {
                var s = this;
                t.request = this.Uh.send("loadMapboxSourceTile", i, function(t, i) {
                    t && s._map.emit("TileDecodeError", {
                        type: "mapbox",
                        err: t
                    }),
                    i && n(i)
                })
            }
            ,
            g.prototype._C = function(t) {
                this.Uh.send("processLabels", {
                    id: t
                })
            }
            ,
            g.prototype.deleteTileStaticSDF = function(t) {
                this.Uh.send("deleteTileStaticSDF", t)
            }
            ,
            g.prototype.Ha = function(i) {
                this.Uh.send("updateParams", i),
                U.forEach(this.ED, function(t) {
                    t.send("updateParams", i)
                })
            }
            ,
            g.prototype.Ka = function(i) {
                this.Uh.send("updateMapStyle", i),
                U.forEach(this.ED, function(t) {
                    t.send("updateMapStyle", i)
                })
            }
            ,
            g.prototype.bn = function(t, i) {
                this.Uh.send("updateUserStyle", {
                    Kd: t
                }, i)
            }
            ,
            g.prototype.Ja = function(i) {
                this.Uh.send("sendHttp", {
                    protocol: i
                }),
                U.forEach(this.ED, function(t) {
                    t.send("sendHttp", {
                        protocol: i
                    })
                })
            }
            ,
            g.prototype.innerLabelsLoadData = function(t, i) {
                this.Uh.send("innerLabelsLoadData", t, i)
            }
            ,
            g.prototype.dynamicTextSDFInfoLoaded = function(t, i) {
                this.emit("dynamicTextSDFInfoLoaded", {
                    data: i
                })
            }
            ,
            g.prototype.dynamicTextVerticeLoaded = function(t, i) {
                this.emit("dynamicTextVerticeLoaded", i)
            }
            ,
            g.prototype.dynamicTextVerticeLoadedByTile = function(t, i) {
                this.emit("dynamicTextVerticeLoadedByTile", i)
            }
            ,
            g.prototype.iconImageLoaded = function(t, i) {
                this.emit("iconImageLoaded", i)
            }
            ,
            g.prototype.getSDFData = function(t, i) {
                this.Uh.send("getSDFData", t, function(t) {
                    i && i(t)
                })
            }
            ,
            g.prototype.loadWordsByFront = function(t, i, n) {
                this.emit("loadWordsByFront", {
                    mG: i,
                    cb: n
                })
            }
            ,
            g.prototype.QB = function(t, i) {
                this.jD().send("setPathWebgl", t, i)
            }
            ,
            g.prototype.JB = function(t, i) {
                this.jD().send("sendIndoorRequest", t, i)
            }
            ,
            g.prototype.destroy = function() {
                this.jD().send("destroy", "destroy"),
                this.Wh && this.Wh.terminate();
                for (var t = 0, i = this.HD; t < i.length; t++) {
                    var n = i[t];
                    n && n.terminate()
                }
                this.DZ && delete this.DZ,
                this.Wh && delete this.Wh
            }
            ,
            g.prototype.request = function(t, n, s) {
                window.amap_sdk_log && window.amap_sdk_log("data-request:" + n + "-" + Date.now());
                var e = new XMLHttpRequest;
                return e.onreadystatechange = function() {
                    var t, i;
                    4 === e.readyState && 200 === e.status && (window.amap_sdk_log && window.amap_sdk_log("data-loaded:" + n + "-" + Date.now()),
                    t = e.getResponseHeader("content-type"),
                    i = e.response,
                    "application/x-protobuf" === t ? s(null, i) : rs || (rs = !0,
                    console.log("<AMap JSAPI> KEY异常。")))
                }
                ,
                e.onerror = function(t) {
                    s("error")
                }
                ,
                e.open("GET", n, !0),
                e.responseType = "arraybuffer",
                e.send(),
                {
                    cancel: function() {
                        e.abort()
                    }
                }
            }
            ,
            g.prototype.requestPost = function(t, i, n) {
                window.amap_sdk_log && window.amap_sdk_log("data-requestPost: " + i.url + " - " + Date.now());
                var s = new XMLHttpRequest
                  , e = (s.open(i.method, i.url, !0),
                s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                s.onreadystatechange = function() {
                    var t;
                    4 === s.readyState && 200 === s.status && (t = "application/x-protobuf" === s.getResponseHeader("content-type") ? s.response : s.responseText,
                    n(null, t))
                }
                ,
                {});
                return e.content = i.body,
                s.responseType = "arraybuffer",
                s.send(e.content),
                s.onerror = function(t) {
                    n(null, "error")
                }
                ,
                {
                    cancel: function() {
                        s.abort()
                    }
                }
            }
            ,
            g.prototype.jD = function() {
                var t = this.GD % this.ND;
                return this.GD = 1 + t,
                this.ED[t]
            }
            ,
            g.prototype.updateDataVersion = function(t, i) {
                this.emit("updateDataVersion", {
                    version: i
                })
            }
            ,
            g.prototype.tv = function() {
                var t = this;
                this._map.on("movestart", function() {
                    t.iv = !0,
                    t.ev()
                }),
                this._map.on("moveend", function() {
                    t.iv = !1,
                    t.ev()
                }),
                this._map.on("dragstart", function() {
                    t._dragging = !0,
                    t.ev()
                }),
                this._map.on("dragend", function() {
                    t._dragging = !1,
                    t.ev()
                }),
                this._map.on("zoomstart", function() {
                    t.lt = !0,
                    t.ev()
                }),
                this._map.on("zoomend", function() {
                    t.lt = !1,
                    t.ev()
                })
            }
            ,
            g.prototype.ev = function() {
                var i = !1;
                (this._dragging || this.lt || this.iv) && (i = !0),
                this.nv !== i && (this.Uh.send("setMainThreadBusy", i),
                U.forEach(this.ED, function(t) {
                    t.send("setMainThreadBusy", i)
                })),
                this.nv = i
            }
            ,
            g.prototype.WD = function() {
                for (var t = 0; t < this.ND; t++)
                    if (!this.ED[t].UD)
                        return !1;
                return !0
            }
            ,
            g);
            function g(t) {
                var i = es.call(this) || this;
                if (i._map = t,
                i.dE = !1,
                i._dragging = !1,
                i.lt = !1,
                i.nv = !1,
                i.iv = !1,
                i.GD = 0,
                i.ND = 1,
                i.HD = [],
                i.ED = [],
                i.VD = [],
                i.ZD = [],
                i.YD = 0,
                i.DZ = new ns(i),
                i.pE = function() {
                    window.amap_sdk_log && window.amap_sdk_log("initWorker:" + Date.now()),
                    i.YD += 1,
                    i.YD === i.ED.length + 1 && (i.dE = !0,
                    i._map.setNeedUpdate(!0))
                }
                ,
                window._PreLoadedWorker) {
                    var n = window._PreLoadedWorker
                      , s = new U.Bh(n,i,"AMap.nebula");
                    i.HD.push(n),
                    i.ED.push(s),
                    s.UD = !0,
                    i.pE()
                } else {
                    for (var e = 0; e < i.ND; e++)
                        n = new Worker(AMap.getConfig().workerUrl),
                        s = new U.Bh(n,i,"AMap.nebula"),
                        i.HD.push(n),
                        i.ED.push(s);
                    for (var r = 0, h = i.ED; r < h.length; r++)
                        !function(t) {
                            t.send("initCryptWorker", !0, function() {
                                t.UD = !0,
                                i.pE()
                            })
                        }(s = h[r])
                }
                return i.Wh = new Worker(AMap.getConfig().workerUrl),
                t.mapStyle.pn(function(t) {
                    i.emit("styleChanged"),
                    i._map && i._map.gn && (i.Ka({
                        value: t,
                        TY: "fast" === i._map.bZ.MZ.drawMode
                    }),
                    i.Wh.postMessage({
                        iconClass: AMap.getConfig().iconClass,
                        iconVersion: AMap.getConfig().iconVersion
                    }))
                }),
                i.Uh = new U.Bh(i.Wh,i,"AMap.SDF"),
                i.Uh.send("initCryptWorker", !0, function() {
                    i.Uh.UD = !0,
                    i.pE()
                }),
                i.tv(),
                i
            }
            as.prototype.ov = function(t) {
                var i = t.gl;
                if (this.buffer || (this.buffer = new U.yp(t,new Uint16Array(0),8)),
                this.texture || (this.texture = t.createTexture({
                    height: 1024,
                    width: 1024,
                    data: null
                }, {
                    Yi: !0
                }),
                this.texture.bind(i.CLAMP_TO_EDGE, i.NEAREST, i.LINEAR)),
                this.av || (this.av = t.createFramebuffer(1024, 1024)),
                !this.Pc) {
                    for (var n = new Uint16Array(192), s = 0; s < 32; s++) {
                        var e = 6 * s
                          , r = 4 * s;
                        n[e] = r,
                        n[1 + e] = 1 + r,
                        n[2 + e] = 2 + r,
                        n[3 + e] = r,
                        n[4 + e] = 2 + r,
                        n[5 + e] = 3 + r
                    }
                    this.Pc = t.ve(n)
                }
            }
            ,
            as.prototype.sv = function(t) {
                for (var i = 0, n = t; i < n.length; i++) {
                    var s = n[i];
                    this.rv[s.iconIndex] = s.name,
                    this.images[s.name] = s.img,
                    this.lv.push(s.name),
                    this.jG[s.name] = {
                        width: s.width,
                        height: s.height
                    }
                }
            }
            ,
            as.prototype.update = function(t) {
                this.ov(t.context),
                this.uv(t, this.lv),
                this.lv = []
            }
            ,
            as.prototype.uv = function(t, i) {
                if (0 !== i.length) {
                    for (var n = t.context, s = n.gl, e = 0, r = i; e < r.length; e++) {
                        var h, o = r[e];
                        this.De[o] || ((h = n.createTexture(this.images[o], {
                            Yi: !0
                        })).bind(s.CLAMP_TO_EDGE, s.LINEAR, s.LINEAR),
                        this.De[o] = h)
                    }
                    for (var a = [], u = 0, f = this.rv.length; u < f; u++) {
                        var c = this.rv[u]
                          , d = void 0 === (l = (c = this.jG[c] || {}).width) ? 512 : l
                          , p = void 0 === (l = c.height) ? 1024 : l
                          , c = 4 * u * 4
                          , l = this.cv(u);
                        a[c] = 0,
                        a[1 + c] = 0,
                        a[2 + c] = l[0],
                        a[3 + c] = l[1],
                        a[4 + c] = 0,
                        a[5 + c] = p,
                        a[6 + c] = l[0],
                        a[7 + c] = l[1] + p,
                        a[8 + c] = d,
                        a[9 + c] = p,
                        a[10 + c] = l[0] + d,
                        a[11 + c] = l[1] + p,
                        a[12 + c] = d,
                        a[13 + c] = 0,
                        a[14 + c] = l[0] + d,
                        a[15 + c] = l[1]
                    }
                    var v = n.fe(new Uint16Array(a), 8)
                      , m = t.Hn()
                      , y = (this.fv(),
                    this.av.Wi.set(this.texture.texture),
                    this.getSize())
                      , i = (n.bindFramebuffer.set(this.av.framebuffer),
                    n.be.current);
                    for (n.be.set([0, 0, y[0], y[1]]),
                    u = 0,
                    f = this.rv.length; u < f; u++) {
                        var b = this.rv[u]
                          , g = this.jG[b] || {}
                          , M = g.width
                          , d = void 0 === M ? 512 : M
                          , p = void 0 === (M = g.height) ? 1024 : M;
                        b && m.Ce({
                            u_sourceTexture: this.De[b],
                            u_sourceTextureSize: [d, p],
                            u_targetTextureSize: y
                        }, {
                            a_sourceTexturePos: {
                                buffer: v,
                                type: "vec2",
                                Re: 8,
                                offset: 0
                            },
                            a_targetTexturePos: {
                                buffer: v,
                                type: "vec2",
                                Re: 8,
                                offset: 4
                            }
                        }, 6, this.Pc, undefined, undefined, undefined, undefined, undefined, 6 * u)
                    }
                    n.bindTexture.set(null),
                    this.texture.bind(s.CLAMP_TO_EDGE, s.NEAREST, s.LINEAR),
                    n.be.set(i),
                    n.bindFramebuffer.set(null)
                }
            }
            ,
            as.prototype.getSize = function() {
                return [1024, 1024 * this.rv.length]
            }
            ,
            as.prototype.destroy = function() {
                this.buffer && (this.buffer.destroy(),
                delete this.buffer),
                this.texture && (this.texture.destroy(),
                delete this.texture);
                for (var t = 0, i = this.De; t < i.length; t++)
                    i[t].destroy();
                this.av && (this.av.destroy(),
                delete this.av),
                this.Pc && (this.Pc.context.deleteBuffer(this.Pc),
                delete this.Pc),
                this.images = {},
                this.lv = [],
                this.rv = [],
                this.De = {}
            }
            ,
            as.prototype.fv = function() {
                var t = this.getSize();
                this.texture.update({
                    width: t[0],
                    height: t[1],
                    data: null
                }, {
                    resize: !0
                })
            }
            ,
            as.prototype.cv = function(t) {
                return [0, 1024 * t]
            }
            ;
            var os = as;
            function as() {
                this.pv = 0,
                this.lv = [],
                this.rv = [],
                this.images = {},
                this.jG = {},
                this.De = {},
                this.dv = [256, 256]
            }
            var us, fs = "labelsLayer", ls = {
                visible: !0,
                zIndex: 120,
                opacity: 1,
                collision: !0,
                animation: !0,
                allowCollision: !1,
                zooms: U.zoomRange,
                VT: !1
            };
            function ds(t) {
                var i = us.call(this, t = void 0 === t ? {} : t) || this;
                return i.CLASS_NAME = "AMap.LabelsLayer",
                i._opts = {
                    id: fs,
                    type: fs,
                    opacity: 1,
                    visible: 1
                },
                i._opts = U.assign({}, ls, t),
                i.xt = i._opts.zooms,
                i.Qh = "undefined" == typeof t.zIndex ? 120 : t.zIndex,
                i.il = "undefined" == typeof t.visible || t.visible,
                i.tl = "undefined" == typeof t.opacity ? 1 : t.opacity,
                i
            }
            us = s,
            U.Ei(ds, us),
            ds.prototype.getSourceConfig = function() {
                return {
                    id: this.hS,
                    type: fs
                }
            }
            ,
            ds.prototype.getState = function() {
                return us.prototype.getLayerConfig.call(this)
            }
            ,
            ds.prototype.co = function() {
                return this.hS
            }
            ,
            ds.prototype.vi = function(t) {
                var i = this.fz;
                return (t = i && i.vi(t, this.hS) || "") ? this.getSource().Ds(t) : null
            }
            ,
            ds.prototype.Do = function(t) {
                return t = us.prototype.Do.call(this, t),
                this.map && this.uz(this.map),
                t
            }
            ,
            ds.prototype.v$ = function() {
                this.fz && this.fz.remove(this)
            }
            ,
            ds.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            ds.prototype.IL = function(t) {
                var i = this.fz
                  , n = this.source;
                return !!(t && i && n && (i = i.$f || {},
                t = n.zL(t))) && !!i[t]
            }
            ,
            ds.prototype.uz = function(t) {
                (this.fz = t.fS()).add(this)
            }
            ,
            ps = ds,
            U.Ei(M, ps),
            M.prototype.getCollision = function() {
                return this._opts.collision
            }
            ,
            M.prototype.setCollision = function(t) {
                this._opts.collision = t = void 0 === t || t,
                this.to({
                    vv: !1
                })
            }
            ,
            M.prototype.getAllowCollision = function() {
                return this._opts.allowCollision
            }
            ,
            M.prototype.setAllowCollision = function(t) {
                this._opts.allowCollision = t = void 0 === t || t,
                this.to({
                    vv: !1
                })
            }
            ,
            M.prototype.getOpacity = function() {
                return this._opts.opacity
            }
            ,
            M.prototype.setOpacity = function(t) {
                void 0 !== t && (this._opts.opacity = t,
                this.tl = t,
                this.to({
                    vv: !0
                }))
            }
            ,
            M.prototype.getZooms = function() {
                return this._opts.zooms
            }
            ,
            M.prototype.setZooms = function(t) {
                void 0 !== t && (this._opts.zooms = t,
                this.xt = t,
                this.to({
                    vv: !0
                }))
            }
            ,
            M.prototype.getzIndex = function() {
                return this._opts.zIndex
            }
            ,
            M.prototype.setzIndex = function(t) {
                void 0 !== t && (this._opts.zIndex = t,
                this.Qh = t,
                this.to({
                    vv: !0
                }))
            }
            ,
            M.prototype.add = function(t) {
                Array.isArray(t) || (t = [t]),
                this._add(t),
                (t = this.getSource()) && t.add(this.mv, this._opts, this.to.bind(this))
            }
            ,
            M.prototype.remove = function(t) {
                Array.isArray(t) || (t = [t]),
                this._remove(t),
                (t = this.getSource()) && t.remove(this.mv, this._opts, this.to.bind(this))
            }
            ,
            M.prototype.clear = function() {
                this.mv = {};
                var t = this.getSource();
                t && (t.clear(),
                this.to({
                    vv: !1
                }))
            }
            ,
            M.prototype.show = function() {
                ps.prototype.show.call(this)
            }
            ,
            M.prototype.hide = function() {
                ps.prototype.hide.call(this)
            }
            ,
            M.prototype.getAllOverlays = function() {
                var t, i, n = this.mv, s = [];
                for (t in n)
                    n.hasOwnProperty(t) && (i = n[t]) && s.push(i);
                return s
            }
            ,
            M.prototype.getState = function() {
                var t = this._opts;
                return {
                    zIndex: this.Qh,
                    zooms: this.xt,
                    visible: this.il,
                    opacity: this.tl,
                    collision: t.collision,
                    animation: t.animation,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            M.prototype.setTop = function(t, i) {
                var n = this.Kl;
                t && (i ? (n && n.hS !== t.hS && n.setTop(!1),
                this.Kl = t) : this.Kl = null)
            }
            ,
            M.prototype.Kh = function(t) {
                ps.prototype.Kh.call(this, t);
                var i = this.mv;
                Object.keys(i).length && t.add(i, this._opts, this.to.bind(this, {
                    vv: !1
                }))
            }
            ,
            M.prototype.to = function(t, i) {
                var n = this
                  , t = (t = void 0 === t ? {} : t).vv;
                this.map && (void 0 === t || t ? (t = this.getSource()) && t.update(this._opts, function() {
                    i && (i(),
                    AMap.Util.requestAnimFrame(function() {
                        n.emit("complete")
                    })),
                    n.map && n.map.setNeedUpdate(!0)
                }) : this.map.setNeedUpdate(!0))
            }
            ,
            M.prototype.onAdd = function() {
                var t, i = this.mv;
                for (t in i)
                    i.hasOwnProperty(t) && i[t].Cs(this)
            }
            ,
            M.prototype.v$ = function() {
                ps.prototype.v$.call(this);
                var t, i = this.mv;
                for (t in i)
                    i.hasOwnProperty(t) && i[t].Cs(null)
            }
            ,
            M.prototype._add = function(t) {
                for (var i = 0, n = t; i < n.length; i++) {
                    var s = n[i];
                    (this.mv[s.hS] = s).Cs(this)
                }
            }
            ,
            M.prototype._remove = function(t) {
                for (var i = 0, n = t; i < n.length; i++) {
                    var s = n[i];
                    delete this.mv[s.hS],
                    s.Cs(null)
                }
            }
            ;
            var ps, vs = U.dZ([U.pZ("LabelsLayer")], M);
            function M(t) {
                return (t = ps.call(this, t = void 0 === t ? {} : t) || this).mv = {},
                t
            }
            ys.prototype.addImage = function(e, r) {
                var h = this;
                this.getImage(e) ? console.log("there is already a image named " + e) : (this.zH.SH(e, function(t, i) {
                    r.cb && r.cb(t, i)
                }),
                this.zH.has(e) || this.zH.nS(e, function(s) {
                    h.map && h.map.z_ && h.map.z_.loadImage(r.url, {
                        name: e,
                        type: "userImage",
                        cb: function(t) {
                            var i, n;
                            t && t.img ? (n = h.map.getContext()) && (t = n.createTexture(t.img, {
                                Zi: !0
                            }),
                            i = r.filter ? n.gl[r.filter] : n.gl.LINEAR,
                            n = r.wrap ? n.gl[r.wrap] : n.gl.CLAMP_TO_EDGE,
                            t.bind(n, i, i),
                            h.De[e] = t,
                            s(null, t)) : s(new Error("no img"))
                        }
                    })
                }))
            }
            ,
            ys.prototype.addImageBitmap = function(e, r) {
                var h = this
                  , o = r.url;
                this.getImage(o) ? console.log("there is already a image named " + o) : (this.zH.SH(o, function(t, i) {
                    r.cb && r.cb(t, i)
                }),
                this.zH.has(o) || this.zH.nS(o, function(t) {
                    var i = {
                        img: e,
                        startX: 0,
                        startY: 0,
                        status: U.uc.LOADED,
                        height: e.height,
                        width: e.width,
                        type: "userImage"
                    };
                    h.map.z_.addImageData(o, i);
                    var i = (n = h.map.getContext()).createTexture(i.img, {
                        Zi: !0
                    })
                      , s = r.filter ? n.gl[r.filter] : n.gl.LINEAR
                      , n = r.wrap ? n.gl[r.wrap] : n.gl.CLAMP_TO_EDGE;
                    i.bind(n, s, s),
                    t(null, h.De[o] = i)
                }))
            }
            ,
            ys.prototype.getImage = function(t) {
                return this.De[t]
            }
            ,
            ys.prototype.RH = function(t) {
                var i = this.De[t];
                i && (delete this.De[t],
                i.destroy())
            }
            ,
            ys.prototype.MH = function(t) {
                return this.zH.has(t)
            }
            ,
            ys.prototype.L_ = function() {
                var t = w.create("canvas", null)
                  , i = (t.getContext || console.error("createArrowTexture error"),
                t.height = 64,
                t.width = 64,
                t.getContext("2d"));
                i ? (i.fillStyle = "white",
                i.beginPath(),
                i.moveTo(8, 56),
                i.lineTo(32, 36),
                i.lineTo(58, 56),
                i.lineTo(58, 36),
                i.lineTo(32, 14),
                i.lineTo(8, 36),
                i.fill(),
                (t = (i = this.map.getContext()).createTexture(t, {
                    Zi: !0
                })).bind(i.gl.CLAMP_TO_EDGE, i.gl.LINEAR, i.gl.LINEAR),
                this.De.AMapArrow = t) : console.error("createArrowTexture error")
            }
            ,
            ys.prototype.AH = function() {
                this.addImage("emptyTexture", {
                    url: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                })
            }
            ;
            var ms = ys;
            function ys(t) {
                this.map = t,
                this.De = {},
                this.zH = new U.IH,
                this.L_(),
                this.AH()
            }
            bs = s,
            U.Ei(Ms, bs),
            Ms.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    type: "sky"
                }
            }
            ,
            Ms.prototype.destroy = function() {
                this._id && (this._id = "")
            }
            ,
            Ms.prototype.co = function() {
                return this._id
            }
            ,
            Ms.prototype.getState = function() {
                return {
                    visible: this.il,
                    opacity: 1,
                    skyColor: this.$C,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            Ms.prototype.lo = function() {
                return !0
            }
            ;
            var bs, gs = Ms;
            function Ms(t) {
                var i = bs.call(this, t = void 0 === t ? {
                    visible: !0
                } : t) || this;
                return i.CLASS_NAME = "AMap.SkyLayer",
                i._id = "sky_" + U.Util.uuid(),
                i.il = t.visible === undefined || t.visible,
                i.$C = t.skyColor,
                i.$C = i.$C && U.Util.color2RgbaArray(i.$C),
                i.Qh = t.zIndex || 500,
                i._rejectMapMask = !0,
                i
            }
            k.prototype.cS = function(t, i, n) {
                for (var e = (s = (this.wf = i).viewState).projectionId, s = s.viewMode, r = (this.If = U.V[e],
                this._viewMode = s,
                this.reset(),
                this.Of(),
                this._map), h = {}, o = 0, a = this.Tw(); o < a.length; o++) {
                    var u = a[o]
                      , f = u.getLayerConfig()
                      , c = u._opts
                      , l = u.hS
                      , d = u.getRender();
                    if (d) {
                        var p, v = n[l];
                        if (v)
                            for (var m in v)
                                v.hasOwnProperty(m) && (p = v[m],
                                "AMap.Inner.LabelsLayer" === u.CLASS_NAME && "other" === m || "AMap.LabelsLayer" === u.CLASS_NAME && "tile" === m || p && (m = d.Hz(t, i, this, p, r, f)) && (h[l] = m,
                                (c.collision || c.allowCollision) && (this.YL = !1),
                                c.allowCollision) && (this.UT = !1))
                    }
                }
                this.Ps = h;
                var s = (e = this._map.getMapState()).rotating
                  , y = e.zooming
                  , e = e.panning;
                y || e || this.reset(),
                this.YL && this.UT && (s || y || e) || this.Ff();
                e = void 0 === (y = (s = this.Ef()).Uf) ? {} : y;
                this.$f = void 0 === (y = s.$f) ? {} : y,
                this.Uf = e
            }
            ,
            k.prototype.uS = function() {
                return this.LC
            }
            ,
            k.prototype.add = function(t) {
                this.LC[t.hS] = t
            }
            ,
            k.prototype.remove = function(t) {
                t && delete this.LC[t.hS]
            }
            ,
            k.prototype.destroy = function() {
                this.LC && (this.LC = {}),
                this.Uf && (this.Uf = {},
                delete this.Uf),
                this.$f && (this.$f = {},
                delete this.$f)
            }
            ,
            k.prototype.gmt = function(t) {
                if (t && 0 < t.length) {
                    this.Uf;
                    for (var i = [], n = 0, s = t; n < s.length; n++) {
                        var e = s[n].id
                          , r = this.DC(e);
                        r && r.Nf && (e = r.Nf[e]) && e.opts && (e && e.data.extData,
                        e) && e.opts && e.opts.zIndex && i.push(e)
                    }
                    for (var h = -Infinity, o = null, a = 0, u = i; a < u.length; a++) {
                        var f = u[a]
                          , c = f.opts.zIndex;
                        h < c && (h = c,
                        o = f)
                    }
                    return o
                }
            }
            ,
            k.prototype.vi = function(t, i, n) {
                if ((void 0 === n && (n = !1),
                this._map) && ((this._map.getStatus().pickWhenMoving || !this._map.TL()) && t && this._p)) {
                    var s = this._map.getMapsContainer()
                      , t = (s = w.mousePos(s, t, this._map))[0]
                      , e = this._p.search({
                        ja: t - 1,
                        Fa: (s = s[1]) - 1,
                        Oa: t + 1,
                        Ea: s + 1
                    });
                    if (e.length)
                        if (e = this.NL(e, i),
                        i = this.gmt(e)) {
                            if (h = (r = i) && r.data.extData || {},
                            n)
                                return [h.mainKey, h.subKey];
                            if ("poi" === h.type)
                                return {
                                    type: h.type,
                                    id: h.id,
                                    lnglat: r.data.position,
                                    name: r.data.name
                                };
                            if (!h.type)
                                return h.id
                        } else {
                            if ((i = this.sP(e)) && i.path && 0 < i.path.length && (e = i.path,
                            !this.ss([t, s], e)))
                                return null;
                            if (!i)
                                return null;
                            if (t = i.id,
                            (s = this.DC(t)) && s.Nf) {
                                var r, h = (r = s.Nf[t]) && r.data.extData || {};
                                if (this.Uf[t]) {
                                    if (n)
                                        return [h.mainKey, h.subKey];
                                    if ("poi" === h.type)
                                        return {
                                            type: h.type,
                                            id: h.id,
                                            lnglat: r.data.position,
                                            name: r.data.name
                                        };
                                    if ("shield" !== h.type && !h.type)
                                        return h.id
                                }
                            }
                        }
                }
                return null
            }
            ,
            k.prototype.search = function(t) {
                for (var i = [], n = 0, s = this._p.search(t); n < s.length; n++) {
                    var e, r = s[n], h = r.id;
                    (e = this.FC(h)) && "AMap.Inner.LabelsLayer" === e.CLASS_NAME && this.TC(h) && i.push(r)
                }
                return i
            }
            ,
            k.prototype.reset = function() {
                this.Uf = {},
                this.$f = {}
            }
            ,
            k.prototype.tC = function() {
                return this._p
            }
            ,
            k.prototype.iC = function(t, i, n, s) {
                var e = void 0 === (e = (t = void 0 === t ? {} : t).x) ? 0 : e
                  , r = void 0 === (r = t.y) ? 0 : r
                  , h = void 0 === (h = t.width) ? 0 : h
                  , t = void 0 === (t = t.height) ? 0 : t
                  , o = (i = void 0 === i ? {} : i).id
                  , a = i.rank
                  , u = i.padding
                  , f = void 0 === (f = i.type) ? "" : f
                  , i = i.name
                  , c = U.tc._d
                  , u = u || c || 0;
                return n && 0 < n.length && s !== undefined && 0 !== s ? (n = (c = this.Ddt(n[0], n[1], {
                    ja: e - u,
                    Fa: r - u,
                    Oa: e + h + u,
                    Ea: r + t + u
                }, s)) && c.Ro || [],
                s = c && c.path || [],
                {
                    id: o,
                    name: i,
                    type: f,
                    rank: a || 1,
                    ja: n[0],
                    Fa: n[1],
                    Oa: n[2],
                    Ea: n[3],
                    path: s
                }) : {
                    id: o,
                    name: i,
                    type: f,
                    rank: a || 1,
                    ja: e - u,
                    Fa: r - u,
                    Oa: e + h + u,
                    Ea: r + t + u
                }
            }
            ,
            k.prototype.NL = function(t, i) {
                for (var n = [], s = 0, e = t = void 0 === t ? [] : t; s < e.length; s++) {
                    var r, h = e[s];
                    h.id && (r = this.FC(h.id)) && r.hS === i && n.push(h)
                }
                return n
            }
            ,
            k.prototype.sP = function(t) {
                for (var i = this.Uf || {}, n = [], s = 0, e = t; s < e.length; s++) {
                    var r = e[s];
                    i[r.id] && n.push(r)
                }
                for (var h = -Infinity, o = null, a = 0, u = n; a < u.length; a++) {
                    var f = u[a]
                      , c = f.rank;
                    h < c && (h = c,
                    o = f)
                }
                return o
            }
            ,
            k.prototype.Tw = function() {
                var t, i, n = this.LC, s = [];
                for (t in n)
                    n.hasOwnProperty(t) && (i = n[t],
                    s.push(i));
                return s.sort(function(t, i) {
                    return i.Qh - t.Qh
                }),
                s
            }
            ,
            k.prototype.Rdt = function(t, i, n) {
                var s = n.x
                  , n = n.y
                  , e = t[0]
                  , t = t[1]
                  , r = s + (e - s) * Math.cos(i * Math.PI / 180) - (t - n) * Math.sin(i * Math.PI / 180)
                  , e = n + (e - s) * Math.sin(i * Math.PI / 180) + (t - n) * Math.cos(i * Math.PI / 180);
                return [this.Pdt(r, 2), this.Pdt(e, 2)]
            }
            ,
            k.prototype.Pdt = function(t, i) {
                return Math.round(t * Math.pow(10, i)) / Math.pow(10, i)
            }
            ,
            k.prototype.ss = function(t, i, n) {
                for (var s = t[0], e = t[1], r = !1, h = i.length, o = 0, a = h - 1; o < h; a = o,
                o += 1) {
                    var u = !1
                      , f = i[o][0]
                      , c = i[o][1]
                      , l = i[a][0]
                      , d = i[a][1];
                    if (f === s && c === e || l === s && d === e)
                        return !!n;
                    if (c < e == e <= d) {
                        if (s === (l = (l - f) * (e - c) / (d - c) + f))
                            return !!n;
                        u = s < l
                    }
                    u && (r = !r)
                }
                return r
            }
            ,
            k.prototype.Ddt = function(t, i, n, s) {
                var e, r, t = {
                    x: t,
                    y: i
                };
                return s !== undefined && 0 !== s ? (i = [n.ja, n.Fa],
                s = this.Rdt(i, i = -s, t),
                e = [n.Oa, n.Fa],
                e = this.Rdt(e, i, t),
                r = [n.Oa, n.Ea],
                r = this.Rdt(r, i, t),
                n = [n.ja, n.Ea],
                s = [s, e, r, this.Rdt(n, i, t)],
                {
                    Ro: Et.Qa(s),
                    path: s
                }) : null
            }
            ,
            k.prototype.rd = function(t, i) {
                var n = i.anchorOffset
                  , s = (i = void 0 === (i = i.size) ? [0, 0] : i)[0]
                  , i = i[1];
                return {
                    x: (t = U.vector.add(t, n))[0],
                    y: t[1],
                    width: s,
                    height: i
                }
            }
            ,
            k.prototype.hd = function(t, i, n, s) {
                var e = i.offsetX
                  , r = i.offsetY
                  , h = i.w
                  , i = i.h;
                return {
                    x: t[0] + (void 0 === e ? 0 : e) * n,
                    y: t[1] + (void 0 === r ? 0 : r) * n,
                    width: (void 0 === h ? 0 : h) * n,
                    height: (void 0 === i ? 0 : i) * n
                }
            }
            ,
            k.prototype.Ff = function() {
                var t = this.Ps
                  , i = this.wf && this.wf.viewState
                  , n = this.ad
                  , s = this.$f;
                if (i) {
                    var e, r = {
                        viewState: i,
                        size: this.wf.size,
                        transform: this.If,
                        view: this._view,
                        viewMode: this._viewMode,
                        positionType: "relative"
                    }, h = i.zoom;
                    for (e in t)
                        if (t.hasOwnProperty(e) && t[e]) {
                            var o = t[e]
                              , a = o.coords
                              , u = o.style
                              , f = o.Nf;
                            if (o = this.LC[e]) {
                                var c, l, d, p, v, m, y, b, g, M, k = o.getRender().Jz(), w = k.Sa, x = o.Qh;
                                for (c in a)
                                    a.hasOwnProperty(c) && (g = (M = a[c]).origin,
                                    m = M.icon,
                                    M = M.padding,
                                    (l = u[c]).forceShow,
                                    this.TC(c) || (s[c] = 1),
                                    s[c] || (d = (b = f[c]).data && b.data.rotation || 0,
                                    p = (y = b.data.extData || {}).Sa || w || [0, 0],
                                    p = (g = U.vector.add(g, [p[0], p[1], 0]))[0],
                                    v = g[1],
                                    g = g[2],
                                    r.centerCoord = k.centerCoord,
                                    p = U.LabelsRenderUtil.r0(p, v, g, h, r),
                                    v = {
                                        id: c,
                                        rank: U.LabelsRenderUtil.getRank(b, {
                                            forceShow: l.forceShow,
                                            _z: x
                                        }),
                                        name: b.data.name,
                                        type: y.type || ""
                                    },
                                    g = this.rd(p, m),
                                    y = this.PC(l) || U.zoomRange,
                                    m = U.Util.dS(h, y),
                                    l.showIcon && m && g.width && g.height && (y = this.iC(g, v, p, d),
                                    n.push(y)),
                                    m = 1,
                                    b.data.extData.mainKey && b.data.extData.subKey && (m = (g = this._map.mapStyle.dn(b.data.extData.mainKey, b.data.extData.subKey, i.optimalZoom)) && l.text ? g.fontSize / l.text.style.fontSize : 1),
                                    y = this.hd(p, M, m),
                                    b = this.OC(l) || [2, 20],
                                    g = U.Util.dS(h, b),
                                    l.showText && g && y.width && y.height && (M = this.iC(y, v, p, d),
                                    n.push(M))))
                            }
                        }
                    this.ld(n)
                }
            }
            ,
            k.prototype.Ef = function() {
                var t = {}
                  , i = this.$f;
                if (!this.wf)
                    return {};
                var n = (this.wf && this.wf.viewState).zoom
                  , s = this.Ps
                  , e = {};
                if (this.YL) {
                    for (var r in s)
                        if (s.hasOwnProperty(r) && s[r]) {
                            var h, o, a = void 0 === (o = s[r].Nf) ? {} : o;
                            for (h in a)
                                a.hasOwnProperty(h) && (t[h] = 1)
                        }
                } else {
                    for (var r in s)
                        if (s.hasOwnProperty(r) && s[r]) {
                            var u, f, c = s[r], l = c.Nf, d = void 0 === l ? {} : l, p = void 0 === (l = c.style) ? {} : l, P = (w = this.LC[r]).Qh;
                            for (u in d)
                                d.hasOwnProperty(u) && (f = p[u],
                                e[f = U.LabelsRenderUtil.getRank(d[u], {
                                    forceShow: f.forceShow,
                                    _z: P
                                })] || (e[f] = {}),
                                e[f][u] = d[u])
                        }
                    for (var v, m = U.labelsUtil.rank(Object.keys(e)), B = m.length, y = this.wf, b = {
                        viewState: y.viewState,
                        size: y.size,
                        transform: this.If,
                        view: this._view,
                        viewMode: this._viewMode,
                        positionType: "relative"
                    }, g = B - 1; 0 <= g; g--)
                        for (var M, F = e[m[g]], k = (M = Object.keys(F)).length - 1; 0 <= k; k--) {
                            var w, x = M[k];
                            if (!i[x] && (w = this.FC(x)))
                                if (!(A = w._opts || {}).collision && this.UT || A.VT)
                                    t[x] = 1;
                                else {
                                    var A, z = (A = w.getRender().Jz()).Sa, C = (E = this.DC(x)).style, T = E.coords, S = void ((E = E.Nf)[x].data && E[x].data.rotation);
                                    if ((C = C[x]) && C.text && C.text.style && (S = C.text.style.canCovered),
                                    C && (C.forceShow || S))
                                        t[x] = 1;
                                    else {
                                        if (T = (S = T[x]).icon || {},
                                        v = S.padding || {},
                                        z = ((E = E[x]).data.extData || {}).Sa || z || [0, 0],
                                        z = (S = U.vector.add(S.origin || {}, [z[0], z[1], 0]))[0],
                                        L = S[1],
                                        S = S[2],
                                        b.centerCoord = A.centerCoord,
                                        A = U.LabelsRenderUtil.r0(z, L, S, n, b),
                                        (z = T.size)[0] && z[1])
                                            for (var I, L = this.rd(A, T), S = this.iC(L), W = (I = this._p.search(S)).length, D = 0; D < W; D++) {
                                                var O = I[D];
                                                O.id === x ? t[O.id] = 1 : this.BC(x, O.id) && (i[O.id] = 1)
                                            }
                                        if (z = this.wf && this.wf.viewState,
                                        T = 1,
                                        E.data.extData.mainKey && E.data.extData.subKey && (T = (L = this._map.mapStyle.dn(E.data.extData.mainKey, E.data.extData.subKey, z.optimalZoom)) && C.text ? L.fontSize / C.text.style.fontSize : 1),
                                        (S = this.hd(A, v, T)).width && S.height)
                                            for (var R, E = this.iC(S), N = (R = this._p.search(E)).length, D = 0; D < N; D++) {
                                                var j = R[D];
                                                j.id === x ? t[j.id] = 1 : this.BC(x, j.id) && (i[j.id] = 1)
                                            }
                                    }
                                }
                        }
                }
                return {
                    Uf: t,
                    $f: i
                }
            }
            ,
            k.prototype.ld = function(t) {
                this._p && (this._p.clear(),
                this._p.load(t))
            }
            ,
            k.prototype.Of = function() {
                this._p && (this._p.clear(),
                this.ad = [])
            }
            ,
            k.prototype.DC = function(t) {
                var i, n, s = this.Ps;
                for (n in s)
                    if (s.hasOwnProperty(n)) {
                        var e = s[n];
                        if (e && e.Nf && e.Nf[t]) {
                            i = e;
                            break
                        }
                    }
                return i || {}
            }
            ,
            k.prototype.jC = function(t) {
                var i, n = this.Ps, s = "";
                for (i in n)
                    if (n.hasOwnProperty(i)) {
                        var e = n[i] || {};
                        if (e.Nf && e.Nf[t]) {
                            s = i;
                            break
                        }
                    }
                return s
            }
            ,
            k.prototype.FC = function(t) {
                return (t = this.jC(t)) ? this.LC[t] : null
            }
            ,
            k.prototype.TC = function(t) {
                var i = this.DC(t)
                  , n = this._map.qz()
                  , s = this._map.getLayerByClass("AMap.MaskLayer")
                  , e = this._map.jH();
                if (i) {
                    var r = i.Nf;
                    if (!(i = i.style[t]))
                        return !1;
                    var h = r[t].data.extData || {};
                    if ("poi" === h.type && !1 === n)
                        return !1;
                    if (!i.visible)
                        return !1;
                    if (n = this.EC(i),
                    i = this.wf.viewState.zoom,
                    !U.Util.dS(i, n))
                        return !1;
                    if (i = this._map.getLayerByClass("AMap.IndoorMap"),
                    r[t] && h.bz && i && i.yD().show)
                        return !1;
                    if (s) {
                        if (n = s.getRender(),
                        e)
                            return !0;
                        if (n && !n.EH(r[t].data.position, this.wf))
                            return !1
                    }
                    return !0
                }
                return !1
            }
            ,
            k.prototype.BC = function(t, i, n) {
                if (void 0 === n && (n = !1),
                s = this.DC(i)) {
                    var s = s.style
                      , e = (t = this.FC(t)) && t._opts || {}
                      , r = this.FC(i)
                      , h = r && r._opts || {};
                    if (s[i].forceShow)
                        return n && console.log("", "   -1- ", 1),
                        !1;
                    if (t && r) {
                        if (t.hS !== r.hS && !e.allowCollision && !h.allowCollision)
                            return n && console.log("", "   -2- ", 1),
                            !1;
                        if (t.hS === r.hS && !h.collision)
                            return n && console.log("", "   -3- ", 1),
                            !1
                    }
                }
                return n && console.log("", "   -4- ", 1),
                !0
            }
            ,
            k.prototype.EC = function(t) {
                var n = (i = this.PC(t) || [])[0]
                  , i = i[1]
                  , s = (t = this.OC(t) || [])[0]
                  , t = t[1];
                return [n && s ? n <= s ? n : s : n || s || 2, n && s ? i <= t ? t : i : i || t || U.zoomRange[1]]
            }
            ,
            k.prototype.PC = function(t) {
                return t.icon && t.icon[0] && t.icon[0].zooms
            }
            ,
            k.prototype.OC = function(t) {
                return t.text && t.text.zooms
            }
            ;
            var ks = U.dZ([U.pZ("LabelsManager")], k);
            function k(t) {
                this.LC = {},
                this.Uf = {},
                this.$f = {},
                this.Ps = {},
                this._p = U.rbush(),
                this.ad = [],
                this._viewMode = "2D",
                this.YL = !0,
                this.UT = !0,
                this._map = t,
                this._view = t.getView()
            }
            ws = s,
            U.Ei(As, ws),
            As.prototype.getState = function() {
                return {
                    visible: this.il,
                    opacity: this.tl,
                    zIndex: this.Qh,
                    layer: this,
                    path: this.$x,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            As.prototype.setMask = function(t) {
                t && (this.$x = t,
                this.getSource().CS(),
                null != (t = this.map)) && t.setNeedUpdate(!1)
            }
            ,
            As.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    type: "mask",
                    zooms: U.zoomRange
                }
            }
            ,
            As.prototype.co = function() {
                return this._id
            }
            ,
            As.prototype.lo = function() {
                return !0
            }
            ;
            var ws, xs = As;
            function As(t) {
                var i = ws.call(this, t) || this;
                return i.CLASS_NAME = "AMap.MaskLayer",
                i.$x = t.path,
                i.Qh = t.zIndex || -100,
                i.tl = t.opacity === undefined ? 1 : t.opacity,
                i.il = t.visible === undefined || t.visible,
                i.xt = t.zooms || U.zoomRange,
                i
            }
            var zs, Cs = "Nebula.labelsLayer", Ss = "nebulaLabel", Is = (zs = s,
            U.Ei(Ls, zs),
            Ls.prototype.getState = function() {
                return U.assign({}, {
                    layer: this,
                    rejectMapMask: this._rejectMapMask
                }, zs.prototype.getLayerConfig.call(this))
            }
            ,
            Ls.prototype.getSourceConfig = function() {
                var t = AMap.getConfig().protocol;
                return {
                    id: Ss,
                    type: Ss,
                    tileUrl: t + (U.Support.wasm ? "://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3" : "://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),
                    tileSize: 0,
                    zooms: U.zoomRange
                }
            }
            ,
            Ls.prototype.co = function() {
                return Ss
            }
            ,
            Ls.prototype.vi = function(t) {
                return null
            }
            ,
            Ls.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            Ls.prototype.Do = function(t) {
                return zs.prototype.Do.call(this, t)
            }
            ,
            Ls);
            function Ls(t) {
                var i = zs.call(this, t = void 0 === t ? {} : t) || this;
                return i.CLASS_NAME = "AMap.Nebula.LabelsLayer",
                i._opts = {
                    id: Cs,
                    type: Cs,
                    opacity: 1,
                    visible: 1,
                    collision: !0,
                    allowCollision: !1
                },
                i._opts = U.assign({}, i._opts, t),
                i.Qh = t.labelzIndex || 100,
                i.il = !1 !== t.showLabel,
                i.tl = "undefined" == typeof t.opacity ? 1 : t.opacity,
                i
            }
            Os.prototype.qk = function(t) {
                return t = Object.keys(t),
                this.Uk + t.length < this.uf
            }
            ,
            Os.prototype.getSize = function() {
                return [this.maxWidth, this.Uk / this.Hk * this.unit]
            }
            ,
            Os.prototype.clear = function() {}
            ,
            Os.prototype.destroy = function() {}
            ,
            Os.prototype.Rk = function(t) {
                var i = this.Vk
                  , n = this.$k
                  , s = t[U.dY.iconWidth]
                  , t = t[U.dY.iconHeight];
                return this.pY < t && (this.pY = t),
                i + s <= this.maxWidth || (this.$k += this.pY,
                n = this.$k,
                this.Vk = i = 0,
                this.pY = t),
                this.Vk += s,
                this.nU = [i, n],
                {
                    startX: i,
                    startY: n
                }
            }
            ;
            var Ds = Os;
            function Os() {
                this.Uk = 0,
                this.unit = 32,
                this.Hk = 128,
                this.maxWidth = this.unit * this.Hk,
                this.maxHeight = this.unit * this.Hk,
                this.uf = this.maxWidth / this.unit * (this.maxHeight / this.unit),
                this.Kv = !1,
                this.Vk = 0,
                this.$k = 0,
                this.pY = 0,
                this.nU = [0, 0],
                this.Es = {};
                var t = document.createElement("canvas");
                t.width = this.maxWidth,
                t.height = this.maxHeight,
                this.mY = t,
                this.Nz = t.getContext("2d")
            }
            Es.prototype.play = function(t) {
                for (var i = t, n = Date.now(); 0 < i && this.offset !== this.mG.length; ) {
                    var s = this.mG[this.offset]
                      , e = this.bY.Rk(s.info)
                      , r = s.info[U.dY.iconWidth]
                      , h = s.info[U.dY.iconHeight];
                    0 < r && 0 < h && this.bY.Nz.putImageData(function(t, i, n, s) {
                        for (var e = (n = t.createImageData(n, s)).data, r = 0; r < i.length; r++)
                            e[4 * r + 0] = i[r],
                            e[4 * r + 1] = i[r],
                            e[4 * r + 2] = i[r],
                            e[4 * r + 3] = 255;
                        return n
                    }(this.bY.Nz, s.data, s.info[U.dY.iconWidth], s.info[U.dY.iconHeight]), e.startX, e.startY),
                    s.pos = e,
                    delete s.data,
                    this.result.push(s),
                    this.offset++,
                    i = t - (Date.now() - n)
                }
                return this.offset === this.mG.length && (this.bY.Kv = !0),
                this.result
            }
            ,
            Object.defineProperty(Es.prototype, "status", {
                get: function() {
                    return this.offset >= this.mG.length ? U.vY.finish : U.vY.pause
                },
                eb: !1,
                nb: !0
            });
            var Rs = Es;
            function Es(t, i) {
                this.bY = t,
                this.mG = i,
                this.type = "SDFCombineTask",
                this.offset = 0,
                this.result = []
            }
            Ps.prototype.dynamicTextSDFInfoLoaded = function(t) {
                var i = this.map.R_;
                i && "SDFManagerBase" !== i.CLASS_NAME && (i.Ju(t.data),
                this.Eo())
            }
            ,
            Ps.prototype.iconImageLoaded = function(t) {
                for (var i = this, t = t.data, e = [], n = 0, s = t; n < s.length; n++)
                    !function(n) {
                        n.url;
                        var s = n.data;
                        e.push(new Promise(function(t) {
                            var i = new Image;
                            i.src = n.data.data.data,
                            i.onload = function() {
                                t({
                                    img: i,
                                    name: n.data.data.hash,
                                    iconIndex: n.data.ext.iconIndex,
                                    width: s.width,
                                    height: s.height
                                })
                            }
                        }
                        ))
                    }(s[n]);
                Promise.all(e).then(function(t) {
                    i.map.so.sv(t)
                }),
                this.Eo()
            }
            ,
            Ps.prototype.updateDataVersion = function(t) {
                this.map.UH(t.version)
            }
            ,
            Ps.prototype.destroy = function() {
                this.$$()
            }
            ,
            Ps.prototype.Ia = function() {
                this.map.gn.on("dynamicTextSDFInfoLoaded", this.dynamicTextSDFInfoLoaded.bind(this)),
                this.map.gn.on("iconImageLoaded", this.iconImageLoaded.bind(this)),
                this.map.gn.on("updateDataVersion", this.updateDataVersion.bind(this))
            }
            ,
            Ps.prototype.$$ = function() {
                this.map.gn.clearEvents("dynamicTextSDFInfoLoaded"),
                this.map.gn.clearEvents("commonWordLoaded"),
                this.map.gn.clearEvents("iconImageLoaded"),
                this.map.gn.clearEvents("updateDataVersion")
            }
            ,
            Ps.prototype.Eo = function() {
                this.map.setNeedUpdate(!0)
            }
            ;
            var js = Ps;
            function Ps(t) {
                this.map = t,
                this.Ia()
            }
            Fs.prototype.destroy = function() {
                for (var t = 0, i = this.MZ; t < i.length; t++) {
                    var n = i[t];
                    "function" == typeof n.destroy && n.destroy.call(n)
                }
            }
            ;
            var Bs = Fs;
            function Fs(t) {
                this.MZ = t,
                this.dynamic = new Ns
            }
            Ws = U.Event,
            U.Ei(Us, Ws),
            Us.prototype.has = function(t) {
                return this.gV.has(t)
            }
            ,
            Us.prototype.set = function(t, i, n) {
                (n = void 0 === n || n) ? (n = this.gV.get(t),
                this.gV.set(t, i),
                n !== i && this.emit(t, i)) : this.gV.set(t, i)
            }
            ,
            Us.prototype.get = function(t) {
                return this.gV.get(t)
            }
            ,
            Us.prototype.subscribe = function(t, i, n, s) {
                var e = this;
                return this.on(t, i, n, s = void 0 !== s && s),
                function() {
                    return e.off(t, i, n)
                }
            }
            ;
            var Ws, Ns = Us;
            function Us() {
                var t = null !== Ws && Ws.apply(this, arguments) || this;
                return t.gV = new U.OZ,
                t
            }
            _s.prototype.update = function(t) {
                var i = this;
                t === undefined ? this.PZ.forEach(function(t) {
                    i.jZ(t)
                }) : (t = this.WZ(t)) && this.jZ(t)
            }
            ,
            _s.prototype.add = function(t) {
                if (this.PZ.has(t.group)) {
                    var i = this.PZ.get(t.group);
                    if (null == i || !i.includes(t))
                        return null != (i = this.PZ.get(t.group)) && i.push(t),
                        !0
                }
                return !1
            }
            ,
            _s.prototype.remove = function(t) {
                if (this.PZ.has(t.group)) {
                    var i = null == (i = this.PZ.get(t.group)) ? void 0 : i.indexOf(t);
                    if (-1 !== i)
                        return null != (t = this.PZ.get(t.group)) && t.splice(i, 1),
                        !0
                }
                return !1
            }
            ,
            _s.prototype.BZ = function(t) {
                var i = 0;
                return t === undefined ? this.PZ.forEach(function(t) {
                    i += t.length
                }) : i += null != (t = null == (t = this.WZ(t)) ? void 0 : t.length) ? t : 0,
                i
            }
            ,
            _s.prototype.RZ = function(t, i, n) {
                if (void 0 === n && (n = 1),
                !this.WZ(t) || this.BZ(t) <= 0)
                    return !1;
                for (var s = 0; s < n && 0 < this.BZ(t); s++) {
                    var e = this.GZ(t, !0);
                    e !== undefined && (!i || null != i && i(e) ? e.NZ() : this.add(e))
                }
                return !0
            }
            ,
            _s.prototype.GZ = function(t, i) {
                var n, s;
                return void 0 === i && (i = !1),
                this.WZ(t) && (s = null == (s = this.WZ(t)) ? void 0 : s.pop(),
                i) && s && null != (n = s.UZ) && n.call(s) ? this.GZ(t, i) : s
            }
            ,
            _s.prototype.sort = function(t, i) {
                return i.FZ() - t.FZ()
            }
            ,
            _s.prototype.WZ = function(t) {
                return this.PZ.get(t)
            }
            ,
            _s.prototype.jZ = function(t) {
                for (var i, n = 0; n < t.length; n++) {
                    var s = t[n];
                    null != (i = null == s ? void 0 : s.UZ) && i.call(s) && (t.splice(n, 1),
                    n--)
                }
                t.sort(this.sort)
            }
            ,
            _s.prototype.destroy = function() {
                this.PZ.clear()
            }
            ;
            var Gs = _s;
            function _s(t) {
                var i = this;
                this.PZ = new U.OZ,
                this.ZZ = t,
                null != (t = this.ZZ.Fz) && t.forEach(function(t) {
                    i.PZ.set(t, [])
                }),
                this.ZZ._Z && (this.sort = this.ZZ._Z)
            }
            var Ys = {
                rainbow: {
                    HY: ["#96005A", "#0000C8", "#0019FF", "#0098FF", "#2CFF96", "#97FF00", "#FFEA00", "#FF6F00", "#FF0000"],
                    JY: [0, .125, .25, .375, .5, .625, .75, .875, 1]
                },
                jet: {
                    HY: ["#000083", "#003CAA", "#05FFFF", "#FFFF00", "#FA0000", "#800000"],
                    JY: [0, .125, .375, .625, .875, 1]
                },
                hsv: {
                    HY: ["#ff0000", "#fdff02", "#f7ff02", "#00fc04", "#00fc0a", "#01f9ff", "#0200fd", "#0800fd", "#ff00fb", "#ff00f5", "#ff0006"],
                    JY: [0, .169, .173, .337, .341, .506, .671, .675, .839, .843, 1]
                },
                hot: {
                    HY: ["#000000", "#e60000", "#ffd200", "#ffffff"],
                    JY: [0, .3, .6, 1]
                },
                greys: {
                    HY: ["#000000", "#ffffff"],
                    JY: [0, 1]
                },
                greens: {
                    HY: ["#00441b", "#006d2c", "#238b45", "#41ab5d", "#74c476", "#a1d99b", "#c7e9c0", "#e5f5e0", "#f7fcf5"],
                    JY: [0, .125, .25, .375, .5, .625, .75, .875, 1]
                },
                ylgnbu: {
                    HY: ["#081d58", "#253494", "#225ea8", "#1d91c0", "#41b6c4", "#7fcdbb", "#c7e9b4", "#edf8d9", "#ffffd9"],
                    JY: [1, .875, .75, .625, .5, .375, .25, .125, 0]
                },
                ylorrd: {
                    HY: ["#800026", "#bd0026", "#e31a1c", "#fc4e2a", "#fd8d3c", "#feb24c", "#fed976", "#ffeda0", "#ffffcc"],
                    JY: [1, .875, .75, .625, .5, .375, .25, .125, 0]
                }
            }
              , Zs = (Xs.getTexture = function(t, i) {
                var n;
                return this.cache[i] || (Ys[i] && (n = function(t) {
                    t.JY;
                    for (var i = document.createElement("canvas"), n = (i.height = 1,
                    i.width = 256,
                    i.getContext("2d")), s = n.createLinearGradient(0, 0, 256, 1), e = 0; e < t.JY.length; e++) {
                        var r = t.JY[e]
                          , h = t.HY[e];
                        s.addColorStop(r, h)
                    }
                    return n.fillStyle = s,
                    n.fillRect(0, 0, 256, 1),
                    i
                }(Ys[i]),
                n = t.createTexture(n, {
                    Zi: !0
                }),
                t = t.gl,
                n.bind(t.CLAMP_TO_EDGE, t.NEAREST, t.NEAREST_MIPMAP_NEAREST),
                this.cache[i] = n),
                null)
            }
            ,
            Xs.cache = {},
            U.dZ([U.pZ("ColorScale")], Xs));
            function Xs() {}
            Vs.oX = function(t) {
                var i = document.createElement("canvas")
                  , n = (i.width = 256,
                i.height = 256,
                i.getContext("2d"));
                if (n) {
                    n.beginPath();
                    for (var s = "rgba(" + t[0] + "," + t[1] + "," + t[2] + "," + t[3] / 255 + ")", e = 0; e < 9; e++) {
                        n.lineWidth = 1,
                        n.strokeStyle = s;
                        var r = 256 * e / 8;
                        8 === e ? (n.moveTo(.5, r - .5),
                        n.lineTo(255.5, r - .5),
                        n.moveTo(r - .5, .5),
                        n.lineTo(r - .5, 255.5)) : (n.moveTo(.5, .5 + r),
                        n.lineTo(255.5, .5 + r),
                        n.moveTo(.5 + r, .5),
                        n.lineTo(.5 + r, 255.5))
                    }
                    return n.stroke(),
                    "url(" + i.toDataURL("image/png") + ")"
                }
            }
            ,
            Vs.hX = function(t, i) {
                var n = t.toLowerCase();
                if (n && /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)) {
                    if (4 === n.length) {
                        for (var s = "#", e = 1; e < 4; e += 1)
                            s += n.slice(e, e + 1).concat(n.slice(e, e + 1));
                        n = s
                    }
                    for (var r = [], e = 1; e < 7; e += 2)
                        r.push(parseInt("0x" + n.slice(e, e + 2), 10));
                    return i && (t = parseFloat((parseInt(i, 16) / 255).toFixed(2)),
                    r.push(t)),
                    "RGB(" + r.join(",") + ")"
                }
                return n
            }
            ;
            var Js = Vs;
            function Vs() {}
            new U.rW({}),
            qs.addLayerRender = function(t, i, n) {
                i && (this.YZ[t] = i),
                n && (this.JZ[t] = n),
                this.XZ(!0)
            }
            ,
            qs.XZ = function(t) {
                this.HZ = t
            }
            ,
            qs.VZ = function() {
                return this.HZ
            }
            ,
            qs.HZ = !0,
            qs.YZ = {},
            qs.JZ = {};
            var Hs = U.dZ([U.pZ("LayerRenderManager")], qs);
            function qs() {}
            Ks = U.Event,
            U.Ei(x, Ks),
            x.prototype.TL = function() {
                return !window.movingDraw && (this.gm || this.Lv || this.lt || this.Cv)
            }
            ,
            x.prototype.Ryt = function() {
                var s = this;
                if (this.Eyt && this.jyt)
                    return this.jyt;
                this.Eyt = !0;
                var t = "./amap/jsapi/init.json?key=" + AMap.getConfig().key;
                return this.jyt = fetch(t).then(function(t) {
                    return t.json()
                }).then(function(t) {
                    var i, n;
                    return null !== t && (n = t,
                    n = s.Pyt || n) && (i = JSON.parse(n.style),
                    AMap.getConfig().styleVersion = i.v,
                    AMap.getConfig().styleClass = i.t,
                    i = JSON.parse(n.icon),
                    AMap.getConfig().iconVersion = i.v,
                    AMap.getConfig().iconClass = i.t,
                    i = JSON.parse(n.tile),
                    AMap.getConfig().tileVersion = i.v,
                    n = !0,
                    "false" === i.combo && (n = !1),
                    AMap.getConfig().tileCombo = n,
                    s) && s.gn && (n = (i = AMap.getConfig()).tileVersion,
                    s.gn.Ha({
                        tileVersion: n,
                        iconVersion: i.iconVersion,
                        iconClass: i.iconClass,
                        tileCombo: i.tileCombo,
                        DD: -1 !== location.search.indexOf("forceAll")
                    })),
                    t
                })["catch"](function(t) {
                    return console.log("Initialization failed:", t),
                    null
                }),
                this.jyt || Promise.resolve(null)
            }
            ,
            x.prototype.getContext = function() {
                var t;
                return null == (t = this.mm) ? void 0 : t.context
            }
            ,
            x.prototype.getGL = function() {
                return this.gl
            }
            ,
            x.prototype.getView = function() {
                return this._view
            }
            ,
            x.prototype.loadData = function() {
                return this.IY
            }
            ,
            x.prototype.wX = function() {
                return {
                    hardwareAccEnabled: U.Support.hardwareAccEnabled
                }
            }
            ,
            x.prototype.getContainer = function() {
                return this.kv
            }
            ,
            x.prototype.getSize = function() {
                var t = this._view.getStatus().size;
                return new U.Size(t[0],t[1])
            }
            ,
            x.prototype.addLayer = function(t) {
                var i, n, s;
                "d" === U.Support.baseRender && /^(AMap\.DistrictLayer)|(AMap\.MapboxLayer)$/g.test(t.CLASS_NAME) ? console.log("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。") : (t.map = this,
                i = t.getSourceConfig(),
                n = this.Mv.addSource(i, this._view.au(), t),
                t.Hh(this.Mv),
                t.Kh(n),
                s = this.Rv(t, {}),
                t.Do(s),
                this.zv.push(t),
                this.zv.sort(function(t, i) {
                    return "AMap.MarkLayer" === t.CLASS_NAME ? 1 : "AMap.MarkLayer" === i.CLASS_NAME ? -1 : t.getOptions().zIndex - i.getOptions().zIndex
                }),
                "AMap.NebulaLayer" !== t.CLASS_NAME && "AMap.TileLayer.RoadNet" !== t.CLASS_NAME || !1 === this.showLabel || "w" !== this.baseRender || this.getLayerByClass("AMap.Nebula.LabelsLayer") || (s = new Is(U.Ln(U.Ln({}, this.options), {
                    rejectMapMask: !0
                })),
                this.addLayer(s)),
                "AMap.Nebula.LabelsLayer" !== t.CLASS_NAME && "AMap.MapboxLayer" !== t.CLASS_NAME || !1 === this.showLabel || "w" !== this.baseRender || ((s = this.getLayerByClass("AMap.Inner.LabelsLayer")) ? s.oP() && s.show() : (s = new qi(U.Ln(U.Ln({}, this.options), {
                    rejectMapMask: !0
                })),
                this.addLayer(s)),
                s.getSource().addSource(i.id, n)),
                "AMap.NebulaLayer" === t.CLASS_NAME && this.yS() && !U.some(this.zv, function(t) {
                    return "AMap.Buildings" === t.CLASS_NAME
                }) && this.addLayer(new AMap.Buildings({
                    zooms: [16.8, U.zoomRange[1]],
                    rejectMapMask: !0,
                    zIndex: 10,
                    visible: !0,
                    u$: !0
                })),
                !this.c$ || U.some(this.zv, function(t) {
                    return "AMap.MaskLayer" === t.CLASS_NAME
                }) || this.d$ || (this.d$ = new xs({
                    zIndex: -10,
                    visible: !0,
                    path: this.c$
                }),
                this.addLayer(this.d$)),
                "3D" !== this.getView().type || U.some(this.zv, function(t) {
                    return "AMap.SkyLayer" === t.CLASS_NAME
                }) || this.addLayer(new gs({
                    zIndex: -1,
                    visible: !0,
                    skyColor: this.$C
                })),
                t.onAdd && t.onAdd(),
                this.d_(),
                this.setNeedUpdate(!0))
            }
            ,
            x.prototype.removeLayer = function(t) {
                for (var i, n = 0; n < this.zv.length; n++)
                    this.zv[n] === t && (this.zv.splice(n, 1),
                    t.v$ && (t.v$(),
                    "d" === U.Support.baseRender) && null != (i = t.getRender()) && i.destroy(),
                    t.map = null,
                    --n);
                this.d_(),
                this.setNeedUpdate(!0)
            }
            ,
            x.prototype.setLayers = function(t) {
                for (var i = 0; i < this.zv.length; i++)
                    "AMap.VectorLayer" !== (n = this.zv[i]).CLASS_NAME && this.removeLayer(n);
                for (var n, i = 0; i < t.length; i++)
                    (n = t[i]).setMap(this)
            }
            ,
            x.prototype.getLayers = function() {
                return this.zv.filter(function(t) {
                    return !t._opts || !t._opts.TF
                })
            }
            ,
            x.prototype.DF = function() {
                return this.zv
            }
            ,
            x.prototype.getDefaultLayer = function() {
                for (var t = this.getLayers(), i = 0; i < t.length; i++) {
                    var n = t[i];
                    if (n instanceof Yi || "_defaultLayer" === n.getLayerConfig().id)
                        return n
                }
            }
            ,
            x.prototype.getLayerByClass = function(t) {
                for (var i = this.getLayers(), n = 0; n < i.length; n++) {
                    var s = i[n];
                    if (s.CLASS_NAME === t)
                        return s
                }
            }
            ,
            x.prototype.isDOMRender = function() {
                return !U.Support.isWebGL || "d" === this.baseRender
            }
            ,
            x.prototype.isDOMMode = function() {
                return !U.Support.isWebGL || "d" === this.baseRender
            }
            ,
            x.prototype.getMapState = function() {
                return {
                    zooming: this.lt,
                    panning: this.Cv,
                    rotating: this.Lv,
                    pitching: this.gm
                }
            }
            ,
            x.prototype.getControlContainer = function() {
                return this.Tv
            }
            ,
            x.prototype.getMapsContainer = function() {
                return this.Iv
            }
            ,
            x.prototype.getStatus = function() {
                return {
                    dragEnable: this.Dv,
                    zoomEnable: this.Pv,
                    doubleClickZoom: this.fi,
                    keyboardEnable: this.jv,
                    jogEnable: this.Ov,
                    scrollWheel: this.Fv,
                    zoomSpeed: this.fZ,
                    animateEnable: this.Ev,
                    touchZoomCenter: this.Nv,
                    touchZoom: this.$v,
                    pitchEnable: this.Uv,
                    rotateEnable: this.Bv,
                    showBuildingBlock: this.m$,
                    isHotspot: this.Wv,
                    mapstyleUrl: this.c_,
                    features: this.Cw,
                    allBubble: this.HL,
                    pickWhenMoving: this.UB
                }
            }
            ,
            x.prototype.setStatus = function(t) {
                this.Dv = t.dragEnable !== undefined ? t.dragEnable : this.Dv,
                this.Pv = t.zoomEnable !== undefined ? t.zoomEnable : this.Pv,
                this.fi = t.doubleClickZoom !== undefined ? t.doubleClickZoom : this.fi,
                this.jv = t.keyboardEnable !== undefined ? t.keyboardEnable : this.jv,
                this.Ov = t.jogEnable !== undefined ? t.jogEnable : this.Ov,
                this.Fv = t.scrollWheel !== undefined ? t.scrollWheel : this.Fv,
                this.Ev = t.animateEnable === undefined ? this.Ev : t.animateEnable,
                this.Uv = t.pitchEnable === undefined ? this.Uv : t.pitchEnable,
                this.$v = t.touchZoom === undefined ? this.$v : t.touchZoom,
                this.Wv = t.isHotspot === undefined ? this.Wv : t.isHotspot,
                this.Bv = t.rotateEnable === undefined ? this.Bv : t.rotateEnable,
                this.HL = t.allBubble === undefined ? this.HL : t.allBubble
            }
            ,
            x.prototype.getBuildingColor = function() {
                return {
                    buildingColor: this.az,
                    roofColor: this.rz,
                    wallColor: this.sz
                }
            }
            ,
            x.prototype.getMask = function() {
                return this.c$
            }
            ,
            x.prototype.getOutseaDataType = function() {
                return this.QZ
            }
            ,
            x.prototype.getMapboxStyle = function() {
                return this.JG
            }
            ,
            x.prototype._setStyle = function(t) {
                this.mapStyle.setStyle(t, !1, this)
            }
            ,
            x.prototype.RY = function(t) {
                "d" !== this.baseRender && (this.mapStyle.setStyleByPlat(t, this),
                this.u0(t))
            }
            ,
            x.prototype.f_ = function(t) {
                if (!t)
                    return !1;
                "d" !== this.baseRender ? (this.c_ = t,
                this._getUserStyle(t),
                this.d_(),
                this.setNeedUpdate(!0)) : console.log("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。")
            }
            ,
            x.prototype.getProjection = function() {
                return U.ProjectionManager.getProjection(this._view.au())
            }
            ,
            x.prototype.getDefaultCursor = function() {
                return this.Zv
            }
            ,
            x.prototype.setDefaultCursor = function(t) {
                this.Zv = t,
                this.setCursor()
            }
            ,
            x.prototype.setCursor = function(t) {
                this.kv && (t = t || this.getDefaultCursor()) !== this.qv && (U.Support.$e || (this.kv.style.cursor = t),
                this.qv = t)
            }
            ,
            x.prototype.destroy = function() {
                this.G("beforeDestroy"),
                this.y$ = !0,
                this.bZ && (this.bZ.destroy(),
                delete this.bZ),
                this.x$ && (this.x$.destroy(),
                delete this.x$),
                this.gn && (this.gn.destroy(),
                delete this.gn),
                this.mapStyle && this.mapStyle.destroy && (this.mapStyle.destroy(),
                delete this.mapStyle),
                this.b$ && this.b$.destroy && (this.b$.destroy(),
                delete this.b$),
                this.$F && this.$F.destroy && (this.$F.destroy(),
                delete this.$F),
                this.wm && delete this.wm,
                this.z_ && this.z_.destory && (this.z_.destory(),
                delete this.z_),
                this._view && delete this._view,
                this.I_ && delete this.I_,
                this.yH && delete this.yH,
                this.m_ && delete this.m_,
                this.gl && delete this.gl,
                this.canvas && delete this.canvas,
                this.lcs && (this.lcs = null),
                this.Vv(),
                this.Xv(),
                this.Hv(),
                this.G("afterDestroy")
            }
            ,
            x.prototype.getLimitBounds = function() {
                return this.it
            }
            ,
            x.prototype.setLimitBounds = function(t) {
                t instanceof l ? this.it = t : this.it = new l(t)
            }
            ,
            x.prototype.clearLimitBounds = function() {
                this.it = undefined
            }
            ,
            x.prototype.getZooms = function() {
                return [Math.max(this.xt[0], U.zoomRange[0]), Math.min(U.zoomRange[1], this.xt[1])]
            }
            ,
            x.prototype.setZooms = function(t) {
                this.xt = t
            }
            ,
            x.prototype.setNeedUpdate = function(t) {
                this.zX || (this.Jv = 5,
                t && !this.Kv && (this.Kv = t,
                U.Util.cancelAnimFrame(this.Qv),
                this.Qv = 0,
                this.Eo()),
                this.Kv = t,
                this.bZ && this.bZ.MZ.yY.setNeedUpdate(t))
            }
            ,
            x.prototype.render = function() {
                this.setNeedUpdate(!0)
            }
            ,
            x.prototype.qz = function() {
                return !1 !== this.showLabel && (!this.Cw || -1 < this.Cw.indexOf("point"))
            }
            ,
            x.prototype.Qz = function() {
                return !1 !== this.showLabel && (!this.Cw || -1 < this.Cw.indexOf("road"))
            }
            ,
            x.prototype.yS = function() {
                return !!this.m$ || this.m$ === undefined && (!this.Cw || -1 < this.Cw.indexOf("building"))
            }
            ,
            x.prototype.getViewMode_ = function() {
                return this._view.type
            }
            ,
            x.prototype.fS = function() {
                return this.b$
            }
            ,
            x.prototype.XT = function(t) {
                this.QT = t
            }
            ,
            x.prototype.JF = function(t) {
                return this.mapStyle.vn ? ((t = this.mapStyle.vn.nX("00001", "1", "color", t)) && (t = U.Util.Hex2Rgba(t),
                t = U.vector.Up(t, 255)),
                this.$C || t || [.329, .549, .839, 1]) : this.$C || [.329, .549, .839, 1]
            }
            ,
            x.prototype.sX = function(t) {
                var i;
                return this.mapStyle.vn ? ((i = (i = this.mapStyle.vn.nX("00001", "2", "color", t)) || this.mapStyle.vn.nX("00001", "1", "color", t)) && (i = U.Util.Hex2Rgba(i),
                i = U.vector.Up(i, 255)),
                this.$C || i || [.329, .549, .839, 1]) : this.$C || [.329, .549, .839, 1]
            }
            ,
            x.prototype.qF = function() {
                return this.tB
            }
            ,
            x.prototype.qY = function(t, i) {
                var n;
                return t && 2 === t.length ? (n = t[0],
                this.mapStyle.dn(n, t[1], i)) : null
            }
            ,
            x.prototype.ra = function(t) {
                return {
                    2: 3,
                    3: 3,
                    4: 3,
                    5: 3,
                    6: 6,
                    7: 6,
                    8: 8,
                    9: 8,
                    10: 10,
                    11: 10,
                    12: 10,
                    13: 12,
                    14: 12,
                    15: 14,
                    16: 14,
                    17: 14,
                    18: 14,
                    19: 14,
                    20: 14,
                    21: 14,
                    22: 14
                }[t]
            }
            ,
            x.prototype.getCustomTypeByPos = function(t) {
                var i = this.ym().viewState.optimalZoom
                  , i = this.ra(i)
                  , t = [(t = t.lnglat).lng, t.lat, t.lng, t.lat];
                return U.Util.WY(t, i)
            }
            ,
            x.prototype.jH = function() {
                return this.NH
            }
            ,
            x.prototype.UH = function(t) {
                this.Mv.UH(t)
            }
            ,
            x.prototype.setHighlight = function(t, i) {
                var n;
                this.bZ && (n = this.bZ.MZ.KY) && n.setHighlight(t, i)
            }
            ,
            x.prototype.start = function() {
                this.zX = !1,
                this.setNeedUpdate(!0)
            }
            ,
            x.prototype.stop = function() {
                this.setNeedUpdate(!1),
                this.zX = !0
            }
            ,
            x.prototype.Zdt = function() {
                return this.zv.filter(function(t) {
                    return !t._opts || !t._opts.TF || "AMap.MarkLayer" === t.CLASS_NAME
                })
            }
            ,
            x.prototype.im = function() {
                return this.Mv
            }
            ,
            x.prototype.em = function(t, i, n) {
                var s, e, r, h, o, a, u, f, c;
                return void 0 === i && (i = [0, 0, 0, 0]),
                void 0 === n && (n = U.zoomRange[1]),
                t ? (u = U.ProjectionManager.getProjection(this._view.au()),
                s = U.V[this._view.au()],
                e = u.project(t[0], t[1]),
                u = [(t = u.project(t[2], t[3]))[0] - e[0], t[1] - e[1]],
                c = this.getSize().toArray(),
                r = this._view.getStatus().pitch,
                f = this._view.getStatus().rotation,
                f *= Math.PI / 180,
                o = (i[2] - i[3]) / 2,
                a = (i[0] - i[1]) / 2,
                h = o * Math.cos(f) + Math.sin(f) * a,
                o = -Math.sin(f) * o + Math.cos(f) * a,
                a = u[0],
                0 != f && (u[0] = Math.abs(u[0] * Math.cos(f)) + Math.abs(u[1] * Math.sin(f)),
                u[1] = Math.abs(u[1] * Math.cos(f)) + Math.abs(a * Math.sin(f))),
                a = Math.max(10, c[0] - i[2] - i[3]),
                f = Math.max(10, c[1] - i[0] - i[1]),
                c = Math.log(156543.03392804097 / u[0] * a) / Math.log(2),
                i = Math.log(156543.03392804097 / u[1] * f) / Math.log(2),
                a = Math.min(c, i),
                0 < r && (a -= r / 60),
                a = Math.min(a, n),
                u = [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2],
                (f = s.transform(u[0], u[1], a))[0] -= h,
                f[1] -= o,
                c = s.unproject(f[0], f[1], a),
                U.Pt(c, [a])) : [116.39708007097433, 39.874529056682476, 12]
            }
            ,
            x.prototype.nm = function(t) {
                if (0 < t.length) {
                    for (var i, n = void 0, s = 0; s < t.length; s++)
                        n ? (i = t[s].getBounds()) && n.union(i) : n = (n = t[s].getBounds()) && n.clone();
                    return n
                }
            }
            ,
            x.prototype.om = function(t, i) {
                void 0 === i && (i = !0),
                this._view && this._view.setOptions(t, i)
            }
            ,
            x.prototype.Eo = function() {
                this.zX || (this.Qv || (this.Qv = U.Util.requestAnimFrame(this.Yf.bind(this))),
                this.bZ && this.bZ.MZ.yY.to())
            }
            ,
            x.prototype.rm = function() {
                return this.hm || (this.hm = new vs,
                this.addLayer(this.hm)),
                this.hm
            }
            ,
            x.prototype.sm = function() {
                return this.$F.source
            }
            ,
            x.prototype.FY = function(t) {
                return U.Module.eS.BY ? this.getLayerByClass("AMap.Inner.LabelsLayer").vi(t, !0) : undefined
            }
            ,
            x.prototype._getUserStyle = function(t) {
                var i = this;
                t && (t = this.wmt(t),
                this.mapStyle.fn(t, this.Byt, function(t) {
                    t && (i.mapStyle = i.mapStyle,
                    i.mapStyle.pn(function(t) {
                        i.gn && i.gn.Ka({
                            value: t,
                            TY: "fast" === i.bZ.MZ.drawMode
                        })
                    }),
                    i.gn.bn(t, function() {
                        i.emit("styleChanged")
                    }),
                    i.u0(t))
                }))
            }
            ,
            x.prototype._changeStyle = function(t) {
                var s = this
                  , i = t.split("amap://styles/")[1]
                  , e = (n = AMap.getConfig()).protocol
                  , n = n.key
                  , r = ((t = -1 !== t.indexOf("?isPublic=true")) && (i = i.split("?isPublic")[0]),
                null)
                  , h = !1;
                i.length < 32 ? (h = !0,
                r = e + "://webapi.amap.com/style2?name=" + i + "&key=" + n) : (r = e + "://webapi.amap.com/v4/map/styles2?styleid=" + i + "&s=rsv3&key=" + n + (t ? "&ispublic=1" : ""),
                AMap.getConfig().jscode ? r += "&jscode=" + AMap.getConfig().jscode : AMap.getConfig().gaodeserver && (r = AMap.getConfig().gaodeserver + "/v4/map/styles2?styleid=" + i + "&s=rsv3&key=" + n + (t ? "&ispublic=1" : ""))),
                pi.JSONP(r, function(t, i) {
                    var n;
                    "complete" === t && (i = i.data) && i.data && i.data.content ? (t = JSON.parse(i.data.content),
                    n = JSON.parse(i.data.layer || "{}"),
                    s.QR = t,
                    s.mapStyle && (s.mapStyle.setStyle(t, h, s),
                    n) && s.mapStyle.vn.EY(n),
                    s.u0(i.data)) : s.emit("styleChanged")
                })
            }
            ,
            x.prototype._getMapboxStyle = function(n) {
                var s = this
                  , t = AMap.getConfig().protocol;
                pi.Ajax(t + "://a.amap.com/jsapi/static/json/web_v8_2.0_" + n + ".json", {
                    type: "GET",
                    requestContentType: "application/json"
                }, function(t, i) {
                    "complete" === t ? (i = i.data,
                    s.JG = {
                        styles: i,
                        vectorMapForeign: n
                    },
                    s.gn && s.gn.Ha({
                        QG: s.JG
                    }),
                    s.Eo()) : s.JG = null
                })
            }
            ,
            x.prototype.wmt = function(t) {
                var i = './amap/jsapi/2.0.1';
                return t && (this.Byt = t.split("amap://styles/")[1]),
                i
            }
            ,
            x.prototype.Syt = function(t, i) {
                t = "https://jsapi.amap.com/web/map/sytles?styleId=" + t + "&key=" + AMap.getConfig().key,
                t = pi.sendRequest(t, "GET");
                try {
                    if (null !== t) {
                        var n = JSON.parse(t);
                        if (n && n.cus_style)
                            try {
                                this.Tyt = n.cus_style
                            } catch (s) {
                                console.log("Error parsing style:", s.message)
                            }
                        else
                            console.log("Parsed response is null or undefined.")
                    } else
                        console.log("自定义地图服务查询失败！！")
                } catch (e) {
                    console.log("自定义地图服务查询失败:", e.message)
                }
                return this.Tyt
            }
            ,
            x.prototype.um = function(t) {
                for (var i = 0, n = t.length; i < n; i += 1)
                    this.addLayer(t[i])
            }
            ,
            x.prototype.u0 = function(t) {
                var i = this;
                t && t.third_layer && U.Module.module("AMap.StyleParser", function() {
                    setTimeout(function() {
                        i.y$ || (i.f0 || (i.f0 = new AMap.StyleParser(i)),
                        i.emit("styleLoaded", t))
                    }, 0)
                })
            }
            ,
            x.prototype.cm = function() {
                var n = this
                  , t = (w.addClass(this.kv, "amap-container"),
                this.l0 = w.watchSize(this.kv, function(t, i) {
                    n.om({
                        size: [t, i]
                    })
                }, this),
                this.kv)
                  , i = (!1 === this.options.showMapGrid && (this.kv.style.backgroundImage = "none"),
                this.Iv = w.create("div", null, "amap-maps"),
                this["do"] = w.create("div", this.Iv, "amap-layers"),
                this.fm = w.create("div", this.Iv, "amap-overlays"),
                t.appendChild(this.Iv),
                this.Tv = w.create("div", this.kv, "amap-controls"),
                this.Iv.tabIndex = 0,
                {});
                i.p_ = w.create("a", t, "amap-logo"),
                w.create("img", i.p_).src = "/amap/images/logo@2x.png",
                i.v_ = w.create("div", t, "amap-copyright"),
                i.v_.style.display = "none",
                350 < w.getViewport(this.kv)[0] && (i.v_.innerHTML = AMap.getConfig().v_,
                i.v_.mapNumber = w.create("span", i.v_, "amap-mcode")),
                this.m_ = i
            }
            ,
            x.prototype.d_ = function() {
                var t = this.getLayers();
                if (t) {
                    for (var i = -1, n = "", s = 0; s < t.length; s += 1) {
                        var e = t[s].get("mapNumber")
                          , r = t[s].get("zIndex");
                        e && i < r && t[s].get("visible") && (n = e,
                        i = r)
                    }
                    var h = this.c_;
                    return (n = !this.g$ || "GS(2024)1158" === n && h && "normal" !== h && "amap://styles/normal" !== h ? "" : n) && this.tE !== n && this.m_ && this.m_.v_ && this.m_.v_.mapNumber && (this.m_.v_.mapNumber.innerHTML = "- " + n + "号"),
                    this.tE = n
                }
            }
            ,
            x.prototype.pm = function(t) {
                var i = {
                    size: w.getViewport(this.kv),
                    zoom: t.zoom,
                    center: t.center,
                    rotation: t.rotation,
                    projectionId: t.projection,
                    pitch: t.pitch
                };
                return new (t.viewMode && "3D" === t.viewMode ? Bn : Rn)(i,this)
            }
            ,
            x.prototype.dm = function() {}
            ,
            x.prototype.Hv = function() {
                for (w.remove(this.Iv),
                delete this.Iv,
                this["do"] && (w.remove(this["do"]),
                delete this["do"]),
                this.Tv && (w.remove(this.Tv),
                delete this.Tv),
                this.fm && (w.remove(this.fm),
                delete this.fm),
                this.l0 && (this.l0(),
                delete this.l0); this.kv && this.kv.firstChild; )
                    this.kv.removeChild(this.kv.firstChild);
                this.kv && delete this.kv,
                Zs.cache && (Zs.cache = {})
            }
            ,
            x.prototype.Vv = function() {
                this.pi && (this.pi.destroy(),
                delete this.pi),
                this.di && (this.di.destroy(),
                delete this.di),
                this.vm && (this.vm.destroy(),
                delete this.vm)
            }
            ,
            x.prototype.Xv = function() {
                this.mm && this.mm.destroy && (this.mm.destroy(),
                delete this.mm);
                for (var t = 0, i = this.getLayers(); t < i.length; t++)
                    i[t].destroy();
                this.so && this.so.destroy(),
                this.R_ && (this.R_.destroy(),
                delete this.R_),
                this.zv = [],
                this.Mv && this.Mv.destroy && (this.Mv.destroy(),
                delete this.Mv)
            }
            ,
            x.prototype.ym = function() {
                var t = this._view.getStatus();
                return {
                    debug: this.debug,
                    layers: this.zv,
                    uo: this.Mv,
                    size: t.size,
                    "do": this["do"],
                    viewState: t,
                    map: this
                }
            }
            ,
            x.prototype.Yf = function() {
                if (!this.zX && (this.w$(),
                !this.y$)) {
                    if (Hs.VZ())
                        for (var t = 0, i = this.ym().layers; t < i.length; t++) {
                            var n, s = i[t];
                            s.getRender() || (n = this.Rv(s, {}),
                            s.Do(n))
                        }
                    this.pi && this.pi.iy({}),
                    this.di && this.di.iy({});
                    var e = this.ym();
                    if (this.bm(e),
                    this.tB = (new Date).getTime(),
                    this.Mv.loadData(e.viewState, this, this.mm ? this.mm.context : null),
                    this.mm && this.mm.renderFrame(e),
                    this.Jv && this.Kv)
                        this.Qv = U.Util.requestAnimFrame(this.Yf.bind(this));
                    else if ((this.Jv <= 0 || !this.Kv) && (this.Kv = !1,
                    U.Util.cancelAnimFrame(this.Qv),
                    this.Qv = 0,
                    this.gm || this.Lv || this.lt || this.Cv)) {
                        if (this.lt && -1 !== this.k$) {
                            if ("d" === U.Support.baseRender && 0 <= this.k$) {
                                if (this.KT(),
                                !this.tD)
                                    return void (this.tD = !0);
                                this.tD = !1
                            }
                            this.G("zoomend", {
                                target: e.map
                            })
                        }
                        this.Cv && -1 !== this._$ && this.G("moveend", {
                            target: e.map
                        }),
                        this.Lv && -1 !== this.M$ && this.G("rotateend"),
                        this.gm && -1 !== this.S$ && this.G("pitchend"),
                        this.Lv = !1,
                        this.gm = !1,
                        this.lt = !1,
                        this.Cv = !1,
                        this.Qv || (this.Mv.loadData(e.viewState, this, this.mm ? this.mm.context : null),
                        this.mm && this.mm.renderFrame(e))
                    }
                    this.Jv--
                }
            }
            ,
            x.prototype.bm = function(t) {
                var i = t.viewState
                  , s = (n = this.wm).center
                  , e = n.rotation
                  , r = n.zoom
                  , n = n.pitch
                  , h = i.center
                  , o = i.zoom
                  , a = i.rotation
                  , u = i.pitch;
                if (s[0] !== h[0] || s[1] !== h[1] ? (this._$ = 1,
                this.Cv || this.G("movestart", {
                    target: t.map
                }),
                this.Cv = !0,
                this.G("mapmove", {
                    target: t.map
                })) : 1 <= this._$ && this._$++,
                r !== o ? (this.lt || this.G("zoomstart", {
                    target: t.map
                }),
                this.G("zoomchange", {
                    target: t.map
                }),
                this.lt = !0,
                this.k$ = 1) : 1 <= this.k$ && this.k$++,
                e !== a ? (this.Lv || this.G("rotatestart"),
                this.G("rotatechange"),
                this.Lv = !0,
                this.M$ = 1) : 1 <= this.M$ && this.M$++,
                n !== u ? (this.gm || this.G("pitchstart"),
                this.G("pitchchange"),
                this.gm = !0,
                this.S$ = 1) : 1 <= this.S$ && this.S$++,
                5 <= this._$ && (this.Cv = !1,
                this._$ = -1,
                this.G("moveend", {
                    target: t.map
                })),
                5 <= this.k$ && (this.lt = !1,
                this.k$ = -1,
                this.G("zoomend", {
                    target: t.map
                })),
                5 <= this.M$ && (this.Lv = !1,
                this.M$ = -1,
                this.G("rotateend")),
                5 <= this.S$ && (this.gm = !1,
                this.S$ = -1,
                this.G("pitchend")),
                "d" === U.Support.baseRender && 4 <= this.k$) {
                    if (this.KT(),
                    !this.tD)
                        return void (this.tD = !0);
                    this.tD = !1
                }
                this.Qv || this.mm && (this.Mv.loadData(t.viewState, this, this.mm.context),
                this.mm.renderFrame(t)),
                this.wm = i
            }
            ,
            x.prototype.G = function(t, i) {
                this.emit(t, i = void 0 === i ? {} : i)
            }
            ,
            x.prototype.Rm = function() {
                var r = this;
                this.on("styleChanged", function() {
                    if (r.kv) {
                        var t = void 0
                          , i = (t = r.options.backgroundColor || (r.mapStyle && (i = "fast" === r.bZ.MZ.drawMode ? U.Util.getOptimalZoom(r.getZoom()) : r.getZoom(),
                        i = r.mapStyle.dn(30001, 1, i)) && i.faceColor ? ((t = i.faceColor.rgba.slice(0))[3] = t[3] / 255,
                        "rgba( " + t.join(",") + ")") : "#f7f7f7"),
                        r.kv.style.backgroundColor = t,
                        r.mapStyle.vn.nX("00001", "3", "visible", 10))
                          , t = r.mapStyle.vn.nX("00001", "3", "lineColor", 10);
                        i && t ? (t = U.Util.Hex2Rgba(t),
                        (t = Js.oX(t)) && (r.kv.style.backgroundImage = t,
                        r.kv.style.backgroundSize = "100px 100px")) : !1 === i && (r.kv.style.backgroundImage = "none");
                        for (var n = 0, s = r.zv; n < s.length; n++) {
                            var e = s[n];
                            U.qG(e) && e.sl()
                        }
                    }
                    r.xm = !0,
                    r.Eo()
                }),
                this.on("repaint", function() {
                    r.Eo()
                })
            }
            ,
            x.prototype.w$ = function() {
                var t = this;
                this.R$ || ("d" === this.baseRender ? (this.R$ = !0,
                U.Module.module("DomRender", function() {
                    setTimeout(function() {
                        t.y$ || (t.mm = new U.Module.DomRender(t),
                        t.Eo())
                    }, 0)
                })) : (this.R$ = !0,
                U.Module.module("WebGLRender", function() {
                    setTimeout(function() {
                        t.y$ || (AMap.Browser.isWebGL && !t.KZ ? (t.KZ = !0,
                        t.mm = new U.Module.WebGLRender(t),
                        t.I_ = new ms(t),
                        t.yH = new U.LH(t,t.I_,t.gn),
                        t.Eo()) : t.R$ = !1)
                    }, 0)
                })))
            }
            ,
            x.prototype.Rv = function(t, i) {
                return this.isDOMMode() ? Hs.JZ[t.CLASS_NAME] ? new Hs.JZ[t.CLASS_NAME](this,t) : undefined : Hs.YZ[t.CLASS_NAME] ? new Hs.YZ[t.CLASS_NAME] : undefined
            }
            ,
            x.prototype.KT = function() {
                var e, r, h, o, a, u, f = this, t = this._view.getStatus(), c = t.zoom, l = t.centerCoord, d = c, p = 0;
                0 != (p = (d = this.bo > c ? Math.floor(c) : Math.ceil(c)) - c) && (this.bo = d,
                e = U.V[this._view.au()],
                r = 200 * Math.abs(p) + 100,
                h = new V(0,.6,.15,1),
                u = o = 0,
                a = function() {
                    o += 16;
                    var t = f._view.getStatus().zoom
                      , i = c + p * h.h(o / r)
                      , t = (r < o && (i = d),
                    e.nt(f.QT[0], f.QT[1], t))
                      , s = (n = e.nt(f.QT[0], f.QT[1], i))[0] - t[0] + l[0]
                      , n = n[1] - t[1] + l[1]
                      , t = f.getProjection().unproject(s, n);
                    f.setZoomAndCenter(i, t, !0),
                    d <= i && 0 < p || p < 0 && i <= d ? (f.setZoom(d, !0),
                    U.Util.cancelAnimFrame(u)) : o < r && (u = U.Util.requestAnimFrame(a))
                }
                ,
                u = U.Util.requestAnimFrame(a))
            }
            ,
            x.prototype.iB = function() {
                window.onbeforeload = this.destroy,
                window.onunload = this.destroy,
                window.onbeforeunload = this.destroy
            }
            ,
            x.t_ = [2, 20];
            var Ks, Qs = x;
            function x(t, i) {
                var n = Ks.call(this) || this
                  , s = (n.className = "AMap.Map",
                n.so = new os,
                n.lcs = U.lcs,
                n.debug = !1,
                n.complete = !1,
                n.Kv = !1,
                n.controls = [],
                n.langForeign = "zh_cn",
                n.fE = !0,
                n.IY = "normal",
                n.kmt = "",
                n.Byt = "",
                n.Lyt = "",
                n.Tyt = "",
                n.c_ = "",
                n.Eyt = !1,
                n.jyt = null,
                n.az = [.92, .92, .9, .9],
                n.sz = [.94, .94, .94, .9],
                n.rz = [.94, .94, .94, .9],
                n.$C = [.329, .549, .839, 1],
                n.Ov = !0,
                n.Dv = !0,
                n.Pv = !0,
                n.Fv = !0,
                n.fZ = 1,
                n.fi = !0,
                n.jv = !0,
                n.Ev = !0,
                n.Uv = !0,
                n.Bv = !0,
                n.$v = !0,
                n.Nv = 0,
                n.Sm = !1,
                n.Zv = "default",
                n.qv = "",
                n.xt = [2, 20],
                n.YG = !1,
                n.QZ = "",
                n.zv = [],
                n.A$ = !1,
                n.R$ = !1,
                n.Qv = 0,
                n.f0 = undefined,
                n.xm = !1,
                n.lt = !1,
                n.Cv = !1,
                n.Lv = !1,
                n.gm = !1,
                n.km = 0,
                n.Jv = 5,
                n.y$ = !1,
                n.Wv = !U.Support.$e,
                n.g$ = !0,
                n.tB = (new Date).getTime(),
                n._$ = -1,
                n.M$ = -1,
                n.S$ = -1,
                n.k$ = -1,
                n.HL = !1,
                n.bo = 10,
                n.tD = !1,
                n.QT = [0, 0],
                n.UB = !1,
                n.tE = "",
                n.KZ = !1,
                n.zX = !1,
                U.Support.hardwareAccEnabled || console && console.log && console.log("检测到您已关闭硬件加速模式，开启以获得更好的体验！"),
                n.kmt = n.wmt(i.mapStyle),
                n.Rm(),
                n.options = i,
                n.xX = i.cacheSize,
                n.g$ = i.I$ === undefined ? n.g$ : i.I$,
                n.az = U.Util.color2RgbaArray(i.buildingColor = i.buildingColor),
                n.sz = U.Util.color2RgbaArray(i.wallColor),
                n.rz = U.Util.color2RgbaArray(i.roofColor),
                n.$C = U.Util.color2RgbaArray(i.skyColor),
                n.Dv = i.dragEnable === undefined ? n.Dv : i.dragEnable,
                n.Pv = i.zoomEnable === undefined ? n.Pv : i.zoomEnable,
                n.Fv = i.scrollWheel === undefined ? n.Fv : i.scrollWheel,
                n.fZ = i.zoomSpeed === undefined ? n.fZ : i.zoomSpeed,
                n.Ov = i.jogEnable === undefined ? n.Ov : i.jogEnable,
                n.fi = i.doubleClickZoom === undefined ? n.fi : i.doubleClickZoom,
                n.jv = i.keyboardEnable === undefined ? n.jv : i.keyboardEnable,
                n.Ev = i.animateEnable === undefined ? n.Ev : i.animateEnable,
                n.Uv = i.pitchEnable === undefined ? n.Uv : i.pitchEnable,
                n.$v = i.touchZoom !== undefined ? i.touchZoom : n.$v,
                n.Nv = i.touchZoomCenter !== undefined ? i.touchZoomCenter : n.Nv,
                n.Zv = i.defaultCursor || n.Zv,
                n.QZ = i.overseaDataType || n.QZ,
                n.IY = i.loadData || "normal",
                n.Wdt = i.poiIcon,
                i.limitBounds && n.setLimitBounds(i.limitBounds),
                n.Sm = i.Lm || !1,
                n.xt = i.zooms || n.xt,
                n.bo = i.zoom || n.bo,
                n.baseRender = U.Support.baseRender,
                i.viewMode = "d" === U.Support.baseRender ? "2D" : i.viewMode,
                n.Bv = !("3D" !== i.viewMode),
                n.Bv = i.rotateEnable === undefined ? n.Bv : i.rotateEnable,
                n.debug = i.debug || !1,
                n.m$ = "3D" === i.viewMode && i.showBuildingBlock,
                n.Wv = "undefined" == typeof i.isHotspot ? n.Wv : i.isHotspot,
                n.UB = "undefined" == typeof i.pickWhenMoving ? n.UB : i.pickWhenMoving,
                n.fE = "undefined" == typeof i.asyncOverlay ? n.fE : i.asyncOverlay,
                n.showLabel = "undefined" == typeof i.showLabel || Boolean(i.showLabel),
                n.Cw = i.features || ["bg", "point", "road", "building"],
                n.c$ = i.mask,
                n.Pyt = i.mapDataSet,
                n.Nyt = i.preDomain,
                n.NH = i.labelRejectMask !== undefined && Boolean(i.labelRejectMask),
                n.bZ = new Bs({
                    lY: new U.MY,
                    gY: new Ds,
                    yY: new U.wY({
                        check: function() {
                            return !!n.bZ && n.bZ.MZ.lY.xY()
                        },
                        render: function() {
                            if (n.TL())
                                return !1;
                            n.bZ && n.bZ.MZ.lY.exec(20)
                        }
                    }),
                    drawMode: i.drawMode || "normal",
                    tY: new Gs({
                        Fz: ["default"]
                    }),
                    KY: new $s(n)
                }),
                n.WebGLParams = i.WebGLParams === undefined ? {} : i.WebGLParams,
                "d" !== n.baseRender ? (n.bZ.dynamic.subscribe("firstPaint", function() {
                    n.emit("firstPaint", U.Support.amapRunTime)
                }, n, !0),
                n.bZ.MZ.lY.on("taskclear", function() {
                    n.setNeedUpdate(!0)
                }),
                n.bZ.MZ.lY.register("SDFCombine", function(t) {
                    return new Rs(n.bZ.MZ.gY,t)
                }, {
                    kY: 10
                }),
                n.bZ.MZ.lY.register("LangSDF", function(t) {
                    return new Xn(n.R_.yG,t)
                }, {
                    kY: 10
                }),
                n.mapStyle = new Gn(n),
                n.mapStyle.pn(function() {
                    n.emit("styleChanged")
                }),
                n.Eo(),
                s = n.z_ = new Vn,
                n.gn = new hs(n),
                n.R_ = new Yn(s,n),
                n.x$ = new js(n)) : (n.z_ = new Vn,
                n.R_ = new U.vG,
                n.emit("styleChanged")),
                i.langForeign && (n.langForeign = i.langForeign),
                n.gn && n.gn.Ha({
                    langForeign: n.langForeign
                }),
                t && (t.amap && t.amap.destroy(),
                t.amap = n),
                n.kv = t,
                n.isDOMMode() && (i.zoom = i.zoom && 18 < i.zoom ? 18 : i.zoom),
                n._view = n.pm(i),
                n.b$ = new ks(n),
                n.Mv = new Ni(n),
                n.c_ = i.mapStyle || "normal",
                n.QR = null,
                U.Support.isWebGL)
                  , t = AMap.getConfig().y_
                  , i = i.layers || []
                  , e = (n.cm(),
                s && "d" !== n.baseRender && (n.canvas = w.create("canvas", n["do"], "amap-layer"),
                n.canvas.width = 0,
                n.canvas.height = 0,
                n.gl = U.Support.getContext(n.canvas, n.WebGLParams)),
                n.w$(),
                0 === i.length ? n.isDOMMode() ? (n.bo = 18 < n.bo ? 18 : n.bo,
                e = [n.xt[0], n.xt[1]],
                n.xt[0] = 2 < e[0] ? e[0] : 2,
                n.xt[1] = 18 < e[1] ? 18 : e[1],
                n.addLayer(new p({
                    id: "_defaultLayer",
                    tileUrl: t
                })),
                n.Bv = !1) : s && n.addLayer(new Yi({
                    cacheSize: n.xX
                })) : n.um(i),
                n.d_(),
                n.$F = new ts({
                    map: n
                }),
                n.addLayer(n.$F),
                n._view.getStatus());
                return n.wm = e,
                n.setCursor(n.Zv),
                AMap.getConfig().keytype && "1" === AMap.getConfig().keytype && (n.isDOMMode() ? n.addLayer(new p.Mark({})) : n.addLayer(new AMap.Mark({
                    zIndex: 8,
                    opacity: 1,
                    map: n
                }))),
                n
            }
            te.prototype.setHighlight = function(t, i) {
                this.mainKey = t,
                this.subKey = i,
                this._Y.setNeedUpdate(!0)
            }
            ,
            te.prototype.destroy = function() {
                this.map.off("hotspotclick", this.$Y),
                this.map.off("hotspotover", this.$Y),
                this.map.off("hotspotout", this.tX)
            }
            ,
            te.prototype.$Y = function(t) {
                this.iX = t.id,
                this.map.setNeedUpdate(!0)
            }
            ,
            te.prototype.tX = function(t) {
                this.iX = "",
                this.map.setNeedUpdate(!0)
            }
            ;
            var $s = te;
            function te(t) {
                var i = this;
                this.map = t,
                this.mainKey = -2,
                this.subKey = [],
                this.iX = "",
                this.$Y = this.$Y.bind(this),
                this.tX = this.tX.bind(this),
                this.map.on("hotspotclick", this.$Y),
                this.map.on("hotspotover", this.$Y),
                this.map.on("hotspotout", this.tX),
                this.GY = Date.now(),
                this.NY = 0,
                this.UY = !0,
                this._Y = new U.wY({
                    check: function() {
                        return -1 < i.mainKey
                    },
                    render: function() {
                        var t = Date.now() - i.GY;
                        i.NY = 2400 < t % 3e3 ? 0 : .5 - Math.abs(t % 3e3 / 2400 - .5),
                        i.map.setNeedUpdate(!0)
                    }
                }),
                this._Y.setNeedUpdate(!0)
            }
            ne.prototype.setImageSize = function(t) {
                t instanceof U.Size && (t = t.toArray()),
                this._opts.imageSize = t
            }
            ,
            ne.prototype.getImageSize = function() {
                var t = this._opts.imageSize
                  , i = this.Om;
                return t || (i.length ? i : [])
            }
            ,
            ne.prototype.setSize = function(t) {
                t instanceof U.Size && (t = t.toArray()),
                this._opts.size = t
            }
            ,
            ne.prototype.getSize = function() {
                return this._opts.size
            }
            ,
            ne.prototype.setImageOffset = function(t) {
                t instanceof U.Pixel && (t = t.toArray()),
                this._opts.imageOffset = t
            }
            ,
            ne.prototype.getImageOffset = function() {
                return this._opts.imageOffset || [0, 0]
            }
            ,
            ne.prototype.getImage = function() {
                return this._opts.image
            }
            ,
            ne.prototype.setImage = function(t) {
                this._opts.image = t
            }
            ,
            ne.prototype.Fm = function() {
                return this.Om || []
            }
            ,
            ne.prototype.Em = function(t) {
                t instanceof U.Size && (t = t.toArray()),
                this.Om = t
            }
            ;
            var ie = ne;
            function ne(t) {
                this.CLASS_NAME = "AMap.Icon",
                this._opts = {
                    size: [0, 0],
                    imageOffset: new U.Pixel(0,0),
                    image: AMap.getConfig().protocol + "://webapi.amap.com/theme/v1.3/markers/0.png"
                },
                this.Om = [];
                var i = t.size
                  , n = t.imageSize
                  , s = t.image
                  , t = t.imageOffset;
                i && this.setSize(i),
                n && this.setImageSize(n),
                t && this.setImageOffset(t),
                s && this.setImage(s)
            }
            var se, ee = "AMap.Overlay", Kt = (se = U.Event,
            U.Ei(re, se),
            re);
            function re() {
                var t = null !== se && se.apply(this, arguments) || this;
                return t.type = ee,
                t.className = ee,
                t
            }
            he = U.Event,
            U.Ei(oe, he);
            var he;
            function oe() {
                var t = null !== he && he.apply(this, arguments) || this;
                return t.type = ee,
                t.className = ee,
                t
            }
            var ae, ue = {
                _dt: function(t) {
                    return !!(window && window._AMapConfig && window._AMapConfig.wiaBizToken) && !!(t && t[0] && "string" == typeof t[0] && -1 < t[0].indexOf("WIA"))
                },
                Ydt: function(e) {
                    return U.T8t(this, void 0, void 0, function() {
                        var i, n;
                        return U.x8t(this, function(t) {
                            return i = "http://dev-restapi.amap.com/api/v1/wia/point/get/lonlat?s=rsv3&key=" + AMap.getConfig().key + "&bizToken=" + window._AMapConfig.wiaBizToken,
                            (n = AMap.getConfig()).jscode && (i += "&jscode=" + n.jscode),
                            [2, new Promise(function(n, s) {
                                pi.Ajax(i, {
                                    requestContentType: "application/json",
                                    type: "POST",
                                    content: JSON.stringify({
                                        wiaLonLat: e
                                    })
                                }, function(t, i) {
                                    i && i.data && (i = JSON.parse(i.data)) && i.data && i.data.list && i.data.list[0] ? (i = i.data.list[0],
                                    i = new AMap.LngLat(i.lon,i.lat),
                                    n([i.lng, i.lat])) : s("error")
                                })
                            }
                            )]
                        })
                    })
                }
            }, fe = "AMap.DOMOverlay", ve = {
                top: "top",
                right: "right",
                bottom: "bottom",
                left: "left",
                Nm: "top-left",
                $m: "top-center",
                Um: "top-right",
                Bm: "middle-left",
                center: "center",
                Wm: "middle-right",
                Gm: "bottom-left",
                Zm: "bottom-center",
                qm: "bottom-right"
            }, me_Ym = "viewchange", ye = [10, 0, 0, 0], be = {
                map: null,
                visible: !0,
                offset: [0, 0],
                anchor: "top-left",
                rotate: 0,
                orientation: null,
                scale: 1,
                zooms: U.zoomRange,
                noSelect: !1,
                innerOverlay: !1,
                isCustom: !1
            }, si = (ae = oe,
            U.Ei(ge, ae),
            ge.prototype.getOptions = function() {
                return this._options
            }
            ,
            ge.prototype.add = function(t) {
                for (var i = this._map, n = 0, s = t = void 0 === t ? [] : t; n < s.length; n++)
                    s[n].add(i)
            }
            ,
            ge.prototype.remove = function(t) {
                for (var i = 0, n = t = void 0 === t ? [] : t; i < n.length; i++)
                    n[i].remove()
            }
            ,
            ge.prototype.updateOverlay = function(t) {
                if (t)
                    for (var i = 0, n = t; i < n.length; i++)
                        n[i].updateOverlay();
                else {
                    var s, e = !this.aZ && this.viewChange, r = (this.aZ = !1,
                    this._overlays);
                    for (s in r)
                        r.hasOwnProperty(s) && r[s].updateOverlay({
                            viewChange: e
                        })
                }
            }
            ,
            ge.prototype.iy = function(t) {
                this.updateOverlay()
            }
            ,
            ge.prototype.addToGroup = function(t) {
                var i = this._container
                  , n = this._overlays
                  , s = t.hS;
                i.appendChild(t.dom),
                n[s] = t
            }
            ,
            ge.prototype.removeFromGroup = function(t) {
                var i = this._container
                  , n = this._overlays
                  , s = t.hS;
                i.removeChild(t.dom),
                delete n[s]
            }
            ,
            ge.prototype.vi = function(t) {
                return null
            }
            ,
            ge.prototype.destroy = function() {
                this.ey();
                var t, i = this._overlays;
                for (t in i)
                    i.hasOwnProperty(t) && i[t].remove();
                this._overlays = {},
                this._container && w.remove(this._container)
            }
            ,
            ge.prototype.getAllOverlays = function() {
                var t, i, n = this._overlays, s = [];
                for (t in n)
                    n.hasOwnProperty(t) && (i = n[t]) && s.push(i);
                return s
            }
            ,
            ge.prototype.ny = function() {
                this._map
            }
            ,
            ge.prototype.ey = function() {
                var t = this._map
                  , i = me_Ym;
                t.off(i, this.iy)
            }
            ,
            ge);
            function ge(t, i) {
                void 0 === i && (i = {});
                var n = ae.call(this) || this
                  , t = (n.type = "AMap.DOMOverlayGroup",
                n.viewChange = !1,
                n.aZ = !1,
                n._options = {
                    zIndex: 120
                },
                n._overlays = {},
                (n._map = t).kv)
                  , t = (n._parent = t.querySelector(".amap-layers"),
                i.className);
                return n._className = t,
                n.iy = n.iy.bind(n),
                n.ny(),
                n
            }
            Me = Kt,
            U.Ei(A, Me),
            Object.defineProperty(A.prototype, "CLASS_NAME", {
                get: function() {
                    return this.className
                },
                eb: !1,
                nb: !0
            }),
            A.prototype.getMap = function() {
                return this._map || null
            }
            ,
            A.prototype.setMap = function(t) {
                t instanceof rr ? this.add(t) : null == t && this.remove()
            }
            ,
            A.prototype.addTo = function(t) {
                this.add(t)
            }
            ,
            A.prototype.add = function(t) {
                t && (this._add(t),
                this._parent) && (this._parent.addToGroup(this),
                this.updateOverlay())
            }
            ,
            A.prototype.remove = function() {
                this._map && this._parent && (this._parent.removeFromGroup(this),
                this._remove())
            }
            ,
            A.prototype.show = function() {
                this._opts.visible = !0,
                this.updateOverlay()
            }
            ,
            A.prototype.hide = function() {
                this._opts.visible = !1,
                this.updateOverlay()
            }
            ,
            A.prototype.getPosition = function() {
                var t = this._position;
                return t ? U.Bs(t) ? t : new U.LngLat(t[0],t[1]) : null
            }
            ,
            A.prototype.setPosition = function(t) {
                this._position = t,
                this.updateOverlay()
            }
            ,
            A.prototype.getAnchor = function() {
                return this._opts.anchor || ve.Nm
            }
            ,
            A.prototype.setAnchor = function(t) {
                t && (this._opts.anchor = t,
                this.updateOverlay())
            }
            ,
            A.prototype.getOffset = function() {
                var t = this._opts.offset || [0, 0];
                return new U.Pixel(t[0],t[1])
            }
            ,
            A.prototype.setOffset = function(t) {
                t && (t instanceof Array || t.x === undefined || t.y === undefined || (this._opts.offset = [t.x, t.y]),
                this.updateOverlay())
            }
            ,
            A.prototype.getAngle = function() {
                return this._opts.rotate || 0
            }
            ,
            A.prototype.setAngle = function(t) {
                this._opts.rotate = t,
                this.updateOverlay()
            }
            ,
            A.prototype.getOrientation = function() {
                return this._opts.orientation
            }
            ,
            A.prototype.setOrientation = function(t) {
                "number" == typeof t ? (this._opts.orientation = t,
                this._opts.rotate = this.dP(t)) : (this._opts.orientation = undefined,
                this._opts.rotate = 0),
                this.updateOverlay()
            }
            ,
            A.prototype.getSize = function() {
                return this._getSize()
            }
            ,
            A.prototype.setSize = function(t) {
                this._opts.size = U.ay(t) ? t.toArray() : t,
                this.updateOverlay()
            }
            ,
            A.prototype.getzIndex = function() {
                return this._opts.zIndex
            }
            ,
            A.prototype.setzIndex = function(t) {
                this._opts.zIndex = t,
                this.updateOverlay()
            }
            ,
            A.prototype.getOptions = function() {
                return this._opts
            }
            ,
            A.prototype.getContent = function() {
                return this._opts.content || ""
            }
            ,
            A.prototype.setContent = function(t) {
                this._opts.content = t = void 0 === t ? "" : t,
                this._size = [0, 0],
                this._removeContent(),
                this._createDom(this.dom, t),
                this.updateOverlay()
            }
            ,
            A.prototype.getBounds = function() {
                var t = this._position;
                return new l(t,t)
            }
            ,
            A.prototype.getVisible = function() {
                return "undefined" == typeof this._opts.visible || this._opts.visible
            }
            ,
            A.prototype.updateOverlay = function(t) {
                t = void 0 !== (t = (t = void 0 === t ? {} : t).viewChange) && t,
                this._map && this._setStyle(t) && this._applyStyle(t)
            }
            ,
            A.prototype.uZ = function(t) {
                t = void 0 !== (t = (t = void 0 === t ? {} : t).viewChange) && t,
                this._map && (this._setStyle(t),
                this._applyStyle(t))
            }
            ,
            A.prototype.destroy = function() {
                this.dom && w.remove(this.dom)
            }
            ,
            A.prototype.getCursor = function() {
                return this._map ? this._map.getDefaultCursor() : undefined
            }
            ,
            A.prototype.getContentDom = function() {
                return this.dom
            }
            ,
            A.prototype._add = function(t) {}
            ,
            A.prototype._remove = function() {
                this._map = null,
                this._parent = null
            }
            ,
            A.prototype._createContainer = function() {
                var t = document.createElement("div");
                return w.addClass(t, this._className),
                t
            }
            ,
            A.prototype._createDefaultInnerDom = function() {
                return document.createElement("div")
            }
            ,
            A.prototype._setStyle = function(t) {
                void 0 === t && (t = !1);
                var i = this._position
                  , i = this._points = this._map && i && this._map.lngLatToContainer(i).toArray()
                  , n = (this._map && this._map.getRotation(),
                this._style)
                  , s = this._map && this._map.getZoom()
                  , e = this._opts.zooms || [2, 20]
                  , r = "undefined" == typeof this._opts.visible || this._opts.visible
                  , s = s && (s < e[0] || s > e[1])
                  , e = n.visible
                  , r = (void 0 !== r && (n.visible = r),
                r && (n.visible = !s),
                this.ZF(i));
                n.visible && (n.visible = !r);
                var r = (s = this._opts).zIndex
                  , h = void 0 === (h = s.anchor) ? ve.Nm : h
                  , o = void 0 === (o = s.offset) ? [0, 0] : o
                  , a = s.rotate
                  , u = s.scale
                  , f = s.noSelect
                  , c = [0, 0];
                return "number" == typeof (s = s.orientation) ? n.rotate = this.dP(s) : void 0 !== a && (n.rotate = a),
                e !== n.visible && this._map && (this._map.render(),
                this._parent) ? !(this._parent.aZ = !0) : (t ? i && (n.left = i[0] + "px",
                n.top = i[1] + "px",
                c = n.translate) : (this._getContentSize(),
                (s = this._getStyleZIndex(r)) && (n.zIndex = s),
                void 0 !== u && (n.scale = u),
                i && (n.left = i[0] + "px",
                n.top = i[1] + "px"),
                (h || o) && (c = this._getOffset(h, o),
                n.translate = c,
                n.transformOrigin = -c[0] + "px " + -c[1] + "px"),
                n.pointerEvents = !0 === f ? "none" : "auto"),
                a = "translate(" + c[0] + "px, " + c[1] + "px) scale(" + n.scale + ") rotate(" + n.rotate + "deg)",
                U.Support.ie && (n.msTransform = a),
                n.transform = a,
                !0)
            }
            ,
            A.prototype._getStyleZIndex = function(t) {
                return t
            }
            ,
            A.prototype._getSize = function() {
                var i = (t = (t = this._opts.size || [])instanceof U.Size ? t.toArray() : t)[0]
                  , t = void 0 === (t = t[1]) ? 0 : t
                  , s = (n = this._size)[0]
                  , n = n[1];
                return [(void 0 === i ? 0 : i) || (void 0 === s ? 0 : s), t || (void 0 === n ? 0 : n)]
            }
            ,
            A.prototype._getContentSize = function() {
                var t = this._style
                  , i = this._getSize()
                  , n = 0
                  , s = 0;
                i[0] && i[1] ? (n = i[0],
                s = i[1]) : this.dom && (i = this.dom,
                n = Math.ceil(i.offsetWidth) || 0,
                s = Math.ceil(i.offsetHeight) || 0,
                this._size = [n, s]),
                t.width = n + "px",
                t.height = s + "px",
                t.size = [n, s]
            }
            ,
            A.prototype._applyStyle = function(t) {
                void 0 === t && (t = !1);
                var i, n, s = this._style, e = this.dom;
                for (i in s)
                    s.hasOwnProperty(i) && ("visible" === i ? (n = s[i] ? "block" : "none",
                    e.style.display = n) : t ? "top" !== i && "left" !== i && "transform" !== i && "msTransform" !== i || (e.style[i] = s[i]) : "width" === i || "height" === i ? "0px" !== s[i] && (n = this._opts.size) && "AMap.InfoWindow" !== this.type && ("width" === i && (e.style[i] = n[0] + "px"),
                    "height" === i) && (e.style[i] = n[1] + "px") : "translate" !== i && "scale" !== i && "rotate" !== i && (e.style[i] = s[i]))
            }
            ,
            A.prototype._getOffset = function(t, i) {
                return [(t = this._getAnchorOffset(t))[0] + i[0], t[1] + i[1]]
            }
            ,
            A.prototype._getAnchorOffset = function(t) {
                var n = (i = this._style.size)[0]
                  , s = i[1]
                  , i = ve
                  , e = 0
                  , r = 0;
                if (Array.isArray(t))
                    return t;
                switch (t) {
                case i.Nm:
                    e = 0;
                    break;
                case i.$m:
                    e = -n / 2;
                    break;
                case i.Um:
                    e = -n;
                    break;
                case i.Bm:
                    e = 0,
                    r = -s / 2;
                    break;
                case i.center:
                    e = -n / 2,
                    r = -s / 2;
                    break;
                case i.Wm:
                    e = -n,
                    r = -s / 2;
                    break;
                case i.Gm:
                    r = -s;
                    break;
                case i.Zm:
                    e = -n / 2,
                    r = -s;
                    break;
                case i.qm:
                    e = -n,
                    r = -s
                }
                return [e, r]
            }
            ,
            A.prototype._createDom = function(t, i) {
                return i && ("object" == typeof i && i instanceof HTMLElement ? t.appendChild(i) : t.innerHTML = i),
                t.addEventListener("touchstart", function(t) {
                    t.cH = "markerContent"
                }),
                t
            }
            ,
            A.prototype._removeContent = function() {
                this.dom.innerHTML = ""
            }
            ,
            A.prototype._formatSize = function(t) {
                return [t.getWidth(), t.getHeight()]
            }
            ,
            A.prototype.ZF = function(t) {
                var i, n = this._map;
                return !!(n && t && "3D" === (n = n.getView()).type && (n = n.Uu(),
                i = ye,
                t) && t[1] - n - i[0] <= 0)
            }
            ,
            A.prototype._getRotationByPoints = function(t, i) {
                var n = i.y - t.y
                  , s = i.x - t.x
                  , e = 0;
                return (0 != n || 0 != s) && (i.x - t.x != 0 ? (e = Math.atan((i.y - t.y) / (i.x - t.x)),
                0 <= n && s < 0 || n < 0 && s <= 0 ? e = Math.PI + e : n < 0 && 0 <= s && (e = 2 * Math.PI + e)) : e = i.y > t.y ? Math.PI / 2 : 3 * Math.PI / 2,
                Math.round(180 * e / Math.PI * 10) / 10)
            }
            ,
            A.prototype._getRotationByLngLats = function(t, i) {
                var n = null == (n = this._map) ? void 0 : n.getProjection().project(t.KL, t.kT)
                  , i = (t = null == (t = this._map) ? void 0 : t.getProjection().project(i.KL, i.kT))[0] - n[0]
                  , t = t[1] - n[1]
                  , n = 0;
                return (0 != i || 0 != t) && (0 != t ? (n = Math.atan(i / t),
                0 <= i && 0 < t || (0 <= i && t < 0 || i < 0 && t < 0 ? n = Math.PI + n : i < 0 && 0 < t && (n = 2 * Math.PI + n))) : n = 0 < i ? Math.PI / 2 : 3 * Math.PI / 2,
                Math.round(180 * n / Math.PI * 10) / 10)
            }
            ,
            A.prototype.dP = function(t) {
                var i = 0
                  , n = this._position
                  , s = (n instanceof AMap.LngLat && (n = [n.lng, n.lat]),
                this._map);
                return s && n && (t = this.pP(n, t),
                n = s.lngLatToContainer(n),
                t = s.lngLatToContainer(t),
                i = !1 === (s = this._getRotationByPoints(n, t)) ? 0 : s + Math.PI),
                i + 90
            }
            ,
            A.prototype.pP = function(t, i) {
                var n = null == (n = this._map) ? void 0 : n.getProjection().project(t[0], t[1]);
                return n[0] += Math.sin(i * Math.PI / 180) * Math.pow(2, 18 - this._map.getZoom()),
                n[1] += Math.cos(i * Math.PI / 180) * Math.pow(2, 18 - this._map.getZoom()),
                null == (t = this._map) ? void 0 : t.getProjection().unproject(n[0], n[1])
            }
            ,
            A.prototype.vP = function(t) {
                return 10 / Math.pow(2, t - 2)
            }
            ,
            A.prototype.Ydt = function(n) {
                return U.T8t(this, void 0, void 0, function() {
                    var i;
                    return U.x8t(this, function(t) {
                        switch (t.label) {
                        case 0:
                            return [4, ue.Ydt(n)];
                        case 1:
                            return i = t.y8t(),
                            this._position = i,
                            this.updateOverlay(),
                            [2]
                        }
                    })
                })
            }
            ;
            var Me, Oi = A;
            function A(t, i) {
                void 0 === t && (t = {}),
                void 0 === i && (i = {});
                var n = Me.call(this) || this
                  , s = (n.type = fe,
                n.className = fe,
                n._style = {
                    width: 0,
                    height: 0,
                    size: [0, 0],
                    position: "absolute",
                    top: 0,
                    left: 0,
                    translate: [0, 0],
                    rotate: 0,
                    scale: 1,
                    transformOrigin: [0, 0],
                    zIndex: 12,
                    visible: !0,
                    draggable: !1,
                    zooms: U.zoomRange,
                    noSelect: !1
                },
                n._size = [0, 0],
                n._dragObjects = {
                    sy: [0, 0],
                    hy: [0, 0],
                    ly: [0, 0]
                },
                n._className = "amap-overlay",
                n._originOpts = t,
                n._opts = U.assign({}, be, t),
                n._opts.angle && (n._opts.rotate = n._opts.angle),
                !t.offset || t.offset instanceof Array || t.offset.x === undefined || t.offset.y === undefined || (n._opts.offset = [t.offset.x, t.offset.y]),
                n.hS = U.Util.stamp(n),
                i.className)
                  , i = i.anchor
                  , s = (n._className = s,
                !t.anchor && i && (n._opts.anchor = i),
                t.content)
                  , i = n._createContainer();
                return n.dom = n._createDom(i, s),
                n._position = t.position,
                n.updateOverlay(),
                n
            }
            var ke, we = {
                uy: "AMap.Marker",
                py: "amap-markers",
                vy: "amap-marker",
                my: `//${baseIp}/public/amap/images/mark_bs.png`,
                yy: 120,
                xy: 12,
                by: 2,
                gy: Math.pow(2, 31)
            }, xe = U.assign({}, be, {
                title: "",
                clickable: !0,
                draggable: !1,
                bubble: !1,
                topWhenClick: !1,
                zIndex: we.xy,
                cursor: "pointer",
                extData: {}
            }), Ae = (ke = si,
            U.Ei(ze, ke),
            ze.prototype.vi = function(t) {
                var i, n, t = t.target;
                return U.isEmpty(this._overlays) || !t ? null : (i = w.closest(t, "amap-marker"),
                t = this._overlays,
                n = null,
                i && U.forEach(t, function(t) {
                    t.dom === i && (n = t)
                }),
                n)
            }
            ,
            ze.prototype.setTop = function(t) {
                var i;
                t && ((i = this.Kl) && i !== t && i.setTop(!1),
                this.Kl = t)
            }
            ,
            ze.prototype._createContainer = function(t) {
                var i = document.createElement("div");
                return w.addClass(i, this._className),
                t.appendChild(i),
                i
            }
            ,
            ze);
            function ze(t) {
                return (t = ke.call(this, t, {
                    className: we.py
                }) || this).type = we.uy,
                t.className = we.uy,
                t._container = t._createContainer(t._parent),
                t
            }
            Ce = Oi,
            U.Ei(z, Ce),
            z.prototype.getTitle = function() {
                return this._opts.title
            }
            ,
            z.prototype.setTitle = function(t) {
                this._opts.title = t,
                this.dom && this.dom.setAttribute("title", t)
            }
            ,
            z.prototype.getIcon = function() {
                return this._opts.icon
            }
            ,
            z.prototype.setIcon = function(t) {
                t && (this._opts.icon = t,
                this._opts.content || this._removeContent(),
                "AMap.Icon" === t.CLASS_NAME && (this._opts.size = t.getSize()),
                this.wy(),
                this.updateOverlay())
            }
            ,
            z.prototype.getLabel = function() {
                return this._opts.label || {}
            }
            ,
            z.prototype.setLabel = function(t) {
                var i, n = this._opts.label || {}, t = (this._opts.label = U.assign(n, t),
                n.content), n = void 0 === (n = n._needUpdate) || n;
                t ? ((i = this._y ? this.ky(t, this._y) : this._y = this.ky(t)) && (11 <= (t = void 0,
                t = this.v0()) || t < 0) && this.d0(),
                this.dom && this.dom.appendChild(i),
                n && this.updateOverlay()) : this._y && (w.remove(this._y),
                this._y = null)
            }
            ,
            z.prototype.getClickable = function() {
                var t = this._opts.clickable;
                return !(void 0 !== t && !t)
            }
            ,
            z.prototype.setClickable = function(t) {
                this._opts.clickable = !!(t = void 0 === t || t)
            }
            ,
            z.prototype.getDraggable = function() {
                var t = this._opts.draggable;
                return void 0 !== t && t
            }
            ,
            z.prototype.setDraggable = function(t) {
                (this._opts.draggable = t) ? this._bindEvents() : this.T_()
            }
            ,
            z.prototype.getTop = function() {
                return this._isTop
            }
            ,
            z.prototype.setTop = function(t) {
                this._isTop = t = void 0 !== t && t;
                var i = this._parent;
                i && t && i.setTop(this),
                this.updateOverlay()
            }
            ,
            z.prototype.getCursor = function() {
                var t = this._opts.cursor;
                return !t && this._map ? this._map.getDefaultCursor() : t
            }
            ,
            z.prototype.setCursor = function(t) {
                t && (this._opts.cursor = t)
            }
            ,
            z.prototype.getExtData = function() {
                return this._opts.extData
            }
            ,
            z.prototype.setExtData = function(t) {
                this._opts.extData = t
            }
            ,
            z.prototype.remove = function() {
                this.T_(),
                this.ZH(),
                Ce.prototype.remove.call(this)
            }
            ,
            z.prototype.moveTo = function() {
                console.log("Should implement AMap.moveAnimation plugin first.")
            }
            ,
            z.prototype.moveAlong = function() {
                console.log("Should implement AMap.moveAnimation plugin first.")
            }
            ,
            z.prototype.startMove = function() {
                console.log("Should implement AMap.moveAnimation plugin first.")
            }
            ,
            z.prototype.stopMove = function() {
                console.log("Should implement AMap.moveAnimation plugin first.")
            }
            ,
            z.prototype.pauseMove = function() {
                console.log("Should implement AMap.moveAnimation plugin first.")
            }
            ,
            z.prototype.resumeMove = function() {
                console.log("Should implement AMap.moveAnimation plugin first.")
            }
            ,
            z.prototype.setOptions = function(t) {
                this._opts = U.assign({}, xe, this._opts, t),
                t.content && this.setContent(t.content),
                t.offset && this.setOffset(t.offset),
                t.title && this.setTitle(t.title),
                t.label && this.setLabel(t.label),
                t.draggable && this.setDraggable(!0),
                this.updateOverlay()
            }
            ,
            z.prototype.updateOverlay = function(t) {
                Ce.prototype.updateOverlay.call(this, t = void 0 === t ? {} : t);
                t = this._y;
                this._opts.label && t && (!t.parentElement && this.dom && this.dom.appendChild(t),
                0 < (t = void 0,
                t = this.v0()) && t < 11 && this.My(),
                this.Ry())
            }
            ,
            z.prototype.emit = function(t, i) {
                var n = this.getCursor();
                return this._map && ("mouseout" === t ? this._map.setCursor() : this._map.setCursor(n)),
                "click" === t ? this.getClickable() && (Ce.prototype.emit.call(this, t, i),
                void 0 !== (n = this.getOptions().topWhenClick)) && n && this.setTop(!0) : ("dragstart" !== t && "dragging" !== t && "dragend" !== t || (U.Support.$e || i.originEvent.buttons && 2 !== i.originEvent.buttons && i.originEvent.preventDefault(),
                this.getDraggable())) && Ce.prototype.emit.call(this, t, i),
                this
            }
            ,
            z.prototype.toGeometry = function() {
                var t = this.getPosition();
                if (t)
                    return {
                        type: "Point",
                        coordinates: t && t.toJSON()
                    }
            }
            ,
            z.prototype.v0 = function() {
                var t = navigator.userAgent
                  , i = -1 < t.indexOf("compatible") && -1 < t.indexOf("MSIE")
                  , n = -1 < t.indexOf("Edge") && !i
                  , s = -1 < t.indexOf("Trident") && -1 < t.indexOf("rv:11.0");
                return i ? (new RegExp("MSIE (\\d+\\.\\d+);").test(t),
                7 === (i = parseFloat(RegExp.$1)) ? 7 : 8 === i ? 8 : 9 === i ? 9 : 10 === i ? 10 : 6) : n ? "edge" : s ? 11 : -1
            }
            ,
            z.prototype.d0 = function() {
                var t = this;
                new MutationObserver(function() {
                    t._opts.label && t.My()
                }
                ).observe(this._y, {
                    attributes: !0,
                    characterData: !0,
                    childList: !0,
                    subtree: !0
                })
            }
            ,
            z.prototype._add = function(t) {
                this._map = t,
                this._parent = t.pi,
                this.updateOverlay()
            }
            ,
            z.prototype._createDom = function(t, i) {
                return this.dom = Ce.prototype._createDom.call(this, t, i),
                this.wy(),
                t
            }
            ,
            z.prototype._createDefaultInnerDom = function() {
                var t = document.createElement("img");
                return t.setAttribute("width", "19px"),
                t.setAttribute("height", "32px"),
                t.setAttribute("src", we.my),
                this._size = [19, 32],
                t
            }
            ,
            z.prototype._getMarkerOffset = function(t, i) {
                return i
            }
            ,
            z.prototype._getStyleZIndex = function(t) {
                var i;
                return this._isTop ? i = we.gy : void 0 !== t && (i = t),
                i
            }
            ,
            z.prototype._createIcon = function(n, s) {
                var e = this
                  , t = n.getImage()
                  , i = n.getSize()
                  , r = n.getImageSize()
                  , h = n.getImageOffset()
                  , o = document.createElement("div")
                  , a = (o.className = "amap-icon",
                o.style.overflow = "hidden",
                document.createElement("img"));
                return a.onload = function() {
                    var t = a.width
                      , i = a.height
                      , t = (n.Em([t, i]),
                    e._size = r && r.length ? r : [t, i],
                    e._getSize());
                    e._setIconSize(o, a, t, r),
                    s && s()
                }
                ,
                a.onerror = function() {}
                ,
                o.appendChild(a),
                this._setIconStyle(o, a, {
                    size: i,
                    imageSize: r,
                    imageOffset: h
                }),
                a.src = t,
                o
            }
            ,
            z.prototype._setIconStyle = function(t, i, n) {
                var s = void 0 === (s = n.size) ? [0, 0] : s
                  , e = void 0 === (e = n.imageSize) ? [0, 0] : e
                  , n = void 0 === (n = n.imageOffset) ? [0, 0] : n;
                i.style.top = n[1] + "px",
                i.style.left = n[0] + "px",
                this._setIconSize(t, i, s, e)
            }
            ,
            z.prototype._setIconSize = function(t, i, n, s) {
                var e = n[0]
                  , n = n[1]
                  , r = s[0]
                  , s = s[1];
                e && (t.style.width = e + "px"),
                n && (t.style.height = n + "px"),
                r && s && (i.style.width = r + "px",
                i.style.height = s + "px")
            }
            ,
            z.prototype._removeContent = function() {
                this.dom.innerHTML = "",
                this._opts.label && this.setLabel(this._opts.label)
            }
            ,
            z.prototype._getD = function() {
                return this.dom
            }
            ,
            z.prototype.wy = function() {
                var t, i = this, s = (n = this._opts).content, e = n.icon, n = n.text;
                !s && e ? (t = "string" == typeof e ? new ie({
                    image: e
                }) : e,
                t = this._createIcon(t, function() {
                    i.updateOverlay(),
                    i._opts.label && i.My()
                }),
                this.dom.appendChild(t)) : s || e || n || (t = this._createDefaultInnerDom(),
                this._originOpts.anchor || (this._opts.anchor = "bottom-center"),
                this.dom.appendChild(t))
            }
            ,
            z.prototype.ky = function(t, i) {
                return i || ((i = document.createElement("div")).className = "amap-marker-label"),
                i.innerHTML = t,
                i
            }
            ,
            z.prototype.My = function() {
                var t, i, n, s, e, r;
                this._y && (r = this._style.size,
                i = (e = this._opts.label).offset,
                t = (i = U.oy(i = void 0 === i ? [0, 0] : i) ? i.toArray() : i)[0],
                i = i[1],
                n = this._y.offsetWidth,
                s = this._y.offsetHeight,
                n = this.zy.size = [n, s],
                r = (e = [(s = this.Sy(e, r, n))[0] + t, s[1] + i])[0],
                this.zy.top = e[1],
                this.zy.left = r)
            }
            ,
            z.prototype.Sy = function(t, i, n) {
                var t = t.direction
                  , e = i[0]
                  , r = i[1]
                  , h = n[0]
                  , o = n[1]
                  , a = 0
                  , u = 0;
                switch (void 0 === t ? "right" : t) {
                case ve.Nm:
                    a = 0,
                    u = -o;
                    break;
                case ve.top:
                case ve.$m:
                    a = e / 2 - h / 2,
                    u = -o;
                    break;
                case ve.Um:
                    a = e,
                    u = -o;
                    break;
                case ve.right:
                case ve.Wm:
                    a = e,
                    u = r / 2 - o / 2;
                    break;
                case ve.center:
                    a = e / 2 - h / 2,
                    u = r / 2 - o / 2;
                    break;
                case ve.left:
                case ve.Bm:
                    a = -h,
                    u = r / 2 - o / 2;
                    break;
                case ve.Gm:
                    a = 0,
                    u = r;
                    break;
                case ve.bottom:
                case ve.Zm:
                    a = e / 2 - h / 2,
                    u = r;
                    break;
                case ve.qm:
                    a = e,
                    u = r;
                    break;
                default:
                    a = e / 2 - h / 2,
                    u = -o
                }
                return [a, u]
            }
            ,
            z.prototype.Ry = function() {
                var i = (t = this.zy).top
                  , t = t.left
                  , n = this._y;
                n.style.top = i + "px",
                n.style.left = t + "px"
            }
            ,
            z.prototype._bindEvents = function() {
                this.on("dragstart", this.Cy.bind(this)),
                this.on("dragging", this._dragging.bind(this)),
                this.on("dragend", this.Ly.bind(this))
            }
            ,
            z.prototype.XH = function() {
                this.dom && (this.dom.ondragstart = function() {
                    return !1
                }
                )
            }
            ,
            z.prototype.T_ = function() {
                this.off("dragstart", this.Cy.bind(this)),
                this.off("dragging", this._dragging.bind(this)),
                this.off("dragend", this.Ly.bind(this))
            }
            ,
            z.prototype.ZH = function() {
                this.dom && (this.dom.ondragstart = null)
            }
            ,
            z.prototype.Cy = function(t) {
                this.Ay(t)
            }
            ,
            z.prototype._dragging = function(t) {
                var i = t.lnglat
                  , n = i.lng
                  , n = new U.LngLat(n,i.lat);
                this._map && (this.setPosition(n.toJSON()),
                this.Ay(t))
            }
            ,
            z.prototype.Ly = function(t) {}
            ,
            z.prototype.Ay = function(t) {
                this._dragObjects = {
                    sy: t.pixel,
                    hy: t.pos,
                    ly: t.lnglat
                }
            }
            ;
            var Ce, Te = z;
            function z(t) {
                var i = Ce.call(this, t = void 0 === t ? {} : t, {
                    className: we.vy
                }) || this
                  , n = (i.type = we.uy,
                i.className = we.uy,
                i._isTop = !1,
                i.zy = {
                    width: 0,
                    height: 0,
                    size: [0, 0],
                    top: 0,
                    left: 0,
                    translate: [0, 0],
                    zIndex: we.by
                },
                i._opts = U.assign({}, xe, i._opts),
                i._opts.size)
                  , s = i._opts.icon;
                return !n && s instanceof ie && (n = s.getSize(),
                i._opts.size = n),
                n instanceof U.Size && (i._opts.size = i._formatSize(n)),
                t.title && i.setTitle(t.title),
                t.label && i.setLabel(t.label),
                t.draggable && i.setDraggable(!0),
                (s = t.map) && s instanceof rr && i.add(s),
                i.XH(),
                i
            }
            var Se, Ie, Le, C = {
                getViewport: function(t) {
                    return t ? [t.clientWidth, t.clientHeight] : [0, 0]
                },
                getStyle: function(t, i) {
                    var n, s = t.style[i];
                    return "auto" === (s = (s = (s = s && "auto" !== s || !document.defaultView ? s : (n = document.defaultView.getComputedStyle(t, null)) ? n[i] : null) && "auto" !== s || "height" !== i ? s : t.clientHeight + "px") && "auto" !== s || "width" !== i ? s : t.clientWidth + "px") ? null : s
                },
                getViewportOffset: function(t) {
                    var i, n = 0, s = 0, e = t, r = document.body, h = document.documentElement;
                    do {
                        if (n += e.offsetTop || 0,
                        s += e.offsetLeft || 0,
                        n += parseInt(C.getStyle(e, "borderTopWidth"), 10) || 0,
                        s += parseInt(C.getStyle(e, "borderLeftWidth"), 10) || 0,
                        i = C.getStyle(e, "position"),
                        e.offsetParent === r && "absolute" === i)
                            break;
                        if ("fixed" === i) {
                            n += r.scrollTop || h.scrollTop || 0,
                            s += r.scrollLeft || h.scrollLeft || 0;
                            break
                        }
                    } while (e = e.offsetParent);
                    for (e = t; e !== r && (n -= e.scrollTop || 0,
                    s -= e.scrollLeft || 0,
                    !C.m() && U.Support.webkit && (s += e.scrollWidth - e.clientWidth),
                    e = e.parentNode); )
                        ;
                    return [s, n]
                },
                m: function() {
                    return Se || (Ie = "ltr" === C.getStyle(document.body, "direction"),
                    Se = !0),
                    Ie
                },
                create: function(t, i, n, s) {
                    return t = document.createElement(t),
                    n && (t.className = n),
                    i && (s && "before" === s ? (n = i.firstChild,
                    i.insertBefore(t, n)) : i.appendChild(t)),
                    t
                },
                toggleClass: function(t, i, n) {
                    n ? this.addClass(t, i) : this.removeClass(t, i)
                },
                hasClass: function(t, i) {
                    if (t && i)
                        return 0 < t.className.length && new RegExp("(^|\\s)" + i + "(\\s|$)").test(t.className)
                },
                addClass: function(t, i) {
                    t && i && (t.classList && t.classList.add ? t.classList.add(i) : this.hasClass(t, i) || (t.className += (t.className ? " " : "") + i))
                },
                setClass: function(t, i) {
                    t && (t.className = i || "")
                },
                removeClass: function(t, n) {
                    t && n && (t.classList && t.classList.remove ? t.classList.remove(n) : t.className = t.className.replace(/(\S+)\s*/g, function(t, i) {
                        return i === n ? "" : t
                    }).replace(/(^\s+|\s+$)/, ""))
                },
                watchSize: function(n, s, e) {
                    var i = document.createElement("iframe")
                      , r = (i.style.cssText = "width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",
                    i.onload = function() {
                        i && (i.contentWindow.onresize = t)
                    }
                    ,
                    n.appendChild(i),
                    i.src = "javascript:void(0)",
                    0)
                      , h = 0;
                    function t() {
                        e.k = n.getBoundingClientRect(),
                        e.M = [n.clientLeft, n.clientTop];
                        var t = n.offsetWidth
                          , i = n.offsetHeight;
                        t === r && i === h || (s(t, i),
                        r = t,
                        h = i)
                    }
                    return t(),
                    e.resize = t,
                    window.onscroll = t,
                    function() {
                        var t;
                        e.resize && (e.resize = null),
                        window.onscroll && (window.onscroll = null),
                        i.contentWindow && (i.contentWindow.onresize = null,
                        i.contentWindow.document.write(""),
                        i.parentNode.removeChild(i),
                        null != (t = i.contentWindow)) && t.close()
                    }
                },
                watchSize2: function(n, s, e) {
                    var r, h, o = document.createElement("_"), a = (o.className = "expand",
                    o.appendChild(document.createElement("_"))), u = (a.className = "shrink",
                    o.appendChild(document.createElement("_"))), t = (u.className = "expandChild",
                    a.appendChild(document.createElement("_")));
                    return t.className = "shrinkChild",
                    a.style.cssText = o.style.cssText = "height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",
                    t.style.cssText = u.style.cssText = "display:block;height:100%;transition:0s;width:100%",
                    t.style.width = t.style.height = "200%",
                    n.appendChild(o),
                    f(),
                    function() {
                        c(),
                        n.removeChild(o)
                    }
                    ;
                    function f() {
                        c(),
                        e.k = n.getBoundingClientRect(),
                        e.M = [n.clientLeft, n.clientTop];
                        var t = n.offsetWidth
                          , i = n.offsetHeight;
                        t === r && i === h || (r = t,
                        h = i,
                        u.style.width = 2 * t + "px",
                        u.style.height = 2 * i + "px",
                        o.scrollLeft = o.scrollWidth,
                        o.scrollTop = o.scrollHeight,
                        a.scrollLeft = a.scrollWidth,
                        a.scrollTop = a.scrollHeight,
                        s(t, i)),
                        a.addEventListener("scroll", f),
                        o.addEventListener("scroll", f)
                    }
                    function c() {
                        a.removeEventListener("scroll", f),
                        o.removeEventListener("scroll", f)
                    }
                },
                mousePos: function(t, i, n) {
                    return t && (n.k = t.getBoundingClientRect(),
                    n.M = [t.clientLeft, t.clientTop]),
                    t = n.k,
                    [(i = i.touches && i.changedTouches ? 0 < i.touches.length ? i.touches[0] : i.changedTouches[i.changedTouches.length - 1] : i).clientX - t.left - n.M[0], i.clientY - t.top - n.M[1]]
                },
                remove: function(t) {
                    t && t.parentNode && t.parentNode.removeChild(t)
                },
                empty: function(t) {
                    for (; t.firstChild; )
                        t.removeChild(t.firstChild)
                },
                closest: function(t, i) {
                    return t ? this.hasClass(t, i) ? t : (t = t.parentElement) ? C.closest(t, i) : null : null
                },
                fillText: function(t, i) {
                    if (t)
                        return void 0 !== t.textContent ? t.textContent = i : void 0 !== t.innerText ? t.innerText = i : t.innerHTML = i,
                        t
                },
                _L: function(t) {
                    for (var i = document.documentElement.style, n = 0; n < t.length; n += 1)
                        if (t[n]in i)
                            return t[n];
                    return !1
                },
                rotate: function(t, i, n) {
                    var s, e = C.kL;
                    n = n || {
                        x: t.clientWidth / 2,
                        y: t.clientHeight / 2
                    },
                    e ? (s = "",
                    t.style[e] = s += " rotate(" + i + "deg)",
                    t.style[C.ML[e] + "-origin"] = n.x + "px " + n.y + "px") : (s = Math.cos(i * Math.PI / 180),
                    e = Math.sin(i * Math.PI / 180),
                    t.style.filter = "progid:DXImageTransform.Microsoft.Matrix()",
                    0 < t.filters.length && ((i = t.filters.item(0)).Dx = -n.x * s + n.y * e + n.x,
                    i.Dy = -n.x * e - n.y * s + n.y,
                    i.M11 = i.M22 = s,
                    i.M12 = -(i.M21 = e)))
                },
                setCss: function(t, i) {
                    t = t instanceof Array ? t : [t];
                    for (var n = 0; n < t.length; n += 1)
                        for (var s in i)
                            i.hasOwnProperty(s) && (t[n].style[s] = i[s]);
                    return this
                },
                setOpacity: function(t, i) {
                    t.style && ("opacity"in t.style ? t.style.opacity = "" + i : "filter"in t.style && (i = Math.round(100 * i),
                    t.style.filter = "",
                    100 !== i) && (t.style.filter = " progid:DXImageTransform.Microsoft.Alpha(opacity=" + i + ")"))
                },
                ML: {},
                kL: Ie = Se = !1
            }, De = (C.kL = C._L(["WebkitTransform", "OTransform", "MozTransform", "msTransform", "transform"]),
            C.ML = {
                transform: "transform",
                WebkitTransform: "-webkit-transform",
                OTransform: "-o-transform",
                MozTransform: "-moz-transform",
                msTransform: "-ms-transform"
            },
            {
                uy: "AMap.InfoWindow",
                JP: "",
                XP: "amap-info",
                QP: 121,
                KP: 8,
                tF: 8,
                iF: [20, 20, 20, 20]
            }), Oe = U.assign({}, be, {
                isCustom: !1,
                closeWhenClickMap: !1,
                anchor: "bottom-center",
                autoMove: !0,
                avoid: De.iF
            }), Re = (Le = si,
            U.Ei(Ee, Le),
            Ee.prototype.addToGroup = function(t) {
                this.Iy && this._overlays[this.Iy] && this.Iy !== t.hS && this._overlays[this.Iy].remove(),
                this.Iy = t.hS,
                Le.prototype.addToGroup.call(this, t)
            }
            ,
            Ee.prototype.removeFromGroup = function(t) {
                Le.prototype.removeFromGroup.call(this, t),
                this.Iy = 0
            }
            ,
            Ee.prototype.close = function() {
                var t = this.Iy;
                (t = this._overlays[t]) && (this.Iy = 0,
                t.close())
            }
            ,
            Ee.prototype.vi = function(t) {
                return t = t.target,
                this.Iy && t && C.closest(t, "amap-info") ? this._overlays[this.Iy] : null
            }
            ,
            Ee.prototype.destroy = function() {
                this.Dy(),
                Le.prototype.destroy.call(this)
            }
            ,
            Ee.prototype.Rm = function() {
                this._map.on("click", this.Py)
            }
            ,
            Ee.prototype.Dy = function() {
                this._map.off("click", this.Py)
            }
            ,
            Ee);
            function Ee(t) {
                var n = Le.call(this, t, {
                    className: De.JP
                }) || this;
                return n.type = De.uy,
                n.Py = function(t) {
                    var i = n.Iy
                      , i = n._overlays[i];
                    !C.closest(t.originEvent.target, "amap-info") && i && i.getOptions().closeWhenClickMap && (n.Iy = 0,
                    i.close())
                }
                ,
                n._container = n._parent,
                n.Rm(),
                n
            }
            je = Oi,
            U.Ei(T, je),
            T.prototype.open = function(t, i) {
                t && t instanceof rr && i ? (this._opts.visible = !0,
                this.add(t),
                this.setPosition(i),
                this.jy(),
                this.emit("open"),
                this.GF()) : t && this._position ? (this._opts.visible = !0,
                this.add(t),
                this.jy(),
                this.emit("open"),
                this.GF()) : this._map && this._position && (this._opts.visible = !0,
                this.updateOverlay(),
                this.emit("open"),
                this.GF())
            }
            ,
            T.prototype.close = function() {
                this._parent && (this._opts.visible = !1,
                this.updateOverlay(),
                this.emit("close"))
            }
            ,
            T.prototype.getIsOpen = function() {
                return !(!this._map || !this._opts.visible)
            }
            ,
            T.prototype.setSize = function(t) {
                t instanceof U.Size && (t = t.toArray()),
                this._opts.size = t,
                this.updateOverlay()
            }
            ,
            T.prototype.setContent = function(t) {
                je.prototype.setContent.call(this, t = void 0 === t ? "" : t),
                this.jy()
            }
            ,
            T.prototype.setAnchor = function(t) {
                var i, n = this.dom && this.dom.querySelector(".amap-info-contentContainer");
                t && n && ((i = this.g_([].slice.call(n.className.split(" ")))) && C.removeClass(n, i),
                this._size = [0, 0],
                C.addClass(n, t)),
                je.prototype.setAnchor.call(this, t)
            }
            ,
            T.prototype.getDraggable = function() {
                return !1
            }
            ,
            T.prototype.setOptions = function(t) {
                this._opts = U.assign({}, Oe, this._opts, t)
            }
            ,
            T.prototype.updateOverlay = function(t) {
                void 0 === t && (t = {}),
                this._map && (t = t.viewChange,
                this._setStyle(t = void 0 !== t && t),
                this._applyStyle(t),
                t = this._getSize(),
                this.Fy) && t[0] && window.getComputedStyle(this.Fy).boxSizing
            }
            ,
            T.prototype.getBounds = function() {
                return null
            }
            ,
            T.prototype.getExtData = function() {
                return this._opts.extData || null
            }
            ,
            T.prototype.setExtData = function(t) {
                this._opts.extData = t
            }
            ,
            T.prototype._add = function(t) {
                this._map = t,
                this._parent = t.di,
                this.updateOverlay()
            }
            ,
            T.prototype._remove = function() {
                je.prototype._remove.call(this),
                this.Ey()
            }
            ,
            T.prototype._createDefaultInnerDom = function() {
                return document.createElement("div")
            }
            ,
            T.prototype._createDom = function(t, i) {
                var n = this.Ny(t);
                return this.$y(n, i),
                t
            }
            ,
            T.prototype._getContentSize = function() {
                var t, i, n = this._style, s = this._getSize();
                s[0] && s[1] && !this._opts.isCustom ? (t = s[0],
                i = s[1]) : (s = this.dom.querySelector(".amap-info-contentContainer")) && (t = s.clientWidth,
                i = s.clientHeight,
                this._size = [t, i]),
                n.width = t + "px",
                n.height = i + "px",
                n.size = [t, i]
            }
            ,
            T.prototype._getAnchorOffset = function(t) {
                return [(t = je.prototype._getAnchorOffset.call(this, t))[0], t[1]]
            }
            ,
            T.prototype.Ny = function(t) {
                var i = document.createElement("div")
                  , n = (C.addClass(i, "amap-info-shadowContainer"),
                document.createElement("div"));
                return C.addClass(n, "amap-info-contentContainer"),
                n.addEventListener("touchstart", function(t) {
                    t.cH = "infoWindow"
                }),
                t.style.position = "absolute",
                i.style.position = "absolute",
                t.appendChild(i),
                t.appendChild(n),
                n
            }
            ,
            T.prototype.$y = function(t, i) {
                var s = (n = this._opts).isCustom
                  , n = n.anchor;
                void 0 !== s && s ? "object" == typeof i && i instanceof HTMLElement ? t.appendChild(i) : t.innerHTML = i + "" : (s = this.Fy = document.createElement("div"),
                C.addClass(s, "amap-info-content"),
                C.addClass(s, "amap-info-outer"),
                "object" == typeof i && i instanceof HTMLElement ? s.appendChild(i) : s.innerHTML = i ? i + "" : "",
                i = document.createElement("a"),
                C.addClass(i, "amap-info-close"),
                i.innerText = "×",
                s.appendChild(i),
                i = document.createElement("div"),
                C.addClass(i, "amap-info-sharp"),
                C.addClass(t, n),
                t.appendChild(s),
                t.appendChild(i))
            }
            ,
            T.prototype.jy = function() {
                var t = this.dom.querySelector(".amap-info-close");
                t && t.addEventListener("click", this.close.bind(this))
            }
            ,
            T.prototype.Ey = function() {
                var t = this
                  , i = this.dom.querySelector(".amap-info-close");
                i && i.removeEventListener("click", function() {
                    t.close()
                })
            }
            ,
            T.prototype.Oy = function() {
                if (this._position) {
                    var t = this._map;
                    if (t && this._opts.autoMove && this.dom) {
                        for (var i = this._getSize(), n = new U.Size(i[0],i[1]), s = t.lngLatToContainer(this._position).toArray(), e = this._getOffset(this.getAnchor(), this.getOffset().toArray()), r = U.vector.add(s, e), h = U.vector.add(r, i), o = t.getSize(), a = [this._opts.avoid || De.iF], u = 0, f = 0, c = 0; c < a.length; c += 1) {
                            var l = a[c]
                              , d = 0
                              , p = 0;
                            0 !== l[3] && 0 < (d = l[3] - (r[0] + u)) && (u += d),
                            0 !== l[1] && (d = o.getWidth() - l[1] - (h[0] + u)) < 0 && (u += d),
                            0 !== l[0] && 0 < (p = l[0] - (r[1] + f)) && (f += p),
                            0 !== l[2] && (p = o.getHeight() - l[2] - (h[1] + f)) < 0 && (f += p)
                        }
                        r = U.vector.add(r, [u, f]),
                        h = U.vector.add(h, [u, f]),
                        r[e = s = 0] < 0 || n.getWidth() > o.getWidth() ? s = 20 - r[0] : o.getWidth() < h[0] && (s = o.getWidth() - h[0] - 25),
                        r[1] < 0 || n.getHeight() > o.getHeight() ? e = 5 - r[1] : o.getHeight() < h[1] && (e = o.getHeight() - h[1] - 15),
                        e += f,
                        ((s += u) || e) && t.panBy(s, e)
                    }
                }
            }
            ,
            T.prototype.GF = function() {
                var t, i, n, s, e, r, h, o, a, u, f, c;
                this._position && (t = this._map) && this._opts.autoMove && this.dom && (i = this._position,
                U.Bs(i) && (i = i.toArray()),
                o = (u = t.getSize()).getWidth() || 0,
                u = u.getHeight() || 0,
                f = this._getSize(),
                c = t.lngLatToContainer(i).toArray(),
                n = this._getOffset(this.getAnchor(), this.getOffset().toArray()),
                c = U.vector.add(c, n),
                a = U.vector.add(c, f),
                s = this._opts.avoid || De.iF,
                e = c[0],
                r = c[1],
                h = !1,
                c[1] - s[0] < 0 && (r = s[0],
                h = !0),
                a[0] + s[1] > o && (e = o - f[0] - s[1],
                h = !0),
                u < a[1] + s[2] && (r = u - s[2] - f[1],
                h = !0),
                c[0] - s[3] < 0 && (e = s[3],
                h = !0),
                h) && (o = U.vector.Ip([e, r], n),
                a = t.containerToLngLat(o).toArray(),
                u = U.vector.Ip(a, i),
                f = t.getCenter().toArray(),
                c = U.vector.Ip(f, u),
                t.panTo(c))
            }
            ,
            T.prototype.g_ = function(t) {
                var i, n, s = ve;
                for (n in s)
                    if (s.hasOwnProperty(n)) {
                        var e = s[n];
                        if (-1 !== t.indexOf(e)) {
                            i = e;
                            break
                        }
                    }
                return i
            }
            ;
            var je, Pe = T;
            function T(t) {
                (t = je.call(this, t = void 0 === t ? {} : t, {
                    className: De.XP,
                    anchor: Oe.anchor
                }) || this).type = De.uy,
                t._opts = U.assign({}, Oe, t._opts),
                t._originOpts.zIndex || (t._opts.zIndex = De.QP);
                var i = t._opts.size;
                return i instanceof U.Size && (t._opts.size = t._formatSize(i)),
                t.jy(),
                t
            }
            var Be, Fe = "AMap.ContextMenu", _e = (Be = si,
            U.Ei(Ye, Be),
            Ye.prototype.addToGroup = function(t) {
                this.Iy && this._overlays[this.Iy] && this.Iy !== t.hS && this._overlays[this.Iy].remove(),
                this.Iy = t.hS,
                Be.prototype.addToGroup.call(this, t)
            }
            ,
            Ye.prototype.removeFromGroup = function(t) {
                Be.prototype.removeFromGroup.call(this, t),
                this.Iy = 0
            }
            ,
            Ye.prototype.vi = function(t) {
                return t = t.target,
                this.Iy && t && w.closest(t, "amap-menu") ? this._overlays[this.Iy] : null
            }
            ,
            Ye.prototype.destroy = function() {
                this.Uy(),
                Be.prototype.destroy.call(this)
            }
            ,
            Ye.prototype.By = function() {
                this._map.on("viewchange", this.Wy),
                this._map.on("click", this.Py)
            }
            ,
            Ye.prototype.Uy = function() {
                this._map.off("viewchange", this.Wy),
                this._map.off("click", this.Py)
            }
            ,
            Ye);
            function Ye(t) {
                var n = Be.call(this, t, {
                    className: ""
                }) || this;
                return n.type = Fe,
                n.className = Fe,
                n.Wy = function() {
                    var t;
                    n.Iy && (t = n._overlays[n.Iy]) && !t.getOptions().aliveWhenMapClick && n.removeFromGroup(t)
                }
                ,
                n.Py = function(t) {
                    var i = n.Iy
                      , i = n._overlays[i];
                    w.closest(t.originEvent.target, "amap-info") || !i || i.getOptions().aliveWhenMapClick || (n.Iy = 0,
                    i.close())
                }
                ,
                n._container = n._parent,
                n.By(),
                n
            }
            Ze = Oi,
            U.Ei(Je, Ze),
            Je.prototype.open = function(t, i) {
                t && i ? (this._opts.visible = !0,
                this.add(t),
                this.setPosition(i),
                this.emit("open")) : this._map && this._position && (this._opts.visible = !0,
                this.updateOverlay(),
                this.emit("open"))
            }
            ,
            Je.prototype.close = function() {
                this._parent && (this._opts.visible = !1,
                this.uZ(),
                this.emit("close"))
            }
            ,
            Je.prototype.addItem = function(t, i, n) {
                this.Zy.push({
                    content: t,
                    fn: i,
                    order: n
                }),
                this.qy(this.dom),
                this.updateOverlay()
            }
            ,
            Je.prototype.removeItem = function(t, i) {
                for (var n = this.Zy, s = 0; s < n.length; s++) {
                    var e = n[s];
                    e.content === t && e.fn === i && (n.splice(s, 1),
                    s--)
                }
                this.qy(this.dom),
                this.updateOverlay()
            }
            ,
            Je.prototype.getBounds = function() {
                return null
            }
            ,
            Je.prototype.getDraggable = function() {
                return !1
            }
            ,
            Je.prototype._add = function(t) {
                this._map = t,
                this._parent = t.vm,
                this.updateOverlay()
            }
            ,
            Je.prototype._createDefaultInnerDom = function() {
                return document.createElement("div")
            }
            ,
            Je.prototype._createDom = function(t, i) {
                var n = this.dom = this.Yy();
                return this._opts.isCustom && this._opts.content ? Ze.prototype._createDom.call(this, n, this._opts.content) : this.qy(n),
                n
            }
            ,
            Je.prototype.Yy = function() {
                var t = document.createElement("div");
                return w.addClass(t, this._className),
                t
            }
            ,
            Je.prototype.qy = function(t) {
                var i = this.Vy(this.Zy)
                  , n = document.createElement("ul");
                w.addClass(n, "amap-menu-outer");
                for (var s = 0, e = i; s < e.length; s++) {
                    var r = e[s]
                      , r = this.Xy(r);
                    n.appendChild(r)
                }
                t.innerHTML = "",
                t.appendChild(n)
            }
            ,
            Je.prototype.Vy = function(t) {
                return (t = void 0 === t ? [] : t).sort(function(t, i) {
                    return isNaN(t.order) || isNaN(i.order) ? 0 : t.order - i.order
                }),
                t
            }
            ,
            Je.prototype.Xy = function(i) {
                var n = this
                  , t = document.createElement("li");
                return t.innerHTML = i.content,
                t.addEventListener("click", function(t) {
                    i.fn(t),
                    n._opts.aliveWhenMapClick || n.hide()
                }),
                t
            }
            ;
            var Ze, Xe = Je;
            function Je(t) {
                var i = Ze.call(this, t = void 0 === t ? {} : t, {
                    className: "amap-menu"
                }) || this;
                return i.type = Fe,
                i.className = Fe,
                i._opts = {},
                i.Zy = [],
                i._opts = t,
                i._style.zIndex = 140,
                i
            }
            function Ve() {
                this.Hy = !1,
                this.ex = null,
                this.Ky = this.nx()
            }
            Ve.prototype.open = function(t, i, n) {
                var s, e, r, h, o, a, u, f, c, l = this;
                this.Hy || (s = this.Jy,
                e = AMap.getConfig().server + "/verify/",
                (U.Support.$e ? (this.Ky.style.marginLeft = -Math.min(330, screen.width) / 2 + "px",
                document.body) : (r = this.Qy("amap-container", document.body)[0]) && 322 < r.clientWidth && 346 < r.clientHeight ? (this.Ky.style.position = "absolute",
                r) : (o = h = 0,
                r && (r = w.getViewportOffset(r),
                h = r[0],
                o = r[1]),
                this.Ky.style.top = "0%",
                this.Ky.style.left = "0%",
                a = (.5 - h) / 5,
                u = (.5 - o) / 5,
                f = setInterval(function() {
                    o += u,
                    .5 - (h += a) < .05 && .5 - o < .05 ? (l.Ky.style.top = "50%",
                    l.Ky.style.left = "50%",
                    clearInterval(f)) : (l.Ky.style.top = 100 * o + "%",
                    l.Ky.style.left = 100 * h + "%")
                }, 25),
                document.body)).appendChild(this.Ky),
                c = !0,
                s.onload = function() {
                    c ? c = !1 : l.Hy && (l.Ky.parentNode && l.Ky.parentNode.removeChild(l.Ky),
                    l.Hy = !1,
                    l.tx())
                }
                ,
                s.src = e + "jsapi.html?channel=JSAPI-" + t + "&from=" + encodeURIComponent(e + "success.html") + "&th=" + i + "&restUrl=" + encodeURIComponent(n),
                this.Hy = !0)
            }
            ,
            Ve.prototype.ix = function(t) {
                this.ex = t
            }
            ,
            Ve.prototype.tx = function() {
                this.ex && this.ex()
            }
            ,
            Ve.prototype.Qy = function(t, i) {
                if (window.getElementsByClassName)
                    return window.getElementsByClassName(t, i);
                for (var n = (i || document).getElementsByTagName("*"), s = [], e = 0; e < n.length; e += 1)
                    for (var r = n[e], h = r.className.split(" "), o = 0; o < h.length; o += 1)
                        if (h[o] === t) {
                            s.push(r);
                            break
                        }
                return s
            }
            ,
            Ve.prototype.nx = function() {
                var t = document.createElement("div")
                  , i = (t.className = "amap-popup",
                t.style.zIndex = "2147483647",
                document.createElement("iframe"));
                return i.className = "amap-popup-content",
                t.appendChild(i),
                i.style.width = Math.min(330, screen.width) + "px",
                this.Jy = i,
                t
            }
            ;
            var He = {
                "restapi.amap.com/v3/place/text": "KEYWORD",
                "restapi.amap.com/v3/place/polygon": "POLYGON",
                "restapi.amap.com/v3/place/around": "NEARBY",
                "restapi.amap.com/v3/place/detail": "ID",
                "restapi.amap.com/v3/geocode/regeo": "REGEO"
            }
              , qe = new Ve
              , Ke = (qe.ix(function() {
                Ke.ox = !1;
                for (var t = Ke.ax, i = 0, n = t.length; i < n; i += 1) {
                    var s = t[i];
                    10 < n - i ? t[2]({
                        status: "error",
                        info: "TIME_OUT_A"
                    }) : Ke.get(s[0], s[1], s[2])
                }
                Ke.ax = []
            }),
            Qe.get = function(n, s, e, t) {
                if (void 0 === t && (t = {}),
                Qe.ox)
                    Qe.ax.push([n, s, e]);
                else {
                    var i, r = n.split("://")[1], h = He[r], o = h !== undefined, u = (a = AMap.getConfig()).key, f = a.version, c = a.appname, l = a.jscode, a = a.gaodeserver, d = n + "?platform=JS&s=rsv3&logversion=2.0&key=" + u + "&sdkversion=" + f + "&appname=" + c + "&csid=" + U.Util.uuid();
                    for (i in l ? d += "&jscode=" + l : a && r && "restapi.amap.com" === r.split("/")[0] && (d = r.replace(r.split("/")[0], a) + "?platform=JS&s=rsv3&logversion=2.0&key=" + u + "&sdkversion=" + f + "&appname=" + c + "&csid=" + U.Util.uuid()),
                    s)
                        s.hasOwnProperty(i) && (d += "&" + i + "=" + s[i]);
                    pi.JSONP(d, function(t, i) {
                        "complete" === t && (i = i.data,
                        o) && 3e4 === i.errcode && i.data ? (Qe.ox = !0,
                        Qe.ax.push([n, s, e]),
                        qe.open(h, i.data.host, d)) : e(t, i)
                    }, t)
                }
            }
            ,
            Qe.post = function(t, i, n) {
                var e = (s = AMap.getConfig()).key
                  , r = s.version
                  , h = s.appname
                  , o = s.jscode
                  , s = s.gaodeserver
                  , a = t.split("://")[1]
                  , t = t + "?platform=JS&s=rsv3&logversion=2.0&key=" + e + "&sdkversion=" + r + "&appname=" + h + "&csid=" + U.Util.uuid();
                o ? t += "&jscode=" + o : s && a && "restapi.amap.com" === a.split("/")[0] && (t = a.replace(a.split("/")[0], s) + "?platform=JS&s=rsv3&logversion=2.0&key=" + e + "&sdkversion=" + r + "&appname=" + h + "&csid=" + U.Util.uuid()),
                pi.Ajax(t, {
                    type: "POST",
                    content: JSON.stringify(i),
                    requestContentType: "text/plain"
                }, function(t, i) {
                    "complete" === t ? (i = i.data,
                    n(t, JSON.parse(i))) : n(t, i)
                })
            }
            ,
            Qe.ox = !1,
            Qe.ax = [],
            Qe);
            function Qe() {}
            function $e(t, i, r) {
                var n = AMap.getConfig()
                  , s = n.server + "/v3/assistant/coordinate/convert"
                  , e = AMap.Util.parseLngLatData(t)
                  , h = [];
                if (e instanceof Array) {
                    for (var o = 0, a = e.length; o < a; o += 1)
                        h.push(e[o] + "");
                    h = h.join(";")
                } else
                    h = e + "";
                t = {
                    key: n.key,
                    s: "rsv3",
                    locations: h,
                    coordsys: i || "gps"
                },
                AMap.WebService.get(s, t, function(t, i) {
                    if ("complete" === t && i.status && "1" === i.status) {
                        for (var n = i.locations.split(";"), s = 0; s < n.length; s += 1) {
                            var e = n[s].split(",");
                            n[s] = new AMap.LngLat(e[0],e[1])
                        }
                        r && "function" == typeof r && r("complete", {
                            info: "ok",
                            locations: n
                        })
                    } else
                        r && "function" == typeof r && r("error", i.info);
                    "error" === t && r("error", i.info)
                })
            }
            nr.prototype.setCenter = function(t) {
                t instanceof U.LngLat ? this.cB = t.toArray() : this.cB = t,
                this.dB = (t = this.map.getProjection()).project.apply(t, this.cB)
            }
            ,
            nr.prototype.getCenter = function() {
                return this.cB
            }
            ,
            nr.prototype.lngLatToCoord = function(t) {
                var i = this.map.getProjection().project;
                return t instanceof U.LngLat && (t = t.toArray()),
                this.cB || this.setCenter(t),
                this.pB(i(t[0], t[1]), this.dB)
            }
            ,
            nr.prototype.lngLatsToCoords = function(t) {
                if (U.Util.isArray(t)) {
                    var i = this.map.getProjection().project
                      , n = [];
                    if (U.Util.vB(t[0]))
                        this.cB || this.setCenter(t),
                        n[0] = this.pB(i(t[0], t[1]), this.dB);
                    else
                        for (var s = 0, e = t.length; s < e; s++) {
                            var r = t[s];
                            if (U.Util.vB(r[0]))
                                this.cB || this.setCenter(r),
                                n[s] = this.pB(i(r[0], r[1]), this.dB);
                            else {
                                for (var h = [], o = 0, a = r.length; o < a; o++) {
                                    var u = r[o];
                                    if (U.Util.vB(u[0]))
                                        this.cB || this.setCenter(u),
                                        h[o] = this.pB(i(u[0], u[1]), this.dB);
                                    else {
                                        for (var f = [], c = 0, l = r.length; c < l; c++) {
                                            var d = u[c];
                                            U.Util.vB(d[0]) && (this.cB || this.setCenter(d),
                                            f[c] = this.pB(i(d[0], d[1]), this.dB))
                                        }
                                        h[o] = f
                                    }
                                }
                                n[s] = h
                            }
                        }
                    return 0 < n.length ? n : t
                }
                return t
            }
            ,
            nr.prototype.getCameraParams = function() {
                this.mB();
                var t, i, n, s, e, r, h = this.map.getView(), o = h.pz(), a = this.pB(this.dB, this.Us);
                return "3D" === h.type ? (n = (i = o.lB()).fov,
                s = i.near,
                e = i.far,
                r = i.position,
                t = i.target,
                i = i.up,
                {
                    fov: n / Math.PI * 180,
                    near: s,
                    far: e,
                    position: U.Pt(this.pB(r, a), [r[2]]),
                    lookAt: U.Pt(this.pB(t, a), [t[2]]),
                    up: i
                }) : "2D" === h.type ? {
                    rotation: (n = o.lB()).rotation,
                    near: s = n.near,
                    far: e = n.far,
                    top: n.top,
                    bottom: n.bottom,
                    left: n.left,
                    right: n.right,
                    position: U.Pt(this.pB(r = n.position, a), [r[2]])
                } : void 0
            }
            ,
            nr.prototype.getMVPMatrix = function() {
                this.mB();
                var t = this.map.getView().pz()
                  , i = this.pB(this.dB, this.Us)
                  , n = U.Il();
                return this.Xl = t.Vl(),
                n.set([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, i[0], i[1], 0, 1]),
                U.multiply(this.Xl, this.Xl, n),
                this.Xl
            }
            ,
            nr.prototype.mB = function() {
                var i = (t = this.map.getView().getStatus()).optimalZoom
                  , t = t.centerCoord;
                i >= U.Ra ? (i = U.lcs.getLocalByCoord([t[0], t[1]]),
                this.Us = i.center) : this.Us = [0, 0]
            }
            ,
            nr.prototype.pB = function(t, i) {
                var n = [0, 0];
                return n[0] = t[0] - i[0],
                n[1] = t[1] - i[1],
                n
            }
            ;
            var tr, ir = nr;
            function nr(t) {
                this.Us = [0, 0],
                t || console.error("需要传入 map 实例对象。new AMap.CustomCoords(map);"),
                this.map = t,
                this.mB()
            }
            var sr = [116.397128, 39.916527]
              , er = Qs;
            U.Ei(S, er),
            S.prototype.setMapDataset = function(t) {
                var i;
                null !== t && (this.Wyt = t,
                t = this.Wyt) && (i = JSON.parse(t.style),
                AMap.getConfig().styleVersion = i.v,
                AMap.getConfig().styleClass = i.t,
                i = JSON.parse(t.icon),
                AMap.getConfig().iconVersion = i.v,
                AMap.getConfig().iconClass = i.t,
                i = JSON.parse(t.tile),
                AMap.getConfig().tileVersion = i.v,
                t = !0,
                "false" === i.combo && (t = !1),
                AMap.getConfig().tileCombo = t)
            }
            ,
            S.prototype.setCenter = function(t, i, n) {
                void 0 === i && (i = !1),
                t instanceof U.LngLat && (t = t.toJSON()),
                !i && this.Ev ? this.viewChange({
                    lng: t[0],
                    lat: t[1]
                }, n) : this.om({
                    center: t
                })
            }
            ,
            S.prototype.getStyleByUserId = function(t, i) {
                return this.qY(t, i)
            }
            ,
            S.prototype.getCustomTypeByContainerPos = function(t) {
                var i, n, s, e = this.getCustomTypeByPos(t);
                return e && e[0] ? (i = {},
                s = e[0][0],
                e = {
                    x: e[0][1],
                    y: e[0][2],
                    z: s
                },
                n = (t = t.lnglat).lng,
                s = U.ZY(s, s, n, t.lat, e),
                i.tileInnerCoord = s,
                i.tileCoord = e,
                i) : null
            }
            ,
            S.prototype.getTileInnerCoordByPos = function(t, i, n) {
                var s = {}
                  , e = (i = i.lnglat).lng
                  , n = U.ZY(t.z, n, e, i.lat, t);
                return s.tileInnerCoord = n,
                s
            }
            ,
            S.prototype.getScreenShot = function(t, i) {
                for (var n = this.getSize(), s = document.createElement("canvas"), e = s.getContext("2d"), r = (t = t || n.width,
                i = i || n.height,
                s.width = t,
                s.height = i,
                n.width,
                n.height,
                this["do"].childNodes), h = [], o = 0; o < r.length; o += 1)
                    h.push(r[o]);
                for (o = 0; o < h.length; o += 1) {
                    var a = h[o];
                    "CANVAS" === a.tagName && e.drawImage(a, 0, 0, t, i)
                }
                return s.toDataURL()
            }
            ,
            S.prototype.updateView = function(t, i) {
                this.om(t, i = void 0 === i || i)
            }
            ,
            S.prototype.destroy = function() {
                delete this.hx,
                er.prototype.destroy.call(this)
            }
            ,
            S.prototype.setZoomAndCenter = function(t, i, n, s) {
                void 0 === n && (n = !1),
                this.Pv || (t = this.getZoom()),
                i instanceof U.LngLat && (i = i.toJSON()),
                !n && this.Ev ? this.viewChange({
                    lng: i[0],
                    lat: i[1],
                    zoom: t
                }, s) : this.om({
                    center: i,
                    zoom: t
                })
            }
            ,
            S.prototype.getBounds = function() {
                return new l(this._view.getStatus().bounds)
            }
            ,
            S.prototype.getCenter = function() {
                var i = (t = this._view.getOptions().center)[0]
                  , t = t[1];
                return new U.LngLat(+i.toFixed(6),+t.toFixed(6))
            }
            ,
            S.prototype.getGraphicInfo = function() {
                return this.wX()
            }
            ,
            S.prototype.setZoom = function(t, i, n) {
                void 0 === i && (i = !1),
                this.Pv && (!i && this.Ev ? this.viewChange({
                    zoom: t
                }, n) : this.om({
                    zoom: t
                }))
            }
            ,
            S.prototype.getZoom = function(t) {
                return void 0 === t && (t = 2),
                +this._view.getOptions().zoom.toFixed(t)
            }
            ,
            S.prototype.zoomIn = function() {
                this.setZoom(this.getZoom() + 1)
            }
            ,
            S.prototype.zoomOut = function() {
                this.setZoom(this.getZoom() - 1)
            }
            ,
            S.prototype.getPitch = function() {
                return this._view.getOptions().pitch
            }
            ,
            S.prototype.setPitch = function(t, i, n) {
                !(i = void 0 !== i && i) && this.Ev ? this.viewChange({
                    pitch: t
                }, n) : this.om({
                    pitch: t
                })
            }
            ,
            S.prototype.getRotation = function() {
                return this._view.getOptions().rotation
            }
            ,
            S.prototype.setRotation = function(t, i, n) {
                void 0 === t && (t = 0),
                !(i = void 0 !== i && i) && this.Ev ? this.viewChange({
                    rotation: t
                }, n) : this.om({
                    rotation: t
                })
            }
            ,
            S.prototype.setBounds = function(t, i, n) {
                void 0 === i && (i = !1),
                n = (void 0 === n ? [0, 0, 0, 0] : n) || [0, 0, 0, 0],
                t instanceof l && (t = t.toJSON()),
                t = this.em(t, n),
                this.setZoomAndCenter(t[2], [t[0], t[1]], i)
            }
            ,
            S.prototype.panTo = function(t, i) {
                t instanceof U.LngLat && (t = t.toJSON()),
                this.viewChange({
                    lng: t[0],
                    lat: t[1]
                }, i)
            }
            ,
            S.prototype.getBindHandler = function() {
                return this.hx
            }
            ,
            S.prototype.panBy = function(t, i, n) {
                var s, e, r, h, o, a, u, f, l = (c = this.getSize()).width / 2 - t, c = c.height / 2 - i, d = this.getCenter();
                this.lx && this.ux && (s = Math.sqrt(t * t + i * i),
                u = this.getProjection(),
                e = (this.ux.lng === undefined ? d : this.ux).lng,
                d = (this.ux.lat === undefined ? d : this.ux).lat,
                r = this.ux.zoom === undefined ? this.getZoom() : this.ux.zoom,
                h = this.ux.rotation === undefined ? this.getRotation() : this.ux.rotation,
                o = this.ux.pitch === undefined ? this.getPitch() : this.ux.pitch,
                a = u.getResolution(r),
                u = u.project(e, d),
                f = h / 180 * Math.PI,
                t = Math.atan(t / i) - f,
                i < 0 && (t += Math.PI),
                f = s * Math.sin(t),
                i = s * Math.cos(t),
                u[0] -= a * f,
                u[1] += a * i,
                this.setCenter([e, d], !0),
                this.setZoom(r, !0),
                this.setRotation(h, !0),
                this.setPitch(o, !0)),
                this.panTo(this.containerToLngLat([l, c]), n)
            }
            ,
            S.prototype.viewChange = function(t, i) {
                var n, s, e, r, h, o, a, u = new V(.4,0,.15,1), f = (new V(.67,0,1,.42),
                new V(.95,.25,.79,1)), c = new V(.18,.66,.55,.86), l = this.getZoom(), d = this.getPitch(), p = this.getRotation(), v = this.getCenter().toJSON(), m = 0, y = 0, b = 0, g = 0;
                this.lx ? (U.Util.cancelAnimFrame(this.lx),
                this.ux = U.assign(this.ux, t)) : this.ux = t;
                var M = (t = this.ux).zoom
                  , k = t.pitch
                  , w = t.rotation
                  , x = t.lng
                  , A = t.lat
                  , z = (M !== undefined && (n = M - l,
                m = u.h(Math.abs(n / 10)),
                m = 1e3 * Math.max(Math.min(1, m), .1)),
                k !== undefined && (s = k - d,
                y = Math.abs(16.7 * s)),
                w !== undefined && (e = w - p,
                b = Math.abs(16.7 * e)),
                x !== undefined && A !== undefined && (t = [],
                a = this._view.getStatus().centerCoord,
                r = x - v[0],
                h = A - v[1],
                o = this.getProjection().project(x, A),
                t[0] = Math.abs(o[0] - a[0]) / this.getResolution(),
                t[1] = Math.abs(o[1] - a[1]) / this.getResolution(),
                0,
                o = u.h(Math.min(t[0] / this.getSize().width, 1)),
                a = u.h(Math.min(t[1] / this.getSize().height, 1)),
                g = 1e3 * Math.max(Math.min(1, a, o), .05, o, a)),
                Math.max(m, y, b, g))
                  , C = 0;
                function T() {
                    var t, i = {};
                    z <= C ? (M !== undefined && (i.zoom = M),
                    k !== undefined && (i.pitch = k),
                    w !== undefined && (i.rotation = w),
                    x !== undefined && A !== undefined && (i.center = [x, A]),
                    this.om(i),
                    U.Util.cancelAnimFrame(this.lx),
                    this.lx = !1,
                    this.ux = {}) : (C += 16.7,
                    t = Math.min(1, u.p(C / z)),
                    k !== undefined && (i.pitch = s * t + d),
                    w !== undefined && (i.rotation = e * t + p),
                    x !== undefined && A !== undefined && (n && .5 < n ? t = c.h(C / z) : n && n < -.5 && (t = f.h(C / z)),
                    i.center = [r * t + v[0], h * t + v[1]]),
                    M !== undefined && (t = (n < 0 ? c : f).h(C / z),
                    i.zoom = n * t + l),
                    this.om(i),
                    this.lx = U.Util.requestAnimFrame(T.bind(this)))
                }
                i !== undefined && (z = i),
                this.Ev || (z = -1),
                T.call(this)
            }
            ,
            S.prototype.getContainer = function() {
                return this.kv
            }
            ,
            S.prototype.add = function(t) {
                for (var i = [], n = [], s = [], e = [], r = 0, h = t = Array.isArray(t) ? t : [t]; r < h.length; r++) {
                    var o = h[r];
                    if (U.px(o))
                        this.addLayer(o);
                    else if (U.er(o))
                        U.RF(o) ? (this.add(o.getOverlays()),
                        o.setMap(this)) : this.am(o);
                    else
                        switch (o.type) {
                        case "AMap.Marker":
                        case "AMap.ElasticMarker":
                        case "AMap.Text":
                            i.push(o);
                            break;
                        case "AMap.InfoWindow":
                            n.push(o);
                            break;
                        case "AMap.ContextMenu":
                            s.push(o);
                            break;
                        case "AMap.LabelMarker":
                            e.push(o)
                        }
                }
                this.pi.add(i),
                this.di.add(n),
                this.vm.add(s),
                e.length && this.rm().add(e),
                this.setNeedUpdate(!0)
            }
            ,
            S.prototype.remove = function(t) {
                for (var i = [], n = [], s = [], e = [], r = 0, h = t = Array.isArray(t) ? t : [t]; r < h.length; r++) {
                    var o = h[r];
                    if (U.er(o))
                        U.RF(o) ? (this.remove(o.getOverlays()),
                        o.setMap(null)) : this.$F.remove(o);
                    else if (U.px(o))
                        this.removeLayer(o);
                    else
                        switch (o.type) {
                        case "AMap.Marker":
                        case "AMap.ElasticMarker":
                        case "AMap.Text":
                            i.push(o);
                            break;
                        case "AMap.InfoWindow":
                            n.push(o);
                            break;
                        case "AMap.ContextMenu":
                            s.push(o);
                            break;
                        case "AMap.LabelMarker":
                            e.push(o)
                        }
                }
                e.length && this.rm().remove(e),
                this.pi && this.pi.remove(i),
                this.di && this.di.remove(n),
                this.vm && this.vm.remove(s),
                this.setNeedUpdate(!0)
            }
            ,
            S.prototype.lngLatToCoords = function(t) {
                var i;
                return U.Bs(t) && (t = [t.lng, t.lat]),
                (i = this.getProjection()).project.apply(i, t)
            }
            ,
            S.prototype.coordsToLngLat = function(t) {
                var i = (i = this.getProjection()).unproject.apply(i, t);
                return new AMap.LngLat(i[0],i[1])
            }
            ,
            S.prototype.lngLatToContainer = function(t) {
                var i = (t = U.Bs(t) ? [t.lng, t.lat] : t)[0]
                  , n = t[1]
                  , t = void 0 === (t = t[2]) ? 0 : t
                  , s = this._view
                  , e = s.getOptions().zoom || this.xt[1]
                  , n = (i = s.lnglatToContainer(+i, +n, t, e))[0];
                return new U.Pixel(n,i[1])
            }
            ,
            S.prototype.lnglatToContainer = function() {
                console.log && console.log("请使用 lngLatToContainer 方法替代。")
            }
            ,
            S.prototype.containerTolnglat = function() {
                console.log && console.log("请使用 containerToLngLat 方法替代。")
            }
            ,
            S.prototype.containerToLngLat = function(t) {
                var t = t instanceof Array ? (i = t[0],
                t[1]) : (i = t.x,
                t.y)
                  , i = this._view.containerTolnglat(i, t)
                  , t = i[0];
                return new U.LngLat(t,i[1])
            }
            ,
            S.prototype.coordToContainer = function(t) {
                var i;
                return (i = this._view)._u.apply(i, t)
            }
            ,
            S.prototype.containerToCoord = function(t) {
                return t instanceof U.Pixel && (t = t.toArray()),
                this._view.ku(t[0], t[1])
            }
            ,
            S.prototype.pixelToLngLat = function(t, i) {
                i === undefined && (i = this.getZoom()),
                t = t instanceof Array ? (n = t[0],
                t[1]) : (n = t.x,
                t.y);
                var n = U.V[this._view.au()].unproject(n, t, i)
                  , t = n[0];
                return new U.LngLat(t,n[1])
            }
            ,
            S.prototype.pixelTolnglat = function() {
                console.log && console.log("请使用 pixelToLngLat 方法替代。")
            }
            ,
            S.prototype.unproject = function() {
                console.log && console.log("请使用 pixelToLngLat 方法替代。")
            }
            ,
            S.prototype.lngLatToPixel = function(t, i) {
                var n = (t = t instanceof U.LngLat ? t.toJSON() : t)[0]
                  , t = t[1];
                i === undefined && (i = this.getZoom());
                t = (n = U.V[this._view.au()].project(n, t, i))[0];
                return new U.Pixel(t,n[1])
            }
            ,
            S.prototype.project = function(t, i) {
                return console.log && console.log("请使用 lngLatToPixel 方法替代。"),
                this.lngLatToPixel(t, i)
            }
            ,
            S.prototype.lnglatToPixel = function(t, i) {
                return console.log && console.log("请使用 lngLatToPixel 方法替代。"),
                this.lngLatToPixel(t, i)
            }
            ,
            S.prototype.lnglatToPixelArray = function(t, i) {
                var n = (t = t instanceof U.LngLat ? t.toJSON() : t)[0]
                  , t = t[1];
                return i === undefined && (i = this.getZoom()),
                U.V[this.getView().au()].project(n, t, i)
            }
            ,
            S.prototype.getTileCoordByLngLat = function(t, i, n) {
                var s = (t = t instanceof U.LngLat ? t.toJSON() : t)[0]
                  , t = t[1]
                  , s = U.V[this.getView().au()].project(s, t, n)
                  , t = Math.floor(s[0] / 256)
                  , s = Math.floor(s[1] / 256);
                return new U.ca(n,t,s)
            }
            ,
            S.prototype.addOverlay = function(t) {
                this.am(t),
                this.setNeedUpdate(!0)
            }
            ,
            S.prototype.removeOverlay = function(t) {
                this.ar(t),
                this.setNeedUpdate(!0)
            }
            ,
            S.prototype.getResolution = function(t) {
                return t = (t || this.getCenter()).kT,
                this.getProjection().getResolution(this.getZoom()) * Math.cos(t * Math.PI / 180)
            }
            ,
            S.prototype.getScale = function(t) {
                return this.getResolution() * (t || 96) / .0254
            }
            ,
            S.prototype.getCity = function(n, t) {
                Ke.get(AMap.getConfig().server + "/v3/geocode/regeo", {
                    extensions: "",
                    output: "json",
                    location: t || this.getCenter().toJSON()
                }, function(t, i) {
                    "complete" === t && i.status + "" == "1" ? (t = i.regeocode.addressComponent,
                    n({
                        province: t.province,
                        city: t.city instanceof Array ? "" : t.city,
                        citycode: t.citycode instanceof Array ? "" : t.citycode,
                        district: t.district instanceof Array ? "" : t.district
                    })) : n({})
                })
            }
            ,
            S.prototype.setCity = function(h, o) {
                var a = this;
                Ke.get(AMap.getConfig().server + "/v3/config/district", {
                    output: "json",
                    subdistrict: "0",
                    extensions: "all",
                    keywords: h
                }, function(t, i) {
                    if ("complete" === t && i.status + "" == "1") {
                        if ((t = i.districts) && t.length) {
                            i = t[0],
                            /[^\w]+/.test(h) && (t = U.find(t, function(t) {
                                return t.name === h
                            })) && t !== i && (i = t);
                            try {
                                var n = i.center.split(",")
                                  , s = i.level
                                  , e = void 0;
                                switch (s) {
                                case "city":
                                    e = 10;
                                    break;
                                case "province":
                                    e = 7;
                                    break;
                                case "district":
                                    e = 12;
                                    break;
                                case "country":
                                    e = 4;
                                    break;
                                default:
                                    e = 12
                                }
                                -1 !== i.name.indexOf("市") && (e = 10),
                                a.setZoomAndCenter(e, n),
                                o && o.call(a, n, e)
                            } catch (r) {}
                        }
                    } else
                        o(null, null)
                })
            }
            ,
            S.prototype.setFitView = function(t, i, n, s) {
                if (void 0 === i && (i = !1),
                void 0 === n && (n = [60, 60, 60, 60]),
                void 0 === s && (s = Math.min(17.5, Qs.t_[1])),
                !((t = U.FF(t) ? t.getAllOverlays() : t)instanceof Array && 0 === t.length)) {
                    n = Boolean(n) ? n : [60, 60, 60, 60],
                    (t = !(t = t || []) || t instanceof Array ? t : [t]) && 0 !== t.length || (t = this.getAllOverlays());
                    var e, r, t = this.nm(t);
                    if (t && (!window._AMapConfig || t.check()))
                        return e = t.toJSON(),
                        e = this.em(e, n, s),
                        "d" === U.Support.baseRender && (e[2] = Math.floor(e[2])),
                        this.viewChange({
                            lng: e[0],
                            lat: e[1],
                            zoom: e[2]
                        }, r = i ? 0 : r),
                        t
                }
            }
            ,
            S.prototype.getFitZoomAndCenterByOverlays = function(t, i, n) {
                if (void 0 === i && (i = [0, 0, 0, 0]),
                void 0 === n && (n = U.zoomRange[1]),
                t = this.nm(t))
                    return t = t.toJSON(),
                    [(t = this.em(t, i, n))[2], new U.LngLat(t[0],t[1])]
            }
            ,
            S.prototype.getFitZoomAndCenterByBounds = function(t, i, n) {
                return void 0 === i && (i = [0, 0, 0, 0]),
                void 0 === n && (n = U.zoomRange[1]),
                t instanceof l && (t = t.toJSON()),
                [(t = this.em(t, i, n))[2], new U.LngLat(t[0],t[1])]
            }
            ,
            S.prototype.addControl = function(t) {
                t.addTo(this),
                this.controls.push(t)
            }
            ,
            S.prototype.removeControl = function(t) {
                t.remove ? t.remove() : t.removeFrom && t.removeFrom(this, this.controls);
                for (var i = 0; i < this.controls.length; i++)
                    if (this.controls[i] === t)
                        return void this.controls.splice(i - 1, 1)
            }
            ,
            S.prototype.L$ = function() {}
            ,
            S.prototype.D$ = function() {
                return "zh_cn"
            }
            ,
            S.prototype.set = function(t, i) {
                switch (t) {
                case "layers":
                    this.setLayers(i);
                    break;
                case "projection":
                    break;
                case "pitch":
                    this.setPitch(i);
                    break;
                case "debug":
                    this.debug = i;
                    break;
                case "showLabel":
                    this.showLabel = i;
                    break;
                case "zoom":
                    this.setZoom(i);
                    break;
                case "center":
                    this.setCenter(i);
                    break;
                case "rotation":
                    this.setRotation(i);
                    break;
                case "dragEnable":
                    this.setStatus({
                        dragEnable: i
                    });
                    break;
                case "zoomEnable":
                    this.setStatus({
                        zoomEnable: i
                    });
                    break;
                case "scrollWheel":
                    this.setStatus({
                        scrollWheel: i
                    });
                    break;
                case "jogEnable":
                    this.setStatus({
                        jogEnable: i
                    });
                    break;
                case "doubleClickZoom":
                    this.setStatus({
                        doubleClickZoom: i
                    });
                    break;
                case "keyboardEnable":
                    this.setStatus({
                        keyboardEnable: i
                    });
                    break;
                case "animateEnable":
                    this.setStatus({
                        animateEnable: i
                    });
                    break;
                case "pitchEnable":
                    this.setStatus({
                        pitchEnable: i
                    });
                    break;
                case "touchZoom":
                    this.setStatus({
                        touchZoom: i
                    });
                    break;
                case "isHotspot":
                    this.setStatus({
                        isHotspot: i
                    });
                    break;
                case "style":
                    this.setStyleByPlat(i)
                }
            }
            ,
            S.prototype.setMapStyle = function(t) {
                this.f_(t),
                this.setStatus({
                    mapStyle: t
                }),
                this.indoorMap && this.indoorMap.hide()
            }
            ,
            S.prototype.getMapStyle = function() {
                var t, i = this.getStatus();
                return i && i.mapstyleUrl ? (t = i.mapstyleUrl,
                "normal" === i.mapstyleUrl ? "amap://styles/normal" : t) : ""
            }
            ,
            S.prototype.getAllOverlays = function(i) {
                var t = this.$F.getAllOverlays()
                  , n = U.Pt(t)
                  , t = this.pi.getAllOverlays()
                  , s = this.di.getAllOverlays();
                U.vx(t, function(t) {
                    n.push(t)
                }),
                s && s.length && U.Util.Ig(n, s);
                for (var e = 0, r = this.zv; e < r.length; e++) {
                    var h = r[e];
                    h instanceof vs && U.Util.Ig(n, h.getAllOverlays())
                }
                return n = n.filter(function(t) {
                    return !(t._opts && t._opts.innerOverlay || i && !(-1 < t.className.toLocaleLowerCase().indexOf(i)))
                })
            }
            ,
            S.prototype.clearMap = function() {
                for (var t = this.getAllOverlays(), i = 0; i < t.length; i++) {
                    var n = t[i];
                    n && n.remove && n.remove()
                }
            }
            ,
            S.prototype.clearInfoWindow = function() {
                this.di && this.di.close()
            }
            ,
            S.prototype.addImage = function(t, i) {
                this.I_ && this.I_.addImage(t, i)
            }
            ,
            S.prototype.getImage = function(t) {
                if (this.I_)
                    return this.I_.getImage(t)
            }
            ,
            S.prototype.getFeatures = function() {
                return this.Cw
            }
            ,
            S.prototype.setFeatures = function(t) {
                this.Cw = t;
                for (var i = this.yS(), n = this.getLayers(), s = 0; s < n.length; s++) {
                    var e = n[s];
                    "AMap.Buildings" === e.CLASS_NAME && e.getState().u$ && (i ? e.show() : e.hide())
                }
                this.setNeedUpdate(!0)
            }
            ,
            S.prototype.hasLayer = function(i) {
                var t = this.getLayers();
                return -1 < U.findIndex(t, function(t) {
                    return t === i
                })
            }
            ,
            S.prototype.getMapApprovalNumber = function() {
                var t = this.c_
                  , i = {
                    satellite: "GS(2025)1807",
                    district: "GS(2024)1158"
                };
                return t && ("normal" === t || "amap://styles/normal" === t) || (i.base = "GS(2024)1158"),
                i
            }
            ,
            S.prototype.setMask = function(t) {
                t && (this.c$ = t,
                this.d$ || (this.d$ = new xs({
                    zIndex: -10,
                    visible: !0,
                    path: this.c$
                }),
                this.addLayer(this.d$)),
                null != (t = this.d$)) && t.setMask(this.c$)
            }
            ,
            S.prototype.cancelMapAnimate = function() {
                this.lx && (U.Util.cancelAnimFrame(this.lx),
                this.lx = -1,
                this.ux = {})
            }
            ,
            S.prototype.setLabelRejectMask = function(t) {
                t !== undefined && (this.NH = t,
                this.setNeedUpdate(!0))
            }
            ,
            S.prototype.decodeTiles = function(t) {
                return U.UnzipAndDecodeTiles(t)
            }
            ,
            S.prototype.queryOverlayByPosition = function(t) {
                return this.FY(t)
            }
            ,
            S.prototype.am = function(t) {
                this.$F.add(t)
            }
            ,
            S.prototype.ar = function(t) {
                this.sm().remove(t)
            }
            ,
            S.prototype.setStyle = function(t) {
                this.RY(t)
            }
            ,
            S.prototype.setStyleByPlat = function(t) {
                this.RY(t)
            }
            ;
            var er, hr, rr = S;
            function S(t, i) {
                void 0 === i && (i = {
                    zoom: 9,
                    center: [116.397128, 39.916527],
                    rotation: 0,
                    pitch: 0,
                    viewMode: "2D"
                });
                var n = this
                  , s = null;
                if (null === (s = t instanceof HTMLDivElement || null !== (t = document.getElementById(t)) ? t : s))
                    throw Error("Map container div not exist");
                U.Support.amapRunTime && !U.Support.amapRunTime["map-init"] && (U.Support.amapRunTime["map-init"] = (new Date).getTime()),
                i.zooms = i.zooms || Qs.t_,
                t = !1,
                i.zoom === undefined && (t = !0,
                i.zoom = Math.max(Math.min(i.zooms[1], 12), i.zooms[0])),
                i.center = i.center ? U.Bs(i.center) ? i.center.toJSON() : i.center : sr,
                i.rotation = i.rotation || 0,
                i.layers = i.layers || [],
                i.baseRender = U.Support.isWebGL ? "w" : "d",
                i.tileCombo = AMap.getConfig().tileCombo,
                i.showIndoorMap = i.showIndoorMap || !1,
                i.overseaDataType = i.overseaDataType || "",
                i.showOversea = i.showOversea || !1,
                i.showOversea && !i.languageCode && (i.languageCode = "default"),
                i.vectorMapForeign && (i.showOversea = !0),
                i.vdataProxy = i.vdataProxy || "",
                i.poiIcon = i.poiIcon || undefined,
                i.vdataProxy && (AMap.getConfig().vdataProxy = i.vdataProxy),
                n = er.call(this, s, i) || this,
                t && (s = n.em(tr)[2],
                n.setZoom(s, !0)),
                n.pi = new Ae(n),
                n.di = new Re(n),
                n.vm = new _e(n),
                n.hx = new ot(n),
                n.hx.Xt(),
                n.plugin = AMap.plugin;
                for (var e = 0; e < i.layers.length; e++) {
                    var r = i.layers[e];
                    r && "AMap.IndoorMap" === r.CLASS_NAME && r.setMap(n)
                }
                return !i.showIndoorMap || "normal" !== n.c_ && "amap://styles/normal" !== n.c_ || n.isDOMMode() || n.addLayer(n.indoorMap = new AMap.IndoorMap({
                    zIndex: 8,
                    opacity: 1,
                    map: n
                })),
                n.YG = i.vectorMapForeign,
                n.QZ = i.overseaDataType,
                n.Dpt = i.showOversea,
                n.jdt = performance && performance.now(),
                n.lcs.setMap(n),
                n.customCoords = new ir(n),
                n
            }
            function or(t) {
                var i = hr.call(this, t) || this;
                return i.CLASS_NAME = "AMap.ImageLayer",
                i._tileUrl = t.url || t.tileUrl,
                i.ir = t.bounds,
                i.Qh = t.zIndex || 6,
                i.tl = t.opacity === undefined ? 1 : t.opacity,
                i.il = t.visible === undefined || t.visible,
                i.xt = t.zooms === undefined ? U.zoomRange : t.zooms,
                i.canvas = t.canvas,
                i
            }
            hr = s,
            U.Ei(or, hr),
            or.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    type: "image",
                    tileUrl: this._tileUrl,
                    bounds: this.ir,
                    canvas: this.canvas,
                    zooms: this.xt
                }
            }
            ,
            or.prototype.co = function() {
                return this._id
            }
            ,
            or.prototype.getState = function() {
                return {
                    visible: this.il,
                    opacity: this.tl,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ;
            var ar, ur = {
                tileUrl: "",
                url: "",
                bounds: [0, 0, 0, 0],
                opacity: 1,
                visible: !0,
                zIndex: 4,
                zooms: U.zoomRange
            }, fr = (ar = Mi = or,
            U.Ei(cr, ar),
            cr.prototype.getImageUrl = function() {
                return this._tileUrl
            }
            ,
            cr.prototype.setImageUrl = function(t) {
                var i;
                t && (this._tileUrl = t,
                this.getSourceConfig(),
                (i = this.getSource()) && i._tileUrl && i.reLoadImgage && (i._tileUrl = t,
                i.reLoadImgage(t)),
                this._opts.url = t,
                this.uo.getSource(this._id).Fo(!1),
                this.map) && this.map.setNeedUpdate(!0)
            }
            ,
            cr.prototype.getBounds = function() {
                return this.ir
            }
            ,
            cr.prototype.setBounds = function(t) {
                t && (this.ir = t,
                this.map.setNeedUpdate(!0))
            }
            ,
            cr);
            function cr(t) {
                var i = this;
                if ((t = void 0 === t ? ur : t).tileUrl || t.url)
                    return t.bounds = t.bounds || ur.bounds,
                    t.opacity = (t.opacity === undefined ? ur : t).opacity,
                    t.visible = (t.visible === undefined ? ur : t).visible,
                    t.zIndex = (t.zIndex === undefined ? ur : t).zIndex,
                    t.canvas = undefined,
                    (i = ar.call(this, t) || this).onCreated(),
                    i;
                throw new Error("ImageLayer need an Url")
            }
            var lr, dr, pr = {
                url: "",
                tileUrl: "",
                bounds: [0, 0, 0, 0],
                opacity: 1,
                visible: !0,
                zooms: U.zoomRange,
                zIndex: 6
            }, vr = (lr = Mi,
            U.Ei(mr, lr),
            mr.prototype.setCanvas = function(t) {
                this.canvas = t,
                this.reFresh()
            }
            ,
            mr.prototype.getElement = function() {
                return this.canvas
            }
            ,
            mr.prototype.getBounds = function() {
                return this.ir
            }
            ,
            mr.prototype.setBounds = function(t) {
                t && (this.ir = t,
                this.map.setNeedUpdate(!0))
            }
            ,
            mr.prototype.reFresh = function() {
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            mr.prototype.destroy = function() {
                var t = this.getSource();
                t && t.destroy && t.destroy()
            }
            ,
            mr);
            function mr(t) {
                var i = this;
                return (t = void 0 === t ? pr : t).bounds = t.bounds || pr.bounds,
                t.opacity = (t.opacity === undefined ? pr : t).opacity,
                t.visible = (t.visible === undefined ? pr : t).visible,
                t.tileUrl = "",
                (i = lr.call(this, t) || this).onCreated(),
                i.CLASS_NAME = "AMap.CanvasLayer",
                i
            }
            function yr(t, i) {
                var n = dr.call(this, i) || this;
                return n.CLASS_NAME = "AMap.CustomLayer",
                n.eP = !1,
                n.UF = !1,
                n.render = i.render || function() {}
                ,
                n.canvas = t,
                n.Qh = i.zIndex || 11,
                n.tl = i.opacity === undefined ? 1 : i.opacity,
                n.il = i.visible === undefined || i.visible,
                n.UF = i.alwaysRender !== undefined && i.alwaysRender,
                n.xt = i.zooms || U.zoomRange,
                n.canvas.style.opacity = "" + n.tl,
                n.canvas.style.display = n.il ? "block" : "none",
                n.map && n.gx(n.canvas),
                n
            }
            dr = s,
            U.Ei(yr, dr),
            yr.prototype.getState = function() {
                return !this.eP && this.map && this.gx(this.canvas),
                {
                    visible: this.il,
                    opacity: this.tl,
                    zIndex: this.Qh,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF,
                    kv: this._container,
                    alwaysRender: this.UF
                }
            }
            ,
            yr.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    type: "custom",
                    zooms: this.xt
                }
            }
            ,
            yr.prototype.co = function() {
                return this._id
            }
            ,
            yr.prototype.setOpacity = function(t) {
                dr.prototype.setOpacity.call(this, t),
                this.canvas.style.opacity = "" + this.tl
            }
            ,
            yr.prototype.setMap = function(t) {
                t || this.destroy(),
                dr.prototype.setMap.call(this, t),
                t && this.gx(this.canvas)
            }
            ,
            yr.prototype.setzIndex = function(t) {
                this.Qh = t,
                this._container && (this._container.style.zIndex = this.Qh + "")
            }
            ,
            yr.prototype.destroy = function() {
                var t;
                this._container && (this.map ? this.map["do"].removeChild(this._container) : (t = document.querySelector(".amap-layers")) && t.removeChild(this._container),
                this._container = null)
            }
            ,
            yr.prototype.gx = function(t) {
                this._container || (this._container = document.createElement("div"),
                this._container.style.zIndex = this.Qh + "",
                this._container.className = "amap-layer amap-e",
                this._container.appendChild(t),
                this.map["do"].appendChild(this._container),
                this.eP = !0)
            }
            ,
            br = yr,
            U.Ei(Mr, br);
            var br, gr = Mr;
            function Mr(t, i) {
                return (t = br.call(this, t, i) || this).onCreated(),
                t
            }
            var kr, wr = {
                zIndex: 120,
                opacity: 1,
                zooms: U.zoomRange,
                cursor: "pointer",
                alwaysRender: !0
            }, xr = (kr = U.Event,
            U.Ei(I, kr),
            I.prototype.setMap = function(t) {
                t ? (this._map = t).add(this.a$) : this._map && (this.clear(),
                this._map.remove(this.a$))
            }
            ,
            I.prototype.getMap = function() {
                return this._map || null
            }
            ,
            I.prototype.getData = function() {
                return this.VL
            }
            ,
            I.prototype.setData = function(t) {
                var i = this;
                t && (this.VL = t,
                this.XD(),
                AMap.Util.requestAnimFrame(function() {
                    i.emit("complete")
                }))
            }
            ,
            I.prototype.getStyle = function() {
                return 1 === this.Ze.length ? this.Ze[0] : this.Ze
            }
            ,
            I.prototype.setStyle = function(t) {
                if (t) {
                    Array.isArray(t) || (t = [t]);
                    var i = this.Ze
                      , n = [];
                    if (i && i.length)
                        for (var s = 0; s < t.length; s++) {
                            var e = t[s]
                              , r = i[s] || i[0];
                            n.push(AMap.extend({}, r, e))
                        }
                    else
                        n = t;
                    this.Ze = n,
                    this.XD()
                }
            }
            ,
            I.prototype.getOpacity = function() {
                return this._opts.opacity
            }
            ,
            I.prototype.setOpacity = function(t) {
                this._opts.opacity = t,
                this.a$ && this.a$.setOpacity(t)
            }
            ,
            I.prototype.getzIndex = function() {
                return this._opts.zIndex
            }
            ,
            I.prototype.setzIndex = function(t) {
                this._opts.zIndex = t,
                this.a$ && this.a$.setzIndex(t)
            }
            ,
            I.prototype.getZooms = function() {
                return this._opts.zooms || [2, 30]
            }
            ,
            I.prototype.setZooms = function(t) {
                this._opts.zooms = t,
                this.a$ && this.a$.setZooms(t)
            }
            ,
            I.prototype.getCursor = function() {
                return this._opts.cursor || "default"
            }
            ,
            I.prototype.show = function() {
                this.a$.show()
            }
            ,
            I.prototype.hide = function() {
                this.a$.hide()
            }
            ,
            I.prototype.clear = function() {
                this.a$.clear(),
                this.VL = []
            }
            ,
            I.prototype.XD = function() {
                var t = this.VL
                  , i = this.Ze
                  , n = []
                  , s = this.getCursor();
                if (t && i) {
                    for (var e = 0, r = t; e < r.length; e++) {
                        var h, o, a, u, f, c = r[e], l = c.lnglat, d = void 0 === (d = c.style) ? 0 : d;
                        l && (h = (a = i[d] || i[0]).url,
                        f = void 0 === (f = a.anchor) ? new AMap.Pixel(0,0) : f,
                        o = a.rotation,
                        d = void 0 === (u = a.zIndex) ? d : u,
                        a = (u = a.size).width ? u.toArray() : u,
                        u = f.x ? f.toArray() : f,
                        (f = new AMap.LabelMarker({
                            position: l,
                            zIndex: d,
                            cursor: s,
                            rotation: o,
                            icon: {
                                image: h,
                                size: a,
                                anchor: u
                            }
                        })).qD = c,
                        this.Rm(f),
                        n.push(f))
                    }
                    this.jT = n,
                    this.a$.clear(),
                    this.a$.add(n)
                }
            }
            ,
            I.prototype.Rm = function(t) {
                var r = this;
                t.on(["click", "dblclick", "mouseover", "mousemove", "mouseout", "mouseup", "mousedown", "touchstart", "touchend"], function(t) {
                    var i, n = t.type, s = r._map, e = r.getCursor();
                    "default" !== e && s && (i = s.getDefaultCursor(),
                    "mouseover" === n ? s.setCursor(e) : "mouseout" === n && s.setCursor(i)),
                    r.QD(t)
                })
            }
            ,
            I.prototype.QD = function(t) {
                var i = t.type
                  , t = this.KD(t);
                this.emit(i, t)
            }
            ,
            I.prototype.KD = function(t) {
                var i = t.target;
                return t.target = this,
                {
                    target: t.target,
                    type: t.type,
                    data: i.qD || {}
                }
            }
            ,
            I);
            function I(t, i) {
                var n = kr.call(this) || this;
                n.CLASS_NAME = "AMap.MassMarks",
                n._opts = AMap.extend({}, wr, i);
                var s = (i = n._opts).zIndex
                  , e = i.style;
                return n.a$ = new AMap.LabelsLayer({
                    zIndex: s,
                    opacity: i.opacity,
                    zooms: i.zooms,
                    collision: !1,
                    allowCollision: !1,
                    VT: !0
                }),
                n.setData(t),
                n.setStyle(e),
                n.XD(),
                n
            }
            var Ar, zr = "AMap.Text", Cr = "amap-overlay-text-container", Tr = (Ar = Te,
            U.Ei(Sr, Ar),
            Sr.prototype.getText = function() {
                return this._opts.text
            }
            ,
            Sr.prototype.getOptions = function() {
                return this._opts
            }
            ,
            Sr.prototype.setText = function(t) {
                var i = this.wx(t);
                this._opts.text = t,
                this.setContent(i)
            }
            ,
            Sr.prototype.setStyle = function(t) {
                t && (this._x = t,
                this._opts.style = t,
                this._size = [0, 0],
                this.updateOverlay())
            }
            ,
            Sr.prototype.updateOverlay = function(t) {
                void 0 === t && (t = {}),
                this.dom && !U.isEmpty(this._x) && this.kx(this._x),
                Ar.prototype.updateOverlay.call(this, t)
            }
            ,
            Sr.prototype.wx = function(t) {
                var i = document.createElement("div");
                return w.addClass(i, Cr),
                i.innerHTML = t || "",
                i
            }
            ,
            Sr.prototype.kx = function(t) {
                void 0 === t && (t = {});
                var i = this.dom.querySelector("." + Cr);
                if (i)
                    for (var n in t)
                        t.hasOwnProperty(n) && (i.style[n] = t[n])
            }
            ,
            Sr);
            function Sr(t) {
                var i = Ar.call(this, t = void 0 === t ? {} : t) || this;
                return i.className = zr,
                i.type = zr,
                i._x = {},
                i._size = [0, 0],
                t.style && (i._x = t.style),
                t.text && i.setText(t.text),
                i
            }
            var Ir, Lr = {
                zooms: U.zoomRange,
                opacity: 1,
                rank: 1,
                bubble: !1,
                visible: !0,
                zIndex: 1,
                cursor: "pointer",
                noSelect: !1,
                icon: {
                    clipOrigin: [0, 0],
                    anchor: [0, 0],
                    retina: !0
                },
                richText: {
                    clipOrigin: [0, 0],
                    anchor: [0, 0],
                    retina: !0
                },
                innerOverlay: !1,
                rotation: 0,
                text: {
                    content: "",
                    direction: "right",
                    offset: [0, 0],
                    zooms: U.zoomRange,
                    style: {
                        fontSize: 12,
                        fontFamily: "sans-serif",
                        fontWeight: "normal",
                        fillColor: "#000",
                        strokeWidth: 0,
                        padding: "3",
                        fold: !1
                    }
                }
            }, Dr = {
                uy: "AMap.LabelMarker",
                gy: Math.pow(2, 31)
            }, Or = {
                constructor: {
                    time: 0,
                    highResTime: 0
                },
                setIcon: {
                    time: 0,
                    highResTime: 0
                },
                setText: {
                    time: 0,
                    highResTime: 0
                }
            }, Rr = (Ir = Kt,
            U.Ei(L, Ir),
            L.prototype.nY = function(t) {
                var i, n = U.yn(t);
                for (i in Lr)
                    Lr.hasOwnProperty(i) && "undefined" == typeof n[i] && (n[i] = U.clone(Lr[i]));
                return n
            }
            ,
            L.prototype.getName = function() {
                return this._opts.name
            }
            ,
            L.prototype.setName = function(t) {
                this._opts.name = t
            }
            ,
            L.prototype.getBounds = function() {
                var t = this._position;
                return new l(t,t)
            }
            ,
            L.prototype.getPosition = function() {
                return new U.LngLat(this._position[0],this._position[1])
            }
            ,
            L.prototype.setPosition = function(t) {
                t && ("string" == typeof t ? t = U.map(t.split(","), function(t) {
                    return parseFloat(t)
                }) : U.Bs(t) && (t = t.toJSON()),
                this._position = t,
                this.to())
            }
            ,
            L.prototype.getZooms = function() {
                return this._opts.zooms
            }
            ,
            L.prototype.setRichText = function(t) {
                t && (U.assign(this._opts.richText, t),
                this.to())
            }
            ,
            L.prototype.getRichText = function() {
                return this._opts.richText
            }
            ,
            L.prototype.setZooms = function(t) {
                void 0 === t && (t = U.zoomRange),
                this._opts.zooms = t,
                this.to()
            }
            ,
            L.prototype.getOpacity = function() {
                return this._opts.opacity
            }
            ,
            L.prototype.setOpacity = function(t) {
                void 0 !== t && (this._opts.opacity = t,
                this.to())
            }
            ,
            L.prototype.setRotation = function(t) {
                void 0 !== t && (this._opts.rotation = t,
                this.to())
            }
            ,
            L.prototype.getRotation = function() {
                return this._opts.rotation === undefined ? 0 : this._opts.rotation
            }
            ,
            L.prototype.getzIndex = function() {
                return this._opts.zIndex
            }
            ,
            L.prototype.setzIndex = function(t) {
                this._opts.zIndex = t,
                this.to()
            }
            ,
            L.prototype.getRank = function() {
                return this._opts.rank
            }
            ,
            L.prototype.setRank = function(t) {
                this._opts.rank = t,
                this.to()
            }
            ,
            L.prototype.getText = function() {
                return this._originOpts.text && this._opts.text || null
            }
            ,
            L.prototype.setText = function(t) {
                t && (U.assign(this._opts.text, t),
                this.to())
            }
            ,
            L.prototype.getIcon = function() {
                return this._originOpts.icon && this._opts.icon || null
            }
            ,
            L.prototype.setIcon = function(t) {
                t && (U.assign(this._opts.icon, t),
                this.to())
            }
            ,
            L.prototype.getOptions = function() {
                return this._opts
            }
            ,
            L.prototype.getDraggable = function() {
                return !1
            }
            ,
            L.prototype.getExtData = function() {
                return this._opts.extData || null
            }
            ,
            L.prototype.setExtData = function(t) {
                this._opts.extData = t
            }
            ,
            L.prototype.setTop = function(t) {
                void 0 === t && (t = !0),
                this._parent && this._parent.setTop(this, t),
                t ? (this.vL = this._opts.zIndex || 1,
                this.setzIndex(Dr.gy)) : (t = this.vL || this._opts.zIndex || 1,
                this.setzIndex(t))
            }
            ,
            L.prototype.setCursor = function(t) {
                t && (this._opts.cursor = t)
            }
            ,
            L.prototype.getCursor = function() {
                return this._opts.cursor || "default"
            }
            ,
            L.prototype.setVisible = function(t) {
                t !== undefined && (this._opts.visible = t,
                this.to())
            }
            ,
            L.prototype.getVisible = function() {
                return this._opts.visible || !0
            }
            ,
            L.prototype.getCollision = function() {
                var t, i = this.getVisible(), n = !1;
                return this._parent && i && (t = this.hS,
                n = this._parent.IL(t)),
                i && n
            }
            ,
            L.prototype.show = function() {
                this._opts.visible = !0,
                this.to()
            }
            ,
            L.prototype.hide = function() {
                this._opts.visible = !1,
                this.to()
            }
            ,
            L.prototype.emit = function(t, i) {
                var n = this._opts || {}
                  , s = n.icon
                  , e = n.text
                  , r = e && e.content
                  , h = n.richText
                  , o = this.getCursor()
                  , o = (this._map && ("mouseout" === t ? this._map.setCursor() : this._map.setCursor(o)),
                {
                    data: {
                        name: r,
                        txt: r,
                        position: this._position,
                        extData: {},
                        rank: n.rank,
                        zooms: n.zooms
                    },
                    opts: {
                        visible: n.visible,
                        opacity: n.opacity,
                        zooms: n.zooms,
                        zIndex: n.zIndex,
                        icon: s,
                        richText: h,
                        text: e
                    }
                });
                return i.data = o,
                Ir.prototype.emit.call(this, t, i),
                this
            }
            ,
            L.prototype.remove = function() {
                this._parent && this._parent.remove(this)
            }
            ,
            L.prototype.to = function() {
                var n = this;
                this._parent && this._parent.to({
                    vv: !0
                }, function() {
                    var t = (new Date).getTime()
                      , i = 0;
                    "performance"in window && "function" == typeof performance.now && (i = performance.now()),
                    n.Ndt.setIcon = {
                        time: t,
                        highResTime: i
                    },
                    n.Ndt.setText = {
                        time: t,
                        highResTime: i
                    }
                })
            }
            ,
            L.prototype.getStatus = function() {
                return this.Ndt
            }
            ,
            L.prototype.Cs = function(t) {
                (this._parent = t) && t.map ? this._map = t.map : this._map = null
            }
            ,
            L.prototype.Ydt = function(n) {
                return U.T8t(this, void 0, void 0, function() {
                    var i;
                    return U.x8t(this, function(t) {
                        switch (t.label) {
                        case 0:
                            return [4, ue.Ydt(n)];
                        case 1:
                            return i = t.y8t(),
                            this.setPosition(i),
                            [2]
                        }
                    })
                })
            }
            ,
            L);
            function L(t) {
                var i = Ir.call(this) || this
                  , t = (i.type = Dr.uy,
                i.className = Dr.uy,
                i.hS = U.Util.stamp(i),
                i._originOpts = t,
                i._opts = i.nY(t),
                t.position && i.setPosition(t.position),
                i.Ndt = Or,
                (new Date).getTime())
                  , n = 0;
                return "performance"in window && "function" == typeof performance.now && (n = performance.now()),
                i.Ndt.constructor = {
                    time: t,
                    highResTime: n
                },
                i
            }
            Er = U.Event,
            U.Ei(Pr, Er),
            Pr.prototype.addTo = function(t) {
                this.map = t,
                this.map.controls.push(this),
                t.getControlContainer().appendChild(this._container),
                t.on("beforeDestroy", this.remove.bind(this))
            }
            ,
            Pr.prototype.removeFrom = function(t) {
                t ? (t.off("beforeDestroy", this.remove.bind(this)),
                t.getControlContainer().removeChild(this._container),
                delete this.map) : this.map && (this.map.off("beforeDestroy", this.remove.bind(this)),
                this.map.getControlContainer().removeChild(this._container),
                delete this.map)
            }
            ,
            Pr.prototype.remove = function() {
                this.map && (this.map.off("beforeDestroy", this.remove.bind(this)),
                this.map.getControlContainer().removeChild(this._container),
                delete this.map)
            }
            ,
            Pr.prototype.show = function() {
                this._container.style.display = "block",
                this.emit("show"),
                this.il = !0
            }
            ,
            Pr.prototype.hide = function() {
                this._container.style.display = "none",
                this.emit("hide"),
                this.il = !1
            }
            ,
            Pr.prototype.initContainer = function() {
                this._className ? (this._container = w.create("div", null, "amap-control amap-" + this._className),
                this._config.visible === undefined || this._config.visible || (this._container.style.display = "none")) : this._container = w.create("div", null, "amap-control"),
                this.Pb()
            }
            ,
            Pr.prototype.Pb = function() {
                var t = 0
                  , i = 0
                  , n = 0
                  , s = 0;
                switch (this._config.offset && 0 < this._config.offset.length && (t = this._config.offset[0] + t,
                i = this._config.offset[1] + i,
                n = this._config.offset[0] + n,
                s = this._config.offset[1] + s),
                t += "px",
                i += "px",
                n += "px",
                s += "px",
                this._config.position) {
                case "LT":
                    this._container.style.top = i,
                    this._container.style.left = t,
                    this._container.style.bottom = "",
                    this._container.style.right = "";
                    break;
                case "RT":
                    this._container.style.top = i,
                    this._container.style.right = n,
                    this._container.style.bottom = "",
                    this._container.style.left = "";
                    break;
                case "LB":
                    this._container.style.bottom = s,
                    this._container.style.left = t,
                    this._container.style.top = "",
                    this._container.style.right = "";
                    break;
                case "RB":
                    this._container.style.bottom = s,
                    this._container.style.right = n,
                    this._container.style.top = "",
                    this._container.style.left = "";
                    break;
                default:
                    this._container.style.top = this._config.position.top || "",
                    this._container.style.left = this._config.position.left || "",
                    this._container.style.right = this._config.position.right || "",
                    this._container.style.bottom = this._config.position.bottom || ""
                }
            }
            ;
            var Er, jr = Pr;
            function Pr(t) {
                var i = Er.call(this) || this;
                return i.il = !0,
                i._config = t,
                i.il = t.visible === undefined || t.visible,
                i
            }
            var Br, Fr = {
                ua: (ut = window.navigator).userAgent,
                mobile: U.Support.$e,
                plat: U.Support.plat,
                mac: U.Support.mac,
                windows: U.Support.windows,
                ios: U.Support.ios,
                iPad: U.Support.iPad,
                iPhone: U.Support.iPhone,
                android: U.Support.android,
                android23: U.Support.android23,
                chrome: U.Support.chrome,
                firefox: U.Support.firefox,
                safari: U.Support.safari,
                wechat: U.Support.wechat,
                uc: U.Support.SL,
                qq: U.Support.qq,
                ie: U.Support.ie,
                ie6: U.Support.ie6,
                ie7: U.Support.ie7,
                ie8: U.Support.ielt9 && !U.Support.ie7 && !U.Support.ie6,
                ie9: U.Support.ie9,
                ie10: U.Support.ie10,
                ie11: U.Support.ie11,
                edge: U.Support.edge,
                ielt9: U.Support.ielt9,
                baidu: U.Support.baidu,
                isLocalStorage: U.Support.RL,
                isGeolocation: !!ut.geolocation,
                mobileWebkit: U.Support.mobileWebkit,
                mobileWebkit3d: U.Support.mobileWebkit3d,
                mobileOpera: !!U.Support.mobileOpera,
                retina: U.Support.Ue,
                touch: !!U.Support.touch,
                msPointer: !!U.Support.msPointer,
                pointer: !!U.Support.pointer,
                baseRender: U.Support.baseRender,
                wasm: U.Support.wasm,
                webkit: U.Support.webkit,
                ie3d: U.Support.ie3d,
                webkit3d: U.Support.webkit3d,
                gecko3d: U.Support.gecko3d,
                opera3d: U.Support.opera3d,
                any3d: U.Support.any3d,
                isCanvas: U.Support.isCanvas,
                isSvg: U.Support.isSvg,
                isVML: U.Support.ie,
                isWorker: !!window.Worker,
                isWebsocket: !!window.WebSocket,
                isWebGL: U.Support.isWebGL,
                checkWebGL: function() {
                    return U.Support.isWebGL = U.Support.sY(),
                    U.Support.isWebGL
                }
            }, Pt = (Br = s,
            U.Ei(Wr, Br),
            Wr.prototype.getState = function() {
                return {
                    zooms: this.xt,
                    heightFactor: this.Q_,
                    visible: this.il,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    wallColor: [],
                    roofColor: [],
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            Wr.prototype.getLayerConfig = function() {
                return Br.prototype.getLayerConfig.call(this)
            }
            ,
            Wr.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    type: "building",
                    tileUrl: AMap.getConfig().protocol + (U.Support.wasm ? "://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3" : "://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),
                    tileSize: 0,
                    zooms: U.zoomRange
                }
            }
            ,
            Wr.prototype.co = function() {
                return this._id
            }
            ,
            Wr.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            Wr);
            function Wr() {
                var t = Br.call(this) || this;
                return t.CLASS_NAME = "AMap.Buildings",
                t.Q_ = 1,
                t._id = "building",
                t
            }
            var Nr, Ur = {
                zooms: [14.8, U.zoomRange[1]],
                opacity: 1,
                heightFactor: 1,
                visible: !0,
                zIndex: 11,
                wallColor: [.94, .94, .94, .9],
                roofColor: [.89, .89, .86, .9],
                u$: !1
            }, Gr = (Nr = Pt,
            U.Ei(_r, Nr),
            _r.prototype.setStyle = function(t) {
                this.fL = t,
                this.uL()
            }
            ,
            _r.prototype.getState = function() {
                return {
                    zooms: this.xt,
                    heightFactor: this.Q_,
                    visible: this.il,
                    zIndex: this.Qh,
                    opacity: this.tl,
                    wallColor: this.sz,
                    roofColor: this.rz,
                    vS: this.fL,
                    layer: this,
                    u$: this.cL,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            _r.prototype.uL = function() {
                this.map && (this.getSource().reload(),
                this.map.setNeedUpdate(!0))
            }
            ,
            _r);
            function _r(t) {
                void 0 === t && (t = Ur);
                var i = Nr.call(this) || this;
                return i.cL = !1,
                i.xt = (t.zooms === undefined ? Ur : t).zooms,
                i.xt[0] = Math.max(i.xt[0], 14.8),
                i.tl = (t.opacity === undefined ? Ur : t).opacity,
                i.Q_ = (t.heightFactor === undefined ? Ur : t).heightFactor,
                i.il = (t.visible === undefined ? Ur : t).visible,
                i.Qh = (t.zIndex === undefined ? Ur : t).zIndex,
                i.sz = t.wallColor !== undefined && U.Util.color2RgbaArray(t.wallColor),
                i.rz = t.roofColor !== undefined && U.Util.color2RgbaArray(t.roofColor),
                i.AF = t.depthTest === undefined || Boolean(t.depthTest),
                i.cL = t.u$,
                i.cL && (i._id = "nebula"),
                i.onCreated(),
                i
            }
            Zr.add = function() {}
            ;
            var Yr = Zr;
            function Zr() {}
            var Xr, Jr = function(t) {
                return U.Support.isWebGL ? new Yi(t) : new p(U.Ln({
                    id: "_defaultLayer_" + U.Util.uuid(),
                    tileUrl: AMap.getConfig().y_
                }, t))
            }, Vr = "gl_custom";
            function Hr(t) {
                var i = Xr.call(this, t) || this;
                return i.CLASS_NAME = "AMap.GLCustomLayer",
                i.init = t.init || function(t) {}
                ,
                i.render = t.render || function(t, i, n) {}
                ,
                i.Qh = t.zIndex || 120,
                i.tl = t.opacity === undefined ? 1 : t.opacity,
                i.il = t.visible === undefined || t.visible,
                i.xt = t.zooms || U.zoomRange,
                i
            }
            Xr = s,
            U.Ei(Hr, Xr),
            Hr.prototype.getState = function() {
                return {
                    visible: this.il,
                    opacity: this.tl,
                    zIndex: this.Qh,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            Hr.prototype.getSourceConfig = function() {
                return {
                    id: Vr,
                    type: Vr,
                    zooms: this.xt
                }
            }
            ,
            Hr.prototype.co = function() {
                return Vr
            }
            ,
            Hr.prototype.setMap = function(t) {
                Xr.prototype.setMap.call(this, t)
            }
            ,
            Hr.prototype.setzIndex = function(t) {
                this.Qh = t
            }
            ,
            qr = Hr,
            U.Ei(Qr, qr);
            var qr, Kr = Qr;
            function Qr(t) {
                return (t = qr.call(this, t) || this).onCreated(),
                t
            }
            $r = U.Event,
            U.Ei(ih, $r),
            ih.prototype.setMap = function(t) {
                var i = this;
                return t && t !== this._map && (this._map = t,
                U.forEach(this.zv, function(t) {
                    i._map && !i._map.hasLayer(t) && t.setMap(i._map)
                })),
                this
            }
            ,
            ih.prototype.hasLayer = function(i) {
                return !!U.find(this.zv, function(t) {
                    return t === i
                })
            }
            ,
            ih.prototype.setOptions = function(e) {
                var r = this.zv;
                return U.vx(e, function(t, i) {
                    for (var n = 0; n < r.length; n++) {
                        var s = r[n];
                        if ("AMap.Layer" === s.el)
                            switch (i) {
                            case "visible":
                                t ? s.show() : s.hide();
                                break;
                            case "opacity":
                                s.setOpacity && s.setOpacity(t);
                                break;
                            case "zIndex":
                                s.setzIndex && s.setzIndex(t);
                                break;
                            case "zooms":
                                s.setZooms && s.setZooms(t)
                            }
                        else
                            s.setOptions && s.setOptions(e)
                    }
                }),
                this
            }
            ,
            ih.prototype.eachLayer = function(t) {
                if (U.isFunction(t))
                    for (var i = 0; i < this.zv.length; i++)
                        t(this.zv[i], i, this.zv)
            }
            ,
            ih.prototype.addLayer = function(t) {
                this.hasLayer(t) || (this.zv.push(t),
                t.setMap(this._map))
            }
            ,
            ih.prototype.addLayers = function(t) {
                if (0 < t.length)
                    for (var i = 0; i < t.length; i++)
                        this.addLayer(t[i])
            }
            ,
            ih.prototype.removeLayer = function(t) {
                for (var i = 0; i < this.zv.length; i++)
                    t === this.zv[i] && this.zv.splice(i, 1);
                return t.setMap(null),
                t
            }
            ,
            ih.prototype.removeLayers = function(t) {
                if (t && 0 < t.length)
                    for (var i = 0; i < t.length; i++)
                        this.removeLayer(t[i])
            }
            ,
            ih.prototype.getLayers = function() {
                return this.zv
            }
            ,
            ih.prototype.clearLayers = function() {
                for (var t = 0; t < this.zv.length; t++) {
                    var i = this.zv[t];
                    this.removeLayer(i)
                }
            }
            ,
            ih.prototype.hide = function() {
                for (var t = 0; t < this.zv.length; t++)
                    this.zv[t].hide();
                return this
            }
            ,
            ih.prototype.show = function() {
                for (var t = 0; t < this.zv.length; t++)
                    this.zv[t].show();
                return this
            }
            ,
            ih.prototype.on = function(t, i) {
                for (var n = 0; n < this.zv.length; n++) {
                    var s = this.zv[n];
                    s.on instanceof Function && i instanceof Function && s.on(t, i)
                }
                return this
            }
            ,
            ih.prototype.reload = function() {
                for (var t = 0; t < this.zv.length; t++) {
                    var i = this.zv[t];
                    i.reload && i.reload()
                }
                return this
            }
            ;
            var $r, th = ih;
            function ih(t) {
                var i = $r.call(this) || this;
                if (i.zv = [],
                i._map = null,
                t && 0 < t.length)
                    for (var n = 0; n < t.length; n++)
                        i.addLayer(t[n]);
                return i
            }
            var nh, sh = function() {
                console.log("jsapi2.0 AMap.Heatmap is renamed, please use AMap.HeatMap"),
                console.log("jsapi2.0  AMap.Heatmap 已重命名, 请使用 AMap.HeatMap")
            };
            function eh(t) {
                var i = nh.call(this) || this;
                return i.CLASS_NAME = "AMap.MapboxLayer",
                i._id = "mapbox",
                i._tileUrl = AMap.getConfig().protocol + "://fmap0{1234}.amap.com/v3/vectormap?version=v8&key=" + AMap.getConfig().key + "&s=rsv3&x=[x]&y=[y]&zoom=[z]",
                AMap.getConfig().jscode ? i._tileUrl += "&jscode=" + AMap.getConfig().jscode : AMap.getConfig().gaodeserver && (i._tileUrl = AMap.getConfig().gaodeserver + "/v3/vectormap?version=v8&key=" + AMap.getConfig().key + "&s=rsv3&x=[x]&y=[y]&zoom=[z]"),
                i.Xa = t.tileSize || 256,
                i.Qs = [2, 22],
                i.Qh = 2,
                i.xt = [9.8, U.zoomRange[1]],
                i
            }
            nh = s,
            U.Ei(eh, nh),
            eh.prototype.getState = function() {
                return {
                    zooms: [17, 23],
                    visible: this.il,
                    zIndex: 2,
                    opacity: this.tl,
                    layer: this,
                    depthTest: this.AF,
                    ce: this.IF,
                    tileUrl: this._tileUrl
                }
            }
            ,
            eh.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    tileUrl: this._tileUrl || "",
                    type: "mapbox",
                    tileSize: this.Xa || 256,
                    zooms: this.xt,
                    dataZooms: this.Qs,
                    projection: "EPS3857"
                }
            }
            ,
            eh.prototype.co = function() {
                return this._id
            }
            ,
            rh = eh,
            U.Ei(oh, rh);
            var rh, hh = oh;
            function oh(t) {
                return rh.call(this, t) || this
            }
            Object.defineProperty(fh.prototype, "CLASS_NAME", {
                get: function() {
                    return this.className
                },
                eb: !1,
                nb: !0
            }),
            fh.prototype.addOverlay = function(t) {
                this._overlays.indexOf(t) < 0 && (this._overlays.push(t),
                this._map) && this._map.add(t)
            }
            ,
            fh.prototype.addOverlays = function(t) {
                for (var i = 0, n = t; i < n.length; i++) {
                    var s = n[i];
                    this.addOverlay(s)
                }
            }
            ,
            fh.prototype.getOverlays = function() {
                return this._overlays
            }
            ,
            fh.prototype.hasOverlay = function(t) {
                return -1 < this._overlays.indexOf(t)
            }
            ,
            fh.prototype.removeOverlay = function(t) {
                this.hasOverlay(t) && (U.Util.deleteItemFromArray(this._overlays, t),
                this._map) && this._map.remove(t)
            }
            ,
            fh.prototype.removeOverlays = function(t) {
                for (var i = 0, n = t; i < n.length; i++) {
                    var s = n[i];
                    this.removeOverlay(s)
                }
            }
            ,
            fh.prototype.clearOverlays = function() {
                this._map && this._map.remove(this._overlays),
                this._overlays = []
            }
            ,
            fh.prototype.eachOverlay = function(t) {
                U.forEach(this._overlays, t)
            }
            ,
            fh.prototype.setMap = function(t) {
                this._map = t
            }
            ,
            fh.prototype.show = function() {
                for (var t = 0, i = this._overlays; t < i.length; t++)
                    i[t].show()
            }
            ,
            fh.prototype.hide = function() {
                for (var t = 0, i = this._overlays; t < i.length; t++)
                    i[t].hide()
            }
            ,
            fh.prototype.setOptions = function(t) {
                for (var i = 0, n = this._overlays; i < n.length; i++)
                    n[i].setOptions(t)
            }
            ,
            fh.prototype.on = function(i, n, s, e) {
                this.eachOverlay(function(t) {
                    t.on(i, n, s, e)
                })
            }
            ,
            fh.prototype.off = function(i, n, s, t) {
                this.eachOverlay(function(t) {
                    t.off(i, n, s)
                })
            }
            ;
            var ah, uh = fh;
            function fh(t) {
                void 0 === t && (t = []),
                this.className = "Overlay.OverlayGroup",
                this._overlays = [],
                this.addOverlays(t)
            }
            function ch() {
                var t = null !== ah && ah.apply(this, arguments) || this;
                return t.P$ = !1,
                t._dragObjects = {
                    sy: {
                        x: 0,
                        y: 0
                    },
                    hy: [0, 0],
                    ly: {
                        lng: 0,
                        lat: 0
                    }
                },
                t
            }
            ah = Kt,
            U.Ei(ch, ah),
            ch.prototype.Cy = function(t) {
                this.P$ = !0,
                U.Support.$e || t.originEvent.preventDefault(),
                this.Ay(t)
            }
            ,
            ch.prototype.Ly = function(t) {
                this.P$ = !1,
                U.Support.$e || t.originEvent.preventDefault()
            }
            ,
            ch.prototype.Ay = function(t) {
                this._dragObjects = {
                    sy: t.pixel,
                    hy: t.pos,
                    ly: t.lnglat
                }
            }
            ,
            ch.prototype.Mx = function() {
                this.on("dragstart", this.Cy.bind(this)),
                this.on("dragging", this._dragging.bind(this)),
                this.on("dragend", this.Ly.bind(this))
            }
            ,
            ch.prototype.Rx = function() {
                this.off("dragstart", this.Cy.bind(this)),
                this.off("dragging", this._dragging.bind(this)),
                this.off("dragend", this.Ly.bind(this))
            }
            ,
            lh = ch,
            U.Ei(D, lh),
            Object.defineProperty(D.prototype, "CLASS_NAME", {
                get: function() {
                    return this.className
                },
                eb: !1,
                nb: !0
            }),
            D.prototype.Zx = function(t) {
                this._map = t,
                this._opts && (this._opts.map = t)
            }
            ,
            D.prototype.setMap = function(t) {
                this._map !== t && (this._map && this._map.remove(this),
                t) && t.add(this)
            }
            ,
            D.prototype.getMap = function() {
                return this._map || null
            }
            ,
            D.prototype.destroy = function() {
                this.Rx(),
                this._beforeRemoveMap && this._beforeRemoveMap(),
                this._map = null,
                this.F$ && delete this.F$,
                this._bindEvents && delete this._bindEvents,
                this._afterSetMap && delete this._afterSetMap
            }
            ,
            D.prototype.remove = function() {
                this.setMap(null)
            }
            ,
            D.prototype.hide = function() {
                this.visible && (this.visible = !1,
                this._map && this._map.setNeedUpdate(!0),
                this.emit("hide", {
                    target: this
                }))
            }
            ,
            D.prototype.show = function() {
                this.visible || (this.visible = !0,
                this._map && this._map.setNeedUpdate(!0),
                this.emit("show", {
                    target: this
                }))
            }
            ,
            D.prototype.setDraggable = function(t) {
                return this._opts.draggable = t
            }
            ,
            D.prototype.getOptions = function() {
                return U.extend({}, this._opts)
            }
            ,
            D.prototype.to = function() {
                var t = this;
                this._map && (AMap.Util.requestAnimFrame(function() {
                    t.emit("complete")
                }),
                this._map.setNeedUpdate(!0))
            }
            ,
            D.prototype.getExtData = function() {
                var t = this._opts;
                if (t && t.extData)
                    return t.extData
            }
            ,
            D.prototype.setExtData = function(t) {
                this.setOptions({
                    extData: t
                })
            }
            ,
            D.prototype.getCursor = function() {
                var t = this._opts.cursor;
                return !t && this._map ? this._map.getDefaultCursor() : t
            }
            ,
            D.prototype.emit = function(t, i) {
                var n = this.getCursor();
                return this._map && ("mouseout" === t ? this._map.setCursor() : this._map.setCursor(n)),
                ("dragstart" !== t && "dragging" !== t && "dragend" !== t || this.getDraggable()) && lh.prototype.emit.call(this, t, i),
                this
            }
            ,
            D.prototype.getDraggable = function() {
                var t = this._opts.draggable;
                return void 0 !== t && t
            }
            ,
            D.prototype.BB = function() {
                this.b_([0, 0])
            }
            ,
            D.prototype.getDeltaCoord = function() {
                return this.zx
            }
            ,
            D.prototype.b_ = function(t) {
                this.zx = t
            }
            ,
            D.prototype.rY = function(t) {
                var i = this.Sx;
                return U.Util.hp(i, t)
            }
            ,
            D.prototype._beforeRemoveMap = function() {
                var t;
                this.F$ && (null != (t = this.F$.parentNode) && t.removeChild(this.F$),
                delete this.F$)
            }
            ,
            D.prototype.nY = function(t) {
                var i, n = this._opts;
                for (i in t)
                    t.hasOwnProperty(i) && (n[i] = t[i]);
                return n
            }
            ,
            D.prototype._dragging = function(t) {
                var i, n, s, e, r;
                this.getDraggable() && (n = this._dragObjects.hy,
                i = t.pos[0] - n[0],
                n = t.pos[1] - n[1],
                r = this._dragObjects.sy,
                this.F$ && "d" === this._map.baseRender ? (e = t.pixel.x - r.x,
                r = t.pixel.y - r.y,
                s = this.B$,
                this.B$ = [e + s[0], r + s[1]],
                e = " translate(" + this.B$[0] + "px, " + this.B$[1] + "px)",
                this.F$.style.transform = e,
                this.F$.style.webkitTransform = e,
                this.F$.style.MozTransform = e,
                this.F$.style.msTransform = e) : this.to(),
                r = this.getDeltaCoord(),
                this.b_([i + r[0], n + r[1]]),
                this.Ay(t))
            }
            ,
            D.prototype.Ly = function(t) {
                lh.prototype.Ly.call(this, t),
                this.Ay(t),
                this.F$ && "d" === this._map.baseRender ? this.moveWithPixel(this.B$[0], -1 * this.B$[1]) : this.moveWithPos(this.zx[0], this.zx[1]),
                this.BB(),
                this.B$ = [0, 0],
                this.F$ && (this.F$.style.transform = "",
                this.F$.style.webkitTransform = "",
                this.F$.style.MozTransform = "",
                this.F$.style.msTransform = ""),
                this.to()
            }
            ,
            D.prototype.moveWithPixel = function() {
                console.log("please implement movePixel")
            }
            ,
            D.prototype.moveWithPos = function() {
                console.log("please implement moveWithPos")
            }
            ,
            D.prototype._checkMap = function() {
                this._opts && this._opts.map !== this._map && this.setMap(this._opts.map)
            }
            ,
            D.prototype.cE = function() {
                this._needUpdate = !0,
                !this._map || this._map.fE && !this._map.isDOMMode() || this.ZB()
            }
            ;
            var lh, li = D;
            function D() {
                var t = lh.call(this) || this;
                return t._needUpdate = !1,
                t.className = "Overlay",
                t.gdt = !1,
                t.visible = !0,
                t.P$ = !1,
                t.zx = [0, 0],
                t.B$ = [0, 0],
                t.Ax = [0, 0],
                t.hS = U.Util.stamp(t),
                t.Mx(),
                t
            }
            function dh(t) {
                if (t = U.jsonLngLatData(t),
                U.ys(t))
                    t = [[t]];
                else if (U.Ox(t))
                    t = [t];
                else if (!U.tL(t))
                    return undefined;
                return t
            }
            function ph(t, i, n) {
                return U.hL.ss(t, i, n)
            }
            function vh(t, i) {
                if (!ph(t, i[0]))
                    return !1;
                for (var n = 1, s = i.length; n < s; n++)
                    if (ph(t, i[n], !0))
                        return !1;
                return !0
            }
            function mh(t, i) {
                for (var n = 0, s = i.length; n < s; n++)
                    if (vh(t, i[n]))
                        return !0;
                return !1
            }
            function yh(t, i, n) {
                for (var s = [], e = 0, r = t; e < r.length; e++) {
                    var h = r[e];
                    s.push(n.moveWithPos(h, i))
                }
                return s
            }
            function bh(t, i, n) {
                for (var s = [], e = 0, r = t; e < r.length; e++) {
                    var h = yh(r[e], i, n);
                    s.push(h)
                }
                return s
            }
            function gh(t, i, n, s) {
                for (var e = [], r = 0, h = t; r < h.length; r++) {
                    var o = h[r];
                    e.push(s.moveWithPixel(o, i, n))
                }
                return e
            }
            function Mh(t, i, n, s) {
                for (var e = [], r = 0, h = t; r < h.length; r++) {
                    var o = gh(h[r], i, n, s);
                    e.push(o)
                }
                return e
            }
            function kh(t) {
                return U.GeometryUtil.ringArea(t)
            }
            function wh(t) {
                for (var i = kh(t[0]), n = 1; n < t.length; n++)
                    i -= kh(t[n]);
                return i
            }
            function xh(t) {
                for (var i = 0, n = 0, s = t; n < s.length; n++)
                    i += wh(s[n]);
                return i
            }
            function Ah(t) {
                return t = U.jsonLngLatData(t),
                U.ys(t) ? [t] : t
            }
            function zh(t) {
                return U.GeometryUtil.distanceOfLine(t)
            }
            function Ch(t) {
                if (t.length < 2)
                    return t;
                var i = [];
                i.push(t[0]);
                for (var n = 1, s = t.length; n < s; n++) {
                    var e = t[n - 1]
                      , r = t[n];
                    Array.prototype.push.apply(i, function(t, i) {
                        var n = Math.round(Math.abs(t.KL - i.KL));
                        if (!n || Math.abs(t.KL - i.KL) < .001)
                            return [];
                        for (var e, r, h, o, a = [], u = Math.PI, f = Math.asin, c = Math.sqrt, l = Math.sin, d = Math.pow, p = Math.cos, v = Math.atan2, m = t.kT * Th, y = t.KL * Th, b = i.kT * Th, g = i.KL * Th, M = 2 * f(c(d(l((m - b) / 2), 2) + p(m) * p(b) * d(l((y - g) / 2), 2))), s = 1; s < n; s += 1)
                            o = l((1 - (h = 1 / n * s)) * M) / l(M),
                            h = l(h * M) / l(M),
                            e = o * p(m) * p(y) + h * p(b) * p(g),
                            r = o * p(m) * l(y) + h * p(b) * l(g),
                            h = v(o = o * l(m) + h * l(b), c(d(e, 2) + d(r, 2))),
                            o = v(r, e),
                            y < g ? (o < y && (o += 2 * u),
                            g < o && (o -= 2 * u)) : (y < o && (o -= 2 * u),
                            o < g && (o += 2 * u)),
                            a.push([o * Sh, h * Sh]);
                        return a
                    }(U.LngLat.from(e), U.LngLat.from(r))),
                    i.push(r)
                }
                return i
            }
            var Th = Math.PI / 180
              , Sh = 180 / Math.PI;
            function Ih(t, i) {
                var n = []
                  , t = U.parseLngLatData(t)
                  , s = U.ProjectionManager.getProjection("EPSG:3857");
                if (t)
                    for (var e = s.project(t.KL, t.kT), r = e[0], h = e[1], o = 6 * Math.PI / 180, a = Math.cos(t.kT * Math.PI / 180), u = 0; u <= 60; u++) {
                        var f = u * o
                          , c = i * Math.cos(f) / a
                          , f = i * Math.sin(f) / a
                          , c = s.unproject(r + c, h + f);
                        n.push(c)
                    }
                return n
            }
            function Lh(t, i, n) {
                var s = []
                  , t = U.parseLngLatData(t)
                  , e = U.ProjectionManager.getProjection("EPSG:3857");
                if (t)
                    for (var h = (r = e.project(t.KL, t.kT))[0], o = r[1], r = n ? 89 : 359, a = (n ? 4 : 1) * Math.PI / 180, u = i[0], f = i[1], c = Math.cos(t.kT * Math.PI / 180), l = 0, d = r; l <= d; l++) {
                        var p = l * a
                          , v = u * Math.cos(p) / c
                          , p = f * Math.sin(p) / c
                          , v = e.unproject(h + v, o + p);
                        s.push(v)
                    }
                return s
            }
            function Dh(t) {
                var i = t.getSouthWest()
                  , t = t.getNorthEast();
                return [new U.LngLat(i.KL,i.kT,!0), new U.LngLat(t.KL,i.kT,!0), new U.LngLat(t.KL,t.kT,!0), new U.LngLat(i.KL,t.kT,!0)]
            }
            Rh.prototype.init = function(t, i) {
                var n, s, e = t.length;
                this.tdt = new Array(e);
                for (var r = 0; r < e; r += 1)
                    if (n = t[r],
                    s = new Wh(n),
                    this.tdt[r] = s,
                    !i)
                        if (0 === r) {
                            if (0 === n.length)
                                return;
                            s.isClockwise(n) || n.reverse()
                        } else
                            0 !== n.length && s.isClockwise(n) && n.reverse()
            }
            ,
            Rh.prototype.getBounds = function() {
                if (0 === this.tdt.length)
                    return Et.createEmpty();
                if (!this.ndt) {
                    for (var t = this.tdt[0].getBounds(), i = 1; i < this.tdt.length; i += 1) {
                        var n = this.tdt[i].getBounds();
                        Et.rs(t, n) || Et.extend(t, n)
                    }
                    this.ndt = t
                }
                return this.ndt
            }
            ,
            Rh.prototype.sdt = function() {
                return this.tdt
            }
            ,
            Rh.prototype.edt = function() {
                for (var t = 0; t < this.tdt.length; t += 1)
                    this.tdt[t].xh
            }
            ,
            Rh.prototype.getType = function() {
                return jh.rdt.POLYGON
            }
            ,
            Rh.prototype.ss = function(t) {
                for (var i, n = this.tdt, s = 0, e = n.length; s < e && (i = n[s].ss(t),
                i = 0 < s ? !i : i); s += 1)
                    ;
                return i
            }
            ,
            Rh.prototype.odt = function(t) {
                for (var i = this.tdt, n = [], s = 0, e = i.length; s < e; s += 1)
                    U.hL.isClockwise(i[s].xh) ? n.length && n[n.length - 1].push(s) : n.push([s]);
                for (s = 0,
                e = n.length; s < e; s += 1) {
                    for (var a = !1, r = 0, h = n[s].length; r < h; r += 1) {
                        var o = n[s][r]
                          , a = Wh.prototype.ss.call(i[o], t);
                        if (!(a = 0 < r ? !a : a))
                            break
                    }
                    if (a)
                        return !0
                }
            }
            ;
            var Oh = Rh;
            function Rh() {}
            (zi = $o = $o || {}).POINT = "point",
            zi.LINESTRING = "linestring",
            zi.LINEARRING = "linearring",
            zi.POLYGON = "polygon",
            zi.MULTIPOINT = "multipoint",
            zi.MULTILINESTRING = "multilinestring",
            zi.MULTIPOLYGON = "multipolygon",
            zi.GEOMETRYCOLLECTION = "geometrycollection",
            Ph.prototype.hdt = function() {
                var t = this.getBounds();
                return t.center || (t.center = Et.getCenter(t)),
                t.center
            }
            ,
            Ph.prototype.clone = function() {
                var t = new this.constructor;
                return t.init(this.XK()),
                t
            }
            ,
            Ph.prototype.XK = function() {
                return this.xh
            }
            ,
            Ph.prototype.got = function(t) {
                if (this.adt = this.getBounds(),
                this.ndt = null,
                this instanceof Oh)
                    for (var i = t.length, n = void (this.tdt = new Array(i)), s = void 0, e = 0; e < i; e += 1)
                        if (n = t[e],
                        s = new Wh(n),
                        this.tdt[e] = s,
                        0 === e) {
                            if (0 === n.length)
                                return;
                            s.isClockwise(n) || n.reverse()
                        } else
                            0 !== n.length && s.isClockwise(n) && n.reverse();
                else
                    this.xh = t
            }
            ,
            Ph.rdt = $o;
            var Eh, jh = Ph;
            function Ph(t) {
                var i = this;
                this.setCoords = function(t) {
                    i.got(t)
                }
                ,
                this.init(t)
            }
            function Bh() {
                return null !== Eh && Eh.apply(this, arguments) || this
            }
            Eh = jh,
            U.Ei(Bh, Eh),
            Bh.prototype.init = function(t) {
                this.xh = t
            }
            ,
            Bh.prototype.getBounds = function() {
                if (!this.ndt) {
                    for (var t = Et.createEmpty(), i = 0, n = this.xh.length; i < n; i += 1)
                        Et.extendCoordinate(t, this.xh[i]);
                    this.ndt = t
                }
                return this.ndt
            }
            ,
            Bh.prototype.XK = function() {
                return this.xh
            }
            ,
            Bh.prototype.getType = function() {
                return jh.rdt.LINESTRING
            }
            ,
            Bh.prototype.getCount = function() {
                return this.XK().length
            }
            ,
            Bh.prototype.udt = function(t) {
                return U.hL.lr(t, this.XK())
            }
            ,
            Fh = Bh,
            U.Ei(Nh, Fh),
            Nh.prototype.getType = function() {
                return jh.rdt.LINEARRING
            }
            ,
            Nh.prototype.ss = function(t) {
                return U.hL.ss(t, this.xh)
            }
            ;
            var Fh, Wh = Nh;
            function Nh() {
                var t = null !== Fh && Fh.apply(this, arguments) || this;
                return t.isClockwise = U.hL.isClockwise,
                t
            }
            Uh = li,
            U.Ei(Gh, Uh),
            Gh.prototype.Tx = function(t) {
                t && (t = U.Bs(t) ? U.ProjectionManager.getProjection("EPSG:3857").project(t.KL, t.kT) : U.ProjectionManager.getProjection("EPSG:3857").project(t[0], t[1]),
                this.Sx = U.lcs.getLocalByCoord(t))
            }
            ,
            Gh.prototype.toGeometry = function() {
                var t;
                if (this._opts.path)
                    return t = this._opts.path.slice(0),
                    U.ys(t) ? {
                        type: "Polygon",
                        coordinates: [t]
                    } : U.Ox(t) ? {
                        type: "Polygon",
                        coordinates: t
                    } : {
                        type: "MultiPolygon",
                        coordinates: t
                    }
            }
            ,
            Gh.prototype.toString = function() {
                var t = this._opts.path;
                return U.ys(t) ? "" + t.join(";") : U.Ox(t) ? "" + U.map(t, function(t) {
                    return "" + t.join(";")
                }).join("|") : U.tL(t) ? U.map(t, function(t) {
                    return U.map(t, function(t) {
                        return "" + t.join(";")
                    }).join("|")
                }).join("^") : ""
            }
            ,
            Gh.prototype.reset = function() {
                this.Dx && this.Dx.reset(),
                this.Px && this.Px.reset(),
                this.XB && this.XB.reset(),
                this.qB && this.qB.reset(),
                this.p0 && this.p0.reset(),
                this.m0 && this.m0.reset()
            }
            ,
            Gh.prototype.destroy = function() {
                this.Dx && (this.Dx.destroy(),
                delete this.Dx),
                this.Px && (this.Px.destroy(),
                delete this.Px),
                this.XB && this.XB.destroy && (this.XB.destroy(),
                delete this.XB),
                this.qB && this.qB.destroy && (this.qB.destroy(),
                delete this.qB),
                this.p0 && (this.p0.destroy(),
                delete this.p0),
                this.p0 && this.Px.destroy && (this.p0.destroy(),
                delete this.p0),
                this.q$ && delete this.X$,
                this.$x && (this.$x = []),
                Uh.prototype.destroy.call(this)
            }
            ,
            Gh.prototype.pdt = function(t, i, n) {
                var s = 0;
                if (i && this._opts.extrusionHeight) {
                    for (var e = [], r = 0; r < i.length; r++)
                        e.push(i[r][0], i[r][1]);
                    s = this.p0.tz(e, this._opts.extrusionHeight, n)
                }
                return n = {
                    bz: "",
                    length: 1,
                    mainkey: this.hS,
                    maxzoom: 26,
                    minzoom: 2,
                    offset: 0,
                    subkey: 1
                },
                s && 0 < s && this.m0.add(n.mainkey, n.subkey, s, n.minzoom, n.maxzoom, n.bz),
                this.p0.upload(t),
                s
            }
            ,
            Gh.prototype.X$ = function(t) {
                for (var i = [], n = 0, s = t; n < s.length; n++) {
                    for (var e = s[n], r = [], h = [], o = 0, a = e[0]; o < a.length; o++) {
                        var u = a[o]
                          , f = U.ProjectionManager.getProjection("EPSG:3857").project(u[0], u[1]);
                        h.push([f[0], f[1]])
                    }
                    h.length && (h.push(h[0].slice()),
                    r.push(h));
                    for (var c = 1, l = e.length; c < l; c++) {
                        var d = e[c]
                          , p = [];
                        if (d && d.length) {
                            for (var v = 0, m = d; v < m.length; v++)
                                u = m[v],
                                f = U.ProjectionManager.getProjection("EPSG:3857").project(u[0], u[1]),
                                p.push([f[0], f[1]]);
                            p.push(p[0].slice()),
                            r.push(p)
                        }
                    }
                    i.push(r)
                }
                this.q$ = i
            }
            ,
            Gh.prototype.Q$ = function(t, i) {
                this.BB(),
                this.JL(),
                this.reset();
                var n = this.Dx
                  , s = this.Px
                  , e = this.XB
                  , r = this.qB;
                this.Tx(t[0][0][0]);
                for (var h = 0, o = t; h < o.length; h++) {
                    for (var a = o[h], u = this.Sx.center, f = [], c = [], l = [], d = [], p = [], v = 0, m = a[0]; v < m.length; v++) {
                        var y = m[v]
                          , b = U.ProjectionManager.getProjection("EPSG:3857").project(y[0], y[1]);
                        f.push(b[0] - u[0], b[1] - u[1]),
                        c.push(y)
                    }
                    for (var g = 1, M = a.length; g < M; g++) {
                        for (var k = [], w = [], x = 0, A = a[g]; x < A.length; x++)
                            y = A[x],
                            U.Bs(y) ? (k.push(y.pos[0] - u[0], y.pos[1] - u[1]),
                            w.push(y.toJSON())) : (b = U.ProjectionManager.getProjection("EPSG:3857").project(y[0], y[1]),
                            k.push(b[0] - u[0], b[1] - u[1]),
                            w.push(y));
                        l.push(k),
                        d.push(w)
                    }
                    for (var z = [], g = 0, M = f.length; g < M; g += 2)
                        z.push(U.xd(f[g], f[g + 1]));
                    U.equals(z[0], z[z.length - 1]) || z.push(U.Ex(z[0]));
                    for (var C = f.length, g = 0; g < l.length; g++)
                        p.push(C / 2),
                        C += l[g].length,
                        U.Util.Ig(f, l[g]);
                    var T = n.Nx(f, p);
                    if (i && f && 0 < this._opts.extrusionHeight) {
                        for (var S = z, I = [], g = 0; g < l.length; g++)
                            for (var L = l[g], D = 0; D < L.length; D += 2)
                                I.push([L[D], L[D + 1]]);
                        I && 0 < I.length && (new Wh(I).isClockwise(I) || I.reverse()),
                        new Wh(z).isClockwise(z) && z.reverse(),
                        U.Util.Ig(S, I),
                        this.pdt(i, S, p)
                    }
                    e.add(T);
                    var O = s.Nx(z, {
                        lineJoin: "miter"
                    }).Iw;
                    for (r.add(O),
                    g = 0; g < l.length; g++) {
                        for (var R = [], E = 0, M = (k = l[g]).length; E < M; E += 2)
                            R.push(U.xd(k[E], k[E + 1]));
                        R.push(U.xd(k[0], k[1])),
                        O = s.Nx(R, {
                            lineJoin: "miter"
                        }).Iw,
                        r.add(O)
                    }
                }
                i && (this.Dx.upload(i),
                this.Px.upload(i))
            }
            ,
            Gh.prototype.JL = function() {
                this.Dx || (this.Dx = new U.K_),
                this.Px || (this.Px = new U.J_),
                this.XB || (this.XB = new U.oE),
                this.qB || (this.qB = new U.oE),
                this.p0 || (this.p0 = new U.iz),
                this.m0 || (this.m0 = new U._w)
            }
            ;
            var Uh, Ii = Gh;
            function Gh() {
                return null !== Uh && Uh.apply(this, arguments) || this
            }
            var _h, Jh, Yh = {
                map: undefined,
                fillColor: "#00D3FC",
                fillOpacity: .5,
                strokeColor: "#00B2D5",
                strokeWeight: 2,
                strokeOpacity: .9,
                strokeStyle: "solid",
                draggable: !1,
                extrusionHeight: 0,
                bubble: !1,
                strokeDasharray: [10, 5],
                zIndex: 50,
                extData: {},
                noSelect: !1,
                innerOverlay: !1,
                zooms: U.zoomRange,
                "async": !1
            }, Zh = {
                constructor: {
                    time: 0,
                    highResTime: 0
                },
                setPath: {
                    time: 0,
                    highResTime: 0
                }
            }, Xh = (_h = Ii,
            U.Ei(O, _h),
            O.prototype.getOptions = function() {
                return U.extend({}, this._opts)
            }
            ,
            O.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = !U.isEqual(this._opts.path, t.path);
                this._opts = t,
                this._checkMap(),
                i && this.setPath(this._opts.path),
                this.to()
            }
            ,
            O.prototype.init = function(t) {
                this.reset(),
                t = t || this._opts,
                this._opts = this.nY(t),
                this.setPath(this._opts.path),
                this._map && (0 < this._opts.extrusionHeight && (this.zdt = this.Cdt.bind(this),
                this.Sdt = this.Ldt.bind(this),
                this.tv()),
                this._map.setNeedUpdate(!0))
            }
            ,
            O.prototype.destroy = function() {
                0 < this._opts.extrusionHeight && (this.Tdt(),
                this.zdt = null,
                this.Sdt = null),
                this.gdt && delete this.gdt,
                this._opts,
                _h.prototype.destroy.call(this)
            }
            ,
            O.prototype.getPath = function() {
                if (this._opts && this._opts.path)
                    return U.parseLngLatData(U.yn(this._opts.path))
            }
            ,
            O.prototype.getStatus = function() {
                return this.Ndt
            }
            ,
            O.prototype.setExtrusionHeight = function(t) {
                this._opts && (this._opts.extrusionHeight = t,
                this.reset(),
                this.Ix(this._opts.path)),
                this.to()
            }
            ,
            O.prototype.getExtrusionHeight = function() {
                return this._opts && this._opts.extrusionHeight ? this._opts.extrusionHeight : 0
            }
            ,
            O.prototype.getBounds = function() {
                var t;
                if (this.ir)
                    t = this.ir;
                else {
                    var i = this._opts.path;
                    if (!i)
                        return;
                    if (!(i = dh(i)))
                        return;
                    (i = l.ms(i)) && (t = this.ir = i)
                }
                if (t)
                    return this._map && this.zx && (0 !== this.zx[0] || 0 !== this.zx[1]) ? (i = t.getSouthWest(),
                    t = t.getNorthEast(),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    t = this._map.getView().ru().moveWithPos([t.KL, t.kT], this.zx),
                    new l(i,t)) : this.ir
            }
            ,
            O.prototype.getArea = function() {
                var t;
                return this._opts && this._opts.path ? (t = U.jsonLngLatData(this._opts.path),
                U.ys(t) ? +U.GeometryUtil.ringArea(t).toFixed(2) : U.Ox(t) ? +wh(t).toFixed(2) : +xh(t).toFixed(2)) : 0
            }
            ,
            O.prototype.contains = function(t, i) {
                var n, s, e;
                return !!this.jx() && (n = this._opts.path,
                s = U.parseLngLatData(t),
                !!(e = null == (e = this._map) ? void 0 : e.lngLatToContainer(s))) && (0 < this._opts.extrusionHeight && (this._opts.bubble && i && i.Adt && "click" === i.Adt && (this.gdt = !1),
                !this.gdt) && (0 < (i = this.queryPolyhedronFeature([e.x, e.y])) && i === this.hS) || !(this.ir && !this.ir.contains(t)) && (U.ys(n) ? ph : U.Ox(n) ? vh : mh)([s.lng, s.lat], n))
            }
            ,
            O.prototype.setPath = function(t) {
                var i;
                t && (this.reset(),
                this.Ix(t),
                t = (new Date).getTime(),
                i = 0,
                "performance"in window && "function" == typeof performance.now && (i = performance.now()),
                this.Ndt && (this.Ndt.setPath = {
                    time: t,
                    highResTime: i
                }),
                this.to())
            }
            ,
            O.prototype.iE = function(t) {
                if (this.jx() && (!this.ir || this.ir.contains(t))) {
                    var i = this._opts.path
                      , t = U.parseLngLatData(t);
                    if (U.ys(i))
                        return 0;
                    if (U.Ox(i))
                        return 0;
                    for (var n = [t.lng, t.lat], s = i, e = 0, r = s.length; e < r; e++)
                        if (vh(n, s[e]))
                            return e
                }
                return -1
            }
            ,
            O.prototype.ZB = function(t) {
                var i, n = this;
                this._map && (this._needUpdate = !1,
                this._opts.path) && (i = dh(this._opts.path)) && (this._opts["async"] ? this._map.gn.QB({
                    data: i,
                    type: "polygon"
                }, function(t, i) {
                    t ? console.log(t) : (n.Dx = i.Dc,
                    n.Px = i.$c,
                    n.Sx = i.Sx,
                    n.XB = i.Oc,
                    n.qB = i.Uc)
                }) : this.Q$(i, t))
            }
            ,
            O.prototype.queryPolyhedronFeature = function(t) {
                if (this._map && this.bdt()) {
                    for (var i, s = (n = this._map).getView().getStatus(), s = {
                        layers: n.getLayers(),
                        uo: n.Mv,
                        size: s.size,
                        "do": n["do"],
                        viewState: s,
                        map: n
                    }, e = 0, r = n.getLayers(); e < r.length; e++) {
                        var h = r[e];
                        "AMap.VectorLayer" === h.CLASS_NAME && (i = h)
                    }
                    var o = i.getRender();
                    if (o) {
                        var a = o.pu || 0
                          , n = n.getGL()
                          , u = t[0] * a
                          , t = n.drawingBufferHeight - t[1] * a
                          , a = new Uint8Array(4);
                        if (o.vdt && (s = o.pickRender(s, this),
                        n.bindFramebuffer(n.FRAMEBUFFER, s),
                        n.readPixels(u, t, 1, 1, n.RGBA, n.UNSIGNED_BYTE, a),
                        n.bindFramebuffer(n.FRAMEBUFFER, null)),
                        u = (s = o.ydt) && s.GV([a[0], a[1], a[2]]))
                            return u
                    }
                }
            }
            ,
            O.prototype.Cdt = function() {
                this.gdt = !0
            }
            ,
            O.prototype.Ldt = function() {
                this.gdt = !1
            }
            ,
            O.prototype.tv = function() {
                this._map && (this._map.on("mousedown", this.zdt),
                this._map.on("mouseup", this.Sdt))
            }
            ,
            O.prototype.Tdt = function() {
                this._map && (this._map.off("mousedown", this.zdt),
                this._map.off("mouseup", this.Sdt))
            }
            ,
            O.prototype._dragging = function(t) {
                var i, n, s;
                this.getDraggable() && (n = this._dragObjects.hy,
                i = t.pos[0] - n[0],
                n = t.pos[1] - n[1],
                this._dragObjects.sy,
                s = this.getDeltaCoord(),
                this.b_([i + s[0], n + s[1]]),
                this.Ay(t),
                this.F$ && "d" === this._map.baseRender ? this.moveWithPixel(this.B$[0], -1 * this.B$[1]) : this.moveWithPos(this.zx[0], this.zx[1]),
                this.BB(),
                this.B$ = [0, 0],
                this.F$ && (this.F$.style.transform = "",
                this.F$.style.webkitTransform = ""),
                this.to())
            }
            ,
            O.prototype.jx = function() {
                return Boolean(this._opts && this._opts.path && 0 < this._opts.path.length)
            }
            ,
            O.prototype.moveWithPixel = function(t, i) {
                var n, s, e;
                this._map && (n = this._map,
                s = U.ProjectionManager.getProjection(n.getView().au()),
                e = this._opts.path,
                e = (U.ys(e) ? gh : U.Ox(e) ? Mh : function(t, i, n, s) {
                    for (var e = [], r = 0, h = t; r < h.length; r++) {
                        var o = Mh(h[r], i, n, s);
                        e.push(o)
                    }
                    return e
                }
                )(e, [t, i], n.getZoom(), s),
                this.setPath(e))
            }
            ,
            O.prototype.moveWithPos = function(t, i) {
                var n, s;
                this._map && (n = this._map,
                n = U.ProjectionManager.getProjection(n.getView().au()),
                s = this._opts.path.slice(0),
                s = (U.ys(s) ? yh : U.Ox(s) ? bh : function(t, i, n) {
                    for (var s = [], e = 0, r = t; e < r.length; e++) {
                        var h = bh(r[e], i, n);
                        s.push(h)
                    }
                    return s
                }
                )(s, [t, i], n),
                this.setPath(s))
            }
            ,
            O.prototype.bdt = function() {
                var t;
                return !(this._opts.fillOpacity <= 0 || null != (t = this._map) && t.TL() || (t = this._map.getZoom()) < this._opts.zooms[0] || t > this._opts.zooms[1])
            }
            ,
            O);
            function O(t) {
                void 0 === t && (t = {});
                var n = _h.call(this) || this
                  , i = (n.Ix = function(t) {
                    var i;
                    n._opts.path = U.jsonLngLatData(t),
                    (t = dh(t)) && (n.ir = l.ms(t),
                    i = n._map) && ("d" === i.baseRender ? n.X$(t) : n.cE())
                }
                ,
                t.path)
                  , i = (U.iL(i) ? (s = i[0],
                n.Tx(s)) : U.eL(i) ? (s = i[0][0],
                n.Tx(s)) : U.yL(i) && (s = i[0][0][0],
                n.Tx(s)),
                n.className = "Overlay.Polygon",
                n._opts = {
                    fillColor: "#00D3FC",
                    fillOpacity: .5,
                    strokeColor: "#00B2D5",
                    strokeWeight: 2,
                    strokeOpacity: .9,
                    strokeStyle: "solid",
                    draggable: !1,
                    extrusionHeight: 0,
                    wallColor: "#00D3FC",
                    roofColor: "#00B2D5",
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    zIndex: 50,
                    extData: {},
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange,
                    "async": !1
                },
                n._opts = n.nY(t),
                n._checkMap(),
                n.Ndt = Zh,
                (new Date).getTime())
                  , s = 0;
                return "performance"in window && "function" == typeof performance.now && (s = performance.now()),
                n.Ndt.constructor = {
                    time: i,
                    highResTime: s
                },
                n
            }
            function Vh() {
                var n = null !== Jh && Jh.apply(this, arguments) || this;
                return n.contains = function(t) {
                    var i;
                    return !(!n.aE || n.ir && !n.ir.contains(t)) && (i = n.aE,
                    t = U.parseLngLatData(t),
                    (U.ys(i) ? ph : U.Ox(i) ? vh : mh)([t.lng, t.lat], i))
                }
                ,
                n
            }
            Jh = Ii,
            U.Ei(Vh, Jh),
            Vh.prototype.getOptions = function() {
                return U.extend({}, this._opts)
            }
            ,
            Vh.prototype.getArea = function() {
                var t = this.aE;
                return t ? +xh(t).toFixed(2) : 0
            }
            ,
            Hh = Zt = Vh,
            U.Ei(Kh, Hh),
            Kh.prototype.init = function(t) {
                t = t || this._opts,
                this._opts = this.nY(t),
                this.setBounds(t.bounds)
            }
            ,
            Kh.prototype.setBounds = function(t) {
                t && (U.xs(t) || (t = new l(t)),
                this._opts.bounds = t,
                this.ir = t.clone(),
                this.cE(),
                this.to())
            }
            ,
            Kh.prototype.ZB = function(t) {
                var i, n, s;
                this._map && (this._needUpdate = !1,
                i = this._opts.bounds) && (n = this._map,
                (s = dh(Dh(i))) && (this.ir = i.clone(),
                this.aE = s,
                "d" === n.baseRender ? this.X$(s) : this.Q$(s, t)),
                this.to())
            }
            ,
            Kh.prototype.moveWithPixel = function(t, i) {
                var n, s, e;
                this._map && (n = this._map,
                s = (e = this._opts.bounds).southWest.toJSON(),
                e = e.northEast.toJSON(),
                s = this._map.getView().ru().moveWithPixel(s, [t, i], n.getZoom()),
                e = this._map.getView().ru().moveWithPixel(e, [t, i], n.getZoom()),
                t = new l(s,e),
                this.setBounds(t))
            }
            ,
            Kh.prototype.moveWithPos = function(t, i) {
                var n, s;
                this._map && (n = (s = this._opts.bounds).southWest.toJSON(),
                s = s.northEast.toJSON(),
                n = this._map.getView().ru().moveWithPos(n, [t, i]),
                s = this._map.getView().ru().moveWithPos(s, [t, i]),
                t = new l(n,s),
                this.setBounds(t))
            }
            ,
            Kh.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = !U.isEqual(this._opts.bounds, t.bounds);
                this._opts = t,
                this._checkMap(),
                i && this.setBounds(t.bounds),
                this.to()
            }
            ,
            Kh.prototype.getPath = function() {
                var t, i, n;
                if (!this.ir) {
                    var s = this._opts.bounds;
                    if (!s)
                        return;
                    this.ir = s.clone()
                }
                if (s = this.ir)
                    return this.P$ && (i = s.getSouthWest(),
                    n = s.getNorthEast(),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    n = this._map.getView().ru().moveWithPos([n.KL, n.kT], this.zx),
                    s = new l(i,n)),
                    s ? Dh(s) : t
            }
            ,
            Kh.prototype.getBounds = function() {
                var t;
                if (!this.ir) {
                    var i = this._opts.bounds;
                    if (!i)
                        return;
                    this.ir = i.clone()
                }
                if (i = this.ir)
                    return this.P$ ? (t = i.getSouthWest(),
                    i = i.getNorthEast(),
                    t = this._map.getView().ru().moveWithPos([t.KL, t.kT], this.zx),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    new l(t,i)) : this.ir
            }
            ,
            Kh.prototype.getCenter = function() {
                if (this._opts.bounds)
                    return this._opts.bounds.getCenter()
            }
            ;
            var Hh, qh = Kh;
            function Kh(t) {
                void 0 === t && (t = {});
                var n = Hh.call(this) || this;
                return n.className = "Overlay.Rectangle",
                n.contains = function(t) {
                    var i = n.getBounds();
                    return !!i && i.contains(t)
                }
                ,
                n._opts = {
                    fillColor: "#00D3FC",
                    fillOpacity: .5,
                    strokeColor: "#00B2D5",
                    strokeWeight: 2,
                    strokeOpacity: .9,
                    strokeStyle: "solid",
                    draggable: !1,
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    zIndex: 50,
                    extData: {},
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange,
                    "async": !1
                },
                n._opts = n.nY(t),
                n._checkMap(),
                n
            }
            Qh = Zt,
            U.Ei(to, Qh),
            to.prototype.init = function(t) {
                t = t || this._opts,
                this._opts = this.nY(t),
                this.setCenterAndRadius(this._opts.center, this._opts.radius)
            }
            ,
            to.prototype.setCenter = function(t) {
                this.setCenterAndRadius(t, this._opts.radius)
            }
            ,
            to.prototype.setRadius = function(t) {
                this.setCenterAndRadius(this._opts.center, t)
            }
            ,
            to.prototype.getCenter = function() {
                var t = U.parseLngLatData(this._opts.center)
                  , t = this._map.getView().ru().moveWithPos([t.KL, t.kT], this.zx);
                return new U.LngLat(t[0],t[1])
            }
            ,
            to.prototype.getRadius = function() {
                return this._opts.radius
            }
            ,
            to.prototype.getPath = function() {
                var t;
                return this._opts.center && this._opts.radius && (t = Lh(this._opts.center, this._opts.radius, U.Support.$e)) && 0 < t.length ? U.parseLngLatData(U.yn(t)) : []
            }
            ,
            to.prototype.setCenterAndRadius = function(t, i) {
                this._opts.center = t,
                this._opts.radius = i,
                this.cE(),
                this.to()
            }
            ,
            to.prototype.ZB = function(t) {
                var i, n, s;
                this._map && (this._needUpdate = !1,
                s = this._opts.center,
                i = this._opts.radius,
                s) && i && (s = U.jsonLngLatData(s),
                n = this._map,
                (s = dh(Lh(s, i, U.Support.$e))) && (this.ir = l.ms(s),
                this.aE = s,
                "d" === n.baseRender ? this.X$(s) : this.Q$(s, t)),
                this.BB(),
                this._map.setNeedUpdate(!0))
            }
            ,
            to.prototype.moveWithPixel = function(t, i) {
                var n, s;
                this._map && (n = this._map,
                s = U.parseLngLatData(this._opts.center),
                s = this._map.getView().ru().moveWithPixel([s.KL, s.kT], [t, i], n.getZoom()),
                this.setCenter(s))
            }
            ,
            to.prototype.moveWithPos = function(t, i) {
                var n;
                this._map && (n = U.parseLngLatData(this._opts.center),
                n = this._map.getView().ru().moveWithPos([n.KL, n.kT], [t, i]),
                this.setCenter(n))
            }
            ,
            to.prototype.getBounds = function() {
                if (!this.ir) {
                    var t = this._opts.center
                      , i = this._opts.radius;
                    if (!t || !i)
                        return;
                    var i = Math.max(i[0], i[1])
                      , n = (t = U.parseLngLatData(t)).offset(-i, -i)
                      , i = t.offset(i, i);
                    this.ir = new l(n,i)
                }
                if (t = this.ir,
                this.ir)
                    return this.P$ ? (n = t.getSouthWest(),
                    i = t.getNorthEast(),
                    n = this._map.getView().ru().moveWithPos([n.KL, n.kT], this.zx),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    new l(n,i)) : this.ir
            }
            ,
            to.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = !U.isEqual(this._opts.center, t.center) || !U.isEqual(this._opts.radius, t.radius);
                this._opts = t,
                this._checkMap(),
                i && this.setCenterAndRadius(this._opts.center, this._opts.radius),
                this.to()
            }
            ;
            var Qh, $h = to;
            function to(t) {
                void 0 === t && (t = {});
                var i = Qh.call(this) || this;
                return i.className = "Overlay.Ellipse",
                i.Cx = U.assign({
                    center: undefined,
                    radius: undefined
                }, Yh),
                i._opts = {
                    fillColor: "#00D3FC",
                    fillOpacity: .5,
                    strokeColor: "#00B2D5",
                    strokeWeight: 2,
                    strokeOpacity: .9,
                    strokeStyle: "solid",
                    draggable: !1,
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    zIndex: 50,
                    extData: {},
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange,
                    "async": !1
                },
                i._opts = i.nY(t),
                i._checkMap(),
                i
            }
            io = Zt,
            U.Ei(eo, io),
            eo.prototype.init = function(t) {
                t = t || this._opts,
                this._opts = this.nY(t),
                this.setCenterAndRadius(this._opts.center, this._opts.radius)
            }
            ,
            eo.prototype.setCenter = function(t) {
                this.setCenterAndRadius(t, this._opts.radius)
            }
            ,
            eo.prototype.setRadius = function(t) {
                this.setCenterAndRadius(this._opts.center, t)
            }
            ,
            eo.prototype.getCenter = function() {
                var t, i = U.parseLngLatData(this._opts.center);
                return this.P$ ? (t = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                new U.LngLat(t[0],t[1])) : i
            }
            ,
            eo.prototype.getPath = function() {
                var t;
                return this._opts.center && this._opts.radius && (t = Ih(this._opts.center, this._opts.radius)) && 0 < t.length ? U.parseLngLatData(U.yn(t)) : []
            }
            ,
            eo.prototype.getRadius = function() {
                return parseFloat(this._opts.radius)
            }
            ,
            eo.prototype.setCenterAndRadius = function(t, i) {
                this._opts.center = t,
                U.vB(i) && 0 <= i && (this._opts.radius = i),
                this.cE(),
                this.to()
            }
            ,
            eo.prototype.ZB = function(t) {
                var i, n, s;
                this._map && (this._needUpdate = !1,
                s = this._opts.center,
                i = this._opts.radius,
                s) && U.vB(i) && (n = this._map,
                (s = dh(Ih(s, i))) && (this.ir = l.ms(s),
                this.aE = s,
                "d" === n.baseRender ? this.X$(s) : this.Q$(s, t)),
                this.BB(),
                this._map.setNeedUpdate(!0))
            }
            ,
            eo.prototype.moveWithPixel = function(t, i) {
                var n, s;
                this._map && (n = this._map,
                s = U.parseLngLatData(this._opts.center),
                s = this._map.getView().ru().moveWithPixel([s.KL, s.kT], [t, i], n.getZoom()),
                this.setCenter(s))
            }
            ,
            eo.prototype.moveWithPos = function(t, i) {
                var n;
                this._map && (n = U.parseLngLatData(this._opts.center),
                n = this._map.getView().ru().moveWithPos([n.KL, n.kT], [t, i]),
                this.setCenter(n))
            }
            ,
            eo.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = !U.isEqual(this._opts.center, t.center) || !U.isEqual(this._opts.radius, t.radius);
                this._opts = t,
                this._checkMap(),
                i && this.setCenterAndRadius(this._opts.center, this._opts.radius),
                this.to()
            }
            ,
            eo.prototype.O$ = function(t, i, n) {}
            ,
            eo.prototype.getBounds = function() {
                if (!this.ir) {
                    var t = this._opts.center
                      , i = this._opts.radius;
                    if (!t)
                        return;
                    if (!U.vB(i))
                        return;
                    var n = (t = U.parseLngLatData(t)).offset(-i, -i)
                      , i = t.offset(i, i);
                    this.ir = new l(n,i)
                }
                if (t = this.ir,
                this.ir)
                    return this.P$ ? (n = t.getSouthWest(),
                    i = t.getNorthEast(),
                    n = this._map.getView().ru().moveWithPos([n.KL, n.kT], this.zx),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    new l(n,i)) : this.ir
            }
            ,
            eo.prototype.ab = function(t) {
                return delete (t = U.extend({}, t)).center,
                delete t.radius,
                delete t.map,
                delete t.path,
                t
            }
            ;
            var io, no, so = eo;
            function eo(t) {
                void 0 === t && (t = {});
                var i = io.call(this) || this;
                return i.className = "Overlay.Circle",
                i._opts = {
                    fillColor: "#00D3FC",
                    fillOpacity: .5,
                    strokeColor: "#00B2D5",
                    strokeWeight: 2,
                    strokeOpacity: .9,
                    strokeStyle: "solid",
                    draggable: !1,
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    zIndex: 50,
                    extData: {},
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange,
                    "async": !1
                },
                i._opts = i.nY(t),
                i
            }
            function ro(t) {
                var i = no.call(this) || this;
                return i.className = "Overlay.Circle",
                i.Tx(t),
                i
            }
            no = li,
            U.Ei(ro, no),
            ro.prototype.Tx = function(t) {
                t && (t = U.Bs(t) ? U.ProjectionManager.getProjection("EPSG:3857").project(t.KL, t.kT) : U.ProjectionManager.getProjection("EPSG:3857").project(t[0], t[1]),
                this.Sx = U.lcs.getLocalByCoord(t))
            }
            ,
            ro.prototype.setCenter = function(t) {
                t && (this._opts.center = U.parseLngLatData(t),
                this.ir = new l(this._opts.center,this._opts.center),
                this.cE(),
                this.to())
            }
            ,
            ro.prototype.destroy = function() {
                this.KB && delete this.KB,
                this.Sb && (this.Sb.destroy(),
                delete this.Sb),
                no.prototype.destroy.call(this)
            }
            ,
            ro.prototype.reset = function() {
                this.KB && delete this.KB,
                this.Sb && this.Sb.reset()
            }
            ,
            ro.prototype.toGeometry = function() {
                var t;
                if (this._opts.center)
                    return {
                        type: "Point",
                        coordinates: (t = U.parseLngLatData(this._opts.center)) && t.toJSON()
                    }
            }
            ,
            ro.prototype.Ydt = function(n) {
                return U.T8t(this, void 0, void 0, function() {
                    var i;
                    return U.x8t(this, function(t) {
                        switch (t.label) {
                        case 0:
                            return [4, ue.Ydt(n)];
                        case 1:
                            return i = t.y8t(),
                            this.setCenter(i),
                            [2]
                        }
                    })
                })
            }
            ,
            ro.prototype.XL = function(t) {
                var i = U.parseLngLatData(t)
                  , t = (this.reset(),
                this.Tx(t),
                this.Sx.center)
                  , i = this._map.getView().ru().project(i.KL, i.kT);
                this.KB = [i[0] - t[0], i[1] - t[1]],
                U.Support.safari && (this.Sb || (this.Sb = new U.e0),
                this.Sb.wb([i[0] - t[0], i[1] - t[1]]))
            }
            ,
            ho = ro,
            U.Ei(ao, ho),
            ao.prototype.init = function(t) {
                t = t || this._opts,
                this._opts = this.nY(t),
                this.setCenter(this._opts.center)
            }
            ,
            ao.prototype.setRadius = function(t) {
                this._opts.radius = t,
                this.to()
            }
            ,
            ao.prototype.ZB = function() {
                var t;
                this._map && (this._needUpdate = !1,
                t = this._opts.center) && this._map && "d" !== this._map.baseRender && (this.XL(t),
                this.BB())
            }
            ,
            ao.prototype.getCenter = function() {
                var t, i = U.parseLngLatData(this._opts.center);
                return this._map ? (t = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                new U.LngLat(t[0],t[1])) : i
            }
            ,
            ao.prototype.getRadius = function() {
                return this._opts.radius
            }
            ,
            ao.prototype.moveWithPixel = function(t, i) {
                var n, s;
                this._map && (n = this._map,
                s = U.parseLngLatData(this._opts.center),
                s = this._map.getView().ru().moveWithPixel([s.KL, s.kT], [t, i], n.getZoom()),
                this.setCenter(s))
            }
            ,
            ao.prototype.moveWithPos = function(t, i) {
                var n;
                this._map && (n = U.parseLngLatData(this._opts.center),
                n = this._map.getView().ru().moveWithPos([n.KL, n.kT], [t, i]),
                this.setCenter(n))
            }
            ,
            ao.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = !U.isEqual(this._opts.center, t.center);
                this._opts = t,
                this._checkMap(),
                i && this.setCenter(t.center),
                this.to()
            }
            ,
            ao.prototype.getOptions = function() {
                return U.extend({}, this._opts)
            }
            ,
            ao.prototype.getBounds = function() {
                var t;
                if (!this.ir) {
                    var i = this._opts.center;
                    if (!i)
                        return;
                    this.ir = new l(i,i)
                }
                if (i = this.ir)
                    return this.P$ ? (t = i.getSouthWest(),
                    i = i.getNorthEast(),
                    t = this._map.getView().ru().moveWithPos([t.KL, t.kT], this.zx),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    new l(t,i)) : this.ir
            }
            ,
            ao.prototype.Ib = function() {
                var t = (t = this._opts).radius + (t.strokeWeight || 0);
                return Math.min(t, 64)
            }
            ;
            var ho, uo, oo = ao;
            function ao(t) {
                var e = ho.call(this, (t = void 0 === t ? {} : t).center || undefined) || this;
                return e.contains = function(t) {
                    return !!e._map && (t = e._map.lngLatToContainer(t),
                    e.containsWithPixel(t))
                }
                ,
                e.containsWithPixel = function(t) {
                    var i, n, s;
                    return !!e._map && !(!e._opts.center || (i = e.Ib(),
                    n = U.parseLngLatData(e._opts.center),
                    n = e._map.getView().ru().moveWithPos([n.KL, n.kT], e.zx),
                    n = e._map.lngLatToContainer(n),
                    Math.abs(n.x - t.x) > i) || Math.abs(n.y - t.y) > i) && (t = t.toJSON(),
                    n = n.toJSON(),
                    s = Math.abs(t[0] - n[0]),
                    t = Math.abs(t[1] - n[1]),
                    s = Math.sqrt(s * s + t * t),
                    t = e._map.getView().Pu || 0,
                    s / Math.cos(t) < i)
                }
                ,
                e.className = "Overlay.CircleMarker",
                e._opts = {
                    radius: 20,
                    fillColor: "#00D3FC",
                    fillOpacity: .5,
                    strokeColor: "#00B2D5",
                    strokeWeight: 2,
                    strokeOpacity: .9,
                    strokeStyle: "solid",
                    draggable: !1,
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    zIndex: 50,
                    extData: {},
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange,
                    "async": !1
                },
                e._opts = e.nY(t),
                t && t.center && ue._dt(t.center) && e.Ydt(t.center),
                e._checkMap(),
                e
            }
            function fo() {
                var u = null !== uo && uo.apply(this, arguments) || this;
                return u.sC = 0,
                u.W_ = function() {
                    if (Fr.isWebGL && u._map && u.q$ && !u._opts.geodesic && !u._needUpdate) {
                        var t = u._map
                          , i = Math.min(U.Util.getOptimalZoom(t.getZoom()), 20);
                        if (u.EI !== i)
                            if (i < 18) {
                                u.EI = i;
                                for (var n = U.ProjectionManager.getProjection("EPSG:3857").getResolution(Math.min(U.Util.getOptimalZoom(t.getZoom()), 18)), s = [], e = 0, r = u.q$; e < r.length; e++) {
                                    for (var h = r[e], o = [], a = 0; a < h.length; a += 1)
                                        h[a][2] > n * n * 1 && o.push([h[a][0], h[a][1]]);
                                    s.push(o)
                                }
                                u.D_(s)
                            } else
                                u.EI = i,
                                u.D_(u.q$)
                    }
                }
                ,
                u
            }
            uo = li,
            U.Ei(fo, uo),
            fo.prototype.Tx = function(t) {
                t && (t = U.Bs(t) ? U.ProjectionManager.getProjection("EPSG:3857").project(t.KL, t.kT) : U.ProjectionManager.getProjection("EPSG:3857").project(t[0], t[1]),
                this.Sx = U.lcs.getLocalByCoord(t))
            }
            ,
            fo.prototype.destroy = function() {
                this.Px && (this.Px.destroy(),
                delete this.Px),
                uo.prototype.destroy.call(this)
            }
            ,
            fo.prototype.toGeometry = function() {
                var t = this._opts.path;
                if (t)
                    return U.ys(t) ? {
                        type: "LineString",
                        coordinates: t
                    } : U.Ox(t) ? {
                        type: "MultiLineString",
                        coordinates: t
                    } : void 0
            }
            ,
            fo.prototype.U_ = function(t) {
                this.F_ && !this.E_ && (this.E_ = t.createTexture(this.F_, {
                    Zi: !0
                }),
                this.E_.bind(t.gl.CLAMP_TO_EDGE, t.gl.LINEAR, t.gl.LINEAR))
            }
            ,
            fo.prototype.aC = function(t, i) {
                this.rC || (i = function(t) {
                    for (var i = document.createElement("canvas"), n = (i.height = 1,
                    i.width = 4096,
                    i.getContext("2d")), s = n.createImageData(4096, 1), e = 0, r = 0; r < 4096; r++) {
                        for (var h = void 0; e < t.length; e++) {
                            if (e === t.length - 1) {
                                h = t[e][1];
                                break
                            }
                            if (!(4096 * t[e + 1][0] < r)) {
                                h = t[e][1];
                                break
                            }
                        }
                        var h = t[e][1]
                          , a = U.Util.color2RgbaArray(h);
                        s.data[4 * r] = 255 * a[0],
                        s.data[4 * r + 1] = 255 * a[1],
                        s.data[4 * r + 2] = 255 * a[2],
                        s.data[4 * r + 3] = 255 * a[3]
                    }
                    return n.putImageData(s, 0, 0),
                    i
                }(i.values),
                this.rC = t.createTexture(i, {
                    Zi: !0
                }),
                i = t.gl,
                this.rC.bind(i.CLAMP_TO_EDGE, i.NEAREST, i.NEAREST_MIPMAP_NEAREST))
            }
            ,
            fo.prototype.X$ = function(t) {
                for (var i = [], n = [], s = 0, e = t; s < e.length; s++) {
                    for (var r = [], h = [], o = 0, a = e[s]; o < a.length; o++) {
                        var u = a[o]
                          , f = U.ProjectionManager.getProjection("EPSG:3857").project(u[0], u[1]);
                        r.push([f[0], f[1]]),
                        h.push(u)
                    }
                    i.push(r),
                    n.push(h)
                }
                this.$x = n,
                this.q$ = i
            }
            ,
            fo.prototype.Q$ = function(t) {
                for (var i = [], n = [], s = 0, e = t; s < e.length; s++) {
                    for (var r = [], h = [], o = 0, a = e[s]; o < a.length; o++) {
                        var u = a[o]
                          , f = U.ProjectionManager.getProjection("EPSG:3857").project(u[0], u[1]);
                        r.push([f[0], f[1], 0]),
                        h.push(u)
                    }
                    this.P_(r),
                    i.push(r),
                    n.push(h)
                }
                this.$x = n,
                this.q$ = i,
                this.cE()
            }
            ,
            fo.prototype.D_ = function(t, i) {
                if (0 !== t.length) {
                    this.Px ? this.Px.reset() : this.Px = new U.J_;
                    for (var n = this.Sx.center, s = 0, e = U.ProjectionManager.getProjection("EPSG:3857"), r = this.EI, h = e.getResolution(r), o = 0, a = t; o < a.length; o++) {
                        for (var u = a[o], f = [], c = 0, l = u.length; c < l; c += 1)
                            f.push(u[c][0] - n[0], u[c][1] - n[1]);
                        var d = this._opts;
                        10 <= this.EI && (this._opts.showDir || "dashed" === this._opts.strokeStyle) ? s += this.Px.eD(f, {
                            X_: 1,
                            lineJoin: d.lineJoin,
                            lineCap: d.lineCap
                        }, Math.floor(2048 * h)).distance : s += this.Px.hb(f, {
                            X_: 1,
                            lineJoin: d.lineJoin,
                            lineCap: d.lineCap
                        }).distance
                    }
                    this.sC = s,
                    i && this.Px.upload(i)
                }
            }
            ,
            fo.prototype.P_ = function(t) {
                t[0][2] = Infinity,
                t[t.length - 1][2] = Infinity;
                var i = U.ProjectionManager.getProjection("EPSG:3857").getResolution(16);
                !function p(t, i, n, s) {
                    for (var e = s, r = n - i >> 1, h = n - i, o = n, a = t[i][0], u = t[i][1], f = t[n][0], c = t[n][1], l = i + 1; l < n; l += 1) {
                        var d = function(t, i, n, s, e, r) {
                            var h, o = e - n, a = r - s;
                            return 0 == o && 0 == a || (1 < (h = ((t - n) * o + (i - s) * a) / (o * o + a * a)) ? (n = e,
                            s = r) : 0 < h && (n += o * h,
                            s += a * h)),
                            (o = t - n) * o + (a = i - s) * a
                        }(t[l][0], t[l][1], a, u, f, c);
                        e < d ? (o = l,
                        e = d) : d === e && (d = Math.abs(l - r)) < h && (o = l,
                        h = d)
                    }
                    s < e && (1 < o - i && p(t, i, o, s),
                    t[o][2] = e,
                    1 < n - o) && p(t, o, n, s)
                }(t, 0, t.length - 1, i * i)
            }
            ;
            var co, lo = {
                constructor: {
                    time: 0,
                    highResTime: 0
                },
                setPath: {
                    time: 0,
                    highResTime: 0
                }
            }, po = (co = hi = fo,
            U.Ei(R, co),
            R.prototype.getOptions = function() {
                return U.extend({}, this._opts)
            }
            ,
            R.prototype.getPath = function() {
                if (this._opts && this._opts.path)
                    return U.parseLngLatData(U.yn(this._opts.path))
            }
            ,
            R.prototype.getStatus = function() {
                return this.Ndt
            }
            ,
            R.prototype.destroy = function() {
                this.E_ && (this.E_.destroy(),
                delete this.E_),
                co.prototype.destroy.call(this)
            }
            ,
            R.prototype.getBounds = function() {
                var t;
                if (this.ir)
                    t = this.ir;
                else {
                    var i = this._opts.path;
                    if (!i)
                        return;
                    if (!(i = Ah(i)))
                        return;
                    (i = l.bS(i)) && (t = this.ir = i)
                }
                if (t)
                    return this._map && this.zx && (0 !== this.zx[0] || 0 !== this.zx[1]) ? (i = t.getSouthWest(),
                    t = t.getNorthEast(),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    t = this._map.getView().ru().moveWithPos([t.KL, t.kT], this.zx),
                    new l(i,t)) : this.ir
            }
            ,
            R.prototype.setPath = function(t) {
                var i;
                t && (this.Ix(t),
                t = (new Date).getTime(),
                i = 0,
                "performance"in window && "function" == typeof performance.now && (i = performance.now()),
                this.Ndt && (this.Ndt.setPath = {
                    time: t,
                    highResTime: i
                }),
                this.to())
            }
            ,
            R.prototype.moveWithPixel = function(t, i) {
                if (this._map) {
                    for (var n = this._map, s = U.ProjectionManager.getProjection(n.getView().au()), e = [], r = 0, h = this.$x; r < h.length; r++) {
                        for (var o = [], a = 0, u = h[r]; a < u.length; a++) {
                            var f = u[a];
                            o.push(s.moveWithPixel(f, [t, i], n.getZoom()))
                        }
                        e.push(o)
                    }
                    this.setPath(e)
                }
            }
            ,
            R.prototype.moveWithPos = function(t, i) {
                if (this._map) {
                    for (var n = this._map, s = U.ProjectionManager.getProjection(n.getView().au()), e = [], r = 0, h = this.$x; r < h.length; r++) {
                        for (var o = [], a = 0, u = h[r]; a < u.length; a++) {
                            var f = u[a];
                            o.push(s.moveWithPos(f, [t, i]))
                        }
                        e.push(o)
                    }
                    this.setPath(U.parseLngLatData(e))
                }
            }
            ,
            R.prototype.getLength = function() {
                var t = this._opts && this._opts.path;
                return U.ys(t) ? +zh(t).toFixed(2) : U.Ox(t) ? +function(t) {
                    for (var i = 0, n = 0, s = t; n < s.length; n++)
                        i += zh(s[n]);
                    return i
                }(t).toFixed(2) : 0
            }
            ,
            R.prototype.rL = function() {
                return this.sC
            }
            ,
            R.prototype.ZB = function(t) {
                this._map && (this._needUpdate = !1,
                this.D_(this.q$, t))
            }
            ,
            R.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = function(t, i, n) {
                    for (var s = 0, e = n.length; s < e; s += 1) {
                        var r = n[s];
                        if (t[r] !== i[r])
                            return !0
                    }
                    return !1
                }(this._opts, t, ["path", "lineCap", "lineJoin", "geodesic"]);
                t.lineGradient !== this._opts.lineGradient && this.rC && (this.rC.destroy(),
                delete this.rC),
                this._opts = t,
                this._checkMap(),
                i && this.setPath(this._opts.path),
                this.to()
            }
            ,
            R.prototype.init = function(t) {
                var i, n = this, t = t || this._opts, t = this.nY(t);
                this._opts = t,
                this._opts.dirImg && (this._opts.dirImg instanceof HTMLCanvasElement ? this.F_ = this._opts.dirImg : (i = this._opts.dirImg,
                this._map.z_.loadImage(this._opts.dirImg, {
                    type: "dirImg",
                    cb: function(t) {
                        t ? n.F_ = t.img : console.error("load dirImg error", i)
                    }
                }))),
                this.setPath(this._opts.path),
                this._map && (this.W_(),
                this._map.setNeedUpdate(!0))
            }
            ,
            R.prototype.contains = function(t) {
                if (this.jx() && (!this.ir || this.ir.southWest.lat === this.ir.northEast.lat || this.ir.southWest.lng === this.ir.northEast.lng || this.ir.contains(t)))
                    for (var i = this._map.getView(), n = i.getStatus().pitch * Math.PI / 180, t = U.parseLngLatData(t), s = i.ru().project(t.lng, t.lat), e = i.ru().getResolution(this._map.getZoom()), r = 0, h = this.q$; r < h.length; r++) {
                        var o = h[r];
                        if (U.hL.lr(s, o) * Math.cos(n) < this._opts.strokeWeight * e)
                            return !0
                    }
                return !1
            }
            ,
            R.prototype.jx = function() {
                return Boolean(this._opts && this._opts.path && 0 < this._opts.path.length)
            }
            ,
            R.prototype.Ix = function(t) {
                var i = U.jsonLngLatData(t);
                this._opts.path = i,
                i = Ah(t),
                U.Ox(i) ? (this._opts.geodesic && (i = U.map(i, Ch)),
                this.Tx(i[0][0]),
                this.ir = l.bS(i),
                this._map && ("d" === this._map.baseRender ? this.X$(i) : (this.Q$(i),
                this.BB()))) : console.error("error Polyline path")
            }
            ,
            R.prototype.rD = function(t) {
                var i = U.jsonLngLatData(t);
                this._opts.path = i,
                i = Ah(t),
                U.Ox(i) ? (this._opts.geodesic && (i = U.map(i, Ch)),
                this.Tx(i[0][0]),
                this.ir = l.bS(i)) : console.error("error Polyline path")
            }
            ,
            R);
            function R(t) {
                void 0 === t && (t = {});
                var i = co.call(this) || this
                  , t = (i.className = "Overlay.Polyline",
                i._opts = {
                    cursor: "",
                    strokeColor: "#00B2D5",
                    strokeWeight: 2,
                    strokeOpacity: .5,
                    strokeStyle: "solid",
                    draggable: !1,
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    isOutline: !1,
                    geodesic: !1,
                    showDir: !1,
                    outlineColor: "#00B2D5",
                    borderWeight: 1,
                    lineJoin: "miter",
                    lineCap: "butt",
                    extData: {},
                    zIndex: 50,
                    dirColor: "white",
                    dirImg: "",
                    lineGradient: undefined,
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange,
                    animate: !1,
                    speed: 100,
                    dirImgGap: 1
                },
                i.EI = -1,
                i._opts = i.nY(t),
                i._opts.path && i.rD(i._opts.path),
                i._checkMap(),
                i.Ndt = lo,
                (new Date).getTime())
                  , n = 0;
                return "performance"in window && "function" == typeof performance.now && (n = performance.now()),
                i.Ndt.constructor = {
                    time: t,
                    highResTime: n
                },
                i
            }
            vo = hi,
            U.Ei(mo, vo),
            mo.prototype.getOptions = function() {
                return U.extend({}, this._opts)
            }
            ;
            var vo, Gt = mo;
            function mo() {
                return null !== vo && vo.apply(this, arguments) || this
            }
            bo = U.LngLat,
            U.Ei(Mo, bo),
            Mo.prototype.lL = function() {
                for (var t = [], i = 0, n = this.controlPoints; i < n.length; i++) {
                    var s = n[i];
                    t.push(s.toJSON())
                }
                return t.push(this.toJSON()),
                t
            }
            ,
            Mo.prototype.moveWithPos = function(t, i, n) {
                for (var s = t.moveWithPos(this.toJSON(), [i, n]), e = [], r = 0, h = this.controlPoints.length; r < h; r++) {
                    var o = this.controlPoints[r];
                    e.push(t.moveWithPos(o.toJSON(), [i, n]))
                }
                return e.push(s),
                new Mo(e)
            }
            ,
            Mo.prototype.moveWithPixel = function(t, i, n, s) {
                for (var e = t.moveWithPixel(this.toJSON(), [i, n], s), r = [], h = 0, o = this.controlPoints.length; h < o; h++) {
                    var a = this.controlPoints[h];
                    r.push(t.moveWithPixel(a.toJSON(), [i, n], s))
                }
                return r.push(e),
                new Mo(r)
            }
            ;
            var bo, go = Mo;
            function Mo(t) {
                var i = this;
                if (U.ys(t))
                    for (var n = t.length, i = bo.call(this, t[n - 1][0], t[n - 1][1]) || this, s = [], e = 0, r = n - 1; e < r; e += 1) {
                        var h = t[e][0]
                          , o = t[e][1];
                        s.push(new U.LngLat(h,o))
                    }
                else
                    for (n = t.length,
                    i = bo.call(this, t[n - 2], t[n - 1]) || this,
                    s = [],
                    e = 0,
                    r = n - 2; e < r; e += 2)
                        h = t[e],
                        s.push(new U.LngLat(h,o = t[e + 1]));
                return i.controlPoints = s,
                i
            }
            ko = Gt,
            U.Ei(xo, ko),
            xo.prototype.init = function(t) {
                var i, n = this, t = t || this._opts;
                this._opts = this.nY(t),
                this._opts.dirImg && (this._opts.dirImg instanceof HTMLCanvasElement ? this.F_ = this._opts.dirImg : (i = this._opts.dirImg,
                this._map.z_.loadImage(this._opts.dirImg, {
                    type: "dirImg",
                    cb: function(t) {
                        t ? n.F_ = t.img : console.error("load dirImg error", i)
                    }
                }))),
                this.setPath(this._opts.path),
                this._map && (this.W_(),
                this._map.setNeedUpdate(!0))
            }
            ,
            xo.prototype.setOptions = function(t) {
                var t = this.nY(t)
                  , i = !U.isEqual(this._opts.path, t.path);
                this._opts = t,
                this._checkMap(),
                i && this.Ix(this._opts.path),
                this.BB(),
                this.to()
            }
            ,
            xo.prototype.ZB = function(t) {
                this._map && (this._needUpdate = !1,
                this.D_(this.q$, t))
            }
            ,
            xo.prototype.getPath = function() {
                if (this._opts)
                    return this._opts.path
            }
            ,
            xo.prototype.setPath = function(t) {
                t && (this._opts.path = t,
                this.Ix(t))
            }
            ,
            xo.prototype.getBounds = function() {
                var t;
                if (this.ir)
                    t = this.ir;
                else {
                    var i = this.$x;
                    if (!i)
                        return;
                    if (!(i = Ah(i)))
                        return;
                    (i = l.bS(i)) && (t = this.ir = i)
                }
                if (t)
                    return this._map && this.zx && (0 !== this.zx[0] || 0 !== this.zx[1]) ? (i = t.getSouthWest(),
                    t = t.getNorthEast(),
                    i = this._map.getView().ru().moveWithPos([i.KL, i.kT], this.zx),
                    t = this._map.getView().ru().moveWithPos([t.KL, t.kT], this.zx),
                    new l(i,t)) : this.ir
            }
            ,
            xo.prototype.moveWithPos = function(t, i) {
                if (this._map) {
                    var n = this._map
                      , s = U.ProjectionManager.getProjection(n.getView().au());
                    if (n = this.getPath()) {
                        for (var e = [], r = 0, h = n; r < h.length; r++) {
                            var o = h[r]
                              , o = (o = new go(o)).moveWithPos(s, t, i);
                            e.push(o.lL())
                        }
                        this.setPath(e)
                    }
                }
            }
            ,
            xo.prototype.moveWithPixel = function(t, i) {
                if (this._map) {
                    var n = this._map
                      , s = U.ProjectionManager.getProjection(n.getView().au())
                      , e = this.getPath();
                    if (e) {
                        for (var r = [], h = n.getZoom(), o = 0, a = e; o < a.length; o++) {
                            var u = a[o]
                              , u = (u = new go(u)).moveWithPixel(s, t, i, h);
                            r.push(u.lL())
                        }
                        this.setPath(r)
                    }
                }
            }
            ,
            xo.prototype.contains = function(t) {
                if (this.jx() && (!this.ir || this.ir.contains(t)))
                    for (var i = this._map.getView(), n = i.getStatus().pitch * Math.PI / 180, t = U.parseLngLatData(t), s = i.ru().project(t.lng, t.lat), e = i.ru().getResolution(this._map.getZoom()), r = 0, h = this.q$; r < h.length; r++) {
                        var o = h[r];
                        if (U.hL.lr(s, o) * Math.cos(n) < this._opts.strokeWeight * e)
                            return !0
                    }
                return !1
            }
            ,
            xo.prototype.Ix = function(t) {
                var i = [];
                if (t)
                    for (var n = 0, s = t; n < s.length; n++) {
                        var e = s[n];
                        i.push(new go(e))
                    }
                t = Ah(this.yb(i)),
                this.Tx(t[0][0]),
                this.ir = l.bS(t),
                this._map && ("d" === this._map.baseRender ? this.X$(t) : (this.Q$(t),
                this.BB()))
            }
            ,
            xo.prototype.jx = function() {
                return Boolean(this._opts && this._opts.path && 0 < this._opts.path.length)
            }
            ,
            xo.prototype.yb = function(t) {
                var i;
                return this._map ? (i = U.ProjectionManager.getProjection("EPSG:3857").getResolution(this._map.getZoom()),
                U.bb.xb(t, i)) : []
            }
            ;
            var ko, wo = xo;
            function xo(t) {
                void 0 === t && (t = {});
                var i = ko.call(this) || this;
                return i.className = "Overlay.BezierCurve",
                i.bo = 3,
                i.W_ = function() {}
                ,
                i._opts = {
                    cursor: "",
                    strokeColor: "#00D3FC",
                    strokeWeight: 2,
                    strokeOpacity: .5,
                    strokeStyle: "solid",
                    draggable: !1,
                    bubble: !1,
                    strokeDasharray: [10, 5],
                    isOutline: !1,
                    geodesic: !1,
                    showDir: !1,
                    outlineColor: "#00B2D5",
                    borderWeight: 1,
                    lineJoin: "miter",
                    lineCap: "butt",
                    extData: {},
                    zIndex: 50,
                    dirColor: "white",
                    dirImg: "",
                    lineGradient: undefined,
                    noSelect: !1,
                    innerOverlay: !1,
                    zooms: U.zoomRange
                },
                i.EI = -1,
                i._opts = i.nY(t),
                i._checkMap(),
                i
            }
            var Ao, Io = {
                high: {
                    fillColor: "rgb(252, 249, 242)",
                    strokeColor: "rgb(230,142,0)"
                },
                unHigh: {
                    fillColor: "rgb(252, 249, 242)",
                    strokeColor: "rgb(171,171,171)"
                }
            }, Lo = (Ao = s,
            U.Ei(E, Ao),
            E.prototype.Do = function(t) {
                return t && (this.Jh = t).HF(this),
                t
            }
            ,
            E.prototype.onAdd = function() {
                var t;
                this.$F = new ts({
                    zIndex: this.Qh,
                    visible: this.il,
                    TF: !0
                }),
                null != (t = this.map) && t.addLayer(this.$F)
            }
            ,
            E.prototype.v$ = function() {
                var t;
                null != (t = this.map) && t.removeLayer(this.$F)
            }
            ,
            E.prototype.destroy = function() {
                Ao.prototype.destroy.call(this),
                this.$F.destroy(),
                this.$F && this.$F.destroy && (this.$F.destroy(),
                delete this.$F)
            }
            ,
            E.prototype.yD = function() {
                return {
                    show: this.xD
                }
            }
            ,
            E.prototype.mD = function(t) {
                this.xD = t
            }
            ,
            E.prototype.cD = function() {
                var n = this;
                if (this.dD)
                    return !1;
                this.dD = !0,
                this._map.on("moveend", function() {
                    var t = n._map.getZoom()
                      , i = n.VR;
                    n.VR.showId,
                    i && i.centerId && i.indoor && (!n.ZT(i.indoor) || t < n.xt[0] ? (n.e$ && (n.e$.hide(),
                    n.xD = !1),
                    n.nD()) : n.e$ && n.VR.visible && (n.mL || n.e$.show(),
                    n.xD = !0))
                })
            }
            ,
            E.prototype.uD = function() {
                for (var t = this.VR, i = t.indoor, n = t.centerId, s = Object.keys(i), e = Io, r = 0; r < s.length; r++) {
                    var h = s[r];
                    if (i[h] && i[h].outline)
                        for (var o = i[h].outline, a = 0; a < o.length; a++) {
                            var u = o[a]
                              , f = u.getOptions();
                            f.strokeColor = (h === n ? e.high : e.unHigh).strokeColor,
                            u.setOptions(f)
                        }
                }
            }
            ,
            E.prototype.oZ = function() {
                for (var i = this.VR.indoor, n = Object.keys(i), s = Io, e = 0; e < n.length; e++) {
                    var r = n[e];
                    if (i[r] && i[r].outline)
                        for (var h = i[r].outline, o = 0; o < h.length; o++) {
                            var a = h[o]
                              , u = a.getOptions();
                            u.strokeColor = s.unHigh.strokeColor,
                            a.setOptions(u)
                        }
                }
            }
            ,
            E.prototype.BT = function() {
                var t = this;
                setTimeout(function() {
                    t._map && t._map.emit("indoor_create")
                }, 500)
            }
            ,
            E.prototype.bL = function(t) {
                this.VR.opacity = t,
                this.gL()
            }
            ,
            E.prototype.wL = function(t) {
                this.VR.zIndex = t,
                this.gL()
            }
            ,
            E.prototype.ZI = function() {
                return this.VR
            }
            ,
            E.prototype.KI = function(t) {
                this.VR = t
            }
            ,
            E.prototype.getState = function() {
                return {
                    zooms: [17, U.zoomRange[1]],
                    visible: this.il,
                    opacity: this.tl,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF,
                    ce: this.IF
                }
            }
            ,
            E.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    type: "indoor",
                    zooms: [17, U.zoomRange[1]],
                    url: ""
                }
            }
            ,
            E.prototype.co = function() {
                return this._id
            }
            ,
            E.prototype.getMap = function() {
                return this._map
            }
            ,
            E.prototype.n$ = function(t, i) {
                this.VR.floorInfo || (this.VR.floorInfo = {}),
                this.VR.floorInfo[t] = i
            }
            ,
            E.prototype.emit = function(t, i) {
                return Ao.prototype.emit.call(this, t, i),
                this
            }
            ,
            E.prototype.showId = function(t) {
                this.VR.showId = t
            }
            ,
            E.prototype.setBar = function(t) {
                this.e$ = t
            }
            ,
            E.prototype.setBarOpt = function(t) {
                this.VR.defaultBarFloor = t
            }
            ,
            E.prototype._hideLayer = function(t) {
                this.VR.visible = t,
                this.DT(t),
                this._hideBar(!t),
                t ? this.$F.show() : this.$F.hide(),
                this.gL()
            }
            ,
            E.prototype._hideBar = function(t) {
                this.mL = t,
                this.VR.hideFloorBar = t,
                this.e$ && t ? this.e$.hide() : this.e$ && this.e$.show()
            }
            ,
            E.prototype._showLabels = function(t) {
                this.VR.showLabels = t;
                var i = this._map && this._map.showLabel;
                this.VR.labelsLayer && t && i ? this.VR.labelsLayer.show() : this.VR.labelsLayer && this.VR.labelsLayer.hide()
            }
            ,
            E.prototype.setShowId = function(t) {
                this.VR.hasId = t
            }
            ,
            E.prototype.update = function() {
                this.gL()
            }
            ,
            E.prototype._getSelectedBuildingId = function() {
                return this.VR.centerId
            }
            ,
            E.prototype._getSelectedBuilding = function() {
                return this.VR.building
            }
            ,
            E.prototype.setRenderData = function(t) {
                this.VR = U.assign(this.VR, t)
            }
            ,
            E.prototype.getIntersectPoly = function(t) {
                var t = t.getBounds()
                  , n = this._map && this._map.getBounds();
                return !(!t || !n) && n.intersects(t)
            }
            ,
            E.prototype.getIntersect = function(t) {
                if (!t)
                    return !1;
                for (var i = !1, n = this._map && this._map.getBounds(), s = 0; s < t.length; s++) {
                    var e = new AMap.LngLat((e = t[s])[0],e[1]);
                    if (i = n.contains(e))
                        return !0
                }
                return i
            }
            ,
            E.prototype.getRingInRing = function(t) {
                var i;
                return !!t && (i = this._map && this._map.getBounds(),
                t = new AMap.Polygon({
                    path: t
                }),
                U.GeometryUtil.isRingInRing(i, t))
            }
            ,
            E.prototype.YR = function(t, s) {
                var i, e = this;
                try {
                    this._map && this._map.gn && ((i = new XMLHttpRequest).onreadystatechange = function() {
                        4 === i.readyState && 200 === i.status && e._map.gn.JB(i.response, function(t, i) {
                            var n;
                            t ? console.log(t) : (n = (t = Object.keys(i))[0] ? i[t[0]].building : undefined) && n.properties && n.properties.outside_outline && (n = i[t[0]].building.properties.outside_outline,
                            t = AMap.Bounds.xS(n)) && e._map.setBounds(t),
                            s && s()
                        })
                    }
                    ,
                    i.open("GET", t, !0),
                    i.responseType = "arraybuffer",
                    i.send())
                } catch (n) {}
            }
            ,
            E.prototype.DT = function(t) {
                for (var i = this.VR.indoor, n = Object.keys(i), s = 0; s < n.length; s++) {
                    var e = i[n[s]];
                    if (e.polygons)
                        for (var r = 0; r < e.polygons.length; r++) {
                            var h = e.polygons[r];
                            t ? h.show() : h.hide()
                        }
                    if (e.markers)
                        for (var o = 0; o < e.markers.length; o++) {
                            var a = e.markers[o];
                            t ? a.show() : a.hide()
                        }
                }
            }
            ,
            E.prototype.ZT = function(t) {
                for (var i = Object.keys(t), n = 0; n < i.length; n++) {
                    var s = i[n];
                    if (this._map && t[s].outline && (s = t[s].outline,
                    s = this.getIntersectPoly(s[0])))
                        return s
                }
                return !1
            }
            ,
            E.prototype.gL = function() {}
            ,
            E.prototype.nD = function() {
                for (var t = this.VR.indoor, i = Object.keys(t), n = 0; n < i.length; n++) {
                    var s = i[n]
                      , e = t[s];
                    e.polygons && this.$F.remove(e.polygons),
                    e && e.markers && 0 < e.markers.length && this.VR.labelsLayer && this.VR.labelsLayer.remove(e.markers),
                    delete t[s]
                }
            }
            ,
            E);
            function E(t) {
                var i = Ao.call(this) || this;
                return i.CLASS_NAME = "AMap.IndoorLayer",
                t = t || {},
                i._id = "indoor",
                i.il = !0,
                i.Qh = t.zIndex || 5,
                i.tl = t.opacity || 1,
                i.mL = t.hideFloorBar || !1,
                i.xL = t.cursor || "auto",
                i.xt = [17, U.zoomRange[1]],
                i.xD = !1,
                i.dD = !1,
                0 === t.opacity && (i.tl = 0),
                i.VR = {
                    opacity: i.tl,
                    zIndex: i.Qh,
                    visible: i.il,
                    cursor: i.xL,
                    centerId: null,
                    centerFloor: null,
                    indoor: {},
                    hideFloorBar: i.mL,
                    showLabels: !0,
                    reRender: !1,
                    floorInfo: {},
                    indoorState: {},
                    centerBuilding: {}
                },
                t && t.map && (i._map = t.map,
                i.cD()),
                i._config = AMap.getConfig(),
                i.BT(),
                i
            }
            Do = Lo,
            U.Ei(Ro, Do),
            Ro.prototype.showIndoorMap = function(t, i, n) {
                var s, e, i = i || 1;
                t && (this.pL = t,
                Do.prototype.showId.call(this, t),
                Do.prototype.n$.call(this, t, i),
                this.pL = t,
                e = this._config.server + "/v3/indoor/indoormaps?",
                (s = []).push("poiid=" + t),
                s.push("floor=" + i),
                s.push("version=0"),
                s.push("s=rsv3"),
                s.push("from=indoorH5Map"),
                s.push("servicetype=unify"),
                s.push("key=" + this._config.key),
                this._config.jscode ? s.push("jscode=" + this._config.jscode) : this._config.gaodeserver && (e = this._config.gaodeserver + "/v3/indoor/indoormaps?"),
                t = e + s.join("&"),
                Do.prototype.YR.call(this, t))
            }
            ,
            Ro.prototype.showFloor = function(t, i) {
                this.pL && this.showIndoorMap(this.pL, t)
            }
            ,
            Ro.prototype.show = function() {
                this._hideLayer(!0)
            }
            ,
            Ro.prototype.hide = function() {
                this._hideLayer(!1)
            }
            ,
            Ro.prototype.getMap = function() {
                return this._map
            }
            ,
            Ro.prototype.setMap = function(t) {
                var i = (this._map = t).getStatus().animateEnable;
                Do.prototype.setRenderData.call(this, {
                    animateState: i
                }),
                t.setStatus({
                    animateEnable: !1
                }),
                Do.prototype.setMap.call(this, t),
                Do.prototype.cD.call(this)
            }
            ,
            Ro.prototype.setzIndex = function(t) {
                Do.prototype.wL.call(this, t)
            }
            ,
            Ro.prototype.showFloorBar = function() {
                this._hideBar(!1)
            }
            ,
            Ro.prototype.hideFloorBar = function() {
                this._hideBar(!0)
            }
            ,
            Ro.prototype.setOpacity = function(t) {
                Do.prototype.bL.call(this, t)
            }
            ,
            Ro.prototype.getOpacity = function() {
                return Do.prototype.getOpacity.call(this)
            }
            ,
            Ro.prototype.showLabels = function() {
                this._showLabels(!0)
            }
            ,
            Ro.prototype.hideLabels = function() {
                this._showLabels(!1)
            }
            ,
            Ro.prototype.getSelectedBuildingId = function() {
                return Do.prototype._getSelectedBuildingId.call(this)
            }
            ,
            Ro.prototype.getSelectedBuilding = function() {
                return Do.prototype._getSelectedBuilding.call(this)
            }
            ;
            var Do, Oo = Ro;
            function Ro(t) {
                var i = Do.call(this, t) || this;
                return i.CLASS_NAME = "AMap.IndoorMap",
                i._config = AMap.getConfig(),
                i.pL = "",
                t && t.map && (i._map = t.map,
                t = t.map.getStatus().animateEnable,
                Do.prototype.setRenderData.call(i, {
                    animateState: t
                })),
                i
            }
            var Eo, jo = function(t, i, n) {
                this.x = i,
                this.y = n,
                this.z = t,
                this.key = t + "," + i + "," + n
            };
            function Po() {
                var t = null !== Eo && Eo.apply(this, arguments) || this;
                return t.CLASS_NAME = "AMap.DistrictLayer",
                t._E = AMap.getConfig().protocol + "://mvt.amap.com/getDistrictInfo",
                t
            }
            Eo = p,
            U.Ei(Po, Eo),
            Po.prototype.getLayerConfig = function() {
                var t = Eo.prototype.getLayerConfig.call(this);
                return t.mapNumber = "GS(2019)756",
                t
            }
            ,
            Po.prototype.getSourceConfig = function() {
                return {
                    id: this._id,
                    tileUrl: this._tileUrl || "",
                    type: "districtVectorTile",
                    tileSize: this.Xa || 256,
                    zooms: this.xt,
                    dataZooms: this.Qs || [3, 16],
                    projection: this.hl || "EPS3857",
                    SOC: this.SOC
                }
            }
            ,
            Po.prototype.getLayerOptions = function() {
                return {
                    zIndex: this.Qh,
                    visible: this.il,
                    zooms: this.xt,
                    opacity: this.tl,
                    adcode: this._adcode,
                    styles: this.Ze,
                    layer: this,
                    rejectMapMask: this._rejectMapMask,
                    depthTest: this.AF
                }
            }
            ,
            Po.prototype.getState = function() {
                return U.Ln({}, this.getLayerOptions())
            }
            ,
            Po.prototype.getDistrictByContainerPos = function(t) {
                if (i = this.map) {
                    var n, i, t = i.containerToLngLat(t), s = i.getProjection().project(t.lng, t.lat), e = i.getView().getStatus().optimalZoom, t = i.getTileCoordByLngLat(t, this.Xa || 256, e - 1);
                    if (!(i = (e = this.getSource().getTileCache()).getTile(t)) && t.z < 12 && (n = Math.pow(2, t.z) / ((this.Xa || 256) / 256),
                    i = e.getTile(new jo(t.z,t.x + n,t.y)) || e.getTile(new jo(t.z,t.x - n,t.y))),
                    i && i.localCoord && i.data) {
                        var r = [s[0] - i.localCoord.center[0], s[1] - i.localCoord.center[1]]
                          , h = i.data;
                        if (h.polygons)
                            for (var o = 0, a = h.polygons.length; o < a; o += 1) {
                                var u = h.polygons[o];
                                if (3 < u.path.length && 3 === u.properties.feature_type_) {
                                    for (var f = [], c = 0, l = u.path.length; c < l; c += 2)
                                        f.push([u.path[c], u.path[c + 1]]);
                                    if (AMap.GeometryUtil.pointInRing(r, [[f]]))
                                        return u.properties
                                }
                            }
                    }
                }
            }
            ,
            Po.prototype.co = function() {
                return this._id
            }
            ,
            Po.prototype.destroy = function() {
                this.Jh && this.Jh.destroy && (this.Jh.destroy(),
                delete this.Jh)
            }
            ,
            Po.prototype.reload = function() {
                var t;
                this.map && ((t = this.getSource()).setTileUrl(this._tileUrl),
                t.reload(),
                this.map.setNeedUpdate(!0))
            }
            ,
            Po.prototype.yE = function() {
                var n = this;
                AMap.xE || AMap.bE || (AMap.bE = "loading",
                AMap.Http.Ajax(this._E, {}, function(t, i) {
                    i && i.data && (i = JSON.parse(i.data),
                    AMap.xE || (AMap.xE = i,
                    n.wE && (i = n.wE,
                    n.setFitViewByAdcode(i.CE, i.zE, i.avoid))))
                }))
            }
            ,
            Bo = Po,
            U.Ei(Wo, Bo),
            Wo.prototype.setSOC = function(t) {
                this.SOC = t,
                this._tileUrl = this.Ml.replace("[SOC]", this.SOC),
                this.reload()
            }
            ,
            Wo.prototype.setDistricts = function(t) {
                this.setAdcode(t)
            }
            ,
            Wo.prototype.getDistricts = function() {
                return this._adcode
            }
            ,
            Wo.prototype.setStyles = function(t) {
                this.Ze = U.Util.baseAssign(U.Util.baseAssign({}, this.tP.styles), t),
                this.map && ((t = this.getRender()) && t.clearStyleCache(),
                this.map.setNeedUpdate(!0))
            }
            ,
            Wo.prototype.getStyle = function() {
                return this.Ze
            }
            ,
            Wo.prototype.setAdcode = function(t) {
                t instanceof Array || (t = [t]);
                for (var i, n = {}, s = 0; s < t.length; s += 1)
                    n[t[s]] = 1;
                this._adcode = t = n,
                null != (i = this.map) && i.setNeedUpdate(!0)
            }
            ,
            Wo.prototype.setFitViewByAdcode = function(t, i, n) {
                var s, e;
                if (void 0 === i && (i = !1),
                t instanceof Array || (t = [t]),
                this.RE || (this.RE = window.AE),
                AMap.xE) {
                    this.RE = AMap.xE;
                    for (var r = 0; r < t.length; r += 1) {
                        var h = this.RE[t[r]]
                          , h = new l(U.Pt(h[0], h[1]));
                        e ? e.union(h) : e = h
                    }
                    this.map && null != (s = this.map) && s.setBounds(e, i, n)
                } else
                    this.wE = {
                        CE: t,
                        zE: i,
                        avoid: n
                    }
            }
            ,
            Wo.prototype.on = function(s, t, i, n) {
                var e = this
                  , r = (void 0 === n && (n = !1),
                this.getEvents())
                  , h = !!r[s];
                return Bo.prototype.on.call(this, s, t, i, n),
                this.map ? h || ("click" !== s && "mousemove" !== s || null != (h = this.map) && h.on(s, function(t) {
                    if (!r[s])
                        return e;
                    t.type = s;
                    var i = (t.target = e).getDistrictByContainerPos(t.pixel)
                      , i = {
                        preProps: e.IE,
                        props: i,
                        origin: t
                    };
                    e.emit(s, i)
                }),
                /(mouseenter|mouseleave|mouseover|mouseout)/.test(s) && (null != (h = this.map) && h.on("mouseleave", function(t) {
                    if ("mouseleave" === s || "mouseout" === s) {
                        if (!r[s])
                            return e;
                        t.type = s,
                        t = {
                            preProps: (t.target = e).IE,
                            props: undefined,
                            origin: t
                        },
                        e.emit(s, t),
                        e.IE = undefined
                    }
                }),
                null != (h = this.map)) && h.on("mousemove", function(t) {
                    if (!r[s])
                        return e;
                    var i, n = t.pixel;
                    (n = e.getDistrictByContainerPos(n)) ? e.IE && e.IE.adcode === n.adcode && e.IE.SOC === n.SOC || (t.type = s,
                    i = {
                        preProps: (t.target = e).IE,
                        props: n,
                        origin: t
                    },
                    e.emit("mouseleave", i),
                    e.emit("mouseout", i),
                    e.emit("mouseenter", i),
                    e.emit("mouseover", i),
                    e.IE = n) : !e.IE || "mouseout" !== s && "mouseleave" !== s || (t.type = s,
                    i = {
                        preProps: (t.target = e).IE,
                        props: n,
                        origin: t
                    },
                    e.emit("mouseleave", i),
                    e.emit("mouseout", i),
                    e.IE = n)
                })) : (h = {
                    fn: t,
                    context: i,
                    once: n
                },
                this.LE[s] ? this.LE[s].push(h) : this.LE[s] = [h]),
                this
            }
            ,
            Wo.prototype.onAdd = function() {
                if (Bo.prototype.onAdd.call(this),
                this.LE)
                    for (var t in this.LE)
                        if (this.LE.hasOwnProperty(t))
                            for (var i = this.LE[t], n = 0; n < i.length; n++)
                                this.on(t, i[n].fn, i[n].context)
            }
            ;
            var Bo, Fo = Wo;
            function Wo(t) {
                var i = Bo.call(this, t) || this;
                return i.LE = {},
                i.CX = "2" === t.dataVersion ? "2" : "",
                i.tP = {
                    id: "DistrictLayer_" + U.Util.uuid(),
                    tileUrl: AMap.getConfig().protocol + "://mvt.amap.com/district/[SOC]/[z]/[x]/[y]/4096?\nkey=" + AMap.getConfig().key + "&version=" + i.CX,
                    zooms: U.zoomRange,
                    dataZooms: [1, 18],
                    opacity: 1,
                    visible: !0,
                    depth: 0,
                    zIndex: 80,
                    styles: {
                        "stroke-width": .5,
                        "nation-stroke": [.35, .35, .35, 1],
                        "coastline-stroke": [.18, .63, .94, 1],
                        "province-stroke": [.5, .5, .5, 1],
                        "city-stroke": [.7, .7, .7, 1],
                        "county-stroke": [.85, .85, .85, 1],
                        fill: [1, 1, 1, 1],
                        dash: undefined,
                        zIndex: 0
                    },
                    SOC: "CHN"
                },
                i.SOC = t.SOC || i.tP.SOC,
                i._id = i.tP.id,
                t.adcode && i.setAdcode(t.adcode),
                i._depth = t.depth || i.tP.depth,
                i.Ze = U.Util.baseAssign(U.Util.baseAssign({}, i.tP.styles), t.styles || {}),
                i.Ml = i.tP.tileUrl,
                i._tileUrl = i.tP.tileUrl.replace("[SOC]", i.SOC),
                i.xt = t.zooms || i.tP.zooms,
                i.tl = (t.opacity === undefined ? i.tP : t).opacity,
                i.il = (t.visible === undefined ? i.tP : t).visible,
                i.Qh = (t.zIndex === undefined ? i.tP : t).zIndex,
                i.Qs = i.tP.dataZooms,
                i.CLASS_NAME = "AMap.DistrictLayer",
                i
            }
            No = Fo,
            U.Ei(Uo, No);
            var No, Vt = Uo;
            function Uo(t) {
                var i = this
                  , n = {
                    id: "WorldLayer_" + U.Util.uuid(),
                    zIndex: 81,
                    SOC: "WLD"
                };
                return (i = No.call(this, t) || this)._id = n.id,
                i.SOC = t.SOC || n.SOC,
                i.Qh = (t.zIndex === undefined ? n : t).zIndex,
                i._tileUrl = i.Ml.replace("[SOC]", i.SOC),
                i.CLASS_NAME = "AMap.DistrictLayer.World",
                i
            }
            Go = Fo,
            U.Ei(_o, Go);
            var Go, Nt = _o;
            function _o(t) {
                var i = this
                  , n = {
                    id: "CountryLayer_" + U.Util.uuid(),
                    depth: 1,
                    zIndex: 82,
                    SOC: "CHN"
                };
                return 0 === (t = t || n).depth && (t.styles || (t.styles = {}),
                t.styles["stroke-width"] = 0),
                (i = Go.call(this, t) || this)._id = n.id,
                i._depth = t.depth === undefined ? n.depth : +t.depth,
                i.SOC = t.SOC || n.SOC,
                i.Qh = (t.zIndex === undefined ? n : t).zIndex,
                "CHN" === i.SOC && 1 < i._depth && (i.SOC = "CHN2"),
                i._tileUrl = i.Ml.replace("[SOC]", i.SOC),
                i.CLASS_NAME = "AMap.DistrictLayer.Country",
                i
            }
            Yo = Fo,
            U.Ei(Zo, Yo);
            var Yo, ti = Zo;
            function Zo(t) {
                var i = this
                  , n = {
                    id: "ProvinceLayer_" + U.Util.uuid(),
                    depth: 1,
                    zIndex: 83,
                    SOC: "CHN5"
                };
                return (i = Yo.call(this, t) || this)._id = n.id,
                i._depth = t.depth === undefined ? n.depth : +t.depth,
                i.SOC = t.SOC || n.SOC,
                i.Qh = (t.zIndex === undefined ? n : t).zIndex,
                0 === i._depth && (i.SOC = "CHN4"),
                1 === i._depth && (i.SOC = "CHN5"),
                2 === i._depth && (i.SOC = "CHN3"),
                i._tileUrl = i.Ml.replace("[SOC]", i.SOC),
                i.CLASS_NAME = "AMap.DistrictLayer.Province",
                i.onCreated(),
                i
            }
            Fo.World = Vt,
            Fo.Country = Nt,
            Fo.Province = ti,
            Xo = ui,
            U.Ei(Vo, Xo),
            Vo.prototype._l = function() {
                this.kl.TileMatrixSet = this.kl.TileMatrixSet || "EPSG:3857",
                this.kl.Request = "GetTile",
                this.kl.Service = "WMTS",
                this.kl.Format = this.kl.Format || "image/png",
                this._tileUrl = this.Ml + "?" + U.Util.join(this.kl, "&"),
                this.map && this.map.setNeedUpdate(!0)
            }
            ,
            Vo.prototype.getSourceConfig = function() {
                return {
                    id: this._id || "tile",
                    tileUrl: this._tileUrl || "",
                    type: "markLayer",
                    tileSize: this.Xa || 256,
                    zooms: this.xt,
                    dataZooms: this.Qs || [7, 17],
                    projection: this.hl || "EPS3857"
                }
            }
            ;
            var Xo, Jo = Vo;
            function Vo() {
                var o = this
                  , t = {
                    id: "mark_" + U.Util.uuid(),
                    cacheSize: 1,
                    opacity: 1,
                    tileUrl: "",
                    visible: !0,
                    zIndex: 1e3,
                    detectRetina: !1,
                    dataZooms: [2, 30],
                    TF: !0
                };
                return (o = Xo.call(this, t) || this)._opts = t,
                o.CLASS_NAME = "AMap.MarkLayer",
                o.bl = function(t, i, n, s, e) {
                    console.log("_createTile");
                    var r, h = document.createElement("img");
                    "w" === (null == (r = o.map) ? void 0 : r.baseRender) && (h.crossOrigin = "anonymous"),
                    h.onload = function() {
                        s(h)
                    }
                    ,
                    h.onerror = function() {
                        e(h)
                    }
                    ,
                    h.src = o._tileUrl + "&TileMatrix=" + n + "&TileRow=" + i + "&TileCol=" + t
                }
                ,
                o
            }
            si = config,
            Ho = (si = void 0 === si ? [] : si)[16] + "://" + si[17] || "",
            qo = si[4],
            Ko = si[0],
            si[18] || console.log("地图 JS API 将于2023年1月1日起，禁止非Web端key的调用权限。请您提前确保已正确使用 Web 端 key 进行服务访问，避免对您的服务产生不必要的影响。"),
            U.Module.module = function(t, i) {
                var s = F(t = Array.isArray(t) ? t : [t]);
                0 === s.length ? i && i() : (P.add(s, i),
                W(mapsplugin + "?v=" + qo + "&cls=" + s.join() + "&key=" + Ko, function() {
                    for (var t = 0, i = s; t < i.length; t++) {
                        var n = i[t];
                        P.finish(n)
                    }
                }))
            }
            ;
            var Ho, qo, Ko, Qo = function(t, i) {
                var s = F(t = Array.isArray(t) ? t : [t]);
                0 === s.length ? i() : (P.add(s, i),
                W(mapsplugin + "?v=" + qo + "&cls=" + s.join() + "&key=" + Ko, function() {
                    for (var t = 0, i = s; t < i.length; t++) {
                        var n = i[t];
                        P.finish(n)
                    }
                }))
            };
            G('.amap-custom{top:0;left:0;position:absolute}.amap-container img{max-width:none!important;max-height:none!important}.amap-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAAf1JREFUeAHtmtGpAkEQBE9TMAi/zMb8MzCGU/97Ye8QunDrfQ7qNFUMS8Pbtom/fd8fEx/b/FymdIDL85p/wmmLgEJa5Ad7FTIA0xorpEV+sFchAzCtsUJa5Ad7FTIA0xorpEV+sPcyW1oG33f8WwL3qZ+blebnMs4DXGzqGWFv6hvSYx83KyRi6Q0V0mMfNyskYukNFdJjHzcrJGLpDRXSYx8329QjltrQpp7QH2jWv/5fA5t6EtKc+YY06YfdCglQmiOFNOmH3QoJUJojhTTph90KCVCaI4U06YfdNvUApTiyqSf4NvVEZdGZbwhMvEIUAiMAi+OFKARGABbHC1EIjAAsjk2dJcSmnnzY1BOVRWc+6jDxClEIjAAsjheiEBgBWBwvRCEwArA4/9LUbx+uLxjbM3Fs6omaTT1RWXTmow4TrxCFwAjA4nghCoERgMXxQhQCIwCL8y9NHYb1dBybekJnU09UFp35qMPEK0QhMAKwOF6IQmAEYHG8EIXACMDi2NRZQmzqyYdNPVFZdOajDhOvEIXACMDieCEKgRGAxfFCFAIjAItjU2cJsaknHzb1RGXRmY86TLxCFAIjAIvjhSgERgAWxwtRCIwALI5NnSXEpp582NQTlUVnPuow8QpRCIwALI4XohAYAVgcL0QhMAKwON+m/oRlWjrOG2SeYNIaKe7fAAAAAElFTkSuQmCC);background-color:#f1f1f1;touch-action:none;position:relative;overflow:hidden;-ms-touch-action:none}.amap-drags,.amap-layers{width:100%;height:100%;position:absolute;overflow:hidden;transform:translateZ(0)}.amap-layers canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-layers .amap-layer-tile{transform:translateZ(0)}.amap-layers .amap-layer-tile,.amap-layers .amap-layer-tile img{position:absolute;top:0;left:0;user-select:none;-webkit-user-select:none}.amap-layers .amap-layer-image{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-layers .amap-layer-image img{position:absolute;top:0;left:0}.amap-layer img{pointer-events:none;display:block}.amap-layers .amap-layer-overlay{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-e,.amap-maps{width:100%;height:100%;outline:none}.amap-maps{z-index:0}.amap-e,.amap-layers,.amap-maps,.amap-tile-container{position:absolute;left:0;top:0;overflow:hidden}.amap-context,.amap-marker,.amap-markers,.amap-overlays{position:absolute;left:0;top:0}.amap-layers{z-index:0}.amap-overlays{z-index:110;cursor:default}.amap-markers{z-index:120}.amap-controls{z-index:150}.amap-copyright{display:block!important;left:85px;height:16px;bottom:1.8px;line-height:1.5;padding-bottom:2px;font-size:11px;font-family:Arial,sans-serif}.amap-copyright,.amap-logo{position:absolute;z-index:160;user-select:none;-webkit-user-select:none}.amap-logo{bottom:1.5px;left:4px;height:20px}.amap-logo img{width:73px!important;height:20px!important;border:none;vertical-align:baseline!important;user-select:none;-webkit-user-select:none}.amap-icon{position:relative;z-index:1}.amap-icon img{position:absolute;z-index:-1}.amap-marker-label{position:absolute;z-index:2;border:1px solid #00f;background-color:#fff;white-space:nowrap;cursor:default;padding:3px;font-size:12px;line-height:14px}.amap-info{left:0;width:fit-content;width:-webkit-fit-content;width:-moz-max-content}.amap-info,.amap-menu{position:absolute;z-index:140}.amap-info-close{position:absolute;right:5px;top:5px;color:#c3c3c3;text-decoration:none;font:700 16px/14px Tahoma,Verdana,sans-serif;width:14px;height:14px;cursor:pointer}.amap-info-outer,.amap-menu-outer{box-shadow:0 1px 2px rgba(0,0,0,.1);background:none repeat scroll 0 0 #fff;border-radius:2px;padding:1px;text-align:left}.amap-info-contentContainer:hover .amap-info-outer,.amap-menu-outer:hover{box-shadow:0 1px 2px rgba(0,0,0,.3)}.amap-info-content{position:relative;background:#fff;padding:10px 18px 10px 10px;line-height:1.4;overflow:auto}.amap-marker-content{position:relative}.amap-info-sharp-old{overflow:hidden;position:absolute;background-image:url(https://webapi.amap.com/images/arrows.png)}.bottom-center .amap-info-sharp-old{height:12px;width:20px;background-position:center 12px;top:100%;left:50%;margin:-9px auto 0 -10px}.bottom-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -46px;top:100%;margin-top:-9px}.bottom-right .amap-info-sharp-old{height:12px;width:13px;top:-1px;background-position:-56px -46px;left:100%;margin-left:-13px;top:100%;margin-top:-9px}.middle-left .amap-info-sharp-old{height:20px;width:12px;background-position:0;top:50%;margin-top:-10px;margin-left:-11px}.center .amap-info-sharp-old{display:none}.middle-right .amap-info-sharp-old{height:20px;margin-right:0;width:12px;background-position:100%;left:100%;margin-left:-9px;top:50%;margin-top:-10px}.top-center .amap-info-sharp-old{height:12px;width:20px;background-position:top;top:0;left:50%;margin:-3px auto 0 -10px}.top-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -3px;top:0;margin-top:-3px}.top-right .amap-info-sharp-old{height:12px;width:13px;background-position:-56px -3px;left:100%;margin-left:-13px;top:0;margin-top:-3px}.amap-info-sharp{position:absolute}.bottom-center .amap-info-sharp{bottom:0;left:50%;border-top:8px solid #fff}.bottom-center .amap-info-sharp,.bottom-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.bottom-center .amap-info-sharp:after{position:absolute;content:"";margin-top:-7px;border-top:8px solid rgba(0,0,0,.3);filter:blur(2px);z-index:-1}.amap-info-contentContainer:hover.bottom-center .amap-info-sharp:after{border-top:8px solid rgba(0,0,0,.5)}.bottom-left .amap-info-sharp{border-color:transparent #fff;border-style:solid;border-width:0 0 10px 10px}.bottom-left .amap-info-sharp:after{position:absolute;content:"";margin-left:-10px;border-color:transparent rgba(0,0,0,.3);border-style:solid;border-width:0 0 10px 10px;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-left .amap-info-sharp:after{border-color:transparent rgba(0,0,0,.5)}.bottom-left .amap-info-content{border-radius:2px 2px 2px 0}.bottom-right .amap-info-sharp{right:0;border-top:10px solid #fff;border-left:10px solid transparent}.bottom-right .amap-info-sharp:after{position:absolute;margin-top:-9px;margin-left:-10px;content:"";border-top:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-right .amap-info-sharp:after{border-top:10px solid rgba(0,0,0,.5)}.bottom-right .amap-info-content{border-radius:2px 2px 0 2px}.top-center .amap-info-sharp{top:0;left:50%;border-bottom:8px solid #fff}.top-center .amap-info-sharp,.top-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.top-center .amap-info-sharp:after{position:absolute;content:"";margin-top:0;border-bottom:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.top-left .amap-info-sharp{left:0;top:0;border-bottom:10px solid #fff;border-right:10px solid transparent}.top-left .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:0;border-bottom:10px solid rgba(0,0,0,.3);border-right:10px solid transparent;filter:blur(1px);z-index:-1}.top-right .amap-info-sharp{right:0;top:0;border-bottom:10px solid #fff;border-left:10px solid transparent}.top-right .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:-10px;border-bottom:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.middle-right .amap-info-sharp{right:0;top:50%;border-left:8px solid #fff}.middle-right .amap-info-sharp,.middle-right .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-right .amap-info-sharp:after{position:absolute;content:"";margin-left:-8px;border-left:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-right .amap-info-sharp:after{border-left:8px solid rgba(0,0,0,.5)}.middle-left .amap-info-sharp{left:0;top:50%;border-right:8px solid #fff}.middle-left .amap-info-sharp,.middle-left .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-left .amap-info-sharp:after{position:absolute;content:"";margin-left:0;border-right:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-left .amap-info-sharp:after{border-right:8px solid rgba(0,0,0,.5)}.amap-info-contentContainer.top-center,.amap-info-contentContainer.top-left,.amap-info-contentContainer.top-right{padding-top:8px}.amap-info-contentContainer.bottom-center,.amap-info-contentContainer.bottom-left,.amap-info-contentContainer.bottom-right{padding-bottom:8px}.amap-info-contentContainer.middle-right{padding-right:8px}.amap-info-contentContainer.middle-left{padding-left:8px}.amap-menu-outer{margin:0;padding:0;list-style-type:none}ul.amap-menu-outer li{height:35px;line-height:35px;word-break:break-all;padding:0 10px;font-size:12px;white-space:nowrap}ul.amap-menu-outer li a{text-decoration:none;font-size:13px;margin:0 5px;color:#000;padding:5px}ul.amap-menu-outer li:hover{background-color:#f3f3ee}.amap-overlay-text-container{display:block;width:auto;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#fff;padding:2px 3px;border:1px solid #ccc;border-radius:3px}.amap-overlay-text-container.amap-overlay-text-empty{display:none}.amap-info-content-ie8{border:1px solid #9c9c9c}.amap-control{position:absolute;-webkit-tap-highlight-color:transparent}.amap-toolbar{background-color:#fff;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.5)}.amap-toolbar span{display:block;width:30px;height:30px;line-height:30px;text-align:center;border-radius:0 0 4px 4px;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:20px}.amap-toolbar span:first-child{border-bottom:1px solid #eee;border-radius:4px 4px 0 0}.amap-toolbar span:hover{font-weight:bolder;background-color:#f0f0f0}.amap-scalecontrol{pointer-events:none;background-color:hsla(0,0%,100%,.5);border-radius:2px;user-select:none}.amap-scalecontrol .amap-scale-text{font-size:10px;text-align:center;transition:width .3s;user-select:none}.amap-scalecontrol .amap-scale-line{position:relative;height:8px;left:2px;user-select:none}.amap-scalecontrol .amap-scale-edgeleft,.amap-scalecontrol .amap-scale-edgeright,.amap-scalecontrol .amap-scale-middle{position:absolute;background-color:#333;overflow:hidden;box-sizing:content-box!important}.amap-scalecontrol .amap-scale-edgeright{width:1px;height:6px;border:1px solid #fff;transition:left .3s}.amap-scalecontrol .amap-scale-middle{height:2px;left:2px;top:2px;border-top:1px solid #fff;border-bottom:1px solid #fff;transition:width .3s}.amap-scalecontrol .amap-scale-edgeleft{width:1px;height:6px;border:1px solid #fff}.amap-controlbar,.amap-controlbar *{user-select:none}.amap-controlbar .amap-luopan{width:92px;height:92px;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -22px -30px no-repeat;background-size:348px 270px;user-select:none}.amap-luopan .amap-compass{top:46px;left:50%;position:absolute;margin:-24px;width:48px;height:48px;z-index:10;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -231px -26px no-repeat;background-size:348px 270px}.amap-luopan .amap-compass.amap-compass-black{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -231px -79px;background-size:348px 270px}.amap-luopan .amap-compass .amap-pointers{position:absolute;width:30px;height:48px;top:0;left:9px;border:none;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -281px -26px no-repeat;background-size:348px 270px}.amap-pitchDown,.amap-pitchUp{width:30px;height:25.5px;position:absolute;top:3.5px;margin-left:-15px;left:50%;z-index:1;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -302.5px -49px no-repeat;background-size:348px 270px}.amap-pitchDown:hover,.amap-pitchUp:hover{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -302.5px -23.5px;background-size:348px 270px}.amap-pitchDown{top:66px;transform:rotate(180deg);-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg);-moz-transform:rotate(180deg)}.amap-rotateLeft,.amap-rotateRight{width:21px;height:52px;top:19px;position:absolute;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -301.5px -77px no-repeat;background-size:348px 270px}.amap-rotateLeft:hover,.amap-rotateRight:hover{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -278.5px -76.5px;background-size:348px 270px}.amap-rotateLeft{left:5px}.amap-rotateRight{right:5px;transform:rotateY(180deg);-ms-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-o-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.amap-ctrl-icon-layer{width:30px;height:30px}.amap-ctrl-icon-layer,.amap-ctrl-list-layer{background-color:#fff;border-radius:3px;box-shadow:0 0 4px 1px rgba(0,0,0,.2)}.amap-ctrl-list-layer{position:absolute;top:0;right:0;overflow:hidden;z-index:1}.amap-ctrl-list-layer ul{overflow:hidden;list-style:none;margin:0;padding:5px 8px}.amap-ctrl-list-layer ul li{float:left;width:100%}.amap-ctrl-list-layer ul p{white-space:nowrap;font-size:12px;height:20px;line-height:20px;padding-left:5px;margin:0 10px}.amap-ctrl-list-layer input{float:left;height:20px;width:12px;margin:0 5px}.amap-ctrl-base-layer{border-bottom:1px solid #eee}.amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:1px solid #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-popup{text-align:center;position:fixed;top:50%;left:50%;margin-left:-165px;margin-top:-170px}.amap-popup-content{vertical-align:middle;line-height:200px;overflow:hidden;background-color:#fff;border:solid;border-width:3px 1px;border-radius:5px;border-color:#ddf;margin:0 auto;text-align:center;height:340px}.amap-labellayers{position:absolute;top:0;left:0;transform-origin:0 0}.amap-indoormap-floorbar-control{position:absolute;width:40px;text-align:center;line-height:1.3em;border-radius:20px;box-shadow:0 0 3px 3px rgba(0,0,0,.1);background-color:#fff;margin-top:-100px}.amap-indoormap-floorbar-control .floor-list-box{max-height:160px;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;-webkit-user-select:none;-moz-user-select:none}.floor-list-box::-webkit-scrollbar{width:0!important;height:0!important}.amap-indoormap-floorbar-control ul{list-style:none;margin:0;padding:0 4px;width:40px;box-sizing:border-box}.amap-indoormap-floorbar-control ul li{height:32px;width:32px;border-radius:16px}.amap-indoormap-floorbar-control ul li:hover{background-color:#efefef}.amap-indoormap-floorbar-control ul li div{height:32px;text-align:center;line-height:32px;font-size:12px}.amap-indoormap-floorbar-control ul li.selected{color:#fff;background-color:#4196ff}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{height:32px;width:32px;margin:0 auto;border-radius:16px;position:relative}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;bottom:4px;left:0;right:0;width:0;height:0;border:7px solid transparent;border-top-color:#777}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;bottom:11px}.amap-indoormap-floorbar-control .floor-plus:hover:after{border-bottom-color:#222}.amap-indoormap-floorbar-control .floor-minus:hover:after{border-top-color:#222}.amap-indoormap-floorbar-control .floor-plus.disabled:after{border-bottom-color:#ddd}.amap-indoormap-floorbar-control .floor-minus.disabled:after{border-top-color:#ddd}.amap-indoormap-floorbar-control .floor-list-item.selected:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}'),
            -1 !== (Oi = 0 !== (Oi = window.location.href).indexOf("http") && window.parent && window.parent !== window ? window.parent.location.href : Oi).indexOf("?") && (Oi = Oi.substr(0, Oi.indexOf("?"))),
            Oi = encodeURIComponent(Oi);
            var ut = (Mi = config[16] || config[2].split(":")[0]) + "://restapi.amap.com"
              , Kt = (Pt = Mi + "://" + config[2].split("://")[1]) + "/theme/v1.3/markers/" + (U.Support.Ue ? "b" : "n")
              , zi = Mi + "://webrd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x=[x]&y=[y]&z=[z]"
              , $o = Mi + "://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x=[x]&y=[y]&z=[z]"
              , Ii = ""
              , Zt = ""
              , ta = (window._AMapSecurityConfig && (window._AMapSecurityConfig.securityJsCode ? Ii = window._AMapSecurityConfig.securityJsCode || "" : window._AMapSecurityConfig.serviceHost && (li = "",
            hi = (li = "https" === (Zt = window._AMapSecurityConfig.serviceHost || "").split(":")[0] ? Zt.replace(/https:\/\/\S+?\//g, "") : Zt.replace(/http:\/\/\S+?\//g, "")) && li.split("/")[0],
            Gt = window.location.hostname,
            "_AMapService" !== hi) && ("127.0.0.1" === Gt || "localhost" === Gt ? window.alert("使用 JSAPI 安全模式，代理服务请以_AMapService 作为一级路由") : "undefined" != typeof console && console.log("<AMap JSAPI> 使用 JSAPI 安全模式，代理服务请以_AMapService 作为一级路由"))),
            {
                key: config[0],
                host: config[2],
                domain: config[17],
                server: ut,
                protocol: Mi,
                version: config[4],
                adcode: config[6],
                callback: config[5],
                appname: Oi,
                client: Pt,
                markers: Kt,
                pc: "http://gaode.com",
                mo: "http://m.amap.com",
                tileCombo: !0,
                tileVersion: "",
                styleVersion: "",
                iconVersion: "",
                iconClass: "",
                styleClass: "",
                workerUrl: "",
                YT: zi,
                qT: $o,
                y_: U.Support.$e ? $o : zi,
                v_: "\x3c!--v2.0--\x3e &copy " + (new Date).getFullYear() + " AutoNavi ",
                db: config[14] || "",
                JH: config[15] || "",
                jscode: Ii,
                gaodeserver: Zt,
                vdataProxy: "",
                keytype: config[19],
                poiImgVersion: config[20]
            })
              , ia = function ia() {
                return ta
            };
            return s = (new Date).getTime(),
            Vt = ["platform=JS&s=rsv3&logversion=2.0&product=JsInit&key=" + ta.key, "t=" + s],
            Nt = init + "?",
            Vt.push("sdkversion=2.0"),
            Vt.push("appname=" + Oi),
            Vt.push("csid=" + U.Util.uuid()),
            Vt.push("resolution=" + window.screen.width + "*" + window.screen.height),
            Vt.push("mob=" + (U.Support.$e ? 1 : 0)),
            Vt.push("vt=" + (U.Support.isWebGL ? 1 : 0)),
            Vt.push("dpr=" + window.devicePixelRatio),
            Vt.push("scale=" + (U.Support.Ue ? 2 : 1)),
            Vt.push("detect=" + U.Support.Ue),
            ta.jscode ? Vt.push("jscode=" + ta.jscode) : ta.gaodeserver && (Nt = init + "?"),
            Nt += Vt.join("&"),
            pi.JSONP(Nt),
            function(t) {
                return t[1] && (sr = t[1].slice(-2),
                tr = t[1].slice(0, 4)),
                {
                    Map: rr,
                    ImageLayer: fr,
                    createDefaultLayer: Jr,
                    TileLayer: p,
                    NebulaLayer: Yi,
                    Buildings: Gr,
                    Indoor: Lo,
                    SkyLayer: gs,
                    DistrictLayer: Fo,
                    CanvasLayer: vr,
                    CustomLayer: gr,
                    GLCustomLayer: Kr,
                    LabelsLayer: vs,
                    MassMarks: xr,
                    Event: U.Event,
                    version: "2.0",
                    plugin: Qo,
                    LngLat: U.LngLat,
                    Pixel: U.Pixel,
                    Size: U.Size,
                    Icon: ie,
                    Bounds: l,
                    extent: Et,
                    Marker: Te,
                    Text: Tr,
                    InfoWindow: Pe,
                    ContextMenu: Xe,
                    LabelMarker: Rr,
                    Polygon: Xh,
                    Rectangle: qh,
                    Ellipse: $h,
                    Circle: so,
                    CircleMarker: oo,
                    Polyline: po,
                    BezierCurve: wo,
                    OverlayGroup: uh,
                    VectorLayer: ts,
                    LayerGroup: th,
                    Control: jr,
                    DomUtil: w,
                    Util: U.Util,
                    GeometryUtil: U.GeometryUtil,
                    Browser: Fr,
                    UA: {
                        ie: Fr.ie,
                        ie9: Fr.ie9,
                        ie11: Fr.ie11,
                        mobile: Fr.mobile,
                        android: Fr.android,
                        ios: Fr.ios
                    },
                    PlaneGeometryUtil: U.PlaneGeometryUtil,
                    getConfig: ia,
                    WebService: Ke,
                    extend: U.extend,
                    Http: pi,
                    addCss: G,
                    BuryPoint: Yr,
                    lcs: U.lcs,
                    convertFrom: $e,
                    Heatmap: sh,
                    IndoorMap: Oo,
                    Mapbox: hh,
                    BuildingLayer: Gr,
                    Mark: Jo
                }
            }
        });
        var __AMap_callback = AMap.getConfig().callback, tryGetCallback, tryCallback;
        return __AMap_callback && (tryGetCallback = function() {
            var c = __AMap_callback.split(".")
              , context = window;
            do {
                if (!(context = context[c.shift()]))
                    return null
            } while (c.length);
            return context || null
        }
        ,
        tryCallback = function(isFinalTry) {
            var func = tryGetCallback();
            if (func) {
                if ("function" != typeof func)
                    throw new Error(__AMap_callback + " is not a function!");
                setTimeout(func, 1)
            } else if (isFinalTry)
                throw new Error("Can not find callback: " + __AMap_callback + ", try define it before load JsApi!")
        }
        ,
        document.body && tryGetCallback() ? tryCallback() : setTimeout(function() {
            tryCallback(!0)
        }, 1)),
        AMap
    });
    (typeof _cssload_ == "function") && _cssload_("logo", ".amap-logo{display:block!important;pointer-events:none;}", true)
}
)(["47d218f97b7d42e5252e82e354623ca9", [116.687475, 30.95099, 117.966038, 32.536642, 117.283042, 31.86119], "https://webapi.amap.com", 1, "2.3.3.2", "___onAPILoaded", "340100", "AMap.MouseTool,AMap.PolyEditor,AMap.Map,AMap.Polyline,AMap.Polygon,AMap.PlaceSearch,AMap.AutoComplete,AMap.Marker,AMap.Icon,AMap.InfoWindow", true, false, false, true, "20230103011500-20201123-1", false, "A", "3_23_10_10_00", "https", "webapi.amap.com", 1, "0", "20230111"])
_jsload_('AMap.MouseTool', '(function(){"use strict";var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var _SuppressedError=typeof SuppressedError==="function"?SuppressedError:function(error,suppressed,message){var e=new Error(message);return e.name="SuppressedError",e.error=error,e.suppressed=suppressed,e};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag$1=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(value)?getRawTag(value):objectToString(value)}function isObjectLike(value){return value!=null&&typeof value=="object"}var isArray=Array.isArray;function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function identity(value){return value}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function constant(value){return function(){return value}}var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};var setToString=shortOut(baseSetToString);var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function eq(value,other){return value===other||value!==value&&other!==other}var objectProto$3=Object.prototype;var hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty$2.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}var objectProto$4=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$4;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;var propertyIsEnumerable=objectProto$5.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$3.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};function stubFalse(){return false}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$4.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$5.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty$6.call(source,key)){assignValue(object,key,source[key])}}});var MouseTool=function(_super){__extends(MouseTool,_super);function MouseTool(map,toolBubble){var _this=_super.call(this)||this;_this["CLASS_NAME"]="AMap.MouseTool";_this._map=map;_this._container=_this._map.getMapsContainer();_this.overlayBubble=toolBubble?toolBubble:false;_this.overlays={marker:[],circle:[],rectangle:[],polyline:[],polygon:[],measureArea:[]};_this.ruler=null;_this.eventsList=[];_this.keyboardEventsList=[];return _this}MouseTool.prototype.marker=function(opts){this._onStart();this._bind("click",this._renderMarker.bind(this,opts))};MouseTool.prototype.circle=function(opts){this._onStart();this._bind("mousedown",this._createCircle.bind(this,opts));this._bind("mouseup",this._doneCircle)};MouseTool.prototype.rectangle=function(opts){this._onStart();this._bind("mousedown",this._createRectangle.bind(this,opts));this._bind("mouseup",this._doneRectangle)};MouseTool.prototype.polyline=function(opts){this._onStart();this._bind("click",this._addPolylinePoint.bind(this,opts));this._bind("rightclick",this._delPolylineLinePoint.bind(this));this._bind("dblclick",this._endPolylineLine.bind(this,"db"))};MouseTool.prototype.polygon=function(opts){this._onStart();this._bind("click",this._addPolygonPoint.bind(this,opts));this._bind("dblclick",this._delPolygonPoint.bind(this));this._bind("rightclick",this._endPolygon.bind(this))};MouseTool.prototype.measureArea=function(opts){this._onStart();this._bind("click",this._addMeasureAreaPoint.bind(this,opts));this._bind("rightclick",this._endMeasureArea.bind(this));this._bind("dblclick",this._endMeasureArea.bind(this));this._bind("keydown",this._keydownMeasureArea.bind(this,opts))};MouseTool.prototype.rule=function(opts){var _this=this;this._onStart();AMap.plugin("AMap.RangingTool",function(){_this.ruler=new AMap.RangingTool(_this._map,opts);_this.ruler.turnOn();_this.ruler.on("end",function(e){_this.emit("draw",{obj:e.polyline})})})};MouseTool.prototype.rectZoomIn=function(opts){this._onStart();this._bind("mousedown",this._createRectangle.bind(this,opts));this._bind("mouseup",this._doneZoomIn)};MouseTool.prototype.rectZoomOut=function(opts){this._onStart();this._bind("mousedown",this._createRectangle.bind(this,opts));this._bind("mouseup",this._doneZoomOut)};MouseTool.prototype.close=function(ifClear){if(ifClear){if(this.ruler){this.ruler.turnOff(true)}var keys=Object.keys(this.overlays);for(var i=0;i<keys.length;i++){var overlay=this.overlays[keys[i]];this._map.remove(overlay)}this.overlays={marker:[],circle:[],rectangle:[],polyline:[],polygon:[],measureArea:[]}}this._onEnd(ifClear)};MouseTool.prototype._bind=function(TYPE,FUN){if(TYPE&&TYPE==="keydown"){this._container.addEventListener("keydown",FUN,this);this.keyboardEventsList.push({type:TYPE,fun:FUN})}else{this._map.on(TYPE,FUN,this);this.eventsList.push({type:TYPE,fun:FUN})}};MouseTool.prototype._unbind=function(){var eventLen=this.eventsList.length;var keyboardEventLen=this.keyboardEventsList.length;for(var i=0;i<eventLen;i++){var event=this.eventsList[i];this._map.off(event.type,event.fun,this)}for(var i=0;i<keyboardEventLen;i++){var event=this.keyboardEventsList[i];this._container.removeEventListener("keydown",event.fun)}};MouseTool.prototype._keydownMeasureArea=function(opts,e){if(e&&e.key==="Escape"){this._endMeasureArea()}};MouseTool.prototype._addMeasureAreaPoint=function(opts,e){this.mapDoubleClickZoom=this._map["getStatus"]()["doubleClickZoom"];this._map["setStatus"]({doubleClickZoom:false});if(!this.MeasureAreaTemp){var options={path:[e["lnglat"],e["lnglat"]],strokeColor:"#1791fc",fillColor:"#1791fc",strokeOpacity:.8,fillOpacity:.35,strokeWeight:2,strokeStyle:"solid",strokeDasharray:[10,5],zIndex:10,extData:{},bubble:true,innerOverlay:true};var polylineOpts=assign(options,opts);this.MeasureAreaTemp={path:[]};this.MeasureAreaTemp.obj=new AMap.Polygon(polylineOpts);this._map.add(this.MeasureAreaTemp.obj);this._map.on("mousemove",this._drawMeasureArea,this)}else{var newPoint=[e["lnglat"].lng,e["lnglat"].lat];var pathArr=this.MeasureAreaTemp.obj["getPath"]();pathArr.push(newPoint);this.MeasureAreaTemp.obj["setPath"](pathArr)}this.emit("addnode",{obj:this.MeasureAreaTemp.obj})};MouseTool.prototype._drawMeasureArea=function(e){if(this.MeasureAreaTemp&&this.MeasureAreaTemp.obj){var newPoint=[e["lnglat"].lng,e["lnglat"].lat];var pathArr=this.MeasureAreaTemp.obj["getPath"]();pathArr.pop();pathArr.push(newPoint);this.MeasureAreaTemp.obj["setPath"](pathArr)}};MouseTool.prototype._endMeasureArea=function(){this._map["setStatus"]({doubleClickZoom:this.mapDoubleClickZoom});var pathArr=this.MeasureAreaTemp&&this.MeasureAreaTemp.obj&&this.MeasureAreaTemp.obj["getPath"]();if(pathArr&&pathArr.length>3){pathArr.pop();this.MeasureAreaTemp.obj["setPath"](pathArr);var area=this.MeasureAreaTemp.obj["getArea"]();var areaHTML=area>1*1e5?(area*1e-6).toFixed(2)+"平方公里":area.toFixed(1)+"平方米";var lastPoint=pathArr[pathArr.length-1];var text=new AMap.Text({text:areaHTML,position:lastPoint});this.overlays.measureArea.push(text);this._map.add(text);this.overlays.measureArea.push(this.MeasureAreaTemp["obj"]);this.emit("draw",{obj:this.MeasureAreaTemp.obj});this.MeasureAreaTemp=null}else{if(this.MeasureAreaTemp){this._map.remove(this.MeasureAreaTemp.obj)}this.MeasureAreaTemp=null}this.emit("cancel",{obj:this.MeasureAreaTemp&&this.MeasureAreaTemp.obj||false});this._map.off("mousemove",this._drawMeasureArea,this)};MouseTool.prototype._addPolygonPoint=function(opts,e){this.mapDoubleClickZoom=this._map["getStatus"]()["doubleClickZoom"];this._map["setStatus"]({doubleClickZoom:false});if(this.overlayBubble){var curOverlays=this._map.getAllOverlays();if(curOverlays&&curOverlays.length>0){for(var _i=0,curOverlays_1=curOverlays;_i<curOverlays_1.length;_i++){var item=curOverlays_1[_i];if(item.className==="Overlay.Polygon"||item.className==="Overlay.Circle"||item.className==="Overlay.Rectangle"){var IsRange=item.contains(e.lnglat);if(IsRange){return}}}}}if(!this.polygonTemp){var options={path:[e["lnglat"],e["lnglat"]],strokeColor:"#1791fc",fillColor:"#1791fc",strokeOpacity:.8,fillOpacity:.35,strokeWeight:2,strokeStyle:"solid",strokeDasharray:[10,5],zIndex:10,extData:{}};this.polygonTemp={path:[]};var polylineOpts=assign(options,opts);this.polygonTemp["path"].push(e.lnglat);this.polygonTemp.obj=new AMap.Polygon(polylineOpts);this._map.add(this.polygonTemp.obj);this._map.on("mousemove",this._drawGon,this)}else{var newPoint=[e["lnglat"].lng,e["lnglat"].lat];var pathArr=this.polygonTemp.obj["getPath"]();pathArr.push(newPoint);this.polygonTemp.obj["setPath"](pathArr)}this.overlays.polygon.push(this.polygonTemp.obj)};MouseTool.prototype._drawGon=function(e){if(this.polygonTemp&&this.polygonTemp.obj){var newPoint=[e["lnglat"].lng,e["lnglat"].lat];var pathArr=this.polygonTemp.obj["getPath"]();pathArr.pop();pathArr.push(newPoint);this.polygonTemp.obj["setPath"](pathArr)}};MouseTool.prototype._delPolygonPoint=function(){if(this.polygonTemp&&this.polygonTemp.obj){var pathArr=this.polygonTemp.obj["getPath"]();this.polygonTemp.obj["setPath"](pathArr)}this._endPolygon()};MouseTool.prototype._endPolygon=function(){if(this.polygonTemp&&this.polygonTemp.obj){var pathArr=this.polygonTemp.obj["getPath"]();pathArr.pop();this.polygonTemp.obj["setPath"](pathArr);this.emit("draw",{obj:this.polygonTemp.obj})}this.polygonTemp=null;this._map["setStatus"]({doubleClickZoom:this.mapDoubleClickZoom});this._map.off("mousemove",this._drawGon,this)};MouseTool.prototype._addPolylinePoint=function(opts,e){this.mapDoubleClickZoom=this._map["getStatus"]()["doubleClickZoom"];this._map["setStatus"]({doubleClickZoom:false});if(this.overlayBubble){var curOverlays=this._map.getAllOverlays();if(curOverlays&&curOverlays.length>0){for(var _i=0,curOverlays_2=curOverlays;_i<curOverlays_2.length;_i++){var item=curOverlays_2[_i];if(item.className==="Overlay.Polygon"||item.className==="Overlay.Circle"||item.className==="Overlay.Rectangle"){var IsRange=item.contains(e.lnglat);if(IsRange){return}}}}}if(!this.polylineTemp){var options={path:[e["lnglat"],e["lnglat"]],strokeColor:"#1791fc",strokeOpacity:.8,strokeWeight:2,strokeStyle:"solid",strokeDasharray:[10,5],zIndex:10,extData:{},bubble:true};var polylineOpts=assign(options,opts);this.polylineTemp={path:[]};this.polylineTemp["path"].push(e.lnglat);this.polylineTemp.obj=new AMap.Polyline(polylineOpts);this._map.add(this.polylineTemp.obj);this._map.on("mousemove",this._drawLine,this)}else{var newPoint=[e["lnglat"].lng,e["lnglat"].lat];var pathArr=this.polylineTemp.obj["getPath"]();pathArr.push(newPoint);this.polylineTemp.obj["setPath"](pathArr)}this.overlays.polyline.push(this.polylineTemp.obj)};MouseTool.prototype._drawLine=function(e){if(this.polylineTemp&&this.polylineTemp.obj){var newPoint=[e["lnglat"].lng,e["lnglat"].lat];var pathArr=this.polylineTemp.obj["getPath"]();pathArr.pop();pathArr.push(newPoint);this.polylineTemp.obj["setPath"](pathArr)}};MouseTool.prototype._endPolylineLine=function(type){var pathArr=this.polylineTemp.obj["getPath"]();if(type&&type==="db"){pathArr.pop()}this.polylineTemp.obj["setPath"](pathArr);this.emit("draw",{obj:this.polylineTemp.obj});this.polylineTemp=null;this._map["setStatus"]({doubleClickZoom:this.mapDoubleClickZoom});this._map.off("mousemove",this._drawLine,this)};MouseTool.prototype._delPolylineLinePoint=function(){var pathArr=this.polylineTemp.obj["getPath"]();pathArr.pop();this.polylineTemp.obj["setPath"](pathArr);this._endPolylineLine()};MouseTool.prototype._renderMarker=function(opts,e){var markerOpts=assign({position:e.lnglat},opts);var marker=new AMap.Marker(markerOpts);this.overlays.marker.push(marker);if(this.overlayBubble){var curOverlays=this._map.getAllOverlays();if(curOverlays&&curOverlays.length>0){for(var _i=0,curOverlays_3=curOverlays;_i<curOverlays_3.length;_i++){var item=curOverlays_3[_i];if(item.className==="Overlay.Polygon"||item.className==="Overlay.Circle"||item.className==="Overlay.Rectangle"){var IsRange=item.contains(e.lnglat);if(IsRange){return}}}}}this._map.add(marker);this.emit("draw",{obj:marker})};MouseTool.prototype._createCircle=function(opts,e){if(this.overlayData){return null}if(this.overlayBubble){var curOverlays=this._map.getAllOverlays();if(curOverlays&&curOverlays.length>0){for(var _i=0,curOverlays_4=curOverlays;_i<curOverlays_4.length;_i++){var item=curOverlays_4[_i];if(item.className==="Overlay.Polygon"||item.className==="Overlay.Circle"||item.className==="Overlay.Rectangle"){var IsRange=item.contains(e.lnglat);if(IsRange){return}}}}}this._map.on("mousemove",this._updateCircle,this);var options={center:e.lnglat,strokeColor:"#1791fc",strokeOpacity:.8,strokeWeight:2,fillColor:"#1791fc",fillOpacity:.35,strokeStyle:"solid",strokeDasharray:[10,5],zIndex:10,bubble:true,radius:0};var circleOpts=assign(options,opts);this.mapDragEnable=this._map["getStatus"]()["dragEnable"];this._map["setStatus"]({dragEnable:false});var newCircle=new AMap.Circle(circleOpts);this._map.add(newCircle);this.overlayData={obj:newCircle,center:e}};MouseTool.prototype._doneCircle=function(){if(!this.overlayData){return}this.overlays.circle.push(this.overlayData.obj);this.emit("draw",{obj:this.overlayData.obj});this.overlayData=null;this._map.off("mousemove",this._updateCircle,this);this._map["setStatus"]({dragEnable:this.mapDragEnable})};MouseTool.prototype._updateCircle=function(e){if(this.overlayData){var optRadius=AMap.GeometryUtil.distance(this.overlayData.center.lnglat,e.lnglat).toFixed(3);this.overlayData.obj.setRadius(optRadius);this.emit("drawing",{obj:this.overlayData.obj})}};MouseTool.prototype._createRectangle=function(opts,e){if(this.overlayData){return null}if(this.overlayBubble){var curOverlays=this._map.getAllOverlays();if(curOverlays&&curOverlays.length>0){for(var _i=0,curOverlays_5=curOverlays;_i<curOverlays_5.length;_i++){var item=curOverlays_5[_i];if(item.className==="Overlay.Polygon"||item.className==="Overlay.Circle"||item.className==="Overlay.Rectangle"){var IsRange=item.contains(e.lnglat);if(IsRange){return}}}}}this._map.on("mousemove",this._updateRectangle,this);var options={bounds:new AMap.Bounds(e.lnglat,e.lnglat),strokeColor:"#1791fc",strokeOpacity:.8,strokeWeight:2,fillColor:"#1791fc",fillOpacity:.35,strokeStyle:"solid",strokeDasharray:[10,5],zIndex:10,bubble:true};var rectangleOpts=assign(options,opts);var newRectangle=new AMap.Rectangle(rectangleOpts);this.mapDragEnable=this._map["getStatus"]()["dragEnable"];this._map["setStatus"]({dragEnable:false});this._map.add(newRectangle);this.overlayData={obj:newRectangle,center:e}};MouseTool.prototype._doneRectangle=function(){if(!this.overlayData){return}this.overlays.rectangle.push(this.overlayData.obj);this._map["setStatus"]({dragEnable:this.mapDragEnable});this.emit("draw",{obj:this.overlayData.obj});this.overlayData=null;this._map.off("mousemove",this._updateRectangle,this)};MouseTool.prototype._updateRectangle=function(e){if(this.overlayData){var optBounds=new AMap.Bounds(this.overlayData.center.lnglat,e.lnglat);this.overlayData.obj.setBounds(optBounds);this.emit("drawing",{obj:this.overlayData.obj})}};MouseTool.prototype._doneZoomIn=function(){this._map.setFitView([this.overlayData.obj]);this._map.remove(this.overlayData.obj);this.overlayData=null;this._map.off("mousemove",this._updateCircle,this)};MouseTool.prototype._doneZoomOut=function(){var center=this.overlayData.obj.getCenter();var zoom=this._map.getZoom();this._map.setZoomAndCenter(zoom-1,[center.lng,center.lat]);this._map.remove(this.overlayData.obj);this.overlayData=null;this._map.off("mousemove",this._updateCircle,this)};MouseTool.prototype._onStart=function(){this._map["setStatus"]({allBubble:true});if(this.ruler){this.ruler.turnOff()}this._unbind()};MouseTool.prototype._onEnd=function(ifClear){this._unbind();this.polylineTemp=null;this.polygonTemp=null;if(this.MeasureAreaTemp){if(ifClear&&this.MeasureAreaTemp.obj){this._map.remove(this.MeasureAreaTemp.obj)}this._map.off("mousemove",this._drawMeasureArea,this);this.MeasureAreaTemp=null}if(this.ruler){this.ruler.turnOff(ifClear)}this._map["setStatus"]({allBubble:false})};return MouseTool}(AMap.Event);AMap["MouseTool"]=MouseTool})(); ');
_jsload_('AMap.PolyEditor', '!function(AMap){"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function getNearestPoint(pt,pts){var nearest=null;pts.forEach(function(p,i){var lngDiff=p[0]-pt[0];var latDiff=p[1]-pt[1];var l=Math.sqrt(Math.pow(lngDiff,2)+Math.pow(latDiff,2));var cur={distance:l,point:p,index:i};if(nearest){if(nearest.distance>l){nearest=cur}}else{nearest=cur}});return nearest}function getPixelDistance(_map,_ref){var _ref2=_slicedToArray(_ref,2),p1=_ref2[0],p2=_ref2[1];var toPixel=function toPixel(p){var lnglat=new AMap.LngLat(p[0],p[1]);return _map.lngLatToContainer(lnglat)};var pixel1=toPixel(p1);var pixel2=toPixel(p2);var xDiff=pixel1.x-pixel2.x;var yDiff=pixel1.y-pixel2.y;var l=Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2));return l}function e2ll(e){if(e&&e.lnglat){return e.lnglat}return null}function getPolygonOptions(opt){return{path:opt["path"],map:opt["map"],strokeColor:opt["strokeColor"]||"#1791fc",strokeOpacity:opt["strokeOpacity"]||.8,strokeWeight:opt["strokeWeight"]||2,fillColor:opt["fillColor"]||"#1791fc",fillOpacity:opt["fillOpacity"]||.35,strokeStyle:opt["strokeStyle"]||"solid",strokeDasharray:opt["strokeDasharray"]||[10,5],zIndex:opt["zIndex"]||10,extData:opt["extData"]||{},bubble:!!opt["bubble"]}}function createPolygon(path,opt){var _opt=AMap.extend({},getPolygonOptions(opt),{path:path});var p=new AMap.Polygon(_opt);if(_opt["map"]){_opt["map"].add(p)}return p}var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var helpers=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.earthRadius=6371008.8;exports.factors={centimeters:exports.earthRadius*100,centimetres:exports.earthRadius*100,degrees:exports.earthRadius/111325,feet:exports.earthRadius*3.28084,inches:exports.earthRadius*39.37,kilometers:exports.earthRadius/1e3,kilometres:exports.earthRadius/1e3,meters:exports.earthRadius,metres:exports.earthRadius,miles:exports.earthRadius/1609.344,millimeters:exports.earthRadius*1e3,millimetres:exports.earthRadius*1e3,nauticalmiles:exports.earthRadius/1852,radians:1,yards:exports.earthRadius/1.0936};exports.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/exports.earthRadius,yards:1/1.0936};exports.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function feature(geom,properties,options){if(options===void 0){options={}}var feat={type:"Feature"};if(options.id===0||options.id){feat.id=options.id}if(options.bbox){feat.bbox=options.bbox}feat.properties=properties||{};feat.geometry=geom;return feat}exports.feature=feature;function geometry(type,coordinates,options){switch(type){case"Point":return point(coordinates).geometry;case"LineString":return lineString(coordinates).geometry;case"Polygon":return polygon(coordinates).geometry;case"MultiPoint":return multiPoint(coordinates).geometry;case"MultiLineString":return multiLineString(coordinates).geometry;case"MultiPolygon":return multiPolygon(coordinates).geometry;default:throw new Error(type+" is invalid")}}exports.geometry=geometry;function point(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"Point",coordinates:coordinates};return feature(geom,properties,options)}exports.point=point;function points(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return point(coords,properties)}),options)}exports.points=points;function polygon(coordinates,properties,options){if(options===void 0){options={}}for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var ring=coordinates_1[_i];if(ring.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var j=0;j<ring[ring.length-1].length;j++){if(ring[ring.length-1][j]!==ring[0][j]){throw new Error("First and last Position are not equivalent.")}}}var geom={type:"Polygon",coordinates:coordinates};return feature(geom,properties,options)}exports.polygon=polygon;function polygons(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return polygon(coords,properties)}),options)}exports.polygons=polygons;function lineString(coordinates,properties,options){if(options===void 0){options={}}if(coordinates.length<2){throw new Error("coordinates must be an array of two or more positions")}var geom={type:"LineString",coordinates:coordinates};return feature(geom,properties,options)}exports.lineString=lineString;function lineStrings(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return lineString(coords,properties)}),options)}exports.lineStrings=lineStrings;function featureCollection(features,options){if(options===void 0){options={}}var fc={type:"FeatureCollection"};if(options.id){fc.id=options.id}if(options.bbox){fc.bbox=options.bbox}fc.features=features;return fc}exports.featureCollection=featureCollection;function multiLineString(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"MultiLineString",coordinates:coordinates};return feature(geom,properties,options)}exports.multiLineString=multiLineString;function multiPoint(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"MultiPoint",coordinates:coordinates};return feature(geom,properties,options)}exports.multiPoint=multiPoint;function multiPolygon(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"MultiPolygon",coordinates:coordinates};return feature(geom,properties,options)}exports.multiPolygon=multiPolygon;function geometryCollection(geometries,properties,options){if(options===void 0){options={}}var geom={type:"GeometryCollection",geometries:geometries};return feature(geom,properties,options)}exports.geometryCollection=geometryCollection;function round(num,precision){if(precision===void 0){precision=0}if(precision&&!(precision>=0)){throw new Error("precision must be a positive number")}var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier}exports.round=round;function radiansToLength(radians,units){if(units===void 0){units="kilometers"}var factor=exports.factors[units];if(!factor){throw new Error(units+" units is invalid")}return radians*factor}exports.radiansToLength=radiansToLength;function lengthToRadians(distance,units){if(units===void 0){units="kilometers"}var factor=exports.factors[units];if(!factor){throw new Error(units+" units is invalid")}return distance/factor}exports.lengthToRadians=lengthToRadians;function lengthToDegrees(distance,units){return radiansToDegrees(lengthToRadians(distance,units))}exports.lengthToDegrees=lengthToDegrees;function bearingToAzimuth(bearing){var angle=bearing%360;if(angle<0){angle+=360}return angle}exports.bearingToAzimuth=bearingToAzimuth;function radiansToDegrees(radians){var degrees=radians%(2*Math.PI);return degrees*180/Math.PI}exports.radiansToDegrees=radiansToDegrees;function degreesToRadians(degrees){var radians=degrees%360;return radians*Math.PI/180}exports.degreesToRadians=degreesToRadians;function convertLength(length,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit="kilometers"}if(finalUnit===void 0){finalUnit="kilometers"}if(!(length>=0)){throw new Error("length must be a positive number")}return radiansToLength(lengthToRadians(length,originalUnit),finalUnit)}exports.convertLength=convertLength;function convertArea(area,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit="meters"}if(finalUnit===void 0){finalUnit="kilometers"}if(!(area>=0)){throw new Error("area must be a positive number")}var startFactor=exports.areaFactors[originalUnit];if(!startFactor){throw new Error("invalid original units")}var finalFactor=exports.areaFactors[finalUnit];if(!finalFactor){throw new Error("invalid final units")}return area/startFactor*finalFactor}exports.convertArea=convertArea;function isNumber(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)&&!/^\\s*$/.test(num)}exports.isNumber=isNumber;function isObject(input){return!!input&&input.constructor===Object}exports.isObject=isObject;function validateBBox(bbox){if(!bbox){throw new Error("bbox is required")}if(!Array.isArray(bbox)){throw new Error("bbox must be an Array")}if(bbox.length!==4&&bbox.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}bbox.forEach(function(num){if(!isNumber(num)){throw new Error("bbox must only contain numbers")}})}exports.validateBBox=validateBBox;function validateId(id){if(!id){throw new Error("id is required")}if(["string","number"].indexOf(_typeof(id))===-1){throw new Error("id must be a number or a string")}}exports.validateId=validateId;function radians2degrees(){throw new Error("method has been renamed to `radiansToDegrees`")}exports.radians2degrees=radians2degrees;function degrees2radians(){throw new Error("method has been renamed to `degreesToRadians`")}exports.degrees2radians=degrees2radians;function distanceToDegrees(){throw new Error("method has been renamed to `lengthToDegrees`")}exports.distanceToDegrees=distanceToDegrees;function distanceToRadians(){throw new Error("method has been renamed to `lengthToRadians`")}exports.distanceToRadians=distanceToRadians;function radiansToDistance(){throw new Error("method has been renamed to `radiansToLength`")}exports.radiansToDistance=radiansToDistance;function bearingToAngle(){throw new Error("method has been renamed to `bearingToAzimuth`")}exports.bearingToAngle=bearingToAngle;function convertDistance(){throw new Error("method has been renamed to `convertLength`")}exports.convertDistance=convertDistance});unwrapExports(helpers);var helpers_1=helpers.earthRadius;var helpers_2=helpers.factors;var helpers_3=helpers.unitsFactors;var helpers_4=helpers.areaFactors;var helpers_5=helpers.feature;var helpers_6=helpers.geometry;var helpers_7=helpers.point;var helpers_8=helpers.points;var helpers_9=helpers.polygon;var helpers_10=helpers.polygons;var helpers_11=helpers.lineString;var helpers_12=helpers.lineStrings;var helpers_13=helpers.featureCollection;var helpers_14=helpers.multiLineString;var helpers_15=helpers.multiPoint;var helpers_16=helpers.multiPolygon;var helpers_17=helpers.geometryCollection;var helpers_18=helpers.round;var helpers_19=helpers.radiansToLength;var helpers_20=helpers.lengthToRadians;var helpers_21=helpers.lengthToDegrees;var helpers_22=helpers.bearingToAzimuth;var helpers_23=helpers.radiansToDegrees;var helpers_24=helpers.degreesToRadians;var helpers_25=helpers.convertLength;var helpers_26=helpers.convertArea;var helpers_27=helpers.isNumber;var helpers_28=helpers.isObject;var helpers_29=helpers.validateBBox;var helpers_30=helpers.validateId;var helpers_31=helpers.radians2degrees;var helpers_32=helpers.degrees2radians;var helpers_33=helpers.distanceToDegrees;var helpers_34=helpers.distanceToRadians;var helpers_35=helpers.radiansToDistance;var helpers_36=helpers.bearingToAngle;var helpers_37=helpers.convertDistance;var invariant=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function getCoord(coord){if(!coord){throw new Error("coord is required")}if(!Array.isArray(coord)){if(coord.type==="Feature"&&coord.geometry!==null&&coord.geometry.type==="Point"){return coord.geometry.coordinates}if(coord.type==="Point"){return coord.coordinates}}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1])){return coord}throw new Error("coord must be GeoJSON Point or an Array of numbers")}exports.getCoord=getCoord;function getCoords(coords){if(Array.isArray(coords)){return coords}if(coords.type==="Feature"){if(coords.geometry!==null){return coords.geometry.coordinates}}else{if(coords.coordinates){return coords.coordinates}}throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}exports.getCoords=getCoords;function containsNumber(coordinates){if(coordinates.length>1&&helpers.isNumber(coordinates[0])&&helpers.isNumber(coordinates[1])){return true}if(Array.isArray(coordinates[0])&&coordinates[0].length){return containsNumber(coordinates[0])}throw new Error("coordinates must only contain numbers")}exports.containsNumber=containsNumber;function geojsonType(value,type,name){if(!type||!name){throw new Error("type and name required")}if(!value||value.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+value.type)}}exports.geojsonType=geojsonType;function featureOf(feature,type,name){if(!feature){throw new Error("No feature passed")}if(!name){throw new Error(".featureOf() requires a name")}if(!feature||feature.type!=="Feature"||!feature.geometry){throw new Error("Invalid input to "+name+", Feature with geometry required")}if(!feature.geometry||feature.geometry.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}}exports.featureOf=featureOf;function collectionOf(featureCollection,type,name){if(!featureCollection){throw new Error("No featureCollection passed")}if(!name){throw new Error(".collectionOf() requires a name")}if(!featureCollection||featureCollection.type!=="FeatureCollection"){throw new Error("Invalid input to "+name+", FeatureCollection required")}for(var _i=0,_a=featureCollection.features;_i<_a.length;_i++){var feature=_a[_i];if(!feature||feature.type!=="Feature"||!feature.geometry){throw new Error("Invalid input to "+name+", Feature with geometry required")}if(!feature.geometry||feature.geometry.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}}}exports.collectionOf=collectionOf;function getGeom(geojson){if(geojson.type==="Feature"){return geojson.geometry}return geojson}exports.getGeom=getGeom;function getType(geojson,name){if(geojson.type==="FeatureCollection"){return"FeatureCollection"}if(geojson.type==="GeometryCollection"){return"GeometryCollection"}if(geojson.type==="Feature"&&geojson.geometry!==null){return geojson.geometry.type}return geojson.type}exports.getType=getType});unwrapExports(invariant);var invariant_1=invariant.getCoord;var invariant_2=invariant.getCoords;var invariant_3=invariant.containsNumber;var invariant_4=invariant.geojsonType;var invariant_5=invariant.featureOf;var invariant_6=invariant.collectionOf;var invariant_7=invariant.getGeom;var invariant_8=invariant.getType;var bearing_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function bearing(start,end,options){if(options===void 0){options={}}if(options.final===true){return calculateFinalBearing(start,end)}var coordinates1=invariant.getCoord(start);var coordinates2=invariant.getCoord(end);var lon1=helpers.degreesToRadians(coordinates1[0]);var lon2=helpers.degreesToRadians(coordinates2[0]);var lat1=helpers.degreesToRadians(coordinates1[1]);var lat2=helpers.degreesToRadians(coordinates2[1]);var a=Math.sin(lon2-lon1)*Math.cos(lat2);var b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);return helpers.radiansToDegrees(Math.atan2(a,b))}function calculateFinalBearing(start,end){var bear=bearing(end,start);bear=(bear+180)%360;return bear}exports.default=bearing});unwrapExports(bearing_1);var distance_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function distance(from,to,options){if(options===void 0){options={}}var coordinates1=invariant.getCoord(from);var coordinates2=invariant.getCoord(to);var dLat=helpers.degreesToRadians(coordinates2[1]-coordinates1[1]);var dLon=helpers.degreesToRadians(coordinates2[0]-coordinates1[0]);var lat1=helpers.degreesToRadians(coordinates1[1]);var lat2=helpers.degreesToRadians(coordinates2[1]);var a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return helpers.radiansToLength(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}exports.default=distance});unwrapExports(distance_1);var destination_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function destination(origin,distance,bearing,options){if(options===void 0){options={}}var coordinates1=invariant.getCoord(origin);var longitude1=helpers.degreesToRadians(coordinates1[0]);var latitude1=helpers.degreesToRadians(coordinates1[1]);var bearingRad=helpers.degreesToRadians(bearing);var radians=helpers.lengthToRadians(distance,options.units);var latitude2=Math.asin(Math.sin(latitude1)*Math.cos(radians)+Math.cos(latitude1)*Math.sin(radians)*Math.cos(bearingRad));var longitude2=longitude1+Math.atan2(Math.sin(bearingRad)*Math.sin(radians)*Math.cos(latitude1),Math.cos(radians)-Math.sin(latitude1)*Math.sin(latitude2));var lng=helpers.radiansToDegrees(longitude2);var lat=helpers.radiansToDegrees(latitude2);return helpers.point([lng,lat],options.properties)}exports.default=destination});unwrapExports(destination_1);var meta=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function coordEach(geojson,callback,excludeWrapCoord){if(geojson===null)return;var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection,type=geojson.type,isFeatureCollection=type==="FeatureCollection",isFeature=type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(var featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0;var geometryIndex=0;geometry=isGeometryCollection?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection;if(geometry===null)continue;coords=geometry.coordinates;var geomType=geometry.type;wrapShrink=excludeWrapCoord&&(geomType==="Polygon"||geomType==="MultiPolygon")?1:0;switch(geomType){case null:break;case"Point":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;multiFeatureIndex++;break;case"LineString":case"MultiPoint":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;if(geomType==="MultiPoint")multiFeatureIndex++}if(geomType==="LineString")multiFeatureIndex++;break;case"Polygon":case"MultiLineString":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}if(geomType==="MultiLineString")multiFeatureIndex++;if(geomType==="Polygon")geometryIndex++}if(geomType==="Polygon")multiFeatureIndex++;break;case"MultiPolygon":for(j=0;j<coords.length;j++){geometryIndex=0;for(k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++){if(coordEach(geometry.geometries[j],callback,excludeWrapCoord)===false)return false}break;default:throw new Error("Unknown Geometry Type")}}}}function coordReduce(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;coordEach(geojson,function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){if(coordIndex===0&&initialValue===undefined)previousValue=currentCoord;else previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)},excludeWrapCoord);return previousValue}function propEach(geojson,callback){var i;switch(geojson.type){case"FeatureCollection":for(i=0;i<geojson.features.length;i++){if(callback(geojson.features[i].properties,i)===false)break}break;case"Feature":callback(geojson.properties,0);break}}function propReduce(geojson,callback,initialValue){var previousValue=initialValue;propEach(geojson,function(currentProperties,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentProperties;else previousValue=callback(previousValue,currentProperties,featureIndex)});return previousValue}function featureEach(geojson,callback){if(geojson.type==="Feature"){callback(geojson,0)}else if(geojson.type==="FeatureCollection"){for(var i=0;i<geojson.features.length;i++){if(callback(geojson.features[i],i)===false)break}}}function featureReduce(geojson,callback,initialValue){var previousValue=initialValue;featureEach(geojson,function(currentFeature,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex)});return previousValue}function coordAll(geojson){var coords=[];coordEach(geojson,function(coord){coords.push(coord)});return coords}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type==="FeatureCollection",isFeature=geojson.type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson;featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{};featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:undefined;featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:undefined;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(g=0;g<stopG;g++){geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection;if(geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===false)return false;continue}switch(geometry.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===false)return false;break}case"GeometryCollection":{for(j=0;j<geometry.geometries.length;j++){if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===false)return false}break}default:throw new Error("Unknown Geometry Type")}}featureIndex++}}function geomReduce(geojson,callback,initialValue){var previousValue=initialValue;geomEach(geojson,function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){if(featureIndex===0&&initialValue===undefined)previousValue=currentGeometry;else previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)});return previousValue}function flattenEach(geojson,callback){geomEach(geojson,function(geometry,featureIndex,properties,bbox,id){var type=geometry===null?null:geometry.type;switch(type){case null:case"Point":case"LineString":case"Polygon":if(callback(helpers.feature(geometry,properties,{bbox:bbox,id:id}),featureIndex,0)===false)return false;return}var geomType;switch(type){case"MultiPoint":geomType="Point";break;case"MultiLineString":geomType="LineString";break;case"MultiPolygon":geomType="Polygon";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate=geometry.coordinates[multiFeatureIndex];var geom={type:geomType,coordinates:coordinate};if(callback(helpers.feature(geom,properties),featureIndex,multiFeatureIndex)===false)return false}})}function flattenReduce(geojson,callback,initialValue){var previousValue=initialValue;flattenEach(geojson,function(currentFeature,featureIndex,multiFeatureIndex){if(featureIndex===0&&multiFeatureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)});return previousValue}function segmentEach(geojson,callback){flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){var segmentIndex=0;if(!feature.geometry)return;var type=feature.geometry.type;if(type==="Point"||type==="MultiPoint")return;var previousCoords;var previousFeatureIndex=0;var previousMultiIndex=0;var prevGeomIndex=0;if(coordEach(feature,function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(previousCoords===undefined||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex){previousCoords=currentCoord;previousFeatureIndex=featureIndex;previousMultiIndex=multiPartIndexCoord;prevGeomIndex=geometryIndex;segmentIndex=0;return}var currentSegment=helpers.lineString([previousCoords,currentCoord],feature.properties);if(callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex)===false)return false;segmentIndex++;previousCoords=currentCoord})===false)return false})}function segmentReduce(geojson,callback,initialValue){var previousValue=initialValue;var started=false;segmentEach(geojson,function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){if(started===false&&initialValue===undefined)previousValue=currentSegment;else previousValue=callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex);started=true});return previousValue}function lineEach(geojson,callback){if(!geojson)throw new Error("geojson is required");flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){if(feature.geometry===null)return;var type=feature.geometry.type;var coords=feature.geometry.coordinates;switch(type){case"LineString":if(callback(feature,featureIndex,multiFeatureIndex,0,0)===false)return false;break;case"Polygon":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++){if(callback(helpers.lineString(coords[geometryIndex],feature.properties),featureIndex,multiFeatureIndex,geometryIndex)===false)return false}break}})}function lineReduce(geojson,callback,initialValue){var previousValue=initialValue;lineEach(geojson,function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentLine;else previousValue=callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)});return previousValue}function findSegment(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var segmentIndex=options.segmentIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case"FeatureCollection":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties;geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":case"MultiPoint":return null;case"LineString":if(segmentIndex<0)segmentIndex=coords.length+segmentIndex-1;return helpers.lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case"Polygon":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[geometryIndex].length+segmentIndex-1;return helpers.lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case"MultiLineString":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case"MultiPolygon":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error("geojson is invalid")}function findPoint(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var coordIndex=options.coordIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case"FeatureCollection":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties;geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":return helpers.point(coords,properties,options);case"MultiPoint":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;return helpers.point(coords[multiFeatureIndex],properties,options);case"LineString":if(coordIndex<0)coordIndex=coords.length+coordIndex;return helpers.point(coords[coordIndex],properties,options);case"Polygon":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(coordIndex<0)coordIndex=coords[geometryIndex].length+coordIndex;return helpers.point(coords[geometryIndex][coordIndex],properties,options);case"MultiLineString":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex].length+coordIndex;return helpers.point(coords[multiFeatureIndex][coordIndex],properties,options);case"MultiPolygon":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex;return helpers.point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error("geojson is invalid")}exports.coordEach=coordEach;exports.coordReduce=coordReduce;exports.propEach=propEach;exports.propReduce=propReduce;exports.featureEach=featureEach;exports.featureReduce=featureReduce;exports.coordAll=coordAll;exports.geomEach=geomEach;exports.geomReduce=geomReduce;exports.flattenEach=flattenEach;exports.flattenReduce=flattenReduce;exports.segmentEach=segmentEach;exports.segmentReduce=segmentReduce;exports.lineEach=lineEach;exports.lineReduce=lineReduce;exports.findSegment=findSegment;exports.findPoint=findPoint});unwrapExports(meta);var meta_1=meta.coordEach;var meta_2=meta.coordReduce;var meta_3=meta.propEach;var meta_4=meta.propReduce;var meta_5=meta.featureEach;var meta_6=meta.featureReduce;var meta_7=meta.coordAll;var meta_8=meta.geomEach;var meta_9=meta.geomReduce;var meta_10=meta.flattenEach;var meta_11=meta.flattenReduce;var meta_12=meta.segmentEach;var meta_13=meta.segmentReduce;var meta_14=meta.lineEach;var meta_15=meta.lineReduce;var meta_16=meta.findSegment;var meta_17=meta.findPoint;var lineSegment_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function lineSegment(geojson){if(!geojson){throw new Error("geojson is required")}var results=[];meta.flattenEach(geojson,function(feature){lineSegmentFeature(feature,results)});return helpers.featureCollection(results)}function lineSegmentFeature(geojson,results){var coords=[];var geometry=geojson.geometry;if(geometry!==null){switch(geometry.type){case"Polygon":coords=invariant.getCoords(geometry);break;case"LineString":coords=[invariant.getCoords(geometry)]}coords.forEach(function(coord){var segments=createSegments(coord,geojson.properties);segments.forEach(function(segment){segment.id=results.length;results.push(segment)})})}}function createSegments(coords,properties){var segments=[];coords.reduce(function(previousCoords,currentCoords){var segment=helpers.lineString([previousCoords,currentCoords],properties);segment.bbox=bbox(previousCoords,currentCoords);segments.push(segment);return currentCoords});return segments}function bbox(coords1,coords2){var x1=coords1[0];var y1=coords1[1];var x2=coords2[0];var y2=coords2[1];var west=x1<x2?x1:x2;var south=y1<y2?y1:y2;var east=x1>x2?x1:x2;var north=y1>y2?y1:y2;return[west,south,east,north]}exports.default=lineSegment});unwrapExports(lineSegment_1);var quickselect=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){function quickselect(arr,k,left,right,compare){quickselectStep(arr,k,left||0,right||arr.length-1,compare||defaultCompare)}function quickselectStep(arr,k,left,right,compare){while(right>left){if(right-left>600){var n=right-left+1;var m=k-left+1;var z=Math.log(n);var s=.5*Math.exp(2*z/3);var sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var newLeft=Math.max(left,Math.floor(k-m*s/n+sd));var newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep(arr,k,newLeft,newRight,compare)}var t=arr[k];var i=left;var j=right;swap(arr,left,k);if(compare(arr[right],t)>0)swap(arr,left,right);while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0){i++}while(compare(arr[j],t)>0){j--}}if(compare(arr[left],t)===0)swap(arr,left,j);else{j++;swap(arr,j,right)}if(j<=k)left=j+1;if(k<=j)right=j-1}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}return quickselect})});var _rbush_2_0_2_rbush=rbush;var default_1=rbush;function rbush(maxEntries,format){if(!(this instanceof rbush))return new rbush(maxEntries,format);this._maxEntries=Math.max(4,maxEntries||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(format){this._initFormat(format)}this.clear()}rbush.prototype={all:function all(){return this._all(this.data,[])},search:function search(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node))return result;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf)result.push(child);else if(contains(bbox,childBBox))this._all(child,result);else nodesToSearch.push(child)}}node=nodesToSearch.pop()}return result},collides:function collides(bbox){var node=this.data,toBBox=this.toBBox;if(!intersects(bbox,node))return false;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return true;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return false},load:function load(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++){this.insert(data[i])}return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node}else if(this.data.height===node.height){this._splitRoot(this.data,node)}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode}this._insert(node,this.data.height-node.height-1,true)}return this},insert:function insert(item){if(item)this._insert(item,this.data.height-1);return this},clear:function clear(){this.data=createNode([]);return this},remove:function remove(item,equalsFn){if(!item)return this;var node=this.data,bbox=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(node.leaf){index=findItem(item,node.children,equalsFn);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this}}if(!goingUp&&!node.leaf&&contains(node,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0]}else if(parent){i++;node=parent.children[i];goingUp=false}else node=null}return this},toBBox:function toBBox(item){return item},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(data){this.data=data;return this},_all:function _all(node,result){var nodesToSearch=[];while(node){if(node.leaf)result.push.apply(result,node.children);else nodesToSearch.push.apply(nodesToSearch,node.children);node=nodesToSearch.pop()}return result},_build:function _build(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M){node=createNode(items.slice(left,right+1));calcBBox(node,this.toBBox);return node}if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1))}node=createNode([]);node.leaf=false;node.height=height;var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(items,left,right,N1,this.compareMinX);for(i=left;i<=right;i+=N1){right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(j=i;j<=right2;j+=N2){right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}calcBBox(node,this.toBBox);return node},_chooseSubtree:function _chooseSubtree(bbox,node,level,path){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){path.push(node);if(node.leaf||path.length-1===level)break;minArea=minEnlargement=Infinity;for(i=0,len=node.children.length;i<len;i++){child=node.children[i];area=bboxArea(child);enlargement=enlargedArea(bbox,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}node=targetNode||node.children[0]}return node},_insert:function _insert(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item:toBBox(item),insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--}else break}this._adjustParentBBoxes(bbox,insertPath,level)},_split:function _split(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M);var newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height;newNode.leaf=node.leaf;calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level)insertPath[level-1].children.push(newNode);else this._splitRoot(node,newNode)},_splitRoot:function _splitRoot(node,newNode){this.data=createNode([node,newNode]);this.data.height=node.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(node,0,i,this.toBBox);bbox2=distBBox(node,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}return index},_chooseSplitAxis:function _chooseSplitAxis(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin)node.children.sort(compareMinX)},_allDistMargin:function _allDistMargin(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(leftBBox)}for(i=M-m-1;i>=m;i--){child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(rightBBox)}return margin},_adjustParentBBoxes:function _adjustParentBBoxes(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i],bbox)}},_condense:function _condense(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1)}else this.clear()}else calcBBox(path[i],this.toBBox)}},_initFormat:function _initFormat(format){var compareArr=["return a"," - b",";"];this.compareMinX=new Function("a","b",compareArr.join(format[0]));this.compareMinY=new Function("a","b",compareArr.join(format[1]));this.toBBox=new Function("a","return {minX: a"+format[0]+", minY: a"+format[1]+", maxX: a"+format[2]+", maxY: a"+format[3]+"};")}};function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++){if(equalsFn(item,items[i]))return i}return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){if(!destNode)destNode=createNode(null);destNode.minX=Infinity;destNode.minY=Infinity;destNode.maxX=-Infinity;destNode.maxY=-Infinity;for(var i=k,child;i<p;i++){child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){var minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children:children,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(arr,left,right,n,compare){var stack=[left,right],mid;while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n)continue;mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare);stack.push(left,mid,mid,right)}}_rbush_2_0_2_rbush.default=default_1;var bbox_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function bbox(geojson){var result=[Infinity,Infinity,-Infinity,-Infinity];meta.coordEach(geojson,function(coord){if(result[0]>coord[0]){result[0]=coord[0]}if(result[1]>coord[1]){result[1]=coord[1]}if(result[2]<coord[0]){result[2]=coord[0]}if(result[3]<coord[1]){result[3]=coord[1]}});return result}exports.default=bbox});unwrapExports(bbox_1);var turfBBox=bbox_1.default;var featureEach=meta.featureEach;var coordEach=meta.coordEach;var polygon=helpers.polygon;var featureCollection=helpers.featureCollection;function geojsonRbush(maxEntries){var tree=_rbush_2_0_2_rbush(maxEntries);tree.insert=function(feature){if(feature.type!=="Feature")throw new Error("invalid feature");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return _rbush_2_0_2_rbush.prototype.insert.call(this,feature)};tree.load=function(features){var load=[];if(Array.isArray(features)){features.forEach(function(feature){if(feature.type!=="Feature")throw new Error("invalid features");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}else{featureEach(features,function(feature){if(feature.type!=="Feature")throw new Error("invalid features");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}return _rbush_2_0_2_rbush.prototype.load.call(this,load)};tree.remove=function(feature,equals){if(feature.type!=="Feature")throw new Error("invalid feature");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return _rbush_2_0_2_rbush.prototype.remove.call(this,feature,equals)};tree.clear=function(){return _rbush_2_0_2_rbush.prototype.clear.call(this)};tree.search=function(geojson){var features=_rbush_2_0_2_rbush.prototype.search.call(this,this.toBBox(geojson));return featureCollection(features)};tree.collides=function(geojson){return _rbush_2_0_2_rbush.prototype.collides.call(this,this.toBBox(geojson))};tree.all=function(){var features=_rbush_2_0_2_rbush.prototype.all.call(this);return featureCollection(features)};tree.toJSON=function(){return _rbush_2_0_2_rbush.prototype.toJSON.call(this)};tree.fromJSON=function(json){return _rbush_2_0_2_rbush.prototype.fromJSON.call(this,json)};tree.toBBox=function(geojson){var bbox;if(geojson.bbox)bbox=geojson.bbox;else if(Array.isArray(geojson)&&geojson.length===4)bbox=geojson;else if(Array.isArray(geojson)&&geojson.length===6)bbox=[geojson[0],geojson[1],geojson[3],geojson[4]];else if(geojson.type==="Feature")bbox=turfBBox(geojson);else if(geojson.type==="FeatureCollection")bbox=turfBBox(geojson);else throw new Error("invalid geojson");return{minX:bbox[0],minY:bbox[1],maxX:bbox[2],maxY:bbox[3]}};return tree}var _geojsonRbush_3_1_2_geojsonRbush=geojsonRbush;var default_1$1=geojsonRbush;_geojsonRbush_3_1_2_geojsonRbush.default=default_1$1;var lineIntersect_1=createCommonjsModule(function(module,exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var line_segment_1=__importDefault(lineSegment_1);var geojson_rbush_1=__importDefault(_geojsonRbush_3_1_2_geojsonRbush);function lineIntersect(line1,line2){var unique={};var results=[];if(line1.type==="LineString"){line1=helpers.feature(line1)}if(line2.type==="LineString"){line2=helpers.feature(line2)}if(line1.type==="Feature"&&line2.type==="Feature"&&line1.geometry!==null&&line2.geometry!==null&&line1.geometry.type==="LineString"&&line2.geometry.type==="LineString"&&line1.geometry.coordinates.length===2&&line2.geometry.coordinates.length===2){var intersect=intersects(line1,line2);if(intersect){results.push(intersect)}return helpers.featureCollection(results)}var tree=geojson_rbush_1.default();tree.load(line_segment_1.default(line2));meta.featureEach(line_segment_1.default(line1),function(segment){meta.featureEach(tree.search(segment),function(match){var intersect=intersects(segment,match);if(intersect){var key=invariant.getCoords(intersect).join(",");if(!unique[key]){unique[key]=true;results.push(intersect)}}})});return helpers.featureCollection(results)}function intersects(line1,line2){var coords1=invariant.getCoords(line1);var coords2=invariant.getCoords(line2);if(coords1.length!==2){throw new Error("<intersects> line1 must only contain 2 coordinates")}if(coords2.length!==2){throw new Error("<intersects> line2 must only contain 2 coordinates")}var x1=coords1[0][0];var y1=coords1[0][1];var x2=coords1[1][0];var y2=coords1[1][1];var x3=coords2[0][0];var y3=coords2[0][1];var x4=coords2[1][0];var y4=coords2[1][1];var denom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1);var numeA=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3);var numeB=(x2-x1)*(y1-y3)-(y2-y1)*(x1-x3);if(denom===0){if(numeA===0&&numeB===0){return null}return null}var uA=numeA/denom;var uB=numeB/denom;if(uA>=0&&uA<=1&&uB>=0&&uB<=1){var x=x1+uA*(x2-x1);var y=y1+uA*(y2-y1);return helpers.point([x,y])}return null}exports.default=lineIntersect});unwrapExports(lineIntersect_1);var nearestPointOnLine_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function nearestPointOnLine(lines,pt,options){if(options===void 0){options={}}var closestPt=helpers.point([Infinity,Infinity],{dist:Infinity});var length=0;meta.flattenEach(lines,function(line){var coords=invariant.getCoords(line);for(var i=0;i<coords.length-1;i++){var start=helpers.point(coords[i]);start.properties.dist=distance_1.default(pt,start,options);var stop_1=helpers.point(coords[i+1]);stop_1.properties.dist=distance_1.default(pt,stop_1,options);var sectionLength=distance_1.default(start,stop_1,options);var heightDistance=Math.max(start.properties.dist,stop_1.properties.dist);var direction=bearing_1.default(start,stop_1);var perpendicularPt1=destination_1.default(pt,heightDistance,direction+90,options);var perpendicularPt2=destination_1.default(pt,heightDistance,direction-90,options);var intersect=lineIntersect_1.default(helpers.lineString([perpendicularPt1.geometry.coordinates,perpendicularPt2.geometry.coordinates]),helpers.lineString([start.geometry.coordinates,stop_1.geometry.coordinates]));var intersectPt=null;if(intersect.features.length>0){intersectPt=intersect.features[0];intersectPt.properties.dist=distance_1.default(pt,intersectPt,options);intersectPt.properties.location=length+distance_1.default(start,intersectPt,options)}if(start.properties.dist<closestPt.properties.dist){closestPt=start;closestPt.properties.index=i;closestPt.properties.location=length}if(stop_1.properties.dist<closestPt.properties.dist){closestPt=stop_1;closestPt.properties.index=i+1;closestPt.properties.location=length+sectionLength}if(intersectPt&&intersectPt.properties.dist<closestPt.properties.dist){closestPt=intersectPt;closestPt.properties.index=i}length+=sectionLength}});return closestPt}exports.default=nearestPointOnLine});var nearestPointOnLine=unwrapExports(nearestPointOnLine_1);var freeGlobal=(typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var _Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag$1=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(value)?getRawTag(value):objectToString(value)}function isObjectLike(value){return value!=null&&_typeof(value)=="object"}var symbolTag="[object Symbol]";function isSymbol(value){return _typeof(value)=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray=Array.isArray;var INFINITY=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function isObject(value){var type=_typeof(value);return value!=null&&(type=="object"||type=="function")}function identity(value){return value}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var WeakMap=getNative(root,"WeakMap");function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=_typeof(value);length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function eq(value,other){return value===other||value!==value&&other!==other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var objectProto$3=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$3;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}var objectProto$4=Object.prototype;var hasOwnProperty$2=objectProto$4.hasOwnProperty;var propertyIsEnumerable=objectProto$4.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};function stubFalse(){return false}var freeExports=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$3.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$4.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=_typeof(value);if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty$5.call(data,key)?data[key]:undefined}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty$6.call(data,key)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[];this.size=0}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(value){var type=_typeof(value);return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;var reEscapeChar=/\\\\(\\\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)});return result});function toString(value){return value==null?"":baseToString(value)}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var INFINITY$1=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY$1?"-0":result}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray(){return[]}var objectProto$9=Object.prototype;var propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)})};function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(root,"DataView");var Promise=getNative(root,"Promise");var Set=getNative(root,"Set");var mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]";var dataViewTag$1="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag$1?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var Uint8Array=root.Uint8Array;var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED$2);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;var boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]";var arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]";var symbolProto$1=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag$2:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag$1:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+object,+other);case errorTag$1:return object.name==other.name&&object.message==other.message;case regexpTag$1:case stringTag$1:return object==other+"";case mapTag$2:var convert=mapToArray;case setTag$2:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$1;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$1;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}var COMPARE_PARTIAL_FLAG$2=1;var objectProto$a=Object.prototype;var hasOwnProperty$7=objectProto$a.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$2,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}var COMPARE_PARTIAL_FLAG$3=1;var argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]";var objectProto$b=Object.prototype;var hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),othTag=othIsArr?arrayTag$1:getTag$1(other);objTag=objTag==argsTag$2?objectTag$2:objTag;othTag=othTag==argsTag$2?objectTag$2:othTag;var objIsObj=objTag==objectTag$2,othIsObj=othTag==objectTag$2,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){var objIsWrapped=objIsObj&&hasOwnProperty$8.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty$8.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,customizer,stack):result)){return false}}}return true}function isStrictComparable(value){return value===value&&!isObject(value)}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseHasIn(object,key){return object!=null&&key in Object(object)}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(_typeof(value)=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}var baseEach=createBaseEach(baseForOwn);function castFunction(value){return typeof value=="function"?value:identity}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,castFunction(iteratee))}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee))}function _typeof$1(obj){if(typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!=="function"){throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!=="function"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!=="undefined"&&typeof Reflect.ownKeys==="function"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols==="function"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key==="constructor"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value==="function"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}function getMiddleLatLng(marker1,marker2){var p1=marker1.getCenter();var p2=marker2.getCenter();return p1.divideBy(2,false).add(p2.divideBy(2,false),false)}var callbacks=[];document.addEventListener("keydown",function(e){for(var i=0,len=callbacks.length;i<len;i++){var cb=callbacks[i];try{cb(e)}catch(error){console.log(error)}}});function onKeyDown(cb){if(callbacks.indexOf(cb)<0){callbacks.push(cb)}}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var isMobile=AMap.Browser.mobile;var amplify=1;var createOptions={zIndex:50,strokeColor:"#FF33FF",strokeOpacity:.2,strokeWeight:6,strokeStyle:"solid",bubble:false,fillColor:"#1791fc",fillOpacity:.4};var defaultOpt={createOptions:createOptions,adsorbPolygons:[],adsorb:true,editable:false,drawable:false,overlap:false,adsorbDistance:{line:10,point:15},editOptions:{fillOpacity:.3,cursor:"pointer",strokeWeight:4,strokeStyle:"solid",strokeColor:"#1791fc",strokeOpacity:.8}};var PolygonEditor=function(_AMap$Event){_inherits(PolygonEditor,_AMap$Event);function PolygonEditor(map,target){var _this;var opt=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolygonEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolygonEditor).call(this));_this.movePoint={};_this._editing=false;_this.className="PolygonEditor";_this.GRAPH_NAME="Polygon";_this.onAddPick=_this.onAddPick.bind(_assertThisInitialized(_this));_this.onAddingMouseMove=_this.onAddingMouseMove.bind(_assertThisInitialized(_this));_this.onBreakPointClick=_this.onBreakPointClick.bind(_assertThisInitialized(_this));_this.onEditMouseMove=_this.onEditMouseMove.bind(_assertThisInitialized(_this));_this.open=_this.open.bind(_assertThisInitialized(_this));_this.close=_this.close.bind(_assertThisInitialized(_this));_this.OPEN_STATUS=false;_this._opt=AMap.extend(defaultOpt,opt,{bubble:false});var _this$_opt=_this._opt,originPaths=_this$_opt.paths,adsorbPolygons=_this$_opt.adsorbPolygons,adsorb=_this$_opt.adsorb,editable=_this$_opt.editable,drawable=_this$_opt.drawable,adsorbDistance=_this$_opt.adsorbDistance,overlap=_this$_opt.overlap;if(!map)return _possibleConstructorReturn(_this);_this.map=map;_this.drawable=drawable;_this.editable=editable;_this.adsorb=adsorb;_this.adsorbDistance=adsorbDistance;_this.overlap=overlap;_this.adsorbPolygons=adsorbPolygons||[];_this.originPaths=originPaths;_this.editingVertexMarkerList=[];_this.editingMidTipMarkerList=[];_this.addingPoly=null;_this.showTipMarker=true;_this.editingPolyObj=target&&{poly:target}||null;_this.defaultMarkerOpt={zIndex:999998,bubble:false,cursor:"pointer",clickable:true,draggable:true,radius:isMobile?6:6,strokeColor:"#1791fc",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.2:1,fillColor:"white",fillOpacity:1,innerOverlay:true};_this.midControlPoint=AMap.extend({zIndex:999999,bubble:false,cursor:"pointer",clickable:true,radius:6,strokeColor:"white",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.6:1,fillColor:"#1791fc",fillOpacity:1},opt.midControlPoint||{});_this.controlPoint=AMap.extend({draggable:true,cursor:"pointer",bubble:false,zIndex:999999},opt.controlPoint||{});_this.movePoint=AMap.extend({bubble:true},opt.controlPoint||{});_this.defaultCursor=map.getDefaultCursor();onKeyDown(_this.onHandleKeydown.bind(_assertThisInitialized(_this)));return _this}_createClass(PolygonEditor,[{key:"onMapDblclick",value:function onMapDblclick(e){if(this.drawable){this.finishAddingPolygon(false,e)}}},{key:"onMapRightclick",value:function onMapRightclick(e){if(this.drawable){this.finishAddingPolygon(true,e)}}},{key:"innerOpen",value:function innerOpen(){var _this2=this;if(!this.OPEN_STATUS){this.OPEN_STATUS=true;var markerNames=["mvPickMarker"];if(this.showTipMarker){markerNames.forEach(function(name){_this2.mvPickMarker=_this2.createMarker(AMap.extend({center:new AMap.LngLat(0,0),bubble:true},_this2.movePoint));_this2["mvPickMarker"].hide();_this2.map.add(_this2[name])})}var opt=AMap.extend({},this.midControlPoint,{zIndex:999990,center:new AMap.LngLat(0,0),bubble:false});this.lineBreakMarker=this.createMarker(opt);this.lineBreakMarker.hide();this.map.add(this.lineBreakMarker);this._mapStatusDb=this.map["getStatus"]()["doubleClickZoom"]}}},{key:"onBreakPointClick",value:function onBreakPointClick(e){var _this$editingPolyObj=this.editingPolyObj,breakPoint=_this$editingPolyObj.breakPoint,poly=_this$editingPolyObj.poly,breakIndex=_this$editingPolyObj.breakIndex;var path=poly.getPath();var lnglat=breakPoint;if(!breakPoint.lng){lnglat=new AMap.LngLat(breakPoint[0],breakPoint[1])}var index=breakIndex+1;path.splice(index,0,lnglat);poly.setPath(path);this.emit("addnode",{target:this.getTarget(),pixel:e.pixel,lnglat:e.lnglat});this.highLightEditPoly()}},{key:"editPoly",value:function editPoly(){this.mvPickMarker.hide();this.lineBreakMarker.show();this.chosedPoint=null;var poly=this.editingPolyObj.poly;if(poly){var path=poly.getPath();this.editingPolyObj.origin_path=path;var opt=poly.getOptions();delete opt.path;delete opt.map;this.editingPolyObj.origin_options=opt;this.highLightEditPoly()}}},{key:"setLayerOptions",value:function setLayerOptions(layer,changeOpt){var opt=layer.getOptions();var _opt=AMap.extend({},opt,changeOpt);layer.setOptions(_opt)}},{key:"deleteChosedItem",value:function deleteChosedItem(e){if(this.editingPolyObj){if(this.chosedPoint){var _this$chosedPoint=this.chosedPoint,marker=_this$chosedPoint.marker,pointIndex=_this$chosedPoint.pointIndex,_point=_this$chosedPoint.point,path=_this$chosedPoint.path,poly=_this$chosedPoint.poly,lnglat=_this$chosedPoint.lnglat,pixel=_this$chosedPoint.pixel;if(path.length>3){path.splice(pointIndex,1);poly.setPath(path);this.map.remove(marker);this.emit("removenode",{target:this.getTarget(),lnglat:_point,pixel:pixel});this.highLightEditPoly();this.onEditMouseMove(e)}else{var _poly=this.editingPolyObj&&this.editingPolyObj.poly;if(_poly){_poly.setPath([]);_poly.remove()}this.setTarget(null)}}}}},{key:"highLightEditPoly",value:function highLightEditPoly(){var _this3=this;var poly=this.editingPolyObj.poly;var style=this._opt.editOptions||{fillColor:"#f00",fillOpacity:1};var opt=AMap.extend({},this._opt,style);poly.setOptions(opt);var path=poly.getPath();var pointOnClick=function pointOnClick(chosedObj){var marker=chosedObj.marker;var _markerOpt=_this3.getMergeMkrOptions(_this3.controlPoint);var chosedOpt=_this3.getMergeMkrOptions({radius:3});if(_this3.chosedPoint){var cm=_this3.chosedPoint.marker;cm.setOptions(_markerOpt)}marker.setOptions(chosedOpt);_this3.chosedPoint=chosedObj};this.editingVertexMarkerList.forEach(function(mkr){_this3.map.remove(mkr)});this.editingVertexMarkerList=[];this.editingVertexMarkerList=map(path,function(pt,pointIndex){var opt=AMap.extend({},_this3.controlPoint,{center:pt});var m=_this3.createMarker(opt);_this3.map.add(m);m.on("click",function(e){pointOnClick({lnglat:e.lnglat,pixel:e.pixel,marker:m,pointIndex:pointIndex,point:pt,path:path,poly:poly});_this3.deleteChosedItem(e)});m.on("dragging",function(e){_this3.lineBreakMarker.hide();_this3.clearTipMarkers();var _paths=_this3.getPath();var ll=_this3.getAdjustedPoint(_paths,e2ll(e));path[pointIndex]=ll;poly.setPath(path)});m.on("dragend",function(e){_this3.highLightEditPoly();_this3.emit("adjust",{target:_this3.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});return m});this.editingMidTipMarkerList.forEach(function(mkr){_this3.map.remove(mkr)});this.editingMidTipMarkerList=[];var _loop=function _loop(i){var cur=path[i];var next=i===path.length-1?path[0]:path[i+1];var lng=(cur.lng+next.lng)/2;var lat=(cur.lat+next.lat)/2;var midll=new AMap.LngLat(lng,lat);var opt=AMap.extend({},_this3.midControlPoint,{zIndex:999997,center:midll,bubble:false,draggable:true});var m=_this3.createMarker(opt);_this3.map.add(m);m.on("dragstart",function(e){var poly=_this3.editingPolyObj.poly;var breakPoint=midll;var breakIndex=i;var path=AMap.Util.parseLngLatData(poly.getPath());var lnglat=breakPoint;if(!breakPoint.lng){lnglat=new AMap.LngLat(breakPoint[0],breakPoint[1])}var index=breakIndex+1;path.splice(index,0,lnglat);poly.setPath(path);var option=_this3.getMergeMkrOptions(_this3.controlPoint);m.setOptions(option)});m.on("dragging",function(e){var path=poly.getPath();_this3.lineBreakMarker.hide();var _paths=_this3.getPath();var ll=_this3.getAdjustedPoint(_paths,e2ll(e));var pointIndex=i+1;path[pointIndex]=ll;poly.setPath(path)});m.on("dragend",function(e){_this3.emit("addnode",{target:_this3.getTarget(),pixel:e.pixel,lnglat:e.lnglat});_this3.highLightEditPoly()});_this3.editingMidTipMarkerList.push(m)};for(var i=0;i<path.length;i++){_loop(i)}}},{key:"getIcon",value:function getIcon(){var size=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[10,10];var icon=new AMap.Icon({size:new AMap.Size(size[0],size[1]),image:"http://webapi.amap.com/images/dd-via.png",imageSize:new AMap.Size(size[0],size[1])});return icon}},{key:"getMergeMkrOptions",value:function getMergeMkrOptions(opt){var _opt=AMap.extend({},this.defaultMarkerOpt,opt);_opt.radius*=amplify;return _opt}},{key:"createMarker",value:function createMarker(opt){var _opt=this.getMergeMkrOptions(opt);return new AMap.CircleMarker(_opt)}},{key:"onAddPick",value:function onAddPick(e){if(!this.drawable)return;var adsorbPt=isMobile?e.lnglat:this.mvPickMarker.getCenter();var insertIndex=0;if(!this.addingPoly){var _path=[[adsorbPt.lng,adsorbPt.lat],[adsorbPt.lng,adsorbPt.lat]];if(isMobile){_path.pop()}var opt=AMap.extend({},this._opt,{bubble:true});this.addingPoly=createPolygon(_path,opt.editOptions);this.map.add(this.addingPoly);this._mapStatusDb=this.map.getStatus().doubleClickZoom;this.map["setStatus"]({doubleClickZoom:false})}else{var arr=this.addingPoly["getPath"]();if(!isMobile){arr.pop();arr.push(adsorbPt)}arr.push(adsorbPt);insertIndex=arr.length-2;this.addingPoly["setPath"](arr)}this.emit("addnode",{target:this.addingPoly,pixel:e.pixel,lnglat:e.lnglat})}},{key:"getPointOnLine",value:function getPointOnLine(_paths,ll){if(this.GRAPH_NAME==="Polygon"){_paths.forEach(function(path){if(path.length>2&&path[0]!==path[path.length-1]){path.push(path[0])}})}var mvPt=[ll.lng,ll.lat];var lines=helpers_14(_paths);var pt=helpers_7(mvPt);var _nearestPointOnLine=nearestPointOnLine(lines,pt,{units:"kilometers"}),linePt=_nearestPointOnLine.geometry.coordinates,properties=_nearestPointOnLine.properties;return{point:linePt,properties:properties}}},{key:"onAddingMouseMove",value:function onAddingMouseMove(e){if(!this.drawable)return;var ll=e2ll(e);var _paths=this.getPath();var ajustPt=this.getAdjustedPoint(_paths,ll);if(this.mvPickMarker){this.mvPickMarker.setCenter(ajustPt);if(ajustPt==ll){this.mvPickMarker.hide()}else{this.mvPickMarker.show()}}if(this.addingPoly){var arr=this.addingPoly["getPath"]();arr.pop();arr.push(ajustPt);this.addingPoly["setPath"](arr)}}},{key:"getPolyArrPath",value:function getPolyArrPath(poly){var path=poly.getPath();var _path=map(path,function(loc){return[loc.lng,loc.lat]});return _path}},{key:"onEditMouseMove",value:function onEditMouseMove(e){}},{key:"getAdjustedPoint",value:function getAdjustedPoint(_paths,ll){var ajustPt=ll;if(this.adsorb&&_paths&&_paths.length>0){var mvPt=[ll.lng,ll.lat];var allPoints=_paths.reduce(function(pre,n){return pre.concat(n)});var _this$getPointOnLine=this.getPointOnLine(_paths,ll),linePt=_this$getPointOnLine.point;var _this$adsorbDistance=this.adsorbDistance,lAbPx=_this$adsorbDistance.line,vAbPx=_this$adsorbDistance.point;var nearVPt=getNearestPoint(mvPt,allPoints);if(!nearVPt){return ajustPt}var vDist=getPixelDistance(this.map,[nearVPt.point,mvPt]);var linePtDist=getPixelDistance(this.map,[linePt,mvPt]);if(this.showTipMarker){var mvp=new AMap.LngLat(mvPt[0],mvPt[1]);this.mvPickMarker.setCenter(mvp)}if(vDist<vAbPx){var refLoc=new AMap.LngLat(nearVPt.point[0],nearVPt.point[1]);ajustPt=refLoc}else{if(linePtDist<lAbPx){var _refLoc=new AMap.LngLat(linePt[0],linePt[1]);ajustPt=_refLoc}}}return ajustPt}},{key:"finishAddingPolygon",value:function finishAddingPolygon(){var stripLast=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1?arguments[1]:undefined;if(this.addingPoly){var arr=this.addingPoly["getPath"]();if(stripLast){if(!isMobile){arr.pop()}}else{arr.pop();if(!isMobile){arr.pop()}}if(arr.length>2){this.addingPoly["setPath"](arr);var success=this.tailorPolygonOverlaps();if(success){this.emit("add",{target:this.addingPoly,obj:this.addingPoly,lnglat:e.lnglat,pixel:e.pixel});this.editingPolyObj={poly:this.addingPoly};this.addingPoly=undefined;this.openEdit();this.editingPolyObj.origin_options=this._opt.createOptions}else{alert("您正在编辑的多边形不合规（边不能交叉），请重新添加")}}else{this.cancel()}}if(this.addingPoly){this.drawable=false}else{this.emit("cancel",{lnglat:e.lnglat,pixel:e.pixel})}}},{key:"getClosePath",value:function getClosePath(path){var last=path[path.length-1];if(last&&last!==path[0]){return path.concat([path[0]])}else{return path}}},{key:"tailorPolygonOverlaps",value:function tailorPolygonOverlaps(){return true}},{key:"getPolygons",value:function getPolygons(){return this.adsorbPolygons}},{key:"getPath",value:function getPath(){var _this4=this;var result=[];forEach(this.adsorbPolygons,function(p){if(!_this4.editingPolyObj){return}if(p===_this4.editingPolyObj.poly){return}result.push(p.getPath().map(function(loc){return[loc.lng,loc.lat]}))});return result}},{key:"addAddListener",value:function addAddListener(){this.map.on("click",this.onAddPick);this.map.on("mousemove",this.onAddingMouseMove);this.map.on("dblclick",this.onMapDblclick);this.map.on("rightclick",this.onMapRightclick)}},{key:"removeAddListener",value:function removeAddListener(){this.map.off("click",this.onAddPick);this.map.off("mousemove",this.onAddingMouseMove);this.map.off("dblclick",this.onMapDblclick);this.map.off("rightclick",this.onMapRightclick)}},{key:"addEditListener",value:function addEditListener(){this.map.on("mousemove",this.onEditMouseMove)}},{key:"removeEditListener",value:function removeEditListener(){this.map.off("mousemove",this.onEditMouseMove)}},{key:"open",value:function open(){if(this.editingPolyObj&&this.editingPolyObj.poly){this.openEdit()}else{this.openAdd()}}},{key:"setTarget",value:function setTarget(tar){this.close();this._opt.target=tar;this.editingPolyObj={poly:tar}}},{key:"getTarget",value:function getTarget(){return this.editingPolyObj&&this.editingPolyObj.poly}},{key:"openAdd",value:function openAdd(){this.innerOpen();this.closeEdit();this.drawable=true;this.map.setDefaultCursor("crosshair");this.addAddListener();this.setAllBubble()}},{key:"setAllBubble",value:function setAllBubble(){this._oldBubble=this.map.getStatus().allBubble;this.map.setStatus({allBubble:true})}},{key:"restoreBubble",value:function restoreBubble(){this.map.setStatus({allBubble:this._oldBubble})}},{key:"closeAdd",value:function closeAdd(){this.drawable=false;this.clearAddingPolygon();this.removeAddListener()}},{key:"openEdit",value:function openEdit(){if(this.editable){return}this.innerOpen();this.closeAdd();this.clearAddingPolygon();this.editable=true;this.map.setDefaultCursor(this.defaultCursor);this.addEditListener();this.editPoly();this.setAllBubble()}},{key:"closeEdit",value:function closeEdit(){this.editable=false;this.clearEditingPolyStatus();this.removeEditListener();this.map.setDefaultCursor(this.defaultCursor)}},{key:"clearAddingPolygon",value:function clearAddingPolygon(){if(this.addingPoly){this.map.remove(this.addingPoly)}this.addingPoly=null}},{key:"clearEditingPolyStatus",value:function clearEditingPolyStatus(){var _this5=this;this.lineBreakMarker&&this.lineBreakMarker.hide();if(this.editingPolyObj&&this.editingPolyObj.poly){var _this$editingPolyObj2=this.editingPolyObj,poly=_this$editingPolyObj2.poly,origin_options=_this$editingPolyObj2.origin_options;if(poly){origin_options&&poly.setOptions(origin_options);delete poly.origin_options}}this.editingVertexMarkerList&&this.editingVertexMarkerList.forEach(function(mk){_this5.map.remove(mk)});this.editingVertexMarkerList=[];this.clearTipMarkers()}},{key:"clearTipMarkers",value:function clearTipMarkers(){var _this6=this;this.editingMidTipMarkerList&&this.editingMidTipMarkerList.forEach(function(mk){_this6.map.remove(mk)});this.editingMidTipMarkerList=[]}},{key:"setAdsorbPolygons",value:function setAdsorbPolygons(list){this.clearAdsorbPolygons();this.addAdsorbPolygons(list)}},{key:"clearAdsorbPolygons",value:function clearAdsorbPolygons(){this.adsorbPolygons=[]}},{key:"addAdsorbPolygons",value:function addAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}Array.prototype.push.apply(this.adsorbPolygons,list)}},{key:"removeAdsorbPolygons",value:function removeAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}for(var i=0,len=list.length;i<len;i++){var item=list[i];var index=this.adsorbPolygons.indexOf(item);if(index>=0){this.adsorbPolygons.splice(index,1)}}}},{key:"close",value:function close(){this.map.setDefaultCursor(this.defaultCursor);this.clearAddingPolygon();this.closeAdd();this.closeEdit();this.clearEditingPolyStatus();this.editingPolyObj={poly:this.editingPolyObj&&this.editingPolyObj.poly};this.lineBreakMarker&&this.map.remove(this.lineBreakMarker);this.lineBreakMarker=null;this.mvPickMarker&&this.map.remove(this.mvPickMarker);this.mvPickMarker=null;this.OPEN_STATUS=false;this.restoreBubble();this.emit("end",{target:this.getTarget()})}},{key:"onHandleKeydown",value:function onHandleKeydown(e){if(e.key==="Escape"){this.cancel()}}},{key:"cancel",value:function cancel(){if(this.addingPoly){this.map.remove(this.addingPoly);this.addingPoly=undefined;this.emit("cancel",{})}}},{key:"CLASS_NAME",get:function get(){return this.className}}]);return PolygonEditor}(AMap.Event);__decorate([autobind],PolygonEditor.prototype,"onMapDblclick",null);__decorate([autobind],PolygonEditor.prototype,"onMapRightclick",null);var ListEvent;(function(ListEvent){ListEvent["removeNode"]="removenode";ListEvent["addNode"]="addnode";ListEvent["adjust"]="adjust";ListEvent["end"]="end";ListEvent["change"]="change";ListEvent["move"]="move";ListEvent["add"]="add"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);function PointList(){var _this;_classCallCheck(this,PointList);_this=_possibleConstructorReturn(this,_getPrototypeOf(PointList).apply(this,arguments));_this.length=0;return _this}_createClass(PointList,[{key:"add",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:"insertBefore",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:"insertAfter",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:"bindNodeEvent",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:"unbindNodeEvent",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:"remove",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:"handleChange",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:"handleAddNode",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:"handleRemoveNode",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:"handleAdjust",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:"forEach",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:"destroy",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_possibleConstructorReturn(this,_getPrototypeOf(AbstractPointListNode).apply(this,arguments));_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:"setNext",value:function setNext(next){this.next=next}},{key:"setPrev",value:function setPrev(prev){this.prev=prev}},{key:"setList",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_possibleConstructorReturn(this,_getPrototypeOf(Point).call(this));_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:"#1791fc",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:"white",fillOpacity:1,cursor:"pointer",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:"white",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:"#1791fc",fillOpacity:1,cursor:"pointer",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:"init",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:"show",value:function show(){this.marker.show()}},{key:"hide",value:function hide(){this.marker.hide()}},{key:"remove",value:function remove(){this.marker.remove()}},{key:"setMiddle",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+"/images/dd-via.png"}),offset:new AMap.Pixel(-6,-6),cursor:"pointer",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_possibleConstructorReturn(this,_getPrototypeOf(PointWithMarker).call(this));_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:"init",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:"pointer",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:"show",value:function show(){this.marker.show()}},{key:"hide",value:function hide(){this.marker.hide()}},{key:"remove",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);var PolylinePoint=function(_AbstractPointListNod){_inherits(PolylinePoint,_AbstractPointListNod);function PolylinePoint(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolylinePoint);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolylinePoint).call(this));_this.map=map;_this.pos=pos;_this.editing=false;_this._opts=opts;_this.point=new Point(map,pos,opts);_this.middleFlag=false;_this.bindEvents();return _this}_createClass(PolylinePoint,[{key:"bindEvents",value:function bindEvents(){this.point.marker.on("dragstart",this.handleHandleDragStart.bind(this));this.point.marker.on("dragend",this.handleHandleDragEnd.bind(this));this.point.marker.on("dragging",this.handleHandleDragging.bind(this));this.point.marker.on("click",this.handleHandleClick.bind(this))}},{key:"unbindEvents",value:function unbindEvents(){this.point.marker.off("dragstart",this.handleHandleDragStart.bind(this));this.point.marker.off("dragend",this.handleHandleDragEnd.bind(this));this.point.marker.off("dragging",this.handleHandleDragging.bind(this));this.point.marker.off("click",this.handleHandleClick.bind(this))}},{key:"handleHandleDragStart",value:function handleHandleDragStart(){this.editing=true}},{key:"handleHandleClick",value:function handleHandleClick(e){if(!this.middleFlag){this.destroy();this.emit(ListEvent.removeNode,e)}}},{key:"handleHandleDragging",value:function handleHandleDragging(){if(!this.middleFlag){if(this.prev&&this.prev.prev){var newPos=getMiddleLatLng(this.point.marker,this.prev.prev.point.marker);this.prev.point.marker.setCenter(newPos)}if(this.next&&this.next.next){var _newPos=getMiddleLatLng(this.point.marker,this.next.next.point.marker);this.next.point.marker.setCenter(_newPos)}}this.emit(ListEvent.change)}},{key:"handleHandleDragEnd",value:function handleHandleDragEnd(e){this.editing=false;if(this.middleFlag&&this.list){this.setMiddle(false);var prevPos=getMiddleLatLng(this.point.marker,this.prev.point.marker);var nextPos=getMiddleLatLng(this.point.marker,this.next.point.marker);var prev=new PolylinePoint(this.map,prevPos,this._opts);var next=new PolylinePoint(this.map,nextPos,this._opts);this.list.insertBefore(prev,this);this.list.insertAfter(next,this);prev.show();next.show();prev.setMiddle(true);next.setMiddle(true);this.emit(ListEvent.addNode,e)}else{this.emit(ListEvent.adjust,e)}}},{key:"destroy",value:function destroy(){var _a,_b;this.unbindEvents();if(this.middleFlag){if(this.list){this.list.remove(this)}this.point.remove()}else{(_a=this.prev)===null||_a===void 0?void 0:_a.destroy();(_b=this.next)===null||_b===void 0?void 0:_b.destroy();if(this.list){var prev=this.prev;var next=this.next;this.list.remove(this);if(prev&&next){var newPos=getMiddleLatLng(prev.point.marker,next.point.marker);var newMiddleMarker=new PolylinePoint(this.map,newPos,this._opts);newMiddleMarker.setMiddle(true);newMiddleMarker.show();this.list.insertAfter(newMiddleMarker,prev)}}this.point.remove()}}},{key:"show",value:function show(){this.point.show()}},{key:"hide",value:function hide(){this.point.hide()}},{key:"setMiddle",value:function setMiddle(middle){this.middleFlag=middle;this.point.setMiddle(middle)}}]);return PolylinePoint}(AbstractPointListNode);var PolylineCreator=function(_AMap$Event){_inherits(PolylineCreator,_AMap$Event);function PolylineCreator(_map){var _this;_classCallCheck(this,PolylineCreator);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolylineCreator).call(this));_this._map=_map;_this._onMapClick=_this._onMapClick.bind(_assertThisInitialized(_this));_this._onMapMouseMove=_this._onMapMouseMove.bind(_assertThisInitialized(_this));_this._onMapDbClick=_this._onMapDbClick.bind(_assertThisInitialized(_this));_this._onMapRightClick=_this._onMapRightClick.bind(_assertThisInitialized(_this));return _this}_createClass(PolylineCreator,[{key:"open",value:function open(){this._map.on("click",this._onMapClick)}},{key:"close",value:function close(){this._map.off("click",this._onMapClick)}},{key:"_onMapClick",value:function _onMapClick(e){var center=e.lnglat;var resolution=this._map.getResolution();var pos1=center.offset(resolution*-30,0).toJSON();var pos2=center.offset(resolution*30,0).toJSON();var path=[pos1,pos2];this.emit("create",{path:path});this.close()}},{key:"_onMapMouseMove",value:function _onMapMouseMove(){}},{key:"_onMapDbClick",value:function _onMapDbClick(){}},{key:"_onMapRightClick",value:function _onMapRightClick(){}}]);return PolylineCreator}(AMap.Event);var PolylineEditor=function(_AMap$Event){_inherits(PolylineEditor,_AMap$Event);function PolylineEditor(_map,_poly){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolylineEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolylineEditor).call(this));_this._map=_map;_this._defaultStyle={isOutline:true,outlineColor:"white",borderWeight:2,strokeColor:"#3366FF",strokeOpacity:1,strokeWeight:6,strokeStyle:"solid",lineJoin:"round",lineCap:"round"};_this._selectStyle={isOutline:true,outlineColor:"white",borderWeight:2,strokeWeight:4,strokeStyle:"solid",strokeDasharray:[10,10],strokeColor:"#1791fc",strokeOpacity:.8,lineJoin:"round",lineCap:"round"};_this._markerOptions={};_this._middleMarkerOptions={};_this.className="AMap.PolylineEditor";_this._editing=false;_this.handleAddNode=_this.handleAddNode.bind(_assertThisInitialized(_this));_this.handleRemoveNode=_this.handleRemoveNode.bind(_assertThisInitialized(_this));_this.handleAdjust=_this.handleAdjust.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this._creator=new PolylineCreator(_map);_this._poly=_poly;if(opts){_this._defaultStyle=opts.createOptions?AMap.extend(_this._defaultStyle,opts.createOptions):_this._defaultStyle;_this._selectStyle=opts.editOptions?AMap.extend(_this._selectStyle,opts.editOptions):_this._selectStyle;_this._markerOptions=opts.controlPoint?AMap.extend(_this._markerOptions,opts.controlPoint):_this._markerOptions;_this._middleMarkerOptions=opts.midControlPoint?AMap.extend(_this._middleMarkerOptions,opts.midControlPoint):_this._middleMarkerOptions}_this._creator.on("create",function(data){_this._creator.close();var path=data.path;var poly=new AMap.Polyline(AMap.extend({map:_map,path:path},_this._defaultStyle));_this.setTarget(poly);_this.open();_this.emit(ListEvent.add,{target:_this.getTarget(),obj:poly})});return _this}_createClass(PolylineEditor,[{key:"initList",value:function initList(){if(!this._poly){console.error("no poly target");return}if(!this.list){this.list=new PointList;var path=this._poly.getPath();var prev;for(var i=0,len=path.length;i<len;i++){var pos=path[i];var current=new PolylinePoint(this._map,pos,{controlPoint:this._markerOptions,midControlPoint:this._middleMarkerOptions});if(i>0){var middlePos=getMiddleLatLng(prev.point.marker,current.point.marker);var middle=new PolylinePoint(this._map,middlePos,{controlPoint:this._markerOptions,midControlPoint:this._middleMarkerOptions});this.list.add(middle);this.list.add(current);middle.setMiddle(true)}else{this.list.add(current)}prev=current}this.bindListEvent()}this.list.forEach(function(node){node.point.marker.show()});this._customStyle=AMap.extend({},this._poly.getOptions());delete this._customStyle.map;delete this._customStyle.center;delete this._customStyle.radius;delete this._customStyle.path;delete this._customStyle.bounds;this._poly.setOptions(this._selectStyle?this._selectStyle:{})}},{key:"setTarget",value:function setTarget(overlay){this.close();if(this._poly&&this._poly!==overlay){this.destroy()}this._poly=overlay}},{key:"getTarget",value:function getTarget(){return this._poly}},{key:"bindListEvent",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.removeNode,this.handleRemoveNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange)}}},{key:"unbindListEvent",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.removeNode,this.handleRemoveNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange)}}},{key:"handleChange",value:function handleChange(){this._updatePath()}},{key:"handleAddNode",value:function handleAddNode(e){this._updatePath();this.emit(ListEvent.addNode,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:"handleRemoveNode",value:function handleRemoveNode(e){if(!this.list){return}if(this.list.length<=2){this.emit(ListEvent.removeNode);this._map.remove(this._poly);this.close();this.destroy();delete this._poly;return}this._updatePath();this.emit(ListEvent.removeNode,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:"handleAdjust",value:function handleAdjust(e){this._updatePath();this.emit(ListEvent.adjust,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:"open",value:function open(){if(this._poly&&!this._editing){this._editing=true;this.initList()}else{this._creator.open()}}},{key:"close",value:function close(){this._creator.close();this._editing=false;if(!this._poly){return}if(!this.list){return}this.list.forEach(function(node){node.point.marker.hide()});this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:"destroy",value:function destroy(){delete this._poly;if(this.list){this.unbindListEvent();this.list.forEach(function(node){node.point.marker.hide()});this.list.destroy();delete this.list}delete this._poly}},{key:"_updatePath",value:function _updatePath(){if(!this._poly){return}if(!this.list){return}var path=[];this.list.forEach(function(node){if(!node.middleFlag||node.editing){path.push(node.point.marker.getCenter())}});this._poly.setPath(path)}},{key:"_openAdd",value:function _openAdd(){this._addAddListener()}},{key:"closeAdd",value:function closeAdd(){this._removeAddListener()}},{key:"_addAddListener",value:function _addAddListener(){}},{key:"_removeAddListener",value:function _removeAddListener(){}},{key:"CLASS_NAME",get:function get(){return this.className}}]);return PolylineEditor}(AMap.Event);var PolyEditor=function PolyEditor(map,poly,opts){_classCallCheck(this,PolyEditor);this.CLASS_NAME="AMap.PolyEditor";if(poly instanceof AMap.Polygon){this.__proto__=PolygonEditor.prototype;this.__proto__.constructor.call(this,map,poly,opts)}else if(poly instanceof AMap.Polyline){this.__proto__=PolylineEditor.prototype;this.__proto__.constructor.call(this,map,poly,opts)}else{throw Error("require AMap.Polyline or AMap.Polygon ")}};AMap["PolyEditor"]=PolyEditor}(window.AMap); ');
_cssload_('AMap.PlaceSearch', '.amap_lib_placeSearch{font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;color:#565656;font-size:12px;line-height:22px;word-wrap:break-word;background-color:#fff;border:1px solid silver;-webkit-text-size-adjust:none;text-size-adjust:none;min-width:270px}.amap_lib_placeSearch .pageLink{cursor:pointer;line-height:16px;display:inline-block;text-align:center;padding:0 4px}.amap_lib_placeSearch.mobile .pageLink{border:1px solid #ddd;background:#eee;padding:2px 3px}.amap_lib_placeSearch .amap_lib_placeSearch_page .current{border-color:#0091ff;color:#0091ff;margin-left:-2px}.amap_lib_placeSearch_list{background:#fff none repeat scroll 0 0}.amap_lib_placeSearch .poibox .poibox-icon{margin-left:7px;margin-top:4px}.amap_lib_placeSearch_page{white-space:nowrap;text-align:right;margin:8px 0 5px;padding:2px;overflow:hidden}.amap_lib_placeSearch_page>div{float:left;margin-right:5px}.amap_lib_placeSearch_page>div>p{margin:0;padding:0;white-space:nowrap}.amap_lib_placeSearch_page>div>p>span{display:inline-block;padding:0 2px;min-width:15px;height:18px;border:1px solid #d9d9d9;border-radius:4px;line-height:18px;text-align:center;margin-right:3px}.amap_lib_placeSearch_page>div>p>span:hover{border-color:#1890ff;color:#1890ff;cursor:pointer}.amap_lib_placeSearch_ol{list-style:outside none none;padding:0;margin:0}.amap_lib_placeSearch_li{margin:2px 0;padding:0 5px 5px 0;cursor:pointer;overflow:hidden;line-height:17px}.amap_lib_placeSearch_li .amap_lib_placeSearch_li_wrap{overflow:hidden;padding:0 5px}.amap_lib_placeSearch_li_wrap_selected{background-color:#f0f0f0}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title{line-height:20px;font-size:12px}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title span{color:#00c}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title a{margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:400;text-decoration:none}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text{padding:2px 0;line-height:18px;*zoom:1;overflow:hidden}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text b{float:left;font-weight:700;*zoom:1;overflow:hidden;padding-right:5px;*margin-right:-3px}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text span{color:#666;display:block;zoom:1;overflow:hidden}.amap-lib-infowindow .amap-lib-infowindow-content-wrap{word-break:break-all;overflow:hidden;zoom:1}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}.selected .amap_lib_placeSearch_poi{background-image:url(https://a.amap.com/jsapi/static/image/plugin/marker_red.png)}.amap_lib_placeSearch_poi{background:url(https://a.amap.com/jsapi/static/image/plugin/marker_red.png) no-repeat;background-size:20px 25px;width:20px;height:27px;cursor:pointer;left:-1px;text-align:center;color:#fff;font:12px arial,simsun,sans-serif;padding-top:3px}.amap_lib_placeSearch_pic{width:46px;height:46px;float:left;margin:4px 10px 0 0}.amap_lib_placeSearch_pic img{width:46px;height:46px}.selected .amap_lib_placeSearch_child_poi{background-image:url(https://a.amap.com/jsapi/static/image/plugin/marker_red.png)}.amap_lib_placeSearch_child_poi{width:11px;height:11px;border:1px solid #eee;border-radius:6px;background:url(https://a.amap.com/jsapi/static/image/plugin/marker_blue.png) no-repeat 50%;text-indent:-10000em;overflow:hidden}.poi-children-box{padding:3px 0 3px 25px}.poi-child-item.selected{border-color:#e17070}.poi-child-item{display:inline-block;line-height:180%;border:1px solid #ccc;background:#f3f3f3;margin:0 3px 3px 0;padding:0 3px;width:27%;min-width:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;text-align:center}.poi-child-item:hover{background:#ddd}.amap_lib_placeSearch{border:1px solid #ebedf0;border-radius:2px;padding:5px 10px 2px}.amap_lib_placeSearch .amap-ellipsis{max-height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.amap_lib_placeSearch .amap_lib_placeSearch_poi{position:absolute}.amap_lib_placeSearch ol,.amap_lib_placeSearch ul{list-style:outside none none;margin:0;padding:0}.amap_lib_placeSearch .poibox{border-bottom:1px solid #e8e8e8;cursor:pointer;padding:10px 5px;position:relative;min-height:35px}.amap_lib_placeSearch .poibox:last-child{border-bottom:none}.amap_lib_placeSearch .poibox .poi-title{margin-left:25px;font-size:14px;font-weight:700;overflow:hidden}.amap_lib_placeSearch .poibox .poi-title a{font-weight:400;text-decoration:none;color:#666;position:absolute;right:2px}.amap_lib_placeSearch .poibox .poi-title a:hover{color:#0091ff}.amap_lib_placeSearch .poibox .poi-title .poi-name{max-width:160px;display:inline-block}.amap_lib_placeSearch .poi-more{color:#0091ff;font-size:12px;line-height:22px;white-space:nowrap;vertical-align:baseline}.amap_lib_placeSearch .poibox .poi-info{word-break:break-all;margin:0 0 0 25px;overflow:hidden}.amap_lib_placeSearch .poibox .poi-info p{color:#999;font-family:Tahoma;line-height:20px}.amap_lib_placeSearch p{margin:0}.amap_lib_placeSearch h1,.amap_lib_placeSearch h2,.amap_lib_placeSearch h3,.amap_lib_placeSearch h4,.amap_lib_placeSearch h5{font-weight:400;margin:0}.amap_lib_placeSearch .poibox.active,.amap_lib_placeSearch .poibox.hover,.amap_lib_placeSearch .poibox:hover{background:#fafafa none repeat scroll 0 0}.amap_lib_placeSearch .poibox .select-btn{margin-left:25px;margin-top:6px;border:0;color:#fff;cursor:pointer;padding:3px 6px;border-radius:2px}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://webapi.amap.com/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://webapi.amap.com/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-pl-pc .poi-img{float:right;margin:3px 8px 0;width:90px;height:56px;overflow:hidden}.amap-pl-pc .poi-name{vertical-align:middle}.amap-pl-pc .poi-more{display:inline-block;width:16px;height:16px;text-indent:-1000em;background:url(http://webapi.amap.com/theme/v1.3/images/newpc/tips.png) no-repeat 50%;vertical-align:middle;cursor:pointer;opacity:.5;margin:1px 0 1px 2px;background-size:85%}.amap-pl-pc .poi-more:hover{opacity:1;background-size:100%}.amap_lib_placeSearch .clear{clear:both}.amap-pls-marker-tip{position:absolute;background:#fff;display:none;top:0;left:-100px;min-width:100px;width:auto;white-space:nowrap;line-height:200%;padding:0 0 0 7px;font-size:13px;border-radius:2px;-webkit-box-shadow:0 0 8px 0 rgba(0,0,0,.5);-moz-box-shadow:0 0 8px 0 rgba(0,0,0,.5);box-shadow:0 0 8px 0 rgba(0,0,0,.5);transition:all .5s 1s;z-index:150}.amap-pls-marker-tip .title{display:inline-block;vertical-align:middle;max-width:150px;overflow:hidden;text-overflow:ellipsis;margin-right:35px}.amap_lib_placeSearch_child_con .amap-pls-marker-tip{top:-7px}.amap-marker .hover .amap_lib_placeSearch_child_con .amap-pls-marker-tip{left:23px}.amap-marker .hover .amap-pls-marker-tip{display:block;left:28px}.amap-marker .hover.selected .amap-pls-marker-tip{display:none}.amap-pls-marker-tip:after,.amap-pls-marker-tip:before{content:"";width:0;height:0;top:50%;left:0;margin-top:-7px;margin-left:-15px;position:absolute;border:7px solid transparent;border-right:8px solid rgba(51,51,51,.2)}.amap-pls-marker-tip:after{margin-left:-14px;border-right:8px solid #fff}');
_jsload_('AMap.PlaceSearch', '!function(AMap){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1})}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return self}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"==typeof NewTarget||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelper(o,allowArrayLike){var i,it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length)return it&&(o=it),i=0,{s:allowArrayLike=function(){},n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:allowArrayLike};throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}var PlaceSearchRenderUtil={getElementsByClassName:function(className,tag,parent){for(var current,testClass=new RegExp("(^|\\\\s)"+className+"(\\\\s|$)"),elements=(tag=tag||"*",(parent=parent||document).getElementsByTagName(tag)),returnElements=[],i=0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},escapeHtml:function(text){var map={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#039;"};return text.replace(/[&<>"\']/g,function(m){return map[m]})},trimStr:function(str){return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,"")},simpleChildPoiName:function(name,parentPoi){var parentPoi=this.trimStr(parentPoi.name),match=name.match(/^(.*?)\\((.*?)\\)$/);return match?match[1]===parentPoi?match[2]:match[1].replace(parentPoi,""):name.replace(parentPoi,"")}},PlaceSearchRenderListener=function(){function PlaceSearchRenderListener(placeSearchRender){_classCallCheck(this,PlaceSearchRenderListener),this._lastEventObject=null,this._parent=placeSearchRender}return _createClass(PlaceSearchRenderListener,[{key:"getTargetPOIBox",value:function(elems,id){var _step,targetElem=null,_iterator=_createForOfIteratorHelper(elems);try{for(_iterator.s();!(_step=_iterator.n()).done;){var element=_step.value;if(id==element.getAttribute("data-idx")){targetElem=element;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return targetElem}},{key:"markerClick",value:function(){var lastIndex,element,params=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},panel=params.panel,data=params.data,position=params.position,marker=params.marker,placeSearchInstance=params.placeSearchInstance,_params$noMarkerClick=params.noMarkerClickEvent,_params$noMarkerClick=void 0!==_params$noMarkerClick&&_params$noMarkerClick,params=params.e,parent=this._parent,oldContent=parent.infoWindow.getContent(),oldContent=(!oldContent||(oldContent=parent.util.getElementsByClassName("poi-more","a",oldContent)[0])&&(oldContent._data=null,oldContent.clickHandler,oldContent.clickHandler=null),parent.view.createInfowindowContent(data)),close=oldContent.querySelector(".amap-combo-close"),detail=(close&&(close.addEventListener("touchend",function(e){parent.infoWindow.close()},this),close.addEventListener("click",function(e){parent.infoWindow.close()},this)),parent.util.getElementsByClassName("poi-more","a",oldContent)[0]),close=(detail&&(detail._data=data,detail.clickHandler=detail.addEventListener("click",function(e){parent.onDetailClick.call(parent,detail)})),parent.infoWindow&&(parent.infoWindow.setContent(oldContent),parent.infoWindow.setOffset(data._isChildPoi?new AMap.Pixel(0,-3):new AMap.Pixel(0,-25)),parent.infoWindow.open(parent.options.map,position)),parent.options.map.setCenter(position),data._idx),position=(this.last&&(this.last.className="poibox",lastIndex=parseInt(this.last.getAttribute("data-idx"),10)),panel&&(oldContent=panel.querySelectorAll(".poibox"),element=this.getTargetPOIBox(oldContent,close),this._currentDiv=element),this._currentIndex=parseInt(close,10),this._currentDiv);position&&(position.className="poibox active"),this.last=position,!_params$noMarkerClick&&placeSearchInstance&&(panel={type:"markerClick",id:(data=marker._data).id,marker:marker,listElement:position,data:data,event:params,index:this._currentIndex},placeSearchInstance.emit("markerClick",panel),(element&&void 0===lastIndex||lastIndex!==this._currentIndex)&&(oldContent={id:data.id,marker:marker,listElement:position,data:data,event:params,index:this._currentIndex},this._lastEventObject&&delete this._lastEventObject.type,placeSearchInstance.emit("selectChanged",{type:"selectChanged",selected:oldContent,lastSelected:this._lastEventObject})),this._lastEventObject=panel)}},{key:"unfocusTitleClick",value:function(e,params){var lastIndex,dataIndex=params.dataIndex,marker=params.marker,placeSearchInstance=params.placeSearchInstance,params=params.element,parent=this._parent,div=(this.last&&(this.last.className="poibox",lastIndex=parseInt(this.last.getAttribute("data-idx"),10)),this._currentDiv=params,this._currentIndex=parseInt(dataIndex,10),this._currentDiv);if(div&&(div.className="poibox active"),this.last=div,parent.options.map){for(var strIdx,target=e.target||e.srcElement;target&&target!==div&&!(strIdx=target.getAttribute("data-idx"));)target=target.parentNode;parent.setCenter(strIdx?parseInt(strIdx,10):this._currentIndex)}placeSearchInstance&&(parent={type:params="listElementClick",id:(dataIndex=marker._data).id,marker:marker,listElement:div,data:dataIndex,event:e,index:this._currentIndex},placeSearchInstance.emit(params,parent),void 0!==lastIndex&&lastIndex===this._currentIndex||(params={id:dataIndex.id,marker:marker,listElement:div,data:dataIndex,event:e,index:this._currentIndex},this._lastEventObject&&delete this._lastEventObject.type,placeSearchInstance.emit("selectChanged",{type:"selectChanged",selected:params,lastSelected:this._lastEventObject})),this._lastEventObject=parent)}}]),PlaceSearchRenderListener}(),PlaceSearchRenderView={createInfowindowContent:function(data){var content=document.createElement("div"),div=document.createElement("div"),c=(div.className="amap-content-body",[]),data=(c.push(\'<div class="amap-lib-infowindow">\'),c.push(\'    <div class="amap-lib-infowindow-title">\'+(data._isChildPoi?"":data.index+1+".")+data.name+"</div>"),c.push(\'    <div class="amap-lib-infowindow-content">\'),c.push(\'        <div class="amap-lib-infowindow-content-wrap">\'),c.push("             <div>地址："+data.address+"</div>"),data.tel&&c.push("             <div>电话："+data.tel+"</div>"),c.push("        </div>"),c.push("    </div>"),c.push("</div>"),div.innerHTML=c.join(""),document.createElement("div")),c=(data.className="amap-combo-sharp",div.appendChild(data),document.createElement("div"));return c.className="amap-combo-close",div.appendChild(c),c.href="javascript: void(0)",content.appendChild(div),content.appendChild(c),content.appendChild(data),content},getChildrenHtml:function(children,parentPoi){var parts=[];parts.push(\'<div class="poi-children-box">\'),parts.push(\'<ul class="poi-children-list">\');for(var i=0,len=children.length;i<len;i++){var childPoi=children[i],name=PlaceSearchRenderUtil.trimStr(childPoi.name),name=PlaceSearchRenderUtil.escapeHtml(PlaceSearchRenderUtil.simpleChildPoiName(name,parentPoi));parts.push(\'<li class="poi-child-item" data-idx="\'+childPoi._idx+\'" title="\'+name+\'">\'),parts.push(name),parts.push("</li>")}return parts.push("</ul>"),parts.push("</div>"),parts.join("")},createPanel:function(result){if(!(result.poiList&&0<result.poiList.pois.length&&"NO_DATA"!==result.info))return"<div class=\'amap_lib_placeSearch\'>抱歉，未搜索到有效的结果。</div>";var pois=result.poiList.pois,c=[];c.push(\'<div class="amap_lib_placeSearch">\'),c.push(\'    <div class="amap_lib_placeSearch_list">\'),c.push("        <ul>");for(var i=0;i<pois.length;i++){var poi,pic=(poi=pois[i]).photos&&poi.photos[0].url,pic=\'<img src="\'+(pic||"http://a.amap.com/jsapi_demos/static/images/search-img-default.png")+\'">\';c.push(\'            <li class="poibox" data-idx="\'+poi._idx+\'">\'),c.push(\'                <div class="amap_lib_placeSearch_pic">\'+pic+"</div>"),c.push(\'                <h3 class="poi-title">\'),c.push(\'                \\t<span class="poi-name amap-ellipsis">\'+poi.name+"</span>"),c.push("                </h3>"),c.push(\'                <div class="poi-info">\'),c.push(\'                \\t<p class="poi-addr amap-ellipsis">地址：\'+poi.address+"</p>"),poi.tel&&c.push(\'                <p class="poi-tel amap-ellipsis">电话：\'+poi.tel+"</p>"),c.push("                </div>"),poi.children&&c.push(this.getChildrenHtml(poi.children,poi)),c.push("            </li>")}c.push("        </ul>"),c.push("    </div>"),c.push(\'    <div class="amap_lib_placeSearch_page">\'),c.push("        <div>"),c.push("            <p>");var result=result.poiList,count=result.count,pageIndex=result.pageIndex,result=result.pageSize,count=Math.ceil(count/result);return 3<pageIndex&&c.push(this.createPageButton(1,"首页")),1<pageIndex&&c.push(this.createPageButton(pageIndex-1,"上一页")),1<=pageIndex-2&&c.push(this.createPageButton(pageIndex-2,pageIndex-2)),1<=pageIndex-1&&c.push(this.createPageButton(pageIndex-1,pageIndex-1)),c.push(\'                <span class="current">\'+pageIndex+"</span>"),pageIndex+1<=count&&c.push(this.createPageButton(pageIndex+1,pageIndex+1)),pageIndex+2<=count&&c.push(this.createPageButton(pageIndex+2,pageIndex+2)),pageIndex<count&&c.push(this.createPageButton(pageIndex+1,"下一页")),c.push("            </p>"),c.push("        </div>"),c.push("    </div>"),c.push("</div>"),c.join("")},createPageButton:function(pageNum,text){return"<span><a pageNo="+pageNum+\' class="pageLink" >\'+text+"</a></span>"}},PlaceSearchRender=function(){_inherits(PlaceSearchRender,AMap.Event);var _super=_createSuper(PlaceSearchRender);function PlaceSearchRender(showCover){var _this;return _classCallCheck(this,PlaceSearchRender),(_this=_super.call(this)).CLASS_NAME="AMap.PlaceSearchRender",_this.options={},_this.circleOptions={id:"place-search-circle",radius:3e3,strokeColor:"#72ccff",strokeOpacity:.8,strokeWeight:1,fillColor:"#d0e7f8",fillOpacity:.2,bubble:!0},_this.boundOptions={id:"place-search-bound",strokeColor:"#72ccff",strokeOpacity:.8,strokeWeight:1,fillColor:"#d0e7f8",fillOpacity:.2,bubble:!0},_this.searchCircle=null,_this.searchBound=null,_this.util=PlaceSearchRenderUtil,_this.listener=new PlaceSearchRenderListener(_assertThisInitialized(_this)),_this.view=PlaceSearchRenderView,_this.ifShowCover=showCover,_this}return _createClass(PlaceSearchRender,[{key:"autoRender",value:function(options){this.clear(),options&&options.methodName&&options.methodArgumments&&(options.panel||options.map)&&(this.options=options,this.callback("complete",options.data))}},{key:"addIdxField",value:function(pois){for(var stack=[].concat(pois),idx=0;;){var poi=stack.shift();if(!poi)break;if(poi._idx=idx++,poi.index=poi._idx,poi.id=this.util.trimStr(poi.id),poi.children)for(var i=0,len=poi.children.length;i<len;i++)poi.children[i]._isChildPoi=!0,poi.children[i]._parentIdx=poi._idx,poi.children[i].citycode=poi.citycode,stack.push(poi.children[i])}}},{key:"callback",value:function(status,result){var _this2=this,options=(this.clear(),this.options);if((options.callback&&options.callback(status,result),"complete"===status)&&((this.result=result).poiList&&this.addIdxField(result.poiList.pois),options.map&&(this.infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:[0,-25]}),this._overlays=[],this._highlightOverlay=null,(result.cityList||result.keywordList||result.poiList)&&this.drawOverlays(result),"searchNearBy"===options.methodName&&this.ifShowCover&&(status=this.options.methodArgumments,this.drawCircle(status[1],status[2])),"searchInBounds"===options.methodName&&this.ifShowCover&&(status=this.options.methodArgumments,this.drawBound(status[1]))),options.panel&&("[object String]"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),options.panel.innerHTML=this.view.createPanel(result),this.enableListeners(),options.placeSearchInstance)))for(var details=this.util.getElementsByClassName("poi-more","a",options.panel),i=0;i<details.length;i+=1)!function(i){var a=details[i];a.dIndex=i,a.clickHandler=a.addEventListener("click",function(e){_this2.onDetailClick.call(_this2,a)})}(i)}},{key:"enableListeners",value:function(){for(var unfocusTitle,_this3=this,listener=this.listener,unfocusTitles=this.util.getElementsByClassName("poibox","*",this.options.panel),i=0;i<unfocusTitles.length;i++)!function(i,_unfocusTitle){(_unfocusTitle=unfocusTitles[i]).addEventListener("click",function(e){var index=_unfocusTitle.getAttribute("data-idx"),placeSearchInstance=_this3.options.placeSearchInstance,marker=_this3._overlays[index];marker&&(index={element:_unfocusTitle,dataIndex:index,marker:marker,placeSearchInstance:placeSearchInstance},listener.unfocusTitleClick.call(listener,e,index))}),unfocusTitle=_unfocusTitle}(i,unfocusTitle);for(var pageLink,pageLinks=this.util.getElementsByClassName("pageLink","*",this.options.panel),_i=0;_i<pageLinks.length;_i++)!function(_pageLink,_i){(_pageLink=pageLinks[_i]).addEventListener("click",function(){var pageNo=_pageLink.getAttribute("pageNo");_this3.toPage(pageNo)}),pageLink=_pageLink}(pageLink,_i)}},{key:"onDetailClick",value:function(detail){this.options.placeSearchInstance.detailOnAMAP(detail._data||this.options.data.poiList.pois[detail.dIndex])}},{key:"clear",value:function(){this.clearPanel(),this.clearOverlays(),this.clearCircle(),this.clearBound()}},{key:"drawOverlays",value:function(result){this.clearOverlays();result=result.poiList.pois;this._overlays=this.addOverlays(result),this.options.autoFitView&&this.options.map.setFitView(this._overlays,!0)}},{key:"addChildrenOverlays",value:function(children,overlays){for(var _this4=this,i=0,len=children.length;i<len;i++)!function(i){var i=children[i],extraClass="";switch(i.subtype){case"门":extraClass="gate";break;case"停车场":extraClass="parking"}var point=new AMap.Marker({map:_this4.options.map,zIndex:100,offset:new AMap.Pixel(-6,-6),size:new AMap.Size(12,12),topWhenClick:!0,position:i.location,content:\'<div class="amap_lib_placeSearch_child_poi \'+extraClass+\'">\'+i._idx+"</div>"});point.isOfficial=!0,point._data=i,point.on("click",function(e){e={data:point._data,position:point.getPosition(),marker:point,placeSearchInstance:_this4.options.placeSearchInstance,panel:_this4.options.panel,e:e};_this4.listener.markerClick(e)}),overlays[i._idx]=point}(i)}},{key:"addOverlays",value:function(points){for(var point,_this5=this,map=this.options.map,_overlays=[],children=[],i=0;i<points.length;i++)!function(i,_point){(_point=new AMap.Marker({map:map,zIndex:101,offset:new AMap.Pixel(-9,-31),size:new AMap.Size(19,33),topWhenClick:!0,position:points[i].location,content:\'<div class="amap_lib_placeSearch_poi"></div>\'})).isOfficial=!0,_point._data=points[i],_point.on("click",function(e){e={data:_point._data,position:_point.getPosition(),marker:_point,placeSearchInstance:_this5.options.placeSearchInstance,panel:_this5.options.panel,e:e};_this5.listener.markerClick(e)}),_overlays[points[i]._idx]=_point,points[i].children&&children.push.apply(children,points[i].children),point=_point}(i,point);return this.addChildrenOverlays(children,_overlays),_overlays}},{key:"toggleChildrenOverlays",value:function(idx,show){if(!isNaN(idx)){var point=this._overlays[idx];if(point){var poi=point._data,map=this.options.map;if(poi.children){for(var overlays=[point],i=0,len=poi.children.length;i<len;i++){var childOverlay=this._overlays[poi.children[i]._idx];childOverlay&&(childOverlay.setMap(show?map:null),overlays.push(childOverlay))}this.options.autoFitView&&this.options.map.setFitView(overlays,!0)}}else console.warn("Missing marker: ",idx)}}},{key:"clearPanel",value:function(){if(this.options&&this.options.panel instanceof HTMLDivElement){for(var details=this.util.getElementsByClassName("poi-more","a",this.options.panel),i=0;i<details.length;i+=1){var a=details[i];a.clickHandler,a.clickHandler=null}this.options.panel.innerHTML=""}}},{key:"clearOverlays",value:function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}var oldContent;this.infoWindow&&((oldContent=this.infoWindow.getContent())&&(oldContent=this.util.getElementsByClassName("poi-more","a",oldContent)[0])&&(oldContent._data=null,oldContent.clickHandler&&(oldContent.clickHandler=null)),this.infoWindow.close())}},{key:"setCenter",value:function(index){var poi,point=this._overlays[index];point?(poi=point._data,this.options.map.setCenter(poi.location),point.setTop(!0),poi={data:point._data,position:point.getPosition(),marker:point,placeSearchInstance:this.options.placeSearchInstance,panel:this.options.panel,noMarkerClickEvent:!0},this.listener.markerClick(poi)):console.warn("Missing marker: ",index)}},{key:"toPage",value:function(pageNo){pageNo.length&&(pageNo=parseInt(pageNo,10)),this.options.placeSearchInstance.setPageIndex(pageNo),this.options.placeSearchInstance[this.options.methodName].apply(this.options.placeSearchInstance,this.options.methodArgumments)}},{key:"drawCircle",value:function(center,radius){this.clearCircle(),this.circleOptions.map=this.options.map,this.circleOptions.center=center,this.circleOptions.radius=radius,this.searchCircle=new AMap.Circle(this.circleOptions),this.options.map.add(this.searchCircle),this.searchCircle.isOfficial=!0}},{key:"clearCircle",value:function(){this.searchCircle&&(this.searchCircle.setMap(null),this.searchCircle=null)}},{key:"drawBound",value:function(bound){this.clearBound();var path=[],bound=(bound.getNorthWest?path.push(bound.getNorthWest(),bound.getNorthEast(),bound.getSouthEast(),bound.getSouthWest()):path=bound.getPath(),this.boundOptions.path=path,this.boundOptions.map=this.options.map,new AMap.Polygon(this.boundOptions));bound.isOfficial=!0,this.searchBound=bound}},{key:"clearBound",value:function(){this.searchBound&&(this.searchBound.setMap(null),this.searchBound=null)}}]),PlaceSearchRender}(),PlaceSearch=function(){_inherits(PlaceSearch,AMap.Event);var _super=_createSuper(PlaceSearch);function PlaceSearch(opt){_classCallCheck(this,PlaceSearch),(_this=_super.call(this)).CLASS_NAME="AMap.PlaceSearch",_this.opt={},_this.closed=!1,_this.opt=AMap.extend({},{showCover:!0,autoFitView:!0},opt||{});var _this,opt=_this.config=AMap.getConfig();return _this.opt.pageIndex=_this.opt.pageIndex||1,_this.opt.pageSize="number"!=typeof _this.opt.pageSize||_this.opt.pageSize<0?10:50<_this.opt.pageSize?50:_this.opt.pageSize,_this.url=opt.server+"/v3/place",_this.renderEngine=PlaceSearchRender,(_this.opt.map||_this.opt.panel)&&(_this.render=new _this.renderEngine(_this.opt.showCover),_this.opt.extensions="all"),_this.opt.children&&(_this.opt.extensions="all"),_this}return _createClass(PlaceSearch,[{key:"clear",value:function(){this.render&&this.render.clear()}},{key:"setLang",value:function(lang){this.opt.lang=lang||"zh_cn"}},{key:"getLang",value:function(){return this.opt.lang||"zh_cn"}},{key:"search",value:function(keyword,cbk){var opts=this.opt,opts={city:opts.city,sortrule:opts.rankBy,types:opts.type,page:opts.pageIndex,offset:opts.pageSize,extensions:opts.extensions,citylimit:opts.citylimit,language:this.getLang(),s:"rsv3",children:this.opt.children?"1":""};this._filterData(opts),this._query(this.url+"/text",opts,cbk,{keywords:keyword||""},"KEYWORD",arguments)}},{key:"searchInBounds",value:function(keyword,bounds,cbk){var opts;bounds?(opts={city:(opts=this.opt).city,sortrule:opts.rankBy,types:opts.type,page:opts.pageIndex,offset:opts.pageSize,extensions:opts.extensions,citylimit:opts.citylimit,language:this.getLang(),polygon:bounds,s:"rsv3",children:this.opt.children?"1":""},this._filterData(opts),this._query(this.url+"/polygon",opts,cbk,{keywords:keyword||""},"POLYGON",arguments)):(this.emit("error",{info:"NO_PARAMS"}),cbk&&"function"==typeof cbk&&cbk("error","NO_PARAMS"))}},{key:"searchNearBy",value:function(keyword,center,radius,cbk){var opts;center?(center=AMap.Util.parseLngLatData(center),opts={city:(opts=this.opt).city,sortrule:opts.rankBy,types:opts.type,page:opts.pageIndex,offset:opts.pageSize,extensions:opts.extensions,citylimit:opts.citylimit,language:this.getLang(),location:center.toString(),radius:radius,s:"rsv3",children:this.opt.children?"1":""},this._filterData(opts),this._query(this.url+"/around",opts,cbk,{keywords:keyword||""},"NEARBY",arguments)):(this.emit("error",{info:"NO_PARAMS"}),cbk&&"function"==typeof cbk&&cbk("error","NO_PARAMS"))}},{key:"getDetails",value:function(PGUID,cbk){PGUID?(this.opt,this._query(this.url+"/detail",{id:PGUID,s:"rsv3"},cbk,{},"ID")):(this.emit("error",{info:"NO_PARAMS"}),cbk&&"function"==typeof cbk&&cbk("error","NO_PARAMS"))}},{key:"setType",value:function(type){this.opt.type=type}},{key:"setPageIndex",value:function(pageIndex){this.opt.pageIndex=pageIndex||1}},{key:"setPageSize",value:function(pageSize){this.opt.pageSize="number"!=typeof pageSize||pageSize<0?10:50<pageSize?50:pageSize}},{key:"setCity",value:function(city){this.opt.city=city}},{key:"setCityLimit",value:function(citylimit){this.opt.citylimit=citylimit}},{key:"poiOnAMAP",value:function(p){var pp={},location=AMap.Util.parseLngLatData(p.location);pp.id=p.id,location&&!Array.isArray(location)&&(pp.y=location.lat,pp.x=location.lng),pp.name=p.name,pp.address=p.address,AMap.plugin("AMap.CallAMap",function(){var callapp=new AMap.CallAMap,url=callapp.getPoiUrl(pp);callapp.open(url)})}},{key:"detailOnAMAP",value:function(p){var pp={},location=AMap.Util.parseLngLatData(p.location);pp.id=p.id,location&&!Array.isArray(location)&&(pp.y=location.lat,pp.x=location.lng),pp.name=p.name,AMap.plugin("AMap.CallAMap",function(){var callapp=new AMap.CallAMap,url=callapp.getPoiDetailUrl(pp);callapp.open(url)})}},{key:"close",value:function(){this.closed=!0}},{key:"open",value:function(){this.closed=!1}},{key:"_mergeParams",value:function(data,map,params){for(var i in data)void 0!==data[i]&&void 0!==map[i]&&params.push(map[i]+"="+data[i]);params.push("language="+this.getLang())}},{key:"_query",value:function(url,params,cbk,encodeURICom,type){var _this2=this,args=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},params=AMap.extend(params,{type_:type,antiCrab:!0},encodeURICom);AMap.WebService.get(url,params,function(status,data){return"complete"===status?_this2._onComplete(data,cbk,type,args):"error"===status&&_this2._onError(data,cbk),{}})}},{key:"_parseString",value:function(v){return v instanceof Array&&0===v.length||void 0===v?"":v}},{key:"_formatFields",value:function(obj){for(var j in obj)obj.hasOwnProperty(j)&&(obj[j]=this._parseString(obj[j]),"object"===_typeof(obj[j])&&this._formatFields(obj[j]))}},{key:"_str2LngLat",value:function(str){var arr;return str&&(2===(arr=str.split(",")).length?new AMap.LngLat(parseFloat(arr[0]),parseFloat(arr[1])):str)}},{key:"_parsePOI",value:function(poi){function getLngLat(location){return location?(location=location.split(","),new AMap.LngLat(parseFloat(location[0]),parseFloat(location[1]))):null}this._formatFields(poi);var poiBaseInfo={id:poi.id,name:poi.name,type:poi.type,location:getLngLat(poi.location),address:poi.address,tel:poi.tel,distance:parseFloat(poi.distance),shopinfo:poi.shopinfo};if(poi.shopinfo&&poi.shopinfo.length?poiBaseInfo.shopinfo=poi.shopinfo:poiBaseInfo.shopinfo="",poi.children){for(var children=poi.children,i=0,len=children.length;i<len;i++)children[i].location=getLngLat(children[i].location);poiBaseInfo.children=children}var poiDetailInfo={website:poi.website,pcode:poi.pcode,citycode:poi.citycode,adcode:poi.adcode,postcode:poi.postcode,pname:poi.pname,cityname:poi.cityname,adname:poi.adname,email:poi.email,photos:poi.photos,entr_location:getLngLat(poi.entr_location),exit_location:getLngLat(poi.exit_location),groupbuy:"0"!==poi.groupbuy_num,discount:"0"!==poi.discount_num},poiDeepInfo=("1"===poi.indoor_map?(poiDetailInfo.indoor_map=!0,poiDetailInfo.indoor_data={cpid:this._parseString(poi.indoor_data.cpid),floor:this._parseString(poi.indoor_data.floor),truefloor:this._parseString(poi.indoor_data.truefloor)}):poiDetailInfo.indoor_map=!1,{groupbuys:"",discounts:"",deep_type:"",dining:"",hotel:"",cinema:"",scenic:""});if(poi.rich_content){if(poiDetailInfo.groupbuy){var groupBuyTemp=poi.rich_content.groupbuys,groupBuyNum=groupBuyTemp.length;0<groupBuyNum&&(poiDeepInfo.groupbuys=[]);for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n].title,type_code:groupBuyTemp[n].typecode,type:groupBuyTemp[n].type,detail:groupBuyTemp[n].detail,stime:groupBuyTemp[n].start_time,etime:groupBuyTemp[n].end_time,count:groupBuyTemp[n].num,sold_num:parseInt(groupBuyTemp[n].sold_num,10),original_price:parseFloat(groupBuyTemp[n].original_price),groupbuy_price:parseFloat(groupBuyTemp[n].groupbuy_price),discount:parseFloat(groupBuyTemp[n].discount),ticket_address:groupBuyTemp[n].ticket_address,ticket_tel:groupBuyTemp[n].ticket_tel,photos:groupBuyTemp[n].photos,url:groupBuyTemp[n].url,provider:""};poiDeepInfo.groupbuys.push(groupBuy)}}if(poiDetailInfo.discount){var discountTemp=poi.rich_content.discounts,disNum=discountTemp.length;0<disNum&&(poiDeepInfo.discounts=[]);for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis].title,detail:discountTemp[dis].detail,start_time:discountTemp[dis].start_time,end_time:discountTemp[dis].end_time,sold_num:parseInt(discountTemp[dis].sold_num,10),photos:discountTemp[dis].photos,url:discountTemp[dis].url,provider:""};poiDeepInfo.discounts.push(discount)}}}if(poi.deep_info){poiDeepInfo.deep_type=poi.deep_info.type;var poiDeep=poi.deep_info;switch(poiDeepInfo.deep_type){case"cinema":var cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:"",parking:poiDeep.parking,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.cinema=cinema,poiDeepInfo.deep_type="CINEMA";break;case"dining":cinema={cuisines:poiDeep.cuisines,tag:poiDeep.tag,intro:poiDeep.intro,rating:poiDeep.rating,cp_rating:poiDeep.cp_rating,deep_src:"",taste_rating:poiDeep.taste_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,cost:poiDeep.cost,recommend:poiDeep.recommend,atmosphere:poiDeep.atmosphere,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,ordering_app_url:poiDeep.ordering_app_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,addition:poiDeep.addition,photos:poiDeep.photos};poiDeepInfo.dining=cinema,poiDeepInfo.deep_type="DINING";break;case"scenic":cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:"",level:poiDeep.level,price:poiDeep.price,season:poiDeep.season,recommend:poiDeep.recommend,theme:poiDeep.theme,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.scenic=cinema,poiDeepInfo.deep_type="SCENIC";break;case"hotel":cinema={rating:poiDeep.rating,star:poiDeep.star,intro:poiDeep.intro,lowest_price:poiDeep.lowest_price,faci_rating:poiDeep.faci_rating,health_rating:poiDeep.health_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,traffic:poiDeep.traffic,addition:poiDeep.addition,deep_src:"",photos:poiDeep.photos};poiDeepInfo.hotel=cinema,poiDeepInfo.deep_type="HOTEL"}}var baseK,rePoi={};for(baseK in poiBaseInfo)poiBaseInfo.hasOwnProperty(baseK)&&(rePoi[baseK]=poiBaseInfo[baseK]);if(this.opt.extensions&&"base"!==this.opt.extensions){for(var deepK in poiDeepInfo)poiDeepInfo.hasOwnProperty(deepK)&&poiDeepInfo[deepK]&&(rePoi[deepK]=poiDeepInfo[deepK]);for(var detailK in poiDetailInfo)poiDetailInfo.hasOwnProperty(detailK)&&(rePoi[detailK]=poiDetailInfo[detailK]);if(poi.biz_ext)for(var key in poi.biz_ext)poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&void 0===rePoi[key]&&(rePoi[key]=poi.biz_ext[key])}return rePoi}},{key:"_onComplete",value:function(data,cbk,type,args){var result;if(!this.closed)if(parseInt(data.status,10)){if((result={info:data.info,poiList:{}}).poiList={pois:[],count:parseInt(data.count,10),pageIndex:this.opt.pageIndex,pageSize:this.opt.pageSize},data.pois)for(var i=0;i<data.pois.length;i+=1){var tmp=data.pois[i];result.poiList.pois[i]=this._parsePOI(tmp)}if(data.suggestion&&data.suggestion.keywords.length&&(result.keywordList=data.suggestion.keywords,result.info="TIP_KEYWORDS"),data.suggestion&&data.suggestion.cities.length){for(var cities=data.suggestion.cities,citiesnew=[],j=0;j<cities.length;j+=1){var pro,city=cities[j];for(pro in city)city.hasOwnProperty(pro)&&"num"===pro&&(city.count=city[pro],delete city[pro]);city.count=parseInt(city.count,10),citiesnew.push(city)}result.info="TIP_CITIES",result.cityList=citiesnew}data.count&&0!==parseInt(data.count,10)||result.cityList||result.keywordList?(this.emit("complete",result),(this.opt.map||this.opt.panel)&&this._autoRender(result,type,args),cbk&&"function"==typeof cbk&&cbk("complete",result)):(result.info="ok"===data.info.toLowerCase()?"NO_DATA":data.info,this.emit("complete",result),(this.opt.map||this.opt.panel)&&this._autoRender(result,type,args),cbk&&"function"==typeof cbk&&(result.cityList||result.keywordList?cbk("complete",result):cbk("no_data",{})))}else result={info:data.info},this.emit("error",result),cbk&&"function"==typeof cbk&&cbk("error",data.info)}},{key:"_autoRender",value:function(result,type,args){this.render||(this.render=new this.renderEngine(this.opt.showCover));this.render.autoRender({data:result,eventTrigger:function(type,params){this.emit(type,params)},methodName:{KEYWORD:"search",NEARBY:"searchNearBy",POLYGON:"searchInBounds",ROUTE:"searchNearRoute"}[type],placeSearchInstance:this,methodArgumments:args,renderStyle:this.opt.renderStyle||"newpc",panel:this.opt.panel,map:this.opt.map,autoFitView:this.opt.autoFitView}),this._searchCircle=this.render.searchCircle}},{key:"_onError",value:function(e,cbk){this.emit("error",e),cbk&&"function"==typeof cbk&&cbk("error",e.info)}},{key:"_filterData",value:function(data){for(var key in data)data.hasOwnProperty(key)&&void 0===data[key]&&delete data[key]}}]),PlaceSearch}();AMap.PlaceSearch=PlaceSearch}(window.AMap); ');
_cssload_('AMap.AutoComplete', '.amap-sug-result{position:absolute;z-index:1024;background-color:#fefefe;border:1px solid #d1d1d1;bottom:auto}.auto-item:hover{background-color:#cae1ff}.auto-item{white-space:nowrap;font-size:12px;cursor:pointer;padding:4px}.auto-item-span{color:#c1c1c1;padding-left:4px}');
_jsload_('AMap.AutoComplete', '!function(AMap){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,function(arg){arg=function(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0===prim)return("string"===hint?String:Number)(input);prim=prim.call(input,hint||"default");if("object"!=typeof prim)return prim;throw new TypeError("@@toPrimitive must return a primitive value.")}(arg,"string");return"symbol"==typeof arg?arg:String(arg)}(descriptor.key),descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return self}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&("object"==typeof NewTarget||"function"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(Super)}}var defaultAutoCompleteOpts={type:"",city:"",datatype:"all",citylimit:!1,outPutDirAuto:!0,closeResultOnScroll:!0,noshowDistrict:!0,lang:"zh_cn"},AutoComplete=function(_AMap$Event){var subClass=AutoComplete;if("function"!=typeof _AMap$Event&&null!==_AMap$Event)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(_AMap$Event&&_AMap$Event.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),_AMap$Event&&_setPrototypeOf(subClass,_AMap$Event);var staticProps,_super=_createSuper(AutoComplete);function AutoComplete(opt){var _this;if(!(this instanceof AutoComplete))throw new TypeError("Cannot call a class as a function");(_this=_super.call(this)).CLASS_NAME="AMap.Autocomplete",_this.opt={},_this.shakeReduction=!0,_this.config=AMap.getConfig(),_this.url=_this.config.server+"/v3/assistant/inputtips",Object.assign(_this.opt,defaultAutoCompleteOpts,opt);var opt=_this.opt.output,inputOpt=_this.opt.input;if(_this.shakeReduction=!!_this.opt.shakeReduction,opt&&("string"==typeof opt?_this.output=document.getElementById(opt):AMap.Util.isDOM(opt)&&(_this.output=opt)),inputOpt){"string"==typeof inputOpt?_this.input=document.getElementById(inputOpt):AMap.Util.isDOM(inputOpt)&&(_this.input=inputOpt),_this.input&&_this.initInput(),_this.output||(_this.output=AMap.DomUtil.create("div",document.body,"amap-sug-result"),_this.output.style.visibility="hidden",_this.officialOutput=!0);var closeResult=function(){_this.output&&(_this.output.style.visibility="hidden")},maps=document.getElementsByClassName("amap-maps");if(maps&&maps.length)for(var i=0;i<maps.length;i+=1)maps[i].addEventListener("click",closeResult);document.addEventListener("click",closeResult),document.addEventListener("mousewheel",closeResult),window.addEventListener("resize",_this.positionOutput.bind(_assertThisInitialized(_this))),_this.opt.closeResultOnScroll?window.addEventListener("scroll",_this.closeResult.bind(_assertThisInitialized(_this))):window.addEventListener("scroll",_this.positionOutput.bind(_assertThisInitialized(_this)))}return _this}return subClass=AutoComplete,(_AMap$Event=[{key:"closeResult",value:function(){this.output&&(this.output.style.visibility="hidden")}},{key:"initInput",value:function(){var timer,input=this.input,that=this;input&&("oninput"in input&&(timer=null,input.addEventListener("input",function(){timer&&clearTimeout(timer),timer=setTimeout(function(){that.onInPut(that),timer=null},600)})),input.addEventListener("keyup",function(){var timer=null;timer&&clearTimeout(timer),timer=setTimeout(function(){that.onkeyUp(that),timer=null},600)}),input.addEventListener("keydown",function(e){e.stopPropagation()}))}},{key:"onInPut",value:function(event){this.output&&this.autoSearch()}},{key:"onkeyUp",value:function(event){var cur,next,tipArr,event=(event||window.event).keyCode,output=this.output;output&&this.input&&(cur=output.curSelect,tipArr=output.tipArr,40===event?tipArr&&tipArr.length&&(output.childNodes[cur]&&(output.childNodes[cur].style.background=""),next=(cur+1)%tipArr.length,output.curSelect=next,output.childNodes[next].style.background="#CAE1FF",this.input&&(this.input.value=tipArr[next].name),this.emit("choose",{poi:output.tipArr[next]})):38===event?tipArr&&tipArr.length&&(output.childNodes[cur]&&(output.childNodes[cur].style.background=""),next=(cur-1+tipArr.length)%tipArr.length,output.curSelect=next,output.childNodes[next].style.background="#CAE1FF",this.input&&(this.input.value=tipArr[next].name),this.emit("choose",{poi:output.tipArr[next]})):13===event?output&&-1!==output.curSelect&&this.selectResult(cur):"oninput"in this.input||this.autoSearch())}},{key:"selectResult",value:function(index){var text,input=this.input,output=this.output;output&&output.tipArr&&input&&(text=output.tipArr[index].name,this.emit("select",{poi:output.tipArr[index]}),input.value=text,output.tipArr="",output.style.display="none")}},{key:"autoSearch",value:function(){var input=this.input;input&&(0<(input=input.value).length?this.lastKeywords!==input&&this.search(input):this.output&&(this.lastKeywords="",this.output.style.display="none"))}},{key:"setIfNoDistrict",value:function(value){}},{key:"autocomplete_CallBack",value:function(tipArr){var _this2=this,output=this.output;if(output){output.innerHTML="";var fragment=document.createDocumentFragment();if(tipArr&&0<tipArr.length&&this.input){for(var onclick=function(e){_this2.selectResult(e.target.rIndex)},i=0;i<tipArr.length;i++){var item=AMap.DomUtil.create("div",fragment,"auto-item");item.id="amap-sug"+i,item.rIndex=i,AMap.DomUtil.fillText(item,tipArr[i].name),item.addEventListener("click",onclick),this.opt.noshowDistrict||!tipArr[i].district&&!tipArr[i].city||(item=AMap.DomUtil.create("span",item,"auto-item-span"),AMap.DomUtil.fillText(item,tipArr[i].district||tipArr[i].city),item.rIndex=i)}output.curSelect=-1,output.tipArr=tipArr,output.appendChild(fragment),output.style.display="block",output.style.visibility="visible"}else output.style.visibility="hidden";this.officialOutput&&this.positionOutput()}}},{key:"setType",value:function(type){this.opt.type=type}},{key:"setLang",value:function(lang){this.opt.lang=lang||"zh_cn"}},{key:"getLang",value:function(){return this.opt.lang}},{key:"setCity",value:function(city){this.opt.city=city}},{key:"setCityLimit",value:function(citylimit){this.opt.citylimit=citylimit}},{key:"search",value:function(keyword,cbk){var opts,_this3=this;keyword?(this.lastKeywords=keyword,opts={city:(opts=this.opt).city,type:opts.type,citylimit:opts.citylimit,datatype:opts.datatype,language:this.getLang(),s:"rsv3",key:this.config.key},this._filterData(opts),opts=Object.assign(opts,{keywords:keyword}),keyword=this.url,AMap.WebService.get(keyword,opts,function(status,data){return"complete"===status?_this3._onComplete(data,cbk):"error"===status&&_this3._onError(data,cbk),{}})):cbk&&"function"==typeof cbk&&cbk("error","NO_PARAMS")}},{key:"positionOutput",value:function(){var outputPosHeight,outputPos,scrollT,scrollL,input=this.input,output=this.output;if(input&&output)return input=input.getBoundingClientRect(),void 0===(outputPosHeight=(outputPos=output.getBoundingClientRect()).height)&&(outputPosHeight=outputPos.bottom-outputPos.top),void 0===(outputPos=input.width)&&(outputPos=input.right-input.left),scrollT=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,scrollL=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,this.output&&(this.output.style.left=input.left+scrollL-1+"px"),scrollL=document.documentElement.clientHeight,this.opt.outPutDirAuto&&input.bottom+outputPosHeight+10>scrollL&&input.bottom>outputPosHeight&&this.output?output.style.top=input.top+scrollT-outputPosHeight-2+"px":output.style.top=input.bottom+scrollT+2+"px",output.style.minWidth=outputPos+2+"px",this}},{key:"parseEmpityArray",value:function(value){return value instanceof Array&&!value.length?"":value}},{key:"_onError",value:function(e,cbk){this.emit("error",e),cbk&&"function"==typeof cbk&&cbk("error",e.info)}},{key:"_parseInt",value:function(v){v=parseInt(v,10);return isNaN(v)?0:v}},{key:"_onComplete",value:function(data,cbk){var result;if(parseInt(data.status,10)){var tips=data.tips;if(tips&&0!==tips.length){for(var i=0;i<tips.length;i+=1){var tip=tips[i];tip.location&&tip.location.length&&(tip.location=AMap.Util.parseLngLatData(tip.location.split(","))),tip.location=this.parseEmpityArray(tip.location),tip.adcode=this.parseEmpityArray(tip.adcode),tip.district=this.parseEmpityArray(tip.district),tip.id=this.parseEmpityArray(tip.id)}result={info:data.info,count:this._parseInt(data.count),tips:data.tips},this.emit("complete",result),cbk&&"function"==typeof cbk&&cbk("complete",result),this.input&&this.autocomplete_CallBack(data.tips)}else this.output&&(this.output.innerHTML="",this.output.style.visibility="hidden"),result={info:"ok"===data.info.toLowerCase()?"NO_DATA":data.info},this.emit("complete",result),cbk&&"function"==typeof cbk&&cbk("no_data",{})}else result={info:data.info},this.emit("error",result),cbk&&"function"==typeof cbk&&cbk("error",data.info)}},{key:"_filterData",value:function(data){for(var key in data)data.hasOwnProperty(key)&&void 0===data[key]&&delete data[key]}}])&&_defineProperties(subClass.prototype,_AMap$Event),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,"prototype",{writable:!1}),AutoComplete}(AMap.Event);AMap.AutoComplete=AutoComplete,AMap.Autocomplete=AutoComplete}(window.AMap); ')
